var Vg=e=>{throw TypeError(e)};var Od=(e,t,n)=>t.has(e)||Vg("Cannot "+n);var G=(e,t,n)=>(Od(e,t,"read from private field"),n?n.call(e):t.get(e)),Fe=(e,t,n)=>t.has(e)?Vg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ne=(e,t,n,r)=>(Od(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),zt=(e,t,n)=>(Od(e,t,"access private method"),n);var zl=(e,t,n,r)=>({set _(s){Ne(e,t,s,n)},get _(){return G(e,t,r)}});function kk(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ck(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var yw={exports:{}},Tu={},ww={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jl=Symbol.for("react.element"),Ek=Symbol.for("react.portal"),Pk=Symbol.for("react.fragment"),Tk=Symbol.for("react.strict_mode"),Rk=Symbol.for("react.profiler"),Ak=Symbol.for("react.provider"),Ik=Symbol.for("react.context"),Ok=Symbol.for("react.forward_ref"),Lk=Symbol.for("react.suspense"),Mk=Symbol.for("react.memo"),Dk=Symbol.for("react.lazy"),qg=Symbol.iterator;function Fk(e){return e===null||typeof e!="object"?null:(e=qg&&e[qg]||e["@@iterator"],typeof e=="function"?e:null)}var bw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jw=Object.assign,_w={};function Va(e,t,n){this.props=e,this.context=t,this.refs=_w,this.updater=n||bw}Va.prototype.isReactComponent={};Va.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Va.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Sw(){}Sw.prototype=Va.prototype;function $m(e,t,n){this.props=e,this.context=t,this.refs=_w,this.updater=n||bw}var zm=$m.prototype=new Sw;zm.constructor=$m;jw(zm,Va.prototype);zm.isPureReactComponent=!0;var Wg=Array.isArray,Nw=Object.prototype.hasOwnProperty,Um={current:null},kw={key:!0,ref:!0,__self:!0,__source:!0};function Cw(e,t,n){var r,s={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)Nw.call(t,r)&&!kw.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:jl,type:e,key:a,ref:o,props:s,_owner:Um.current}}function $k(e,t){return{$$typeof:jl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bm(e){return typeof e=="object"&&e!==null&&e.$$typeof===jl}function zk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Hg=/\/+/g;function Ld(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zk(""+e.key):t.toString(36)}function bc(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case jl:case Ek:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Ld(o,0):r,Wg(s)?(n="",e!=null&&(n=e.replace(Hg,"$&/")+"/"),bc(s,t,n,"",function(u){return u})):s!=null&&(Bm(s)&&(s=$k(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Hg,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Wg(e))for(var l=0;l<e.length;l++){a=e[l];var c=r+Ld(a,l);o+=bc(a,t,n,c,s)}else if(c=Fk(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=r+Ld(a,l++),o+=bc(a,t,n,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ul(e,t,n){if(e==null)return e;var r=[],s=0;return bc(e,r,"","",function(a){return t.call(n,a,s++)}),r}function Uk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var an={current:null},jc={transition:null},Bk={ReactCurrentDispatcher:an,ReactCurrentBatchConfig:jc,ReactCurrentOwner:Um};function Ew(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Ul,forEach:function(e,t,n){Ul(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ul(e,function(){t++}),t},toArray:function(e){return Ul(e,function(t){return t})||[]},only:function(e){if(!Bm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ie.Component=Va;Ie.Fragment=Pk;Ie.Profiler=Rk;Ie.PureComponent=$m;Ie.StrictMode=Tk;Ie.Suspense=Lk;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bk;Ie.act=Ew;Ie.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=jw({},e.props),s=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Um.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Nw.call(t,c)&&!kw.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:jl,type:e.type,key:s,ref:a,props:r,_owner:o}};Ie.createContext=function(e){return e={$$typeof:Ik,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ak,_context:e},e.Consumer=e};Ie.createElement=Cw;Ie.createFactory=function(e){var t=Cw.bind(null,e);return t.type=e,t};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(e){return{$$typeof:Ok,render:e}};Ie.isValidElement=Bm;Ie.lazy=function(e){return{$$typeof:Dk,_payload:{_status:-1,_result:e},_init:Uk}};Ie.memo=function(e,t){return{$$typeof:Mk,type:e,compare:t===void 0?null:t}};Ie.startTransition=function(e){var t=jc.transition;jc.transition={};try{e()}finally{jc.transition=t}};Ie.unstable_act=Ew;Ie.useCallback=function(e,t){return an.current.useCallback(e,t)};Ie.useContext=function(e){return an.current.useContext(e)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(e){return an.current.useDeferredValue(e)};Ie.useEffect=function(e,t){return an.current.useEffect(e,t)};Ie.useId=function(){return an.current.useId()};Ie.useImperativeHandle=function(e,t,n){return an.current.useImperativeHandle(e,t,n)};Ie.useInsertionEffect=function(e,t){return an.current.useInsertionEffect(e,t)};Ie.useLayoutEffect=function(e,t){return an.current.useLayoutEffect(e,t)};Ie.useMemo=function(e,t){return an.current.useMemo(e,t)};Ie.useReducer=function(e,t,n){return an.current.useReducer(e,t,n)};Ie.useRef=function(e){return an.current.useRef(e)};Ie.useState=function(e){return an.current.useState(e)};Ie.useSyncExternalStore=function(e,t,n){return an.current.useSyncExternalStore(e,t,n)};Ie.useTransition=function(){return an.current.useTransition()};Ie.version="18.3.1";ww.exports=Ie;var m=ww.exports;const ie=Pu(m),Vm=kk({__proto__:null,default:ie},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vk=m,qk=Symbol.for("react.element"),Wk=Symbol.for("react.fragment"),Hk=Object.prototype.hasOwnProperty,Gk=Vk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kk={key:!0,ref:!0,__self:!0,__source:!0};function Pw(e,t,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Hk.call(t,r)&&!Kk.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:qk,type:e,key:a,ref:o,props:s,_owner:Gk.current}}Tu.Fragment=Wk;Tu.jsx=Pw;Tu.jsxs=Pw;yw.exports=Tu;var i=yw.exports,Tw={exports:{}},In={},Rw={exports:{}},Aw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,E){var k=D.length;D.push(E);e:for(;0<k;){var F=k-1>>>1,H=D[F];if(0<s(H,E))D[F]=E,D[k]=H,k=F;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var E=D[0],k=D.pop();if(k!==E){D[0]=k;e:for(var F=0,H=D.length,P=H>>>1;F<P;){var q=2*(F+1)-1,de=D[q],le=q+1,Y=D[le];if(0>s(de,k))le<H&&0>s(Y,de)?(D[F]=Y,D[le]=k,F=le):(D[F]=de,D[q]=k,F=q);else if(le<H&&0>s(Y,k))D[F]=Y,D[le]=k,F=le;else break e}}return E}function s(D,E){var k=D.sortIndex-E.sortIndex;return k!==0?k:D.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,b=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(D){for(var E=n(u);E!==null;){if(E.callback===null)r(u);else if(E.startTime<=D)r(u),E.sortIndex=E.expirationTime,t(c,E);else break;E=n(u)}}function j(D){if(g=!1,y(D),!b)if(n(c)!==null)b=!0,$(S);else{var E=n(u);E!==null&&L(j,E.startTime-D)}}function S(D,E){b=!1,g&&(g=!1,x(C),C=-1),f=!0;var k=p;try{for(y(E),h=n(c);h!==null&&(!(h.expirationTime>E)||D&&!O());){var F=h.callback;if(typeof F=="function"){h.callback=null,p=h.priorityLevel;var H=F(h.expirationTime<=E);E=e.unstable_now(),typeof H=="function"?h.callback=H:h===n(c)&&r(c),y(E)}else r(c);h=n(c)}if(h!==null)var P=!0;else{var q=n(u);q!==null&&L(j,q.startTime-E),P=!1}return P}finally{h=null,p=k,f=!1}}var _=!1,N=null,C=-1,A=5,R=-1;function O(){return!(e.unstable_now()-R<A)}function T(){if(N!==null){var D=e.unstable_now();R=D;var E=!0;try{E=N(!0,D)}finally{E?z():(_=!1,N=null)}}else _=!1}var z;if(typeof v=="function")z=function(){v(T)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,B=I.port2;I.port1.onmessage=T,z=function(){B.postMessage(null)}}else z=function(){w(T,0)};function $(D){N=D,_||(_=!0,z())}function L(D,E){C=w(function(){D(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){b||f||(b=!0,$(S))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(D){switch(p){case 1:case 2:case 3:var E=3;break;default:E=p}var k=p;p=E;try{return D()}finally{p=k}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,E){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var k=p;p=D;try{return E()}finally{p=k}},e.unstable_scheduleCallback=function(D,E,k){var F=e.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?F+k:F):k=F,D){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=k+H,D={id:d++,callback:E,priorityLevel:D,startTime:k,expirationTime:H,sortIndex:-1},k>F?(D.sortIndex=k,t(u,D),n(c)===null&&D===n(u)&&(g?(x(C),C=-1):g=!0,L(j,k-F))):(D.sortIndex=H,t(c,D),b||f||(b=!0,$(S))),D},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(D){var E=p;return function(){var k=p;p=E;try{return D.apply(this,arguments)}finally{p=k}}}})(Aw);Rw.exports=Aw;var Qk=Rw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yk=m,Rn=Qk;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Iw=new Set,Go={};function Oi(e,t){Ta(e,t),Ta(e+"Capture",t)}function Ta(e,t){for(Go[e]=t,e=0;e<t.length;e++)Iw.add(t[e])}var Qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qh=Object.prototype.hasOwnProperty,Xk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gg={},Kg={};function Jk(e){return qh.call(Kg,e)?!0:qh.call(Gg,e)?!1:Xk.test(e)?Kg[e]=!0:(Gg[e]=!0,!1)}function Zk(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function eC(e,t,n,r){if(t===null||typeof t>"u"||Zk(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function on(e,t,n,r,s,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$t[e]=new on(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$t[t]=new on(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$t[e]=new on(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$t[e]=new on(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$t[e]=new on(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$t[e]=new on(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$t[e]=new on(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$t[e]=new on(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$t[e]=new on(e,5,!1,e.toLowerCase(),null,!1,!1)});var qm=/[\-:]([a-z])/g;function Wm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(qm,Wm);$t[t]=new on(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(qm,Wm);$t[t]=new on(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(qm,Wm);$t[t]=new on(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$t[e]=new on(e,1,!1,e.toLowerCase(),null,!1,!1)});$t.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$t[e]=new on(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hm(e,t,n,r){var s=$t.hasOwnProperty(t)?$t[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(eC(t,n,s,r)&&(n=null),r||s===null?Jk(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ss=Yk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bl=Symbol.for("react.element"),Ji=Symbol.for("react.portal"),Zi=Symbol.for("react.fragment"),Gm=Symbol.for("react.strict_mode"),Wh=Symbol.for("react.profiler"),Ow=Symbol.for("react.provider"),Lw=Symbol.for("react.context"),Km=Symbol.for("react.forward_ref"),Hh=Symbol.for("react.suspense"),Gh=Symbol.for("react.suspense_list"),Qm=Symbol.for("react.memo"),ys=Symbol.for("react.lazy"),Mw=Symbol.for("react.offscreen"),Qg=Symbol.iterator;function lo(e){return e===null||typeof e!="object"?null:(e=Qg&&e[Qg]||e["@@iterator"],typeof e=="function"?e:null)}var ft=Object.assign,Md;function jo(e){if(Md===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Md=t&&t[1]||""}return`
`+Md+e}var Dd=!1;function Fd(e,t){if(!e||Dd)return"";Dd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Dd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?jo(e):""}function tC(e){switch(e.tag){case 5:return jo(e.type);case 16:return jo("Lazy");case 13:return jo("Suspense");case 19:return jo("SuspenseList");case 0:case 2:case 15:return e=Fd(e.type,!1),e;case 11:return e=Fd(e.type.render,!1),e;case 1:return e=Fd(e.type,!0),e;default:return""}}function Kh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zi:return"Fragment";case Ji:return"Portal";case Wh:return"Profiler";case Gm:return"StrictMode";case Hh:return"Suspense";case Gh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Lw:return(e.displayName||"Context")+".Consumer";case Ow:return(e._context.displayName||"Context")+".Provider";case Km:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Qm:return t=e.displayName||null,t!==null?t:Kh(e.type)||"Memo";case ys:t=e._payload,e=e._init;try{return Kh(e(t))}catch{}}return null}function nC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kh(t);case 8:return t===Gm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rC(e){var t=Dw(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vl(e){e._valueTracker||(e._valueTracker=rC(e))}function Fw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Dw(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Bc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qh(e,t){var n=t.checked;return ft({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Yg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Bs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $w(e,t){t=t.checked,t!=null&&Hm(e,"checked",t,!1)}function Yh(e,t){$w(e,t);var n=Bs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xh(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xh(e,t.type,Bs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Xh(e,t,n){(t!=="number"||Bc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var _o=Array.isArray;function ua(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Bs(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Jh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return ft({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(J(92));if(_o(n)){if(1<n.length)throw Error(J(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Bs(n)}}function zw(e,t){var n=Bs(t.value),r=Bs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Zg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Uw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Uw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ql,Bw=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ql=ql||document.createElement("div"),ql.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ql.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ko(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ro={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sC=["Webkit","ms","Moz","O"];Object.keys(Ro).forEach(function(e){sC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ro[t]=Ro[e]})});function Vw(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ro.hasOwnProperty(e)&&Ro[e]?(""+t).trim():t+"px"}function qw(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Vw(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var iC=ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ef(e,t){if(t){if(iC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function tf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nf=null;function Ym(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var rf=null,da=null,ha=null;function ex(e){if(e=Nl(e)){if(typeof rf!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Lu(t),rf(e.stateNode,e.type,t))}}function Ww(e){da?ha?ha.push(e):ha=[e]:da=e}function Hw(){if(da){var e=da,t=ha;if(ha=da=null,ex(e),t)for(e=0;e<t.length;e++)ex(t[e])}}function Gw(e,t){return e(t)}function Kw(){}var $d=!1;function Qw(e,t,n){if($d)return e(t,n);$d=!0;try{return Gw(e,t,n)}finally{$d=!1,(da!==null||ha!==null)&&(Kw(),Hw())}}function Qo(e,t){var n=e.stateNode;if(n===null)return null;var r=Lu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var sf=!1;if(Qr)try{var co={};Object.defineProperty(co,"passive",{get:function(){sf=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{sf=!1}function aC(e,t,n,r,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Ao=!1,Vc=null,qc=!1,af=null,oC={onError:function(e){Ao=!0,Vc=e}};function lC(e,t,n,r,s,a,o,l,c){Ao=!1,Vc=null,aC.apply(oC,arguments)}function cC(e,t,n,r,s,a,o,l,c){if(lC.apply(this,arguments),Ao){if(Ao){var u=Vc;Ao=!1,Vc=null}else throw Error(J(198));qc||(qc=!0,af=u)}}function Li(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Yw(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function tx(e){if(Li(e)!==e)throw Error(J(188))}function uC(e){var t=e.alternate;if(!t){if(t=Li(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return tx(s),e;if(a===r)return tx(s),t;a=a.sibling}throw Error(J(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function Xw(e){return e=uC(e),e!==null?Jw(e):null}function Jw(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Jw(e);if(t!==null)return t;e=e.sibling}return null}var Zw=Rn.unstable_scheduleCallback,nx=Rn.unstable_cancelCallback,dC=Rn.unstable_shouldYield,hC=Rn.unstable_requestPaint,yt=Rn.unstable_now,fC=Rn.unstable_getCurrentPriorityLevel,Xm=Rn.unstable_ImmediatePriority,e0=Rn.unstable_UserBlockingPriority,Wc=Rn.unstable_NormalPriority,mC=Rn.unstable_LowPriority,t0=Rn.unstable_IdlePriority,Ru=null,Tr=null;function pC(e){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(Ru,e,void 0,(e.current.flags&128)===128)}catch{}}var lr=Math.clz32?Math.clz32:vC,gC=Math.log,xC=Math.LN2;function vC(e){return e>>>=0,e===0?32:31-(gC(e)/xC|0)|0}var Wl=64,Hl=4194304;function So(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=So(l):(a&=o,a!==0&&(r=So(a)))}else o=n&~s,o!==0?r=So(o):a!==0&&(r=So(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-lr(t),s=1<<n,r|=e[n],t&=~s;return r}function yC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wC(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-lr(a),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=yC(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function of(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function n0(){var e=Wl;return Wl<<=1,!(Wl&4194240)&&(Wl=64),e}function zd(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _l(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-lr(t),e[t]=n}function bC(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-lr(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}function Jm(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-lr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var We=0;function r0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var s0,Zm,i0,a0,o0,lf=!1,Gl=[],As=null,Is=null,Os=null,Yo=new Map,Xo=new Map,bs=[],jC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rx(e,t){switch(e){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Is=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":Yo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(t.pointerId)}}function uo(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Nl(t),t!==null&&Zm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function _C(e,t,n,r,s){switch(t){case"focusin":return As=uo(As,e,t,n,r,s),!0;case"dragenter":return Is=uo(Is,e,t,n,r,s),!0;case"mouseover":return Os=uo(Os,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Yo.set(a,uo(Yo.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Xo.set(a,uo(Xo.get(a)||null,e,t,n,r,s)),!0}return!1}function l0(e){var t=hi(e.target);if(t!==null){var n=Li(t);if(n!==null){if(t=n.tag,t===13){if(t=Yw(n),t!==null){e.blockedOn=t,o0(e.priority,function(){i0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _c(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=cf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);nf=r,n.target.dispatchEvent(r),nf=null}else return t=Nl(n),t!==null&&Zm(t),e.blockedOn=n,!1;t.shift()}return!0}function sx(e,t,n){_c(e)&&n.delete(t)}function SC(){lf=!1,As!==null&&_c(As)&&(As=null),Is!==null&&_c(Is)&&(Is=null),Os!==null&&_c(Os)&&(Os=null),Yo.forEach(sx),Xo.forEach(sx)}function ho(e,t){e.blockedOn===t&&(e.blockedOn=null,lf||(lf=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,SC)))}function Jo(e){function t(s){return ho(s,e)}if(0<Gl.length){ho(Gl[0],e);for(var n=1;n<Gl.length;n++){var r=Gl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(As!==null&&ho(As,e),Is!==null&&ho(Is,e),Os!==null&&ho(Os,e),Yo.forEach(t),Xo.forEach(t),n=0;n<bs.length;n++)r=bs[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<bs.length&&(n=bs[0],n.blockedOn===null);)l0(n),n.blockedOn===null&&bs.shift()}var fa=ss.ReactCurrentBatchConfig,Gc=!0;function NC(e,t,n,r){var s=We,a=fa.transition;fa.transition=null;try{We=1,ep(e,t,n,r)}finally{We=s,fa.transition=a}}function kC(e,t,n,r){var s=We,a=fa.transition;fa.transition=null;try{We=4,ep(e,t,n,r)}finally{We=s,fa.transition=a}}function ep(e,t,n,r){if(Gc){var s=cf(e,t,n,r);if(s===null)Yd(e,t,r,Kc,n),rx(e,r);else if(_C(s,e,t,n,r))r.stopPropagation();else if(rx(e,r),t&4&&-1<jC.indexOf(e)){for(;s!==null;){var a=Nl(s);if(a!==null&&s0(a),a=cf(e,t,n,r),a===null&&Yd(e,t,r,Kc,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Yd(e,t,r,null,n)}}var Kc=null;function cf(e,t,n,r){if(Kc=null,e=Ym(r),e=hi(e),e!==null)if(t=Li(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Yw(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kc=e,null}function c0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fC()){case Xm:return 1;case e0:return 4;case Wc:case mC:return 16;case t0:return 536870912;default:return 16}default:return 16}}var Ps=null,tp=null,Sc=null;function u0(){if(Sc)return Sc;var e,t=tp,n=t.length,r,s="value"in Ps?Ps.value:Ps.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[a-r];r++);return Sc=s.slice(e,1<r?1-r:void 0)}function Nc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Kl(){return!0}function ix(){return!1}function On(e){function t(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Kl:ix,this.isPropagationStopped=ix,this}return ft(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kl)},persist:function(){},isPersistent:Kl}),t}var qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},np=On(qa),Sl=ft({},qa,{view:0,detail:0}),CC=On(Sl),Ud,Bd,fo,Au=ft({},Sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fo&&(fo&&e.type==="mousemove"?(Ud=e.screenX-fo.screenX,Bd=e.screenY-fo.screenY):Bd=Ud=0,fo=e),Ud)},movementY:function(e){return"movementY"in e?e.movementY:Bd}}),ax=On(Au),EC=ft({},Au,{dataTransfer:0}),PC=On(EC),TC=ft({},Sl,{relatedTarget:0}),Vd=On(TC),RC=ft({},qa,{animationName:0,elapsedTime:0,pseudoElement:0}),AC=On(RC),IC=ft({},qa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),OC=On(IC),LC=ft({},qa,{data:0}),ox=On(LC),MC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $C(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=FC[e])?!!t[e]:!1}function rp(){return $C}var zC=ft({},Sl,{key:function(e){if(e.key){var t=MC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Nc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rp,charCode:function(e){return e.type==="keypress"?Nc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Nc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),UC=On(zC),BC=ft({},Au,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lx=On(BC),VC=ft({},Sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rp}),qC=On(VC),WC=ft({},qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),HC=On(WC),GC=ft({},Au,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),KC=On(GC),QC=[9,13,27,32],sp=Qr&&"CompositionEvent"in window,Io=null;Qr&&"documentMode"in document&&(Io=document.documentMode);var YC=Qr&&"TextEvent"in window&&!Io,d0=Qr&&(!sp||Io&&8<Io&&11>=Io),cx=" ",ux=!1;function h0(e,t){switch(e){case"keyup":return QC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ea=!1;function XC(e,t){switch(e){case"compositionend":return f0(t);case"keypress":return t.which!==32?null:(ux=!0,cx);case"textInput":return e=t.data,e===cx&&ux?null:e;default:return null}}function JC(e,t){if(ea)return e==="compositionend"||!sp&&h0(e,t)?(e=u0(),Sc=tp=Ps=null,ea=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return d0&&t.locale!=="ko"?null:t.data;default:return null}}var ZC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ZC[e.type]:t==="textarea"}function m0(e,t,n,r){Ww(r),t=Qc(t,"onChange"),0<t.length&&(n=new np("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Oo=null,Zo=null;function eE(e){N0(e,0)}function Iu(e){var t=ra(e);if(Fw(t))return e}function tE(e,t){if(e==="change")return t}var p0=!1;if(Qr){var qd;if(Qr){var Wd="oninput"in document;if(!Wd){var hx=document.createElement("div");hx.setAttribute("oninput","return;"),Wd=typeof hx.oninput=="function"}qd=Wd}else qd=!1;p0=qd&&(!document.documentMode||9<document.documentMode)}function fx(){Oo&&(Oo.detachEvent("onpropertychange",g0),Zo=Oo=null)}function g0(e){if(e.propertyName==="value"&&Iu(Zo)){var t=[];m0(t,Zo,e,Ym(e)),Qw(eE,t)}}function nE(e,t,n){e==="focusin"?(fx(),Oo=t,Zo=n,Oo.attachEvent("onpropertychange",g0)):e==="focusout"&&fx()}function rE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Iu(Zo)}function sE(e,t){if(e==="click")return Iu(t)}function iE(e,t){if(e==="input"||e==="change")return Iu(t)}function aE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dr=typeof Object.is=="function"?Object.is:aE;function el(e,t){if(dr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!qh.call(t,s)||!dr(e[s],t[s]))return!1}return!0}function mx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function px(e,t){var n=mx(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mx(n)}}function x0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?x0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function v0(){for(var e=window,t=Bc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bc(e.document)}return t}function ip(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function oE(e){var t=v0(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&x0(n.ownerDocument.documentElement,n)){if(r!==null&&ip(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=px(n,a);var o=px(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lE=Qr&&"documentMode"in document&&11>=document.documentMode,ta=null,uf=null,Lo=null,df=!1;function gx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;df||ta==null||ta!==Bc(r)||(r=ta,"selectionStart"in r&&ip(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Lo&&el(Lo,r)||(Lo=r,r=Qc(uf,"onSelect"),0<r.length&&(t=new np("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ta)))}function Ql(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var na={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},Hd={},y0={};Qr&&(y0=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);function Ou(e){if(Hd[e])return Hd[e];if(!na[e])return e;var t=na[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in y0)return Hd[e]=t[n];return e}var w0=Ou("animationend"),b0=Ou("animationiteration"),j0=Ou("animationstart"),_0=Ou("transitionend"),S0=new Map,xx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(e,t){S0.set(e,t),Oi(t,[e])}for(var Gd=0;Gd<xx.length;Gd++){var Kd=xx[Gd],cE=Kd.toLowerCase(),uE=Kd[0].toUpperCase()+Kd.slice(1);Qs(cE,"on"+uE)}Qs(w0,"onAnimationEnd");Qs(b0,"onAnimationIteration");Qs(j0,"onAnimationStart");Qs("dblclick","onDoubleClick");Qs("focusin","onFocus");Qs("focusout","onBlur");Qs(_0,"onTransitionEnd");Ta("onMouseEnter",["mouseout","mouseover"]);Ta("onMouseLeave",["mouseout","mouseover"]);Ta("onPointerEnter",["pointerout","pointerover"]);Ta("onPointerLeave",["pointerout","pointerover"]);Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dE=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function vx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,cC(r,t,void 0,e),e.currentTarget=null}function N0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;vx(s,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;vx(s,l,u),a=c}}}if(qc)throw e=af,qc=!1,af=null,e}function tt(e,t){var n=t[gf];n===void 0&&(n=t[gf]=new Set);var r=e+"__bubble";n.has(r)||(k0(t,e,2,!1),n.add(r))}function Qd(e,t,n){var r=0;t&&(r|=4),k0(n,e,r,t)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function tl(e){if(!e[Yl]){e[Yl]=!0,Iw.forEach(function(n){n!=="selectionchange"&&(dE.has(n)||Qd(n,!1,e),Qd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yl]||(t[Yl]=!0,Qd("selectionchange",!1,t))}}function k0(e,t,n,r){switch(c0(t)){case 1:var s=NC;break;case 4:s=kC;break;default:s=ep}n=s.bind(null,t,n,e),s=void 0,!sf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Yd(e,t,n,r,s){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=hi(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}Qw(function(){var u=a,d=Ym(n),h=[];e:{var p=S0.get(e);if(p!==void 0){var f=np,b=e;switch(e){case"keypress":if(Nc(n)===0)break e;case"keydown":case"keyup":f=UC;break;case"focusin":b="focus",f=Vd;break;case"focusout":b="blur",f=Vd;break;case"beforeblur":case"afterblur":f=Vd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=ax;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=PC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=qC;break;case w0:case b0:case j0:f=AC;break;case _0:f=HC;break;case"scroll":f=CC;break;case"wheel":f=KC;break;case"copy":case"cut":case"paste":f=OC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=lx}var g=(t&4)!==0,w=!g&&e==="scroll",x=g?p!==null?p+"Capture":null:p;g=[];for(var v=u,y;v!==null;){y=v;var j=y.stateNode;if(y.tag===5&&j!==null&&(y=j,x!==null&&(j=Qo(v,x),j!=null&&g.push(nl(v,j,y)))),w)break;v=v.return}0<g.length&&(p=new f(p,b,null,n,d),h.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",p&&n!==nf&&(b=n.relatedTarget||n.fromElement)&&(hi(b)||b[Yr]))break e;if((f||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,f?(b=n.relatedTarget||n.toElement,f=u,b=b?hi(b):null,b!==null&&(w=Li(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(f=null,b=u),f!==b)){if(g=ax,j="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=lx,j="onPointerLeave",x="onPointerEnter",v="pointer"),w=f==null?p:ra(f),y=b==null?p:ra(b),p=new g(j,v+"leave",f,n,d),p.target=w,p.relatedTarget=y,j=null,hi(d)===u&&(g=new g(x,v+"enter",b,n,d),g.target=y,g.relatedTarget=w,j=g),w=j,f&&b)t:{for(g=f,x=b,v=0,y=g;y;y=zi(y))v++;for(y=0,j=x;j;j=zi(j))y++;for(;0<v-y;)g=zi(g),v--;for(;0<y-v;)x=zi(x),y--;for(;v--;){if(g===x||x!==null&&g===x.alternate)break t;g=zi(g),x=zi(x)}g=null}else g=null;f!==null&&yx(h,p,f,g,!1),b!==null&&w!==null&&yx(h,w,b,g,!0)}}e:{if(p=u?ra(u):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var S=tE;else if(dx(p))if(p0)S=iE;else{S=rE;var _=nE}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=sE);if(S&&(S=S(e,u))){m0(h,S,n,d);break e}_&&_(e,p,u),e==="focusout"&&(_=p._wrapperState)&&_.controlled&&p.type==="number"&&Xh(p,"number",p.value)}switch(_=u?ra(u):window,e){case"focusin":(dx(_)||_.contentEditable==="true")&&(ta=_,uf=u,Lo=null);break;case"focusout":Lo=uf=ta=null;break;case"mousedown":df=!0;break;case"contextmenu":case"mouseup":case"dragend":df=!1,gx(h,n,d);break;case"selectionchange":if(lE)break;case"keydown":case"keyup":gx(h,n,d)}var N;if(sp)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ea?h0(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(d0&&n.locale!=="ko"&&(ea||C!=="onCompositionStart"?C==="onCompositionEnd"&&ea&&(N=u0()):(Ps=d,tp="value"in Ps?Ps.value:Ps.textContent,ea=!0)),_=Qc(u,C),0<_.length&&(C=new ox(C,e,null,n,d),h.push({event:C,listeners:_}),N?C.data=N:(N=f0(n),N!==null&&(C.data=N)))),(N=YC?XC(e,n):JC(e,n))&&(u=Qc(u,"onBeforeInput"),0<u.length&&(d=new ox("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=N))}N0(h,t)})}function nl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qc(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Qo(e,n),a!=null&&r.unshift(nl(e,a,s)),a=Qo(e,t),a!=null&&r.push(nl(e,a,s))),e=e.return}return r}function zi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yx(e,t,n,r,s){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Qo(n,a),c!=null&&o.unshift(nl(n,c,l))):s||(c=Qo(n,a),c!=null&&o.push(nl(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var hE=/\r\n?/g,fE=/\u0000|\uFFFD/g;function wx(e){return(typeof e=="string"?e:""+e).replace(hE,`
`).replace(fE,"")}function Xl(e,t,n){if(t=wx(t),wx(e)!==t&&n)throw Error(J(425))}function Yc(){}var hf=null,ff=null;function mf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pf=typeof setTimeout=="function"?setTimeout:void 0,mE=typeof clearTimeout=="function"?clearTimeout:void 0,bx=typeof Promise=="function"?Promise:void 0,pE=typeof queueMicrotask=="function"?queueMicrotask:typeof bx<"u"?function(e){return bx.resolve(null).then(e).catch(gE)}:pf;function gE(e){setTimeout(function(){throw e})}function Xd(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Jo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Jo(t)}function Ls(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function jx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wa=Math.random().toString(36).slice(2),Nr="__reactFiber$"+Wa,rl="__reactProps$"+Wa,Yr="__reactContainer$"+Wa,gf="__reactEvents$"+Wa,xE="__reactListeners$"+Wa,vE="__reactHandles$"+Wa;function hi(e){var t=e[Nr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Yr]||n[Nr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=jx(e);e!==null;){if(n=e[Nr])return n;e=jx(e)}return t}e=n,n=e.parentNode}return null}function Nl(e){return e=e[Nr]||e[Yr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ra(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Lu(e){return e[rl]||null}var xf=[],sa=-1;function Ys(e){return{current:e}}function st(e){0>sa||(e.current=xf[sa],xf[sa]=null,sa--)}function Je(e,t){sa++,xf[sa]=e.current,e.current=t}var Vs={},Ht=Ys(Vs),pn=Ys(!1),_i=Vs;function Ra(e,t){var n=e.type.contextTypes;if(!n)return Vs;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gn(e){return e=e.childContextTypes,e!=null}function Xc(){st(pn),st(Ht)}function _x(e,t,n){if(Ht.current!==Vs)throw Error(J(168));Je(Ht,t),Je(pn,n)}function C0(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(J(108,nC(e)||"Unknown",s));return ft({},n,r)}function Jc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vs,_i=Ht.current,Je(Ht,e),Je(pn,pn.current),!0}function Sx(e,t,n){var r=e.stateNode;if(!r)throw Error(J(169));n?(e=C0(e,t,_i),r.__reactInternalMemoizedMergedChildContext=e,st(pn),st(Ht),Je(Ht,e)):st(pn),Je(pn,n)}var Vr=null,Mu=!1,Jd=!1;function E0(e){Vr===null?Vr=[e]:Vr.push(e)}function yE(e){Mu=!0,E0(e)}function Xs(){if(!Jd&&Vr!==null){Jd=!0;var e=0,t=We;try{var n=Vr;for(We=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Vr=null,Mu=!1}catch(s){throw Vr!==null&&(Vr=Vr.slice(e+1)),Zw(Xm,Xs),s}finally{We=t,Jd=!1}}return null}var ia=[],aa=0,Zc=null,eu=0,Fn=[],$n=0,Si=null,Wr=1,Hr="";function oi(e,t){ia[aa++]=eu,ia[aa++]=Zc,Zc=e,eu=t}function P0(e,t,n){Fn[$n++]=Wr,Fn[$n++]=Hr,Fn[$n++]=Si,Si=e;var r=Wr;e=Hr;var s=32-lr(r)-1;r&=~(1<<s),n+=1;var a=32-lr(t)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Wr=1<<32-lr(t)+s|n<<s|r,Hr=a+e}else Wr=1<<a|n<<s|r,Hr=e}function ap(e){e.return!==null&&(oi(e,1),P0(e,1,0))}function op(e){for(;e===Zc;)Zc=ia[--aa],ia[aa]=null,eu=ia[--aa],ia[aa]=null;for(;e===Si;)Si=Fn[--$n],Fn[$n]=null,Hr=Fn[--$n],Fn[$n]=null,Wr=Fn[--$n],Fn[$n]=null}var Pn=null,Cn=null,at=!1,sr=null;function T0(e,t){var n=Bn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Nx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pn=e,Cn=Ls(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pn=e,Cn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Si!==null?{id:Wr,overflow:Hr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Bn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Pn=e,Cn=null,!0):!1;default:return!1}}function vf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yf(e){if(at){var t=Cn;if(t){var n=t;if(!Nx(e,t)){if(vf(e))throw Error(J(418));t=Ls(n.nextSibling);var r=Pn;t&&Nx(e,t)?T0(r,n):(e.flags=e.flags&-4097|2,at=!1,Pn=e)}}else{if(vf(e))throw Error(J(418));e.flags=e.flags&-4097|2,at=!1,Pn=e}}}function kx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pn=e}function Jl(e){if(e!==Pn)return!1;if(!at)return kx(e),at=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!mf(e.type,e.memoizedProps)),t&&(t=Cn)){if(vf(e))throw R0(),Error(J(418));for(;t;)T0(e,t),t=Ls(t.nextSibling)}if(kx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Cn=Ls(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Cn=null}}else Cn=Pn?Ls(e.stateNode.nextSibling):null;return!0}function R0(){for(var e=Cn;e;)e=Ls(e.nextSibling)}function Aa(){Cn=Pn=null,at=!1}function lp(e){sr===null?sr=[e]:sr.push(e)}var wE=ss.ReactCurrentBatchConfig;function mo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,e));var s=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function Zl(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cx(e){var t=e._init;return t(e._payload)}function A0(e){function t(x,v){if(e){var y=x.deletions;y===null?(x.deletions=[v],x.flags|=16):y.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=$s(x,v),x.index=0,x.sibling=null,x}function a(x,v,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<v?(x.flags|=2,v):y):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,v,y,j){return v===null||v.tag!==6?(v=ih(y,x.mode,j),v.return=x,v):(v=s(v,y),v.return=x,v)}function c(x,v,y,j){var S=y.type;return S===Zi?d(x,v,y.props.children,j,y.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ys&&Cx(S)===v.type)?(j=s(v,y.props),j.ref=mo(x,v,y),j.return=x,j):(j=Ac(y.type,y.key,y.props,null,x.mode,j),j.ref=mo(x,v,y),j.return=x,j)}function u(x,v,y,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=ah(y,x.mode,j),v.return=x,v):(v=s(v,y.children||[]),v.return=x,v)}function d(x,v,y,j,S){return v===null||v.tag!==7?(v=ji(y,x.mode,j,S),v.return=x,v):(v=s(v,y),v.return=x,v)}function h(x,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ih(""+v,x.mode,y),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Bl:return y=Ac(v.type,v.key,v.props,null,x.mode,y),y.ref=mo(x,null,v),y.return=x,y;case Ji:return v=ah(v,x.mode,y),v.return=x,v;case ys:var j=v._init;return h(x,j(v._payload),y)}if(_o(v)||lo(v))return v=ji(v,x.mode,y,null),v.return=x,v;Zl(x,v)}return null}function p(x,v,y,j){var S=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:l(x,v,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Bl:return y.key===S?c(x,v,y,j):null;case Ji:return y.key===S?u(x,v,y,j):null;case ys:return S=y._init,p(x,v,S(y._payload),j)}if(_o(y)||lo(y))return S!==null?null:d(x,v,y,j,null);Zl(x,y)}return null}function f(x,v,y,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(y)||null,l(v,x,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Bl:return x=x.get(j.key===null?y:j.key)||null,c(v,x,j,S);case Ji:return x=x.get(j.key===null?y:j.key)||null,u(v,x,j,S);case ys:var _=j._init;return f(x,v,y,_(j._payload),S)}if(_o(j)||lo(j))return x=x.get(y)||null,d(v,x,j,S,null);Zl(v,j)}return null}function b(x,v,y,j){for(var S=null,_=null,N=v,C=v=0,A=null;N!==null&&C<y.length;C++){N.index>C?(A=N,N=null):A=N.sibling;var R=p(x,N,y[C],j);if(R===null){N===null&&(N=A);break}e&&N&&R.alternate===null&&t(x,N),v=a(R,v,C),_===null?S=R:_.sibling=R,_=R,N=A}if(C===y.length)return n(x,N),at&&oi(x,C),S;if(N===null){for(;C<y.length;C++)N=h(x,y[C],j),N!==null&&(v=a(N,v,C),_===null?S=N:_.sibling=N,_=N);return at&&oi(x,C),S}for(N=r(x,N);C<y.length;C++)A=f(N,x,C,y[C],j),A!==null&&(e&&A.alternate!==null&&N.delete(A.key===null?C:A.key),v=a(A,v,C),_===null?S=A:_.sibling=A,_=A);return e&&N.forEach(function(O){return t(x,O)}),at&&oi(x,C),S}function g(x,v,y,j){var S=lo(y);if(typeof S!="function")throw Error(J(150));if(y=S.call(y),y==null)throw Error(J(151));for(var _=S=null,N=v,C=v=0,A=null,R=y.next();N!==null&&!R.done;C++,R=y.next()){N.index>C?(A=N,N=null):A=N.sibling;var O=p(x,N,R.value,j);if(O===null){N===null&&(N=A);break}e&&N&&O.alternate===null&&t(x,N),v=a(O,v,C),_===null?S=O:_.sibling=O,_=O,N=A}if(R.done)return n(x,N),at&&oi(x,C),S;if(N===null){for(;!R.done;C++,R=y.next())R=h(x,R.value,j),R!==null&&(v=a(R,v,C),_===null?S=R:_.sibling=R,_=R);return at&&oi(x,C),S}for(N=r(x,N);!R.done;C++,R=y.next())R=f(N,x,C,R.value,j),R!==null&&(e&&R.alternate!==null&&N.delete(R.key===null?C:R.key),v=a(R,v,C),_===null?S=R:_.sibling=R,_=R);return e&&N.forEach(function(T){return t(x,T)}),at&&oi(x,C),S}function w(x,v,y,j){if(typeof y=="object"&&y!==null&&y.type===Zi&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Bl:e:{for(var S=y.key,_=v;_!==null;){if(_.key===S){if(S=y.type,S===Zi){if(_.tag===7){n(x,_.sibling),v=s(_,y.props.children),v.return=x,x=v;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ys&&Cx(S)===_.type){n(x,_.sibling),v=s(_,y.props),v.ref=mo(x,_,y),v.return=x,x=v;break e}n(x,_);break}else t(x,_);_=_.sibling}y.type===Zi?(v=ji(y.props.children,x.mode,j,y.key),v.return=x,x=v):(j=Ac(y.type,y.key,y.props,null,x.mode,j),j.ref=mo(x,v,y),j.return=x,x=j)}return o(x);case Ji:e:{for(_=y.key;v!==null;){if(v.key===_)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(x,v.sibling),v=s(v,y.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=ah(y,x.mode,j),v.return=x,x=v}return o(x);case ys:return _=y._init,w(x,v,_(y._payload),j)}if(_o(y))return b(x,v,y,j);if(lo(y))return g(x,v,y,j);Zl(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,y),v.return=x,x=v):(n(x,v),v=ih(y,x.mode,j),v.return=x,x=v),o(x)):n(x,v)}return w}var Ia=A0(!0),I0=A0(!1),tu=Ys(null),nu=null,oa=null,cp=null;function up(){cp=oa=nu=null}function dp(e){var t=tu.current;st(tu),e._currentValue=t}function wf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ma(e,t){nu=e,cp=oa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mn=!0),e.firstContext=null)}function Wn(e){var t=e._currentValue;if(cp!==e)if(e={context:e,memoizedValue:t,next:null},oa===null){if(nu===null)throw Error(J(308));oa=e,nu.dependencies={lanes:0,firstContext:e}}else oa=oa.next=e;return t}var fi=null;function hp(e){fi===null?fi=[e]:fi.push(e)}function O0(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,hp(t)):(n.next=s.next,s.next=n),t.interleaved=n,Xr(e,r)}function Xr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ws=!1;function fp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function L0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ms(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Le&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Xr(e,n)}return s=r.interleaved,s===null?(t.next=t,hp(r)):(t.next=s.next,s.next=t),r.interleaved=t,Xr(e,n)}function kc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Jm(e,n)}}function Ex(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ru(e,t,n,r){var s=e.updateQueue;ws=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;o=0,d=u=c=null,l=a;do{var p=l.lane,f=l.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,g=l;switch(p=t,f=n,g.tag){case 1:if(b=g.payload,typeof b=="function"){h=b.call(f,h,p);break e}h=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,p=typeof b=="function"?b.call(f,h,p):b,p==null)break e;h=ft({},h,p);break e;case 2:ws=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=f,c=h):d=d.next=f,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);ki|=o,e.lanes=o,e.memoizedState=h}}function Px(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(J(191,s));s.call(r)}}}var kl={},Rr=Ys(kl),sl=Ys(kl),il=Ys(kl);function mi(e){if(e===kl)throw Error(J(174));return e}function mp(e,t){switch(Je(il,t),Je(sl,e),Je(Rr,kl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zh(t,e)}st(Rr),Je(Rr,t)}function Oa(){st(Rr),st(sl),st(il)}function M0(e){mi(il.current);var t=mi(Rr.current),n=Zh(t,e.type);t!==n&&(Je(sl,e),Je(Rr,n))}function pp(e){sl.current===e&&(st(Rr),st(sl))}var ut=Ys(0);function su(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zd=[];function gp(){for(var e=0;e<Zd.length;e++)Zd[e]._workInProgressVersionPrimary=null;Zd.length=0}var Cc=ss.ReactCurrentDispatcher,eh=ss.ReactCurrentBatchConfig,Ni=0,dt=null,Tt=null,Ot=null,iu=!1,Mo=!1,al=0,bE=0;function Ut(){throw Error(J(321))}function xp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!dr(e[n],t[n]))return!1;return!0}function vp(e,t,n,r,s,a){if(Ni=a,dt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Cc.current=e===null||e.memoizedState===null?NE:kE,e=n(r,s),Mo){a=0;do{if(Mo=!1,al=0,25<=a)throw Error(J(301));a+=1,Ot=Tt=null,t.updateQueue=null,Cc.current=CE,e=n(r,s)}while(Mo)}if(Cc.current=au,t=Tt!==null&&Tt.next!==null,Ni=0,Ot=Tt=dt=null,iu=!1,t)throw Error(J(300));return e}function yp(){var e=al!==0;return al=0,e}function yr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?dt.memoizedState=Ot=e:Ot=Ot.next=e,Ot}function Hn(){if(Tt===null){var e=dt.alternate;e=e!==null?e.memoizedState:null}else e=Tt.next;var t=Ot===null?dt.memoizedState:Ot.next;if(t!==null)Ot=t,Tt=e;else{if(e===null)throw Error(J(310));Tt=e,e={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Ot===null?dt.memoizedState=Ot=e:Ot=Ot.next=e}return Ot}function ol(e,t){return typeof t=="function"?t(e):t}function th(e){var t=Hn(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=Tt,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((Ni&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,dt.lanes|=d,ki|=d}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,dr(r,t.memoizedState)||(mn=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do a=s.lane,dt.lanes|=a,ki|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function nh(e){var t=Hn(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=e(a,o.action),o=o.next;while(o!==s);dr(a,t.memoizedState)||(mn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function D0(){}function F0(e,t){var n=dt,r=Hn(),s=t(),a=!dr(r.memoizedState,s);if(a&&(r.memoizedState=s,mn=!0),r=r.queue,wp(U0.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,ll(9,z0.bind(null,n,r,s,t),void 0,null),Lt===null)throw Error(J(349));Ni&30||$0(n,t,s)}return s}function $0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=dt.updateQueue,t===null?(t={lastEffect:null,stores:null},dt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function z0(e,t,n,r){t.value=n,t.getSnapshot=r,B0(t)&&V0(e)}function U0(e,t,n){return n(function(){B0(t)&&V0(e)})}function B0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!dr(e,n)}catch{return!0}}function V0(e){var t=Xr(e,1);t!==null&&cr(t,e,1,-1)}function Tx(e){var t=yr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:e},t.queue=e,e=e.dispatch=SE.bind(null,dt,e),[t.memoizedState,e]}function ll(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=dt.updateQueue,t===null?(t={lastEffect:null,stores:null},dt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function q0(){return Hn().memoizedState}function Ec(e,t,n,r){var s=yr();dt.flags|=e,s.memoizedState=ll(1|t,n,void 0,r===void 0?null:r)}function Du(e,t,n,r){var s=Hn();r=r===void 0?null:r;var a=void 0;if(Tt!==null){var o=Tt.memoizedState;if(a=o.destroy,r!==null&&xp(r,o.deps)){s.memoizedState=ll(t,n,a,r);return}}dt.flags|=e,s.memoizedState=ll(1|t,n,a,r)}function Rx(e,t){return Ec(8390656,8,e,t)}function wp(e,t){return Du(2048,8,e,t)}function W0(e,t){return Du(4,2,e,t)}function H0(e,t){return Du(4,4,e,t)}function G0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function K0(e,t,n){return n=n!=null?n.concat([e]):null,Du(4,4,G0.bind(null,t,e),n)}function bp(){}function Q0(e,t){var n=Hn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xp(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Y0(e,t){var n=Hn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xp(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function X0(e,t,n){return Ni&21?(dr(n,t)||(n=n0(),dt.lanes|=n,ki|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mn=!0),e.memoizedState=n)}function jE(e,t){var n=We;We=n!==0&&4>n?n:4,e(!0);var r=eh.transition;eh.transition={};try{e(!1),t()}finally{We=n,eh.transition=r}}function J0(){return Hn().memoizedState}function _E(e,t,n){var r=Fs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Z0(e))eb(t,n);else if(n=O0(e,t,n,r),n!==null){var s=sn();cr(n,e,r,s),tb(n,t,r)}}function SE(e,t,n){var r=Fs(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Z0(e))eb(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,dr(l,o)){var c=t.interleaved;c===null?(s.next=s,hp(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=O0(e,t,s,r),n!==null&&(s=sn(),cr(n,e,r,s),tb(n,t,r))}}function Z0(e){var t=e.alternate;return e===dt||t!==null&&t===dt}function eb(e,t){Mo=iu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tb(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Jm(e,n)}}var au={readContext:Wn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},NE={readContext:Wn,useCallback:function(e,t){return yr().memoizedState=[e,t===void 0?null:t],e},useContext:Wn,useEffect:Rx,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ec(4194308,4,G0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ec(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ec(4,2,e,t)},useMemo:function(e,t){var n=yr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=_E.bind(null,dt,e),[r.memoizedState,e]},useRef:function(e){var t=yr();return e={current:e},t.memoizedState=e},useState:Tx,useDebugValue:bp,useDeferredValue:function(e){return yr().memoizedState=e},useTransition:function(){var e=Tx(!1),t=e[0];return e=jE.bind(null,e[1]),yr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=dt,s=yr();if(at){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),Lt===null)throw Error(J(349));Ni&30||$0(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Rx(U0.bind(null,r,a,e),[e]),r.flags|=2048,ll(9,z0.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=yr(),t=Lt.identifierPrefix;if(at){var n=Hr,r=Wr;n=(r&~(1<<32-lr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=al++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=bE++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},kE={readContext:Wn,useCallback:Q0,useContext:Wn,useEffect:wp,useImperativeHandle:K0,useInsertionEffect:W0,useLayoutEffect:H0,useMemo:Y0,useReducer:th,useRef:q0,useState:function(){return th(ol)},useDebugValue:bp,useDeferredValue:function(e){var t=Hn();return X0(t,Tt.memoizedState,e)},useTransition:function(){var e=th(ol)[0],t=Hn().memoizedState;return[e,t]},useMutableSource:D0,useSyncExternalStore:F0,useId:J0,unstable_isNewReconciler:!1},CE={readContext:Wn,useCallback:Q0,useContext:Wn,useEffect:wp,useImperativeHandle:K0,useInsertionEffect:W0,useLayoutEffect:H0,useMemo:Y0,useReducer:nh,useRef:q0,useState:function(){return nh(ol)},useDebugValue:bp,useDeferredValue:function(e){var t=Hn();return Tt===null?t.memoizedState=e:X0(t,Tt.memoizedState,e)},useTransition:function(){var e=nh(ol)[0],t=Hn().memoizedState;return[e,t]},useMutableSource:D0,useSyncExternalStore:F0,useId:J0,unstable_isNewReconciler:!1};function Jn(e,t){if(e&&e.defaultProps){t=ft({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function bf(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ft({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Fu={isMounted:function(e){return(e=e._reactInternals)?Li(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=sn(),s=Fs(e),a=Gr(r,s);a.payload=t,n!=null&&(a.callback=n),t=Ms(e,a,s),t!==null&&(cr(t,e,s,r),kc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=sn(),s=Fs(e),a=Gr(r,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Ms(e,a,s),t!==null&&(cr(t,e,s,r),kc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sn(),r=Fs(e),s=Gr(n,r);s.tag=2,t!=null&&(s.callback=t),t=Ms(e,s,r),t!==null&&(cr(t,e,r,n),kc(t,e,r))}};function Ax(e,t,n,r,s,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!el(n,r)||!el(s,a):!0}function nb(e,t,n){var r=!1,s=Vs,a=t.contextType;return typeof a=="object"&&a!==null?a=Wn(a):(s=gn(t)?_i:Ht.current,r=t.contextTypes,a=(r=r!=null)?Ra(e,s):Vs),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ix(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Fu.enqueueReplaceState(t,t.state,null)}function jf(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},fp(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Wn(a):(a=gn(t)?_i:Ht.current,s.context=Ra(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(bf(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Fu.enqueueReplaceState(s,s.state,null),ru(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function La(e,t){try{var n="",r=t;do n+=tC(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function rh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function _f(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var EE=typeof WeakMap=="function"?WeakMap:Map;function rb(e,t,n){n=Gr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){lu||(lu=!0,If=r),_f(e,t)},n}function sb(e,t,n){n=Gr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){_f(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){_f(e,t),typeof r!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Ox(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new EE;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=BE.bind(null,e,t,n),t.then(e,e))}function Lx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mx(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Gr(-1,1),t.tag=2,Ms(n,t,1))),n.lanes|=1),e)}var PE=ss.ReactCurrentOwner,mn=!1;function tn(e,t,n,r){t.child=e===null?I0(t,null,n,r):Ia(t,e.child,n,r)}function Dx(e,t,n,r,s){n=n.render;var a=t.ref;return ma(t,s),r=vp(e,t,n,r,a,s),n=yp(),e!==null&&!mn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Jr(e,t,s)):(at&&n&&ap(t),t.flags|=1,tn(e,t,r,s),t.child)}function Fx(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!Pp(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,ib(e,t,a,r,s)):(e=Ac(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:el,n(o,r)&&e.ref===t.ref)return Jr(e,t,s)}return t.flags|=1,e=$s(a,r),e.ref=t.ref,e.return=t,t.child=e}function ib(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(el(a,r)&&e.ref===t.ref)if(mn=!1,t.pendingProps=r=a,(e.lanes&s)!==0)e.flags&131072&&(mn=!0);else return t.lanes=e.lanes,Jr(e,t,s)}return Sf(e,t,n,r,s)}function ab(e,t,n){var r=t.pendingProps,s=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(ca,Nn),Nn|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Je(ca,Nn),Nn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Je(ca,Nn),Nn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Je(ca,Nn),Nn|=r;return tn(e,t,s,n),t.child}function ob(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sf(e,t,n,r,s){var a=gn(n)?_i:Ht.current;return a=Ra(t,a),ma(t,s),n=vp(e,t,n,r,a,s),r=yp(),e!==null&&!mn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Jr(e,t,s)):(at&&r&&ap(t),t.flags|=1,tn(e,t,n,s),t.child)}function $x(e,t,n,r,s){if(gn(n)){var a=!0;Jc(t)}else a=!1;if(ma(t,s),t.stateNode===null)Pc(e,t),nb(t,n,r),jf(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Wn(u):(u=gn(n)?_i:Ht.current,u=Ra(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Ix(t,o,r,u),ws=!1;var p=t.memoizedState;o.state=p,ru(t,r,o,s),c=t.memoizedState,l!==r||p!==c||pn.current||ws?(typeof d=="function"&&(bf(t,n,d,r),c=t.memoizedState),(l=ws||Ax(t,n,l,r,p,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,L0(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Jn(t.type,l),o.props=u,h=t.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Wn(c):(c=gn(n)?_i:Ht.current,c=Ra(t,c));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==c)&&Ix(t,o,r,c),ws=!1,p=t.memoizedState,o.state=p,ru(t,r,o,s);var b=t.memoizedState;l!==h||p!==b||pn.current||ws?(typeof f=="function"&&(bf(t,n,f,r),b=t.memoizedState),(u=ws||Ax(t,n,u,r,p,b,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),o.props=r,o.state=b,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Nf(e,t,n,r,a,s)}function Nf(e,t,n,r,s,a){ob(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Sx(t,n,!1),Jr(e,t,a);r=t.stateNode,PE.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ia(t,e.child,null,a),t.child=Ia(t,null,l,a)):tn(e,t,l,a),t.memoizedState=r.state,s&&Sx(t,n,!0),t.child}function lb(e){var t=e.stateNode;t.pendingContext?_x(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_x(e,t.context,!1),mp(e,t.containerInfo)}function zx(e,t,n,r,s){return Aa(),lp(s),t.flags|=256,tn(e,t,n,r),t.child}var kf={dehydrated:null,treeContext:null,retryLane:0};function Cf(e){return{baseLanes:e,cachePool:null,transitions:null}}function cb(e,t,n){var r=t.pendingProps,s=ut.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Je(ut,s&1),e===null)return yf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Uu(o,r,0,null),e=ji(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Cf(n),t.memoizedState=kf,e):jp(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return TE(e,t,o,r,l,s,n);if(a){a=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=$s(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=$s(l,a):(a=ji(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?Cf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=kf,r}return a=e.child,e=a.sibling,r=$s(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function jp(e,t){return t=Uu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ec(e,t,n,r){return r!==null&&lp(r),Ia(t,e.child,null,n),e=jp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function TE(e,t,n,r,s,a,o){if(n)return t.flags&256?(t.flags&=-257,r=rh(Error(J(422))),ec(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Uu({mode:"visible",children:r.children},s,0,null),a=ji(a,s,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Ia(t,e.child,null,o),t.child.memoizedState=Cf(o),t.memoizedState=kf,a);if(!(t.mode&1))return ec(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(J(419)),r=rh(a,r,void 0),ec(e,t,o,r)}if(l=(o&e.childLanes)!==0,mn||l){if(r=Lt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Xr(e,s),cr(r,e,s,-1))}return Ep(),r=rh(Error(J(421))),ec(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=VE.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Cn=Ls(s.nextSibling),Pn=t,at=!0,sr=null,e!==null&&(Fn[$n++]=Wr,Fn[$n++]=Hr,Fn[$n++]=Si,Wr=e.id,Hr=e.overflow,Si=t),t=jp(t,r.children),t.flags|=4096,t)}function Ux(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),wf(e.return,t,n)}function sh(e,t,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function ub(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(tn(e,t,r.children,n),r=ut.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ux(e,n,t);else if(e.tag===19)Ux(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Je(ut,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&su(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),sh(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&su(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}sh(t,!0,n,null,a);break;case"together":sh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ki|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=$s(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=$s(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function RE(e,t,n){switch(t.tag){case 3:lb(t),Aa();break;case 5:M0(t);break;case 1:gn(t.type)&&Jc(t);break;case 4:mp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Je(tu,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Je(ut,ut.current&1),t.flags|=128,null):n&t.child.childLanes?cb(e,t,n):(Je(ut,ut.current&1),e=Jr(e,t,n),e!==null?e.sibling:null);Je(ut,ut.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return ub(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Je(ut,ut.current),r)break;return null;case 22:case 23:return t.lanes=0,ab(e,t,n)}return Jr(e,t,n)}var db,Ef,hb,fb;db=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ef=function(){};hb=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,mi(Rr.current);var a=null;switch(n){case"input":s=Qh(e,s),r=Qh(e,r),a=[];break;case"select":s=ft({},s,{value:void 0}),r=ft({},r,{value:void 0}),a=[];break;case"textarea":s=Jh(e,s),r=Jh(e,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Yc)}ef(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Go.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Go.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&tt("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};fb=function(e,t,n,r){n!==r&&(t.flags|=4)};function po(e,t){if(!at)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function AE(e,t,n){var r=t.pendingProps;switch(op(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return gn(t.type)&&Xc(),Bt(t),null;case 3:return r=t.stateNode,Oa(),st(pn),st(Ht),gp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Jl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,sr!==null&&(Mf(sr),sr=null))),Ef(e,t),Bt(t),null;case 5:pp(t);var s=mi(il.current);if(n=t.type,e!==null&&t.stateNode!=null)hb(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(J(166));return Bt(t),null}if(e=mi(Rr.current),Jl(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Nr]=t,r[rl]=a,e=(t.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(s=0;s<No.length;s++)tt(No[s],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":Yg(r,a),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},tt("invalid",r);break;case"textarea":Jg(r,a),tt("invalid",r)}ef(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Xl(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Xl(r.textContent,l,e),s=["children",""+l]):Go.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&tt("scroll",r)}switch(n){case"input":Vl(r),Xg(r,a,!0);break;case"textarea":Vl(r),Zg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Yc)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Uw(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Nr]=t,e[rl]=r,db(e,t,!1,!1),t.stateNode=e;e:{switch(o=tf(n,r),n){case"dialog":tt("cancel",e),tt("close",e),s=r;break;case"iframe":case"object":case"embed":tt("load",e),s=r;break;case"video":case"audio":for(s=0;s<No.length;s++)tt(No[s],e);s=r;break;case"source":tt("error",e),s=r;break;case"img":case"image":case"link":tt("error",e),tt("load",e),s=r;break;case"details":tt("toggle",e),s=r;break;case"input":Yg(e,r),s=Qh(e,r),tt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ft({},r,{value:void 0}),tt("invalid",e);break;case"textarea":Jg(e,r),s=Jh(e,r),tt("invalid",e);break;default:s=r}ef(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?qw(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Bw(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ko(e,c):typeof c=="number"&&Ko(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Go.hasOwnProperty(a)?c!=null&&a==="onScroll"&&tt("scroll",e):c!=null&&Hm(e,a,c,o))}switch(n){case"input":Vl(e),Xg(e,r,!1);break;case"textarea":Vl(e),Zg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Bs(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?ua(e,!!r.multiple,a,!1):r.defaultValue!=null&&ua(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Yc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bt(t),null;case 6:if(e&&t.stateNode!=null)fb(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(J(166));if(n=mi(il.current),mi(Rr.current),Jl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Nr]=t,(a=r.nodeValue!==n)&&(e=Pn,e!==null))switch(e.tag){case 3:Xl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xl(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nr]=t,t.stateNode=r}return Bt(t),null;case 13:if(st(ut),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(at&&Cn!==null&&t.mode&1&&!(t.flags&128))R0(),Aa(),t.flags|=98560,a=!1;else if(a=Jl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(J(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(J(317));a[Nr]=t}else Aa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bt(t),a=!1}else sr!==null&&(Mf(sr),sr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ut.current&1?Rt===0&&(Rt=3):Ep())),t.updateQueue!==null&&(t.flags|=4),Bt(t),null);case 4:return Oa(),Ef(e,t),e===null&&tl(t.stateNode.containerInfo),Bt(t),null;case 10:return dp(t.type._context),Bt(t),null;case 17:return gn(t.type)&&Xc(),Bt(t),null;case 19:if(st(ut),a=t.memoizedState,a===null)return Bt(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)po(a,!1);else{if(Rt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=su(e),o!==null){for(t.flags|=128,po(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Je(ut,ut.current&1|2),t.child}e=e.sibling}a.tail!==null&&yt()>Ma&&(t.flags|=128,r=!0,po(a,!1),t.lanes=4194304)}else{if(!r)if(e=su(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),po(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!at)return Bt(t),null}else 2*yt()-a.renderingStartTime>Ma&&n!==1073741824&&(t.flags|=128,r=!0,po(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=yt(),t.sibling=null,n=ut.current,Je(ut,r?n&1|2:n&1),t):(Bt(t),null);case 22:case 23:return Cp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Nn&1073741824&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function IE(e,t){switch(op(t),t.tag){case 1:return gn(t.type)&&Xc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Oa(),st(pn),st(Ht),gp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pp(t),null;case 13:if(st(ut),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Aa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return st(ut),null;case 4:return Oa(),null;case 10:return dp(t.type._context),null;case 22:case 23:return Cp(),null;case 24:return null;default:return null}}var tc=!1,qt=!1,OE=typeof WeakSet=="function"?WeakSet:Set,ue=null;function la(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){gt(e,t,r)}else n.current=null}function Pf(e,t,n){try{n()}catch(r){gt(e,t,r)}}var Bx=!1;function LE(e,t){if(hf=Gc,e=v0(),ip(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(l=o+s),h!==a||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===s&&(l=o),p===a&&++d===r&&(c=o),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ff={focusedElem:e,selectionRange:n},Gc=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,w=b.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:Jn(t.type,g),w);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(j){gt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return b=Bx,Bx=!1,b}function Do(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Pf(t,n,a)}s=s.next}while(s!==r)}}function $u(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Tf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function mb(e){var t=e.alternate;t!==null&&(e.alternate=null,mb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Nr],delete t[rl],delete t[gf],delete t[xE],delete t[vE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function pb(e){return e.tag===5||e.tag===3||e.tag===4}function Vx(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||pb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Yc));else if(r!==4&&(e=e.child,e!==null))for(Rf(e,t,n),e=e.sibling;e!==null;)Rf(e,t,n),e=e.sibling}function Af(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Af(e,t,n),e=e.sibling;e!==null;)Af(e,t,n),e=e.sibling}var Mt=null,nr=!1;function ds(e,t,n){for(n=n.child;n!==null;)gb(e,t,n),n=n.sibling}function gb(e,t,n){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(Ru,n)}catch{}switch(n.tag){case 5:qt||la(n,t);case 6:var r=Mt,s=nr;Mt=null,ds(e,t,n),Mt=r,nr=s,Mt!==null&&(nr?(e=Mt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Mt.removeChild(n.stateNode));break;case 18:Mt!==null&&(nr?(e=Mt,n=n.stateNode,e.nodeType===8?Xd(e.parentNode,n):e.nodeType===1&&Xd(e,n),Jo(e)):Xd(Mt,n.stateNode));break;case 4:r=Mt,s=nr,Mt=n.stateNode.containerInfo,nr=!0,ds(e,t,n),Mt=r,nr=s;break;case 0:case 11:case 14:case 15:if(!qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Pf(n,t,o),s=s.next}while(s!==r)}ds(e,t,n);break;case 1:if(!qt&&(la(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){gt(n,t,l)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:n.mode&1?(qt=(r=qt)||n.memoizedState!==null,ds(e,t,n),qt=r):ds(e,t,n);break;default:ds(e,t,n)}}function qx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new OE),t.forEach(function(r){var s=qE.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Kn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Mt=l.stateNode,nr=!1;break e;case 3:Mt=l.stateNode.containerInfo,nr=!0;break e;case 4:Mt=l.stateNode.containerInfo,nr=!0;break e}l=l.return}if(Mt===null)throw Error(J(160));gb(a,o,s),Mt=null,nr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){gt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)xb(t,e),t=t.sibling}function xb(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Kn(t,e),vr(e),r&4){try{Do(3,e,e.return),$u(3,e)}catch(g){gt(e,e.return,g)}try{Do(5,e,e.return)}catch(g){gt(e,e.return,g)}}break;case 1:Kn(t,e),vr(e),r&512&&n!==null&&la(n,n.return);break;case 5:if(Kn(t,e),vr(e),r&512&&n!==null&&la(n,n.return),e.flags&32){var s=e.stateNode;try{Ko(s,"")}catch(g){gt(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&$w(s,a),tf(l,o);var u=tf(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?qw(s,h):d==="dangerouslySetInnerHTML"?Bw(s,h):d==="children"?Ko(s,h):Hm(s,d,h,u)}switch(l){case"input":Yh(s,a);break;case"textarea":zw(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var f=a.value;f!=null?ua(s,!!a.multiple,f,!1):p!==!!a.multiple&&(a.defaultValue!=null?ua(s,!!a.multiple,a.defaultValue,!0):ua(s,!!a.multiple,a.multiple?[]:"",!1))}s[rl]=a}catch(g){gt(e,e.return,g)}}break;case 6:if(Kn(t,e),vr(e),r&4){if(e.stateNode===null)throw Error(J(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){gt(e,e.return,g)}}break;case 3:if(Kn(t,e),vr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jo(t.containerInfo)}catch(g){gt(e,e.return,g)}break;case 4:Kn(t,e),vr(e);break;case 13:Kn(t,e),vr(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Np=yt())),r&4&&qx(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(qt=(u=qt)||d,Kn(t,e),qt=u):Kn(t,e),vr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ue=e,d=e.child;d!==null;){for(h=ue=d;ue!==null;){switch(p=ue,f=p.child,p.tag){case 0:case 11:case 14:case 15:Do(4,p,p.return);break;case 1:la(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){gt(r,n,g)}}break;case 5:la(p,p.return);break;case 22:if(p.memoizedState!==null){Hx(h);continue}}f!==null?(f.return=p,ue=f):Hx(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Vw("display",o))}catch(g){gt(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){gt(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Kn(t,e),vr(e),r&4&&qx(e);break;case 21:break;default:Kn(t,e),vr(e)}}function vr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(pb(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ko(s,""),r.flags&=-33);var a=Vx(e);Af(e,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Vx(e);Rf(e,l,o);break;default:throw Error(J(161))}}catch(c){gt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ME(e,t,n){ue=e,vb(e)}function vb(e,t,n){for(var r=(e.mode&1)!==0;ue!==null;){var s=ue,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||tc;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||qt;l=tc;var u=qt;if(tc=o,(qt=c)&&!u)for(ue=s;ue!==null;)o=ue,c=o.child,o.tag===22&&o.memoizedState!==null?Gx(s):c!==null?(c.return=o,ue=c):Gx(s);for(;a!==null;)ue=a,vb(a),a=a.sibling;ue=s,tc=l,qt=u}Wx(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ue=a):Wx(e)}}function Wx(e){for(;ue!==null;){var t=ue;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qt||$u(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!qt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Jn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Px(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Px(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Jo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}qt||t.flags&512&&Tf(t)}catch(p){gt(t,t.return,p)}}if(t===e){ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Hx(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Gx(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$u(4,t)}catch(c){gt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){gt(t,s,c)}}var a=t.return;try{Tf(t)}catch(c){gt(t,a,c)}break;case 5:var o=t.return;try{Tf(t)}catch(c){gt(t,o,c)}}}catch(c){gt(t,t.return,c)}if(t===e){ue=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ue=l;break}ue=t.return}}var DE=Math.ceil,ou=ss.ReactCurrentDispatcher,_p=ss.ReactCurrentOwner,Vn=ss.ReactCurrentBatchConfig,Le=0,Lt=null,_t=null,Ft=0,Nn=0,ca=Ys(0),Rt=0,cl=null,ki=0,zu=0,Sp=0,Fo=null,dn=null,Np=0,Ma=1/0,Ur=null,lu=!1,If=null,Ds=null,nc=!1,Ts=null,cu=0,$o=0,Of=null,Tc=-1,Rc=0;function sn(){return Le&6?yt():Tc!==-1?Tc:Tc=yt()}function Fs(e){return e.mode&1?Le&2&&Ft!==0?Ft&-Ft:wE.transition!==null?(Rc===0&&(Rc=n0()),Rc):(e=We,e!==0||(e=window.event,e=e===void 0?16:c0(e.type)),e):1}function cr(e,t,n,r){if(50<$o)throw $o=0,Of=null,Error(J(185));_l(e,n,r),(!(Le&2)||e!==Lt)&&(e===Lt&&(!(Le&2)&&(zu|=n),Rt===4&&js(e,Ft)),xn(e,r),n===1&&Le===0&&!(t.mode&1)&&(Ma=yt()+500,Mu&&Xs()))}function xn(e,t){var n=e.callbackNode;wC(e,t);var r=Hc(e,e===Lt?Ft:0);if(r===0)n!==null&&nx(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&nx(n),t===1)e.tag===0?yE(Kx.bind(null,e)):E0(Kx.bind(null,e)),pE(function(){!(Le&6)&&Xs()}),n=null;else{switch(r0(r)){case 1:n=Xm;break;case 4:n=e0;break;case 16:n=Wc;break;case 536870912:n=t0;break;default:n=Wc}n=kb(n,yb.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function yb(e,t){if(Tc=-1,Rc=0,Le&6)throw Error(J(327));var n=e.callbackNode;if(pa()&&e.callbackNode!==n)return null;var r=Hc(e,e===Lt?Ft:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=uu(e,r);else{t=r;var s=Le;Le|=2;var a=bb();(Lt!==e||Ft!==t)&&(Ur=null,Ma=yt()+500,bi(e,t));do try{zE();break}catch(l){wb(e,l)}while(!0);up(),ou.current=a,Le=s,_t!==null?t=0:(Lt=null,Ft=0,t=Rt)}if(t!==0){if(t===2&&(s=of(e),s!==0&&(r=s,t=Lf(e,s))),t===1)throw n=cl,bi(e,0),js(e,r),xn(e,yt()),n;if(t===6)js(e,r);else{if(s=e.current.alternate,!(r&30)&&!FE(s)&&(t=uu(e,r),t===2&&(a=of(e),a!==0&&(r=a,t=Lf(e,a))),t===1))throw n=cl,bi(e,0),js(e,r),xn(e,yt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(J(345));case 2:li(e,dn,Ur);break;case 3:if(js(e,r),(r&130023424)===r&&(t=Np+500-yt(),10<t)){if(Hc(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){sn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=pf(li.bind(null,e,dn,Ur),t);break}li(e,dn,Ur);break;case 4:if(js(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-lr(r);a=1<<o,o=t[o],o>s&&(s=o),r&=~a}if(r=s,r=yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*DE(r/1960))-r,10<r){e.timeoutHandle=pf(li.bind(null,e,dn,Ur),r);break}li(e,dn,Ur);break;case 5:li(e,dn,Ur);break;default:throw Error(J(329))}}}return xn(e,yt()),e.callbackNode===n?yb.bind(null,e):null}function Lf(e,t){var n=Fo;return e.current.memoizedState.isDehydrated&&(bi(e,t).flags|=256),e=uu(e,t),e!==2&&(t=dn,dn=n,t!==null&&Mf(t)),e}function Mf(e){dn===null?dn=e:dn.push.apply(dn,e)}function FE(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!dr(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function js(e,t){for(t&=~Sp,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-lr(t),r=1<<n;e[n]=-1,t&=~r}}function Kx(e){if(Le&6)throw Error(J(327));pa();var t=Hc(e,0);if(!(t&1))return xn(e,yt()),null;var n=uu(e,t);if(e.tag!==0&&n===2){var r=of(e);r!==0&&(t=r,n=Lf(e,r))}if(n===1)throw n=cl,bi(e,0),js(e,t),xn(e,yt()),n;if(n===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,li(e,dn,Ur),xn(e,yt()),null}function kp(e,t){var n=Le;Le|=1;try{return e(t)}finally{Le=n,Le===0&&(Ma=yt()+500,Mu&&Xs())}}function Ci(e){Ts!==null&&Ts.tag===0&&!(Le&6)&&pa();var t=Le;Le|=1;var n=Vn.transition,r=We;try{if(Vn.transition=null,We=1,e)return e()}finally{We=r,Vn.transition=n,Le=t,!(Le&6)&&Xs()}}function Cp(){Nn=ca.current,st(ca)}function bi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,mE(n)),_t!==null)for(n=_t.return;n!==null;){var r=n;switch(op(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xc();break;case 3:Oa(),st(pn),st(Ht),gp();break;case 5:pp(r);break;case 4:Oa();break;case 13:st(ut);break;case 19:st(ut);break;case 10:dp(r.type._context);break;case 22:case 23:Cp()}n=n.return}if(Lt=e,_t=e=$s(e.current,null),Ft=Nn=t,Rt=0,cl=null,Sp=zu=ki=0,dn=Fo=null,fi!==null){for(t=0;t<fi.length;t++)if(n=fi[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}fi=null}return e}function wb(e,t){do{var n=_t;try{if(up(),Cc.current=au,iu){for(var r=dt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}iu=!1}if(Ni=0,Ot=Tt=dt=null,Mo=!1,al=0,_p.current=null,n===null||n.return===null){Rt=1,cl=t,_t=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Ft,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=Lx(o);if(f!==null){f.flags&=-257,Mx(f,o,l,a,t),f.mode&1&&Ox(a,u,t),t=f,c=u;var b=t.updateQueue;if(b===null){var g=new Set;g.add(c),t.updateQueue=g}else b.add(c);break e}else{if(!(t&1)){Ox(a,u,t),Ep();break e}c=Error(J(426))}}else if(at&&l.mode&1){var w=Lx(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Mx(w,o,l,a,t),lp(La(c,l));break e}}a=c=La(c,l),Rt!==4&&(Rt=2),Fo===null?Fo=[a]:Fo.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=rb(a,c,t);Ex(a,x);break e;case 1:l=c;var v=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ds===null||!Ds.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=sb(a,l,t);Ex(a,j);break e}}a=a.return}while(a!==null)}_b(n)}catch(S){t=S,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(!0)}function bb(){var e=ou.current;return ou.current=au,e===null?au:e}function Ep(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Lt===null||!(ki&268435455)&&!(zu&268435455)||js(Lt,Ft)}function uu(e,t){var n=Le;Le|=2;var r=bb();(Lt!==e||Ft!==t)&&(Ur=null,bi(e,t));do try{$E();break}catch(s){wb(e,s)}while(!0);if(up(),Le=n,ou.current=r,_t!==null)throw Error(J(261));return Lt=null,Ft=0,Rt}function $E(){for(;_t!==null;)jb(_t)}function zE(){for(;_t!==null&&!dC();)jb(_t)}function jb(e){var t=Nb(e.alternate,e,Nn);e.memoizedProps=e.pendingProps,t===null?_b(e):_t=t,_p.current=null}function _b(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=IE(n,t),n!==null){n.flags&=32767,_t=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Rt=6,_t=null;return}}else if(n=AE(n,t,Nn),n!==null){_t=n;return}if(t=t.sibling,t!==null){_t=t;return}_t=t=e}while(t!==null);Rt===0&&(Rt=5)}function li(e,t,n){var r=We,s=Vn.transition;try{Vn.transition=null,We=1,UE(e,t,n,r)}finally{Vn.transition=s,We=r}return null}function UE(e,t,n,r){do pa();while(Ts!==null);if(Le&6)throw Error(J(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(bC(e,a),e===Lt&&(_t=Lt=null,Ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nc||(nc=!0,kb(Wc,function(){return pa(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Vn.transition,Vn.transition=null;var o=We;We=1;var l=Le;Le|=4,_p.current=null,LE(e,n),xb(n,e),oE(ff),Gc=!!hf,ff=hf=null,e.current=n,ME(n),hC(),Le=l,We=o,Vn.transition=a}else e.current=n;if(nc&&(nc=!1,Ts=e,cu=s),a=e.pendingLanes,a===0&&(Ds=null),pC(n.stateNode),xn(e,yt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(lu)throw lu=!1,e=If,If=null,e;return cu&1&&e.tag!==0&&pa(),a=e.pendingLanes,a&1?e===Of?$o++:($o=0,Of=e):$o=0,Xs(),null}function pa(){if(Ts!==null){var e=r0(cu),t=Vn.transition,n=We;try{if(Vn.transition=null,We=16>e?16:e,Ts===null)var r=!1;else{if(e=Ts,Ts=null,cu=0,Le&6)throw Error(J(331));var s=Le;for(Le|=4,ue=e.current;ue!==null;){var a=ue,o=a.child;if(ue.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ue=u;ue!==null;){var d=ue;switch(d.tag){case 0:case 11:case 15:Do(8,d,a)}var h=d.child;if(h!==null)h.return=d,ue=h;else for(;ue!==null;){d=ue;var p=d.sibling,f=d.return;if(mb(d),d===u){ue=null;break}if(p!==null){p.return=f,ue=p;break}ue=f}}}var b=a.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}ue=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ue=o;else e:for(;ue!==null;){if(a=ue,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Do(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,ue=x;break e}ue=a.return}}var v=e.current;for(ue=v;ue!==null;){o=ue;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,ue=y;else e:for(o=v;ue!==null;){if(l=ue,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$u(9,l)}}catch(S){gt(l,l.return,S)}if(l===o){ue=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,ue=j;break e}ue=l.return}}if(Le=s,Xs(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(Ru,e)}catch{}r=!0}return r}finally{We=n,Vn.transition=t}}return!1}function Qx(e,t,n){t=La(n,t),t=rb(e,t,1),e=Ms(e,t,1),t=sn(),e!==null&&(_l(e,1,t),xn(e,t))}function gt(e,t,n){if(e.tag===3)Qx(e,e,n);else for(;t!==null;){if(t.tag===3){Qx(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ds===null||!Ds.has(r))){e=La(n,e),e=sb(t,e,1),t=Ms(t,e,1),e=sn(),t!==null&&(_l(t,1,e),xn(t,e));break}}t=t.return}}function BE(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=sn(),e.pingedLanes|=e.suspendedLanes&n,Lt===e&&(Ft&n)===n&&(Rt===4||Rt===3&&(Ft&130023424)===Ft&&500>yt()-Np?bi(e,0):Sp|=n),xn(e,t)}function Sb(e,t){t===0&&(e.mode&1?(t=Hl,Hl<<=1,!(Hl&130023424)&&(Hl=4194304)):t=1);var n=sn();e=Xr(e,t),e!==null&&(_l(e,t,n),xn(e,n))}function VE(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Sb(e,n)}function qE(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(t),Sb(e,n)}var Nb;Nb=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pn.current)mn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return mn=!1,RE(e,t,n);mn=!!(e.flags&131072)}else mn=!1,at&&t.flags&1048576&&P0(t,eu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Pc(e,t),e=t.pendingProps;var s=Ra(t,Ht.current);ma(t,n),s=vp(null,t,r,e,s,n);var a=yp();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gn(r)?(a=!0,Jc(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,fp(t),s.updater=Fu,t.stateNode=s,s._reactInternals=t,jf(t,r,e,n),t=Nf(null,t,r,!0,a,n)):(t.tag=0,at&&a&&ap(t),tn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Pc(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=HE(r),e=Jn(r,e),s){case 0:t=Sf(null,t,r,e,n);break e;case 1:t=$x(null,t,r,e,n);break e;case 11:t=Dx(null,t,r,e,n);break e;case 14:t=Fx(null,t,r,Jn(r.type,e),n);break e}throw Error(J(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Jn(r,s),Sf(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Jn(r,s),$x(e,t,r,s,n);case 3:e:{if(lb(t),e===null)throw Error(J(387));r=t.pendingProps,a=t.memoizedState,s=a.element,L0(e,t),ru(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=La(Error(J(423)),t),t=zx(e,t,r,n,s);break e}else if(r!==s){s=La(Error(J(424)),t),t=zx(e,t,r,n,s);break e}else for(Cn=Ls(t.stateNode.containerInfo.firstChild),Pn=t,at=!0,sr=null,n=I0(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Aa(),r===s){t=Jr(e,t,n);break e}tn(e,t,r,n)}t=t.child}return t;case 5:return M0(t),e===null&&yf(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,o=s.children,mf(r,s)?o=null:a!==null&&mf(r,a)&&(t.flags|=32),ob(e,t),tn(e,t,o,n),t.child;case 6:return e===null&&yf(t),null;case 13:return cb(e,t,n);case 4:return mp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ia(t,null,r,n):tn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Jn(r,s),Dx(e,t,r,s,n);case 7:return tn(e,t,t.pendingProps,n),t.child;case 8:return tn(e,t,t.pendingProps.children,n),t.child;case 12:return tn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Je(tu,r._currentValue),r._currentValue=o,a!==null)if(dr(a.value,o)){if(a.children===s.children&&!pn.current){t=Jr(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Gr(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),wf(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(J(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),wf(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}tn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ma(t,n),s=Wn(s),r=r(s),t.flags|=1,tn(e,t,r,n),t.child;case 14:return r=t.type,s=Jn(r,t.pendingProps),s=Jn(r.type,s),Fx(e,t,r,s,n);case 15:return ib(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Jn(r,s),Pc(e,t),t.tag=1,gn(r)?(e=!0,Jc(t)):e=!1,ma(t,n),nb(t,r,s),jf(t,r,s,n),Nf(null,t,r,!0,e,n);case 19:return ub(e,t,n);case 22:return ab(e,t,n)}throw Error(J(156,t.tag))};function kb(e,t){return Zw(e,t)}function WE(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(e,t,n,r){return new WE(e,t,n,r)}function Pp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function HE(e){if(typeof e=="function")return Pp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Km)return 11;if(e===Qm)return 14}return 2}function $s(e,t){var n=e.alternate;return n===null?(n=Bn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ac(e,t,n,r,s,a){var o=2;if(r=e,typeof e=="function")Pp(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Zi:return ji(n.children,s,a,t);case Gm:o=8,s|=8;break;case Wh:return e=Bn(12,n,t,s|2),e.elementType=Wh,e.lanes=a,e;case Hh:return e=Bn(13,n,t,s),e.elementType=Hh,e.lanes=a,e;case Gh:return e=Bn(19,n,t,s),e.elementType=Gh,e.lanes=a,e;case Mw:return Uu(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ow:o=10;break e;case Lw:o=9;break e;case Km:o=11;break e;case Qm:o=14;break e;case ys:o=16,r=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=Bn(o,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function ji(e,t,n,r){return e=Bn(7,e,r,t),e.lanes=n,e}function Uu(e,t,n,r){return e=Bn(22,e,r,t),e.elementType=Mw,e.lanes=n,e.stateNode={isHidden:!1},e}function ih(e,t,n){return e=Bn(6,e,null,t),e.lanes=n,e}function ah(e,t,n){return t=Bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function GE(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zd(0),this.expirationTimes=zd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Tp(e,t,n,r,s,a,o,l,c){return e=new GE(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Bn(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fp(a),e}function KE(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ji,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Cb(e){if(!e)return Vs;e=e._reactInternals;e:{if(Li(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var n=e.type;if(gn(n))return C0(e,n,t)}return t}function Eb(e,t,n,r,s,a,o,l,c){return e=Tp(n,r,!0,e,s,a,o,l,c),e.context=Cb(null),n=e.current,r=sn(),s=Fs(n),a=Gr(r,s),a.callback=t??null,Ms(n,a,s),e.current.lanes=s,_l(e,s,r),xn(e,r),e}function Bu(e,t,n,r){var s=t.current,a=sn(),o=Fs(s);return n=Cb(n),t.context===null?t.context=n:t.pendingContext=n,t=Gr(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ms(s,t,o),e!==null&&(cr(e,s,o,a),kc(e,s,o)),o}function du(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Yx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Rp(e,t){Yx(e,t),(e=e.alternate)&&Yx(e,t)}function QE(){return null}var Pb=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ap(e){this._internalRoot=e}Vu.prototype.render=Ap.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));Bu(e,t,null,null)};Vu.prototype.unmount=Ap.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ci(function(){Bu(null,e,null,null)}),t[Yr]=null}};function Vu(e){this._internalRoot=e}Vu.prototype.unstable_scheduleHydration=function(e){if(e){var t=a0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<bs.length&&t!==0&&t<bs[n].priority;n++);bs.splice(n,0,e),n===0&&l0(e)}};function Ip(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xx(){}function YE(e,t,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=du(o);a.call(u)}}var o=Eb(t,r,e,0,null,!1,!1,"",Xx);return e._reactRootContainer=o,e[Yr]=o.current,tl(e.nodeType===8?e.parentNode:e),Ci(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=du(c);l.call(u)}}var c=Tp(e,0,!1,null,null,!1,!1,"",Xx);return e._reactRootContainer=c,e[Yr]=c.current,tl(e.nodeType===8?e.parentNode:e),Ci(function(){Bu(t,c,n,r)}),c}function Wu(e,t,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=du(o);l.call(c)}}Bu(t,o,e,s)}else o=YE(n,t,e,s,r);return du(o)}s0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=So(t.pendingLanes);n!==0&&(Jm(t,n|1),xn(t,yt()),!(Le&6)&&(Ma=yt()+500,Xs()))}break;case 13:Ci(function(){var r=Xr(e,1);if(r!==null){var s=sn();cr(r,e,1,s)}}),Rp(e,1)}};Zm=function(e){if(e.tag===13){var t=Xr(e,134217728);if(t!==null){var n=sn();cr(t,e,134217728,n)}Rp(e,134217728)}};i0=function(e){if(e.tag===13){var t=Fs(e),n=Xr(e,t);if(n!==null){var r=sn();cr(n,e,t,r)}Rp(e,t)}};a0=function(){return We};o0=function(e,t){var n=We;try{return We=e,t()}finally{We=n}};rf=function(e,t,n){switch(t){case"input":if(Yh(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Lu(r);if(!s)throw Error(J(90));Fw(r),Yh(r,s)}}}break;case"textarea":zw(e,n);break;case"select":t=n.value,t!=null&&ua(e,!!n.multiple,t,!1)}};Gw=kp;Kw=Ci;var XE={usingClientEntryPoint:!1,Events:[Nl,ra,Lu,Ww,Hw,kp]},go={findFiberByHostInstance:hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JE={bundleType:go.bundleType,version:go.version,rendererPackageName:go.rendererPackageName,rendererConfig:go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Xw(e),e===null?null:e.stateNode},findFiberByHostInstance:go.findFiberByHostInstance||QE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{Ru=rc.inject(JE),Tr=rc}catch{}}In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XE;In.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ip(t))throw Error(J(200));return KE(e,t,null,n)};In.createRoot=function(e,t){if(!Ip(e))throw Error(J(299));var n=!1,r="",s=Pb;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Tp(e,1,!1,null,null,n,!1,r,s),e[Yr]=t.current,tl(e.nodeType===8?e.parentNode:e),new Ap(t)};In.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=Xw(t),e=e===null?null:e.stateNode,e};In.flushSync=function(e){return Ci(e)};In.hydrate=function(e,t,n){if(!qu(t))throw Error(J(200));return Wu(null,e,t,!0,n)};In.hydrateRoot=function(e,t,n){if(!Ip(e))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=Pb;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Eb(t,null,e,1,n??null,s,!1,a,o),e[Yr]=t.current,tl(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Vu(t)};In.render=function(e,t,n){if(!qu(t))throw Error(J(200));return Wu(null,e,t,!1,n)};In.unmountComponentAtNode=function(e){if(!qu(e))throw Error(J(40));return e._reactRootContainer?(Ci(function(){Wu(null,null,e,!1,function(){e._reactRootContainer=null,e[Yr]=null})}),!0):!1};In.unstable_batchedUpdates=kp;In.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qu(n))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return Wu(e,t,n,!1,r)};In.version="18.3.1-next-f1338f8080-20240426";function Tb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tb)}catch(e){console.error(e)}}Tb(),Tw.exports=In;var Mi=Tw.exports;const Rb=Pu(Mi);var Ab,Jx=Mi;Ab=Jx.createRoot,Jx.hydrateRoot;const ZE=1,e2=1e6;let oh=0;function t2(){return oh=(oh+1)%Number.MAX_SAFE_INTEGER,oh.toString()}const lh=new Map,Zx=e=>{if(lh.has(e))return;const t=setTimeout(()=>{lh.delete(e),zo({type:"REMOVE_TOAST",toastId:e})},e2);lh.set(e,t)},n2=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,ZE)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Zx(n):e.toasts.forEach(r=>{Zx(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Ic=[];let Oc={toasts:[]};function zo(e){Oc=n2(Oc,e),Ic.forEach(t=>{t(Oc)})}function r2({...e}){const t=t2(),n=s=>zo({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>zo({type:"DISMISS_TOAST",toastId:t});return zo({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function Ve(){const[e,t]=m.useState(Oc);return m.useEffect(()=>(Ic.push(t),()=>{const n=Ic.indexOf(t);n>-1&&Ic.splice(n,1)}),[e]),{...e,toast:r2,dismiss:n=>zo({type:"DISMISS_TOAST",toastId:n})}}function pe(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function ev(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Ib(...e){return t=>{let n=!1;const r=e.map(s=>{const a=ev(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():ev(e[s],null)}}}}function Me(...e){return m.useCallback(Ib(...e),e)}function s2(e,t){const n=m.createContext(t),r=a=>{const{children:o,...l}=a,c=m.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function s(a){const o=m.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function yn(e,t=[]){let n=[];function r(a,o){const l=m.createContext(o),c=n.length;n=[...n,o];const u=h=>{var x;const{scope:p,children:f,...b}=h,g=((x=p==null?void 0:p[e])==null?void 0:x[c])||l,w=m.useMemo(()=>b,Object.values(b));return i.jsx(g.Provider,{value:w,children:f})};u.displayName=a+"Provider";function d(h,p){var g;const f=((g=p==null?void 0:p[e])==null?void 0:g[c])||l,b=m.useContext(f);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=n.map(o=>m.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,i2(s,...t)]}function i2(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Da(e){const t=a2(e),n=m.forwardRef((r,s)=>{const{children:a,...o}=r,l=m.Children.toArray(a),c=l.find(l2);if(c){const u=c.props.children,d=l.map(h=>h===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:h);return i.jsx(t,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,d):null})}return i.jsx(t,{...o,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}var Ha=Da("Slot");function a2(e){const t=m.forwardRef((n,r)=>{const{children:s,...a}=n;if(m.isValidElement(s)){const o=u2(s),l=c2(a,s.props);return s.type!==m.Fragment&&(l.ref=r?Ib(r,o):o),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ob=Symbol("radix.slottable");function o2(e){const t=({children:n})=>i.jsx(i.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Ob,t}function l2(e){return m.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ob}function c2(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function u2(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Op(e){const t=e+"CollectionProvider",[n,r]=yn(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:w,children:x}=g,v=ie.useRef(null),y=ie.useRef(new Map).current;return i.jsx(s,{scope:w,itemMap:y,collectionRef:v,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=Da(l),u=ie.forwardRef((g,w)=>{const{scope:x,children:v}=g,y=a(l,x),j=Me(w,y.collectionRef);return i.jsx(c,{ref:j,children:v})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",p=Da(d),f=ie.forwardRef((g,w)=>{const{scope:x,children:v,...y}=g,j=ie.useRef(null),S=Me(w,j),_=a(d,x);return ie.useEffect(()=>(_.itemMap.set(j,{ref:j,...y}),()=>void _.itemMap.delete(j))),i.jsx(p,{[h]:"",ref:S,children:v})});f.displayName=d;function b(g){const w=a(e+"CollectionConsumer",g);return ie.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const y=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((_,N)=>y.indexOf(_.ref.current)-y.indexOf(N.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:u,ItemSlot:f},b,r]}var d2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xe=d2.reduce((e,t)=>{const n=Da(`Primitive.${t}`),r=m.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Lb(e,t){e&&Mi.flushSync(()=>e.dispatchEvent(t))}function An(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function h2(e,t=globalThis==null?void 0:globalThis.document){const n=An(e);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var f2="DismissableLayer",Df="dismissableLayer.update",m2="dismissableLayer.pointerDownOutside",p2="dismissableLayer.focusOutside",tv,Mb=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Cl=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,u=m.useContext(Mb),[d,h]=m.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=m.useState({}),b=Me(t,N=>h(N)),g=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(w),v=d?g.indexOf(d):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,j=v>=x,S=x2(N=>{const C=N.target,A=[...u.branches].some(R=>R.contains(C));!j||A||(s==null||s(N),o==null||o(N),N.defaultPrevented||l==null||l())},p),_=v2(N=>{const C=N.target;[...u.branches].some(R=>R.contains(C))||(a==null||a(N),o==null||o(N),N.defaultPrevented||l==null||l())},p);return h2(N=>{v===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),m.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(tv=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),nv(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=tv)}},[d,p,n,u]),m.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),nv())},[d,u]),m.useEffect(()=>{const N=()=>f({});return document.addEventListener(Df,N),()=>document.removeEventListener(Df,N)},[]),i.jsx(xe.div,{...c,ref:b,style:{pointerEvents:y?j?"auto":"none":void 0,...e.style},onFocusCapture:pe(e.onFocusCapture,_.onFocusCapture),onBlurCapture:pe(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:pe(e.onPointerDownCapture,S.onPointerDownCapture)})});Cl.displayName=f2;var g2="DismissableLayerBranch",Db=m.forwardRef((e,t)=>{const n=m.useContext(Mb),r=m.useRef(null),s=Me(t,r);return m.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(xe.div,{...e,ref:s})});Db.displayName=g2;function x2(e,t=globalThis==null?void 0:globalThis.document){const n=An(e),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){Fb(m2,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function v2(e,t=globalThis==null?void 0:globalThis.document){const n=An(e),r=m.useRef(!1);return m.useEffect(()=>{const s=a=>{a.target&&!r.current&&Fb(p2,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function nv(){const e=new CustomEvent(Df);document.dispatchEvent(e)}function Fb(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Lb(s,a):s.dispatchEvent(a)}var y2=Cl,w2=Db,Nt=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},b2="Portal",Hu=m.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,a]=m.useState(!1);Nt(()=>a(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Rb.createPortal(i.jsx(xe.div,{...r,ref:t}),o):null});Hu.displayName=b2;function j2(e,t){return m.useReducer((n,r)=>t[n][r]??n,e)}var is=e=>{const{present:t,children:n}=e,r=_2(t),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),a=Me(r.ref,S2(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:a}):null};is.displayName="Presence";function _2(e){const[t,n]=m.useState(),r=m.useRef(null),s=m.useRef(e),a=m.useRef("none"),o=e?"mounted":"unmounted",[l,c]=j2(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=sc(r.current);a.current=l==="mounted"?u:"none"},[l]),Nt(()=>{const u=r.current,d=s.current;if(d!==e){const p=a.current,f=sc(u);e?c("MOUNT"):f==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&p!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Nt(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=f=>{const g=sc(r.current).includes(f.animationName);if(f.target===t&&g&&(c("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},p=f=>{f.target===t&&(a.current=sc(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function sc(e){return(e==null?void 0:e.animationName)||"none"}function S2(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var N2=Vm[" useInsertionEffect ".trim().toString()]||Nt;function Ar({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,o]=k2({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const d=m.useRef(e!==void 0);m.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=m.useCallback(d=>{var h;if(l){const p=C2(d)?d(e):d;p!==e&&((h=o.current)==null||h.call(o,p))}else a(d)},[l,e,a,o]);return[c,u]}function k2({defaultProp:e,onChange:t}){const[n,r]=m.useState(e),s=m.useRef(n),a=m.useRef(t);return N2(()=>{a.current=t},[t]),m.useEffect(()=>{var o;s.current!==n&&((o=a.current)==null||o.call(a,n),s.current=n)},[n,s]),[n,r,a]}function C2(e){return typeof e=="function"}var $b=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),E2="VisuallyHidden",Gu=m.forwardRef((e,t)=>i.jsx(xe.span,{...e,ref:t,style:{...$b,...e.style}}));Gu.displayName=E2;var P2=Gu,Lp="ToastProvider",[Mp,T2,R2]=Op("Toast"),[zb,rB]=yn("Toast",[R2]),[A2,Ku]=zb(Lp),Ub=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=e,[l,c]=m.useState(null),[u,d]=m.useState(0),h=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Lp}\`. Expected non-empty \`string\`.`),i.jsx(Mp.Provider,{scope:t,children:i.jsx(A2,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>d(f=>f+1),[]),onToastRemove:m.useCallback(()=>d(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};Ub.displayName=Lp;var Bb="ToastViewport",I2=["F8"],Ff="toast.viewportPause",$f="toast.viewportResume",Vb=m.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=I2,label:s="Notifications ({hotkey})",...a}=e,o=Ku(Bb,n),l=T2(n),c=m.useRef(null),u=m.useRef(null),d=m.useRef(null),h=m.useRef(null),p=Me(t,h,o.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;m.useEffect(()=>{const w=x=>{var y;r.length!==0&&r.every(j=>x[j]||x.code===j)&&((y=h.current)==null||y.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),m.useEffect(()=>{const w=c.current,x=h.current;if(b&&w&&x){const v=()=>{if(!o.isClosePausedRef.current){const _=new CustomEvent(Ff);x.dispatchEvent(_),o.isClosePausedRef.current=!0}},y=()=>{if(o.isClosePausedRef.current){const _=new CustomEvent($f);x.dispatchEvent(_),o.isClosePausedRef.current=!1}},j=_=>{!w.contains(_.relatedTarget)&&y()},S=()=>{w.contains(document.activeElement)||y()};return w.addEventListener("focusin",v),w.addEventListener("focusout",j),w.addEventListener("pointermove",v),w.addEventListener("pointerleave",S),window.addEventListener("blur",v),window.addEventListener("focus",y),()=>{w.removeEventListener("focusin",v),w.removeEventListener("focusout",j),w.removeEventListener("pointermove",v),w.removeEventListener("pointerleave",S),window.removeEventListener("blur",v),window.removeEventListener("focus",y)}}},[b,o.isClosePausedRef]);const g=m.useCallback(({tabbingDirection:w})=>{const v=l().map(y=>{const j=y.ref.current,S=[j,...H2(j)];return w==="forwards"?S:S.reverse()});return(w==="forwards"?v.reverse():v).flat()},[l]);return m.useEffect(()=>{const w=h.current;if(w){const x=v=>{var S,_,N;const y=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!y){const C=document.activeElement,A=v.shiftKey;if(v.target===w&&A){(S=u.current)==null||S.focus();return}const T=g({tabbingDirection:A?"backwards":"forwards"}),z=T.findIndex(I=>I===C);ch(T.slice(z+1))?v.preventDefault():A?(_=u.current)==null||_.focus():(N=d.current)==null||N.focus()}};return w.addEventListener("keydown",x),()=>w.removeEventListener("keydown",x)}},[l,g]),i.jsxs(w2,{ref:c,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&i.jsx(zf,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});ch(w)}}),i.jsx(Mp.Slot,{scope:n,children:i.jsx(xe.ol,{tabIndex:-1,...a,ref:p})}),b&&i.jsx(zf,{ref:d,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});ch(w)}})]})});Vb.displayName=Bb;var qb="ToastFocusProxy",zf=m.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,a=Ku(qb,n);return i.jsx(Gu,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&r()}})});zf.displayName=qb;var El="Toast",O2="toast.swipeStart",L2="toast.swipeMove",M2="toast.swipeCancel",D2="toast.swipeEnd",Wb=m.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...o}=e,[l,c]=Ar({prop:r,defaultProp:s??!0,onChange:a,caller:El});return i.jsx(is,{present:n||l,children:i.jsx(z2,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:An(e.onPause),onResume:An(e.onResume),onSwipeStart:pe(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:pe(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Wb.displayName=El;var[F2,$2]=zb(El,{onClose(){}}),z2=m.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:f,...b}=e,g=Ku(El,n),[w,x]=m.useState(null),v=Me(t,I=>x(I)),y=m.useRef(null),j=m.useRef(null),S=s||g.duration,_=m.useRef(0),N=m.useRef(S),C=m.useRef(0),{onToastAdd:A,onToastRemove:R}=g,O=An(()=>{var B;(w==null?void 0:w.contains(document.activeElement))&&((B=g.viewport)==null||B.focus()),o()}),T=m.useCallback(I=>{!I||I===1/0||(window.clearTimeout(C.current),_.current=new Date().getTime(),C.current=window.setTimeout(O,I))},[O]);m.useEffect(()=>{const I=g.viewport;if(I){const B=()=>{T(N.current),u==null||u()},$=()=>{const L=new Date().getTime()-_.current;N.current=N.current-L,window.clearTimeout(C.current),c==null||c()};return I.addEventListener(Ff,$),I.addEventListener($f,B),()=>{I.removeEventListener(Ff,$),I.removeEventListener($f,B)}}},[g.viewport,S,c,u,T]),m.useEffect(()=>{a&&!g.isClosePausedRef.current&&T(S)},[a,S,g.isClosePausedRef,T]),m.useEffect(()=>(A(),()=>R()),[A,R]);const z=m.useMemo(()=>w?Jb(w):null,[w]);return g.viewport?i.jsxs(i.Fragment,{children:[z&&i.jsx(U2,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),i.jsx(F2,{scope:n,onClose:O,children:Mi.createPortal(i.jsx(Mp.ItemSlot,{scope:n,children:i.jsx(y2,{asChild:!0,onEscapeKeyDown:pe(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||O(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(xe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...b,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:pe(e.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:pe(e.onPointerDown,I=>{I.button===0&&(y.current={x:I.clientX,y:I.clientY})}),onPointerMove:pe(e.onPointerMove,I=>{if(!y.current)return;const B=I.clientX-y.current.x,$=I.clientY-y.current.y,L=!!j.current,D=["left","right"].includes(g.swipeDirection),E=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,k=D?E(0,B):0,F=D?0:E(0,$),H=I.pointerType==="touch"?10:2,P={x:k,y:F},q={originalEvent:I,delta:P};L?(j.current=P,ic(L2,h,q,{discrete:!1})):rv(P,g.swipeDirection,H)?(j.current=P,ic(O2,d,q,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(B)>H||Math.abs($)>H)&&(y.current=null)}),onPointerUp:pe(e.onPointerUp,I=>{const B=j.current,$=I.target;if($.hasPointerCapture(I.pointerId)&&$.releasePointerCapture(I.pointerId),j.current=null,y.current=null,B){const L=I.currentTarget,D={originalEvent:I,delta:B};rv(B,g.swipeDirection,g.swipeThreshold)?ic(D2,f,D,{discrete:!0}):ic(M2,p,D,{discrete:!0}),L.addEventListener("click",E=>E.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),U2=e=>{const{__scopeToast:t,children:n,...r}=e,s=Ku(El,t),[a,o]=m.useState(!1),[l,c]=m.useState(!1);return q2(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(Hu,{asChild:!0,children:i.jsx(Gu,{...r,children:a&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},B2="ToastTitle",Hb=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(xe.div,{...r,ref:t})});Hb.displayName=B2;var V2="ToastDescription",Gb=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(xe.div,{...r,ref:t})});Gb.displayName=V2;var Kb="ToastAction",Qb=m.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?i.jsx(Xb,{altText:n,asChild:!0,children:i.jsx(Dp,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Kb}\`. Expected non-empty \`string\`.`),null)});Qb.displayName=Kb;var Yb="ToastClose",Dp=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=$2(Yb,n);return i.jsx(Xb,{asChild:!0,children:i.jsx(xe.button,{type:"button",...r,ref:t,onClick:pe(e.onClick,s.onClose)})})});Dp.displayName=Yb;var Xb=m.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return i.jsx(xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function Jb(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),W2(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...Jb(r))}}),t}function ic(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Lb(s,a):s.dispatchEvent(a)}var rv=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),a=r>s;return t==="left"||t==="right"?a&&r>n:!a&&s>n};function q2(e=()=>{}){const t=An(e);Nt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function W2(e){return e.nodeType===e.ELEMENT_NODE}function H2(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ch(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var G2=Ub,Zb=Vb,ej=Wb,tj=Hb,nj=Gb,rj=Qb,sj=Dp;function ij(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=ij(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function aj(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=ij(e))&&(r&&(r+=" "),r+=t);return r}const sv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,iv=aj,Di=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return iv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=t,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=a==null?void 0:a[u];if(d===null)return null;const p=sv(d)||sv(h);return s[u][p]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,p]=d;return p===void 0||(u[h]=p),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:p,...f}=d;return Object.entries(f).every(b=>{let[g,w]=b;return Array.isArray(w)?w.includes({...a,...l}[g]):{...a,...l}[g]===w})?[...u,h,p]:u},[]);return iv(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oj=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y2=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},c)=>m.createElement("svg",{ref:c,...Q2,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:oj("lucide",s),...l},[...o.map(([u,d])=>m.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(e,t)=>{const n=m.forwardRef(({className:r,...s},a)=>m.createElement(Y2,{ref:a,iconNode:t,className:oj(`lucide-${K2(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=be("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=be("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=be("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J2=be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=be("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=be("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=be("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=be("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=be("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=be("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=be("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=be("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=be("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=be("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=be("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=be("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=be("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=be("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=be("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=be("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=be("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=be("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=be("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=be("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=be("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=be("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=be("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=be("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=be("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zp="-",dP=e=>{const t=fP(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(zp);return l[0]===""&&l.length!==1&&l.shift(),yj(l,t)||hP(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},yj=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?yj(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(zp);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},dv=/^\[(.+)\]$/,hP=e=>{if(dv.test(e)){const t=dv.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},fP=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return pP(Object.entries(e.classGroups),n).forEach(([a,o])=>{Bf(o,r,a,t)}),r},Bf=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:hv(t,s);a.classGroupId=n;return}if(typeof s=="function"){if(mP(s)){Bf(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{Bf(o,hv(t,a),n,r)})})},hv=(e,t)=>{let n=e;return t.split(zp).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},mP=e=>e.isThemeGetter,pP=(e,t)=>t?e.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[n,s]}):e,gP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},wj="!",xP=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],a=t.length,o=l=>{const c=[];let u=0,d=0,h;for(let w=0;w<l.length;w++){let x=l[w];if(u===0){if(x===s&&(r||l.slice(w,w+a)===t)){c.push(l.slice(d,w)),d=w+a;continue}if(x==="/"){h=w;continue}}x==="["?u++:x==="]"&&u--}const p=c.length===0?l:l.substring(d),f=p.startsWith(wj),b=f?p.substring(1):p,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:b,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},vP=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},yP=e=>({cache:gP(e.cacheSize),parseClassName:xP(e),...dP(e)}),wP=/\s+/,bP=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,a=[],o=e.trim().split(wP);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:f}=n(u);let b=!!f,g=r(b?p.substring(0,f):p);if(!g){if(!b){l=u+(l.length>0?" "+l:l);continue}if(g=r(p),!g){l=u+(l.length>0?" "+l:l);continue}b=!1}const w=vP(d).join(":"),x=h?w+wj:w,v=x+g;if(a.includes(v))continue;a.push(v);const y=s(g,b);for(let j=0;j<y.length;++j){const S=y[j];a.push(x+S)}l=u+(l.length>0?" "+l:l)}return l};function jP(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=bj(t))&&(r&&(r+=" "),r+=n);return r}const bj=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=bj(e[r]))&&(n&&(n+=" "),n+=t);return n};function _P(e,...t){let n,r,s,a=o;function o(c){const u=t.reduce((d,h)=>h(d),e());return n=yP(u),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=bP(c,n);return s(c,d),d}return function(){return a(jP.apply(null,arguments))}}const et=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},jj=/^\[(?:([a-z-]+):)?(.+)\]$/i,SP=/^\d+\/\d+$/,NP=new Set(["px","full","screen"]),kP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,EP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,PP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,TP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fr=e=>ga(e)||NP.has(e)||SP.test(e),hs=e=>Ka(e,"length",FP),ga=e=>!!e&&!Number.isNaN(Number(e)),uh=e=>Ka(e,"number",ga),xo=e=>!!e&&Number.isInteger(Number(e)),RP=e=>e.endsWith("%")&&ga(e.slice(0,-1)),Pe=e=>jj.test(e),fs=e=>kP.test(e),AP=new Set(["length","size","percentage"]),IP=e=>Ka(e,AP,_j),OP=e=>Ka(e,"position",_j),LP=new Set(["image","url"]),MP=e=>Ka(e,LP,zP),DP=e=>Ka(e,"",$P),vo=()=>!0,Ka=(e,t,n)=>{const r=jj.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},FP=e=>CP.test(e)&&!EP.test(e),_j=()=>!1,$P=e=>PP.test(e),zP=e=>TP.test(e),UP=()=>{const e=et("colors"),t=et("spacing"),n=et("blur"),r=et("brightness"),s=et("borderColor"),a=et("borderRadius"),o=et("borderSpacing"),l=et("borderWidth"),c=et("contrast"),u=et("grayscale"),d=et("hueRotate"),h=et("invert"),p=et("gap"),f=et("gradientColorStops"),b=et("gradientColorStopPositions"),g=et("inset"),w=et("margin"),x=et("opacity"),v=et("padding"),y=et("saturate"),j=et("scale"),S=et("sepia"),_=et("skew"),N=et("space"),C=et("translate"),A=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Pe,t],T=()=>[Pe,t],z=()=>["",Fr,hs],I=()=>["auto",ga,Pe],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],E=()=>["","0",Pe],k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[ga,Pe];return{cacheSize:500,separator:":",theme:{colors:[vo],spacing:[Fr,hs],blur:["none","",fs,Pe],brightness:F(),borderColor:[e],borderRadius:["none","","full",fs,Pe],borderSpacing:T(),borderWidth:z(),contrast:F(),grayscale:E(),hueRotate:F(),invert:E(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[RP,hs],inset:O(),margin:O(),opacity:F(),padding:T(),saturate:F(),scale:F(),sepia:E(),skew:F(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",Pe]}],container:["container"],columns:[{columns:[fs]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),Pe]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",xo,Pe]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pe]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",xo,Pe]}],"grid-cols":[{"grid-cols":[vo]}],"col-start-end":[{col:["auto",{span:["full",xo,Pe]},Pe]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[vo]}],"row-start-end":[{row:["auto",{span:[xo,Pe]},Pe]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pe,t]}],"min-w":[{"min-w":[Pe,t,"min","max","fit"]}],"max-w":[{"max-w":[Pe,t,"none","full","min","max","fit","prose",{screen:[fs]},fs]}],h:[{h:[Pe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",fs,hs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",uh]}],"font-family":[{font:[vo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pe]}],"line-clamp":[{"line-clamp":["none",ga,uh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Fr,Pe]}],"list-image":[{"list-image":["none",Pe]}],"list-style-type":[{list:["none","disc","decimal",Pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Fr,hs]}],"underline-offset":[{"underline-offset":["auto",Fr,Pe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),OP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",IP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},MP]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:$()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[Fr,Pe]}],"outline-w":[{outline:[Fr,hs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Fr,hs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",fs,DP]}],"shadow-color":[{shadow:[vo]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",fs,Pe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[y]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pe]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",Pe]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[xo,Pe]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Fr,hs,uh]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},BP=_P(UP);function oe(...e){return BP(aj(e))}const VP=G2,Sj=m.forwardRef(({className:e,...t},n)=>i.jsx(Zb,{ref:n,className:oe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Sj.displayName=Zb.displayName;const qP=Di("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Nj=m.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(ej,{ref:r,className:oe(qP({variant:t}),e),...n}));Nj.displayName=ej.displayName;const WP=m.forwardRef(({className:e,...t},n)=>i.jsx(rj,{ref:n,className:oe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));WP.displayName=rj.displayName;const kj=m.forwardRef(({className:e,...t},n)=>i.jsx(sj,{ref:n,className:oe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(Ga,{className:"h-4 w-4"})}));kj.displayName=sj.displayName;const Cj=m.forwardRef(({className:e,...t},n)=>i.jsx(tj,{ref:n,className:oe("text-sm font-semibold",e),...t}));Cj.displayName=tj.displayName;const Ej=m.forwardRef(({className:e,...t},n)=>i.jsx(nj,{ref:n,className:oe("text-sm opacity-90",e),...t}));Ej.displayName=nj.displayName;function HP(){const{toasts:e}=Ve();return i.jsxs(VP,{children:[e.map(function({id:t,title:n,description:r,action:s,...a}){return i.jsxs(Nj,{...a,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(Cj,{children:n}),r&&i.jsx(Ej,{children:r})]}),s,i.jsx(kj,{})]},t)}),i.jsx(Sj,{})]})}var fv=["light","dark"],GP="(prefers-color-scheme: dark)",KP=m.createContext(void 0),QP={setTheme:e=>{},themes:[]},YP=()=>{var e;return(e=m.useContext(KP))!=null?e:QP};m.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?fv.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(b,g=!1,w=!0)=>{let x=o?o[b]:b,v=g?b+"|| ''":`'${x}'`,y="";return s&&w&&!g&&fv.includes(b)&&(y+=`d.style.colorScheme = '${b}';`),n==="class"?g||x?y+=`c.add(${v})`:y+="null":x&&(y+=`d[s](n,${v})`),y},f=e?`!function(){${d}${p(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${GP}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${u?"":"else{"+p(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(a,!1,!1)};}${h}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});var XP=e=>{switch(e){case"success":return eT;case"info":return nT;case"warning":return tT;case"error":return rT;default:return null}},JP=Array(12).fill(0),ZP=({visible:e,className:t})=>ie.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},ie.createElement("div",{className:"sonner-spinner"},JP.map((n,r)=>ie.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),eT=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),tT=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),nT=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),rT=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),sT=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ie.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ie.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),iT=()=>{let[e,t]=ie.useState(document.hidden);return ie.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Vf=1,aT=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Vf++,a=this.toasts.find(l=>l.id===s),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:n}),{...l,...e,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0,a,o=r.then(async c=>{if(a=["resolve",c],ie.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(lT(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(a=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Vf++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},un=new aT,oT=(e,t)=>{let n=(t==null?void 0:t.id)||Vf++;return un.addToast({title:e,...t,id:n}),n},lT=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",cT=oT,uT=()=>un.toasts,dT=()=>un.getActiveToasts();Object.assign(cT,{success:un.success,info:un.info,warning:un.warning,error:un.error,custom:un.custom,message:un.message,promise:un.promise,dismiss:un.dismiss,loading:un.loading},{getHistory:uT,getToasts:dT});function hT(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}hT(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function ac(e){return e.label!==void 0}var fT=3,mT="32px",pT="16px",mv=4e3,gT=356,xT=14,vT=20,yT=200;function Qn(...e){return e.filter(Boolean).join(" ")}function wT(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var bT=e=>{var t,n,r,s,a,o,l,c,u,d,h;let{invert:p,toast:f,unstyled:b,interacting:g,setHeights:w,visibleToasts:x,heights:v,index:y,toasts:j,expanded:S,removeToast:_,defaultRichColors:N,closeButton:C,style:A,cancelButtonStyle:R,actionButtonStyle:O,className:T="",descriptionClassName:z="",duration:I,position:B,gap:$,loadingIcon:L,expandByDefault:D,classNames:E,icons:k,closeButtonAriaLabel:F="Close toast",pauseWhenPageIsHidden:H}=e,[P,q]=ie.useState(null),[de,le]=ie.useState(null),[Y,re]=ie.useState(!1),[fe,Z]=ie.useState(!1),[U,ce]=ie.useState(!1),[ge,ne]=ie.useState(!1),[me,He]=ie.useState(!1),[Re,ct]=ie.useState(0),[Ge,xt]=ie.useState(0),bt=ie.useRef(f.duration||I||mv),Ue=ie.useRef(null),It=ie.useRef(null),pr=y===0,Ln=y+1<=x,W=f.type,ee=f.dismissible!==!1,se=f.className||"",ae=f.descriptionClassName||"",Se=ie.useMemo(()=>v.findIndex(je=>je.toastId===f.id)||0,[v,f.id]),$e=ie.useMemo(()=>{var je;return(je=f.closeButton)!=null?je:C},[f.closeButton,C]),Kt=ie.useMemo(()=>f.duration||I||mv,[f.duration,I]),Qt=ie.useRef(0),ln=ie.useRef(0),Mn=ie.useRef(0),mt=ie.useRef(null),[Yt,Xt]=B.split("-"),io=ie.useMemo(()=>v.reduce((je,De,Ke)=>Ke>=Se?je:je+De.height,0),[v,Se]),ao=iT(),Fl=f.invert||p,oo=W==="loading";ln.current=ie.useMemo(()=>Se*$+io,[Se,io]),ie.useEffect(()=>{bt.current=Kt},[Kt]),ie.useEffect(()=>{re(!0)},[]),ie.useEffect(()=>{let je=It.current;if(je){let De=je.getBoundingClientRect().height;return xt(De),w(Ke=>[{toastId:f.id,height:De,position:f.position},...Ke]),()=>w(Ke=>Ke.filter(bn=>bn.toastId!==f.id))}},[w,f.id]),ie.useLayoutEffect(()=>{if(!Y)return;let je=It.current,De=je.style.height;je.style.height="auto";let Ke=je.getBoundingClientRect().height;je.style.height=De,xt(Ke),w(bn=>bn.find(Jt=>Jt.toastId===f.id)?bn.map(Jt=>Jt.toastId===f.id?{...Jt,height:Ke}:Jt):[{toastId:f.id,height:Ke,position:f.position},...bn])},[Y,f.title,f.description,w,f.id]);let gr=ie.useCallback(()=>{Z(!0),ct(ln.current),w(je=>je.filter(De=>De.toastId!==f.id)),setTimeout(()=>{_(f)},yT)},[f,_,w,ln]);ie.useEffect(()=>{if(f.promise&&W==="loading"||f.duration===1/0||f.type==="loading")return;let je;return S||g||H&&ao?(()=>{if(Mn.current<Qt.current){let De=new Date().getTime()-Qt.current;bt.current=bt.current-De}Mn.current=new Date().getTime()})():bt.current!==1/0&&(Qt.current=new Date().getTime(),je=setTimeout(()=>{var De;(De=f.onAutoClose)==null||De.call(f,f),gr()},bt.current)),()=>clearTimeout(je)},[S,g,f,W,H,ao,gr]),ie.useEffect(()=>{f.delete&&gr()},[gr,f.delete]);function ls(){var je,De,Ke;return k!=null&&k.loading?ie.createElement("div",{className:Qn(E==null?void 0:E.loader,(je=f==null?void 0:f.classNames)==null?void 0:je.loader,"sonner-loader"),"data-visible":W==="loading"},k.loading):L?ie.createElement("div",{className:Qn(E==null?void 0:E.loader,(De=f==null?void 0:f.classNames)==null?void 0:De.loader,"sonner-loader"),"data-visible":W==="loading"},L):ie.createElement(ZP,{className:Qn(E==null?void 0:E.loader,(Ke=f==null?void 0:f.classNames)==null?void 0:Ke.loader),visible:W==="loading"})}return ie.createElement("li",{tabIndex:0,ref:It,className:Qn(T,se,E==null?void 0:E.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,E==null?void 0:E.default,E==null?void 0:E[W],(n=f==null?void 0:f.classNames)==null?void 0:n[W]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:N,"data-styled":!(f.jsx||f.unstyled||b),"data-mounted":Y,"data-promise":!!f.promise,"data-swiped":me,"data-removed":fe,"data-visible":Ln,"data-y-position":Yt,"data-x-position":Xt,"data-index":y,"data-front":pr,"data-swiping":U,"data-dismissible":ee,"data-type":W,"data-invert":Fl,"data-swipe-out":ge,"data-swipe-direction":de,"data-expanded":!!(S||D&&Y),style:{"--index":y,"--toasts-before":y,"--z-index":j.length-y,"--offset":`${fe?Re:ln.current}px`,"--initial-height":D?"auto":`${Ge}px`,...A,...f.style},onDragEnd:()=>{ce(!1),q(null),mt.current=null},onPointerDown:je=>{oo||!ee||(Ue.current=new Date,ct(ln.current),je.target.setPointerCapture(je.pointerId),je.target.tagName!=="BUTTON"&&(ce(!0),mt.current={x:je.clientX,y:je.clientY}))},onPointerUp:()=>{var je,De,Ke,bn;if(ge||!ee)return;mt.current=null;let Jt=Number(((je=It.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),jn=Number(((De=It.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Dr=new Date().getTime()-((Ke=Ue.current)==null?void 0:Ke.getTime()),_n=P==="x"?Jt:jn,xr=Math.abs(_n)/Dr;if(Math.abs(_n)>=vT||xr>.11){ct(ln.current),(bn=f.onDismiss)==null||bn.call(f,f),le(P==="x"?Jt>0?"right":"left":jn>0?"down":"up"),gr(),ne(!0),He(!1);return}ce(!1),q(null)},onPointerMove:je=>{var De,Ke,bn,Jt;if(!mt.current||!ee||((De=window.getSelection())==null?void 0:De.toString().length)>0)return;let jn=je.clientY-mt.current.y,Dr=je.clientX-mt.current.x,_n=(Ke=e.swipeDirections)!=null?Ke:wT(B);!P&&(Math.abs(Dr)>1||Math.abs(jn)>1)&&q(Math.abs(Dr)>Math.abs(jn)?"x":"y");let xr={x:0,y:0};P==="y"?(_n.includes("top")||_n.includes("bottom"))&&(_n.includes("top")&&jn<0||_n.includes("bottom")&&jn>0)&&(xr.y=jn):P==="x"&&(_n.includes("left")||_n.includes("right"))&&(_n.includes("left")&&Dr<0||_n.includes("right")&&Dr>0)&&(xr.x=Dr),(Math.abs(xr.x)>0||Math.abs(xr.y)>0)&&He(!0),(bn=It.current)==null||bn.style.setProperty("--swipe-amount-x",`${xr.x}px`),(Jt=It.current)==null||Jt.style.setProperty("--swipe-amount-y",`${xr.y}px`)}},$e&&!f.jsx?ie.createElement("button",{"aria-label":F,"data-disabled":oo,"data-close-button":!0,onClick:oo||!ee?()=>{}:()=>{var je;gr(),(je=f.onDismiss)==null||je.call(f,f)},className:Qn(E==null?void 0:E.closeButton,(s=f==null?void 0:f.classNames)==null?void 0:s.closeButton)},(a=k==null?void 0:k.close)!=null?a:sT):null,f.jsx||m.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:ie.createElement(ie.Fragment,null,W||f.icon||f.promise?ie.createElement("div",{"data-icon":"",className:Qn(E==null?void 0:E.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||ls():null,f.type!=="loading"?f.icon||(k==null?void 0:k[W])||XP(W):null):null,ie.createElement("div",{"data-content":"",className:Qn(E==null?void 0:E.content,(l=f==null?void 0:f.classNames)==null?void 0:l.content)},ie.createElement("div",{"data-title":"",className:Qn(E==null?void 0:E.title,(c=f==null?void 0:f.classNames)==null?void 0:c.title)},typeof f.title=="function"?f.title():f.title),f.description?ie.createElement("div",{"data-description":"",className:Qn(z,ae,E==null?void 0:E.description,(u=f==null?void 0:f.classNames)==null?void 0:u.description)},typeof f.description=="function"?f.description():f.description):null),m.isValidElement(f.cancel)?f.cancel:f.cancel&&ac(f.cancel)?ie.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||R,onClick:je=>{var De,Ke;ac(f.cancel)&&ee&&((Ke=(De=f.cancel).onClick)==null||Ke.call(De,je),gr())},className:Qn(E==null?void 0:E.cancelButton,(d=f==null?void 0:f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,m.isValidElement(f.action)?f.action:f.action&&ac(f.action)?ie.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||O,onClick:je=>{var De,Ke;ac(f.action)&&((Ke=(De=f.action).onClick)==null||Ke.call(De,je),!je.defaultPrevented&&gr())},className:Qn(E==null?void 0:E.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function pv(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function jT(e,t){let n={};return[e,t].forEach((r,s)=>{let a=s===1,o=a?"--mobile-offset":"--offset",l=a?pT:mT;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var _T=m.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:p,style:f,visibleToasts:b=fT,toastOptions:g,dir:w=pv(),gap:x=xT,loadingIcon:v,icons:y,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:S}=e,[_,N]=ie.useState([]),C=ie.useMemo(()=>Array.from(new Set([r].concat(_.filter(H=>H.position).map(H=>H.position)))),[_,r]),[A,R]=ie.useState([]),[O,T]=ie.useState(!1),[z,I]=ie.useState(!1),[B,$]=ie.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=ie.useRef(null),D=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=ie.useRef(null),k=ie.useRef(!1),F=ie.useCallback(H=>{N(P=>{var q;return(q=P.find(de=>de.id===H.id))!=null&&q.delete||un.dismiss(H.id),P.filter(({id:de})=>de!==H.id)})},[]);return ie.useEffect(()=>un.subscribe(H=>{if(H.dismiss){N(P=>P.map(q=>q.id===H.id?{...q,delete:!0}:q));return}setTimeout(()=>{Rb.flushSync(()=>{N(P=>{let q=P.findIndex(de=>de.id===H.id);return q!==-1?[...P.slice(0,q),{...P[q],...H},...P.slice(q+1)]:[H,...P]})})})}),[]),ie.useEffect(()=>{if(d!=="system"){$(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:P})=>{$(P?"dark":"light")})}catch{H.addListener(({matches:q})=>{try{$(q?"dark":"light")}catch(de){console.error(de)}})}},[d]),ie.useEffect(()=>{_.length<=1&&T(!1)},[_]),ie.useEffect(()=>{let H=P=>{var q,de;s.every(le=>P[le]||P.code===le)&&(T(!0),(q=L.current)==null||q.focus()),P.code==="Escape"&&(document.activeElement===L.current||(de=L.current)!=null&&de.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[s]),ie.useEffect(()=>{if(L.current)return()=>{E.current&&(E.current.focus({preventScroll:!0}),E.current=null,k.current=!1)}},[L.current]),ie.createElement("section",{ref:t,"aria-label":`${j} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((H,P)=>{var q;let[de,le]=H.split("-");return _.length?ie.createElement("ol",{key:H,dir:w==="auto"?pv():w,tabIndex:-1,ref:L,className:l,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":de,"data-lifted":O&&_.length>1&&!a,"data-x-position":le,style:{"--front-toast-height":`${((q=A[0])==null?void 0:q.height)||0}px`,"--width":`${gT}px`,"--gap":`${x}px`,...f,...jT(c,u)},onBlur:Y=>{k.current&&!Y.currentTarget.contains(Y.relatedTarget)&&(k.current=!1,E.current&&(E.current.focus({preventScroll:!0}),E.current=null))},onFocus:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||k.current||(k.current=!0,E.current=Y.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{z||T(!1)},onDragEnd:()=>T(!1),onPointerDown:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},_.filter(Y=>!Y.position&&P===0||Y.position===H).map((Y,re)=>{var fe,Z;return ie.createElement(bT,{key:Y.id,icons:y,index:re,toast:Y,defaultRichColors:h,duration:(fe=g==null?void 0:g.duration)!=null?fe:p,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:b,closeButton:(Z=g==null?void 0:g.closeButton)!=null?Z:o,interacting:z,position:H,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:F,toasts:_.filter(U=>U.position==Y.position),heights:A.filter(U=>U.position==Y.position),setHeights:R,expandByDefault:a,gap:x,loadingIcon:v,expanded:O,pauseWhenPageIsHidden:S,swipeDirections:e.swipeDirections})})):null}))});const ST=({...e})=>{const{theme:t="system"}=YP();return i.jsx(_T,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var NT=Vm[" useId ".trim().toString()]||(()=>{}),kT=0;function Kr(e){const[t,n]=m.useState(NT());return Nt(()=>{e||n(r=>r??String(kT++))},[e]),e||(t?`radix-${t}`:"")}const CT=["top","right","bottom","left"],qs=Math.min,kn=Math.max,hu=Math.round,oc=Math.floor,Ws=e=>({x:e,y:e}),ET={left:"right",right:"left",bottom:"top",top:"bottom"},PT={start:"end",end:"start"};function qf(e,t,n){return kn(e,qs(t,n))}function es(e,t){return typeof e=="function"?e(t):e}function ts(e){return e.split("-")[0]}function Qa(e){return e.split("-")[1]}function Up(e){return e==="x"?"y":"x"}function Bp(e){return e==="y"?"height":"width"}function Hs(e){return["top","bottom"].includes(ts(e))?"y":"x"}function Vp(e){return Up(Hs(e))}function TT(e,t,n){n===void 0&&(n=!1);const r=Qa(e),s=Vp(e),a=Bp(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=fu(o)),[o,fu(o)]}function RT(e){const t=fu(e);return[Wf(e),t,Wf(t)]}function Wf(e){return e.replace(/start|end/g,t=>PT[t])}function AT(e,t,n){const r=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?a:o;default:return[]}}function IT(e,t,n,r){const s=Qa(e);let a=AT(ts(e),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),t&&(a=a.concat(a.map(Wf)))),a}function fu(e){return e.replace(/left|right|bottom|top/g,t=>ET[t])}function OT(e){return{top:0,right:0,bottom:0,left:0,...e}}function Pj(e){return typeof e!="number"?OT(e):{top:e,right:e,bottom:e,left:e}}function mu(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function gv(e,t,n){let{reference:r,floating:s}=e;const a=Hs(t),o=Vp(t),l=Bp(o),c=ts(t),u=a==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let f;switch(c){case"top":f={x:d,y:r.y-s.height};break;case"bottom":f={x:d,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-s.width,y:h};break;default:f={x:r.x,y:r.y}}switch(Qa(t)){case"start":f[o]-=p*(n&&u?-1:1);break;case"end":f[o]+=p*(n&&u?-1:1);break}return f}const LT=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:h}=gv(u,r,c),p=r,f={},b=0;for(let g=0;g<l.length;g++){const{name:w,fn:x}=l[g],{x:v,y,data:j,reset:S}=await x({x:d,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:f,rects:u,platform:o,elements:{reference:e,floating:t}});d=v??d,h=y??h,f={...f,[w]:{...f[w],...j}},S&&b<=50&&(b++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:d,y:h}=gv(u,p,c)),g=-1)}return{x:d,y:h,placement:p,strategy:s,middlewareData:f}};async function ul(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:f=0}=es(t,e),b=Pj(f),w=l[p?h==="floating"?"reference":"floating":h],x=mu(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(w)))==null||n?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),v=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,y=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),j=await(a.isElement==null?void 0:a.isElement(y))?await(a.getScale==null?void 0:a.getScale(y))||{x:1,y:1}:{x:1,y:1},S=mu(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:y,strategy:c}):v);return{top:(x.top-S.top+b.top)/j.y,bottom:(S.bottom-x.bottom+b.bottom)/j.y,left:(x.left-S.left+b.left)/j.x,right:(S.right-x.right+b.right)/j.x}}const MT=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=es(e,t)||{};if(u==null)return{};const h=Pj(d),p={x:n,y:r},f=Vp(s),b=Bp(f),g=await o.getDimensions(u),w=f==="y",x=w?"top":"left",v=w?"bottom":"right",y=w?"clientHeight":"clientWidth",j=a.reference[b]+a.reference[f]-p[f]-a.floating[b],S=p[f]-a.reference[f],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=_?_[y]:0;(!N||!await(o.isElement==null?void 0:o.isElement(_)))&&(N=l.floating[y]||a.floating[b]);const C=j/2-S/2,A=N/2-g[b]/2-1,R=qs(h[x],A),O=qs(h[v],A),T=R,z=N-g[b]-O,I=N/2-g[b]/2+C,B=qf(T,I,z),$=!c.arrow&&Qa(s)!=null&&I!==B&&a.reference[b]/2-(I<T?R:O)-g[b]/2<0,L=$?I<T?I-T:I-z:0;return{[f]:p[f]+L,data:{[f]:B,centerOffset:I-B-L,...$&&{alignmentOffset:L}},reset:$}}}),DT=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:g=!0,...w}=es(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const x=ts(s),v=Hs(l),y=ts(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=p||(y||!g?[fu(l)]:RT(l)),_=b!=="none";!p&&_&&S.push(...IT(l,g,b,j));const N=[l,...S],C=await ul(t,w),A=[];let R=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&A.push(C[x]),h){const I=TT(s,o,j);A.push(C[I[0]],C[I[1]])}if(R=[...R,{placement:s,overflows:A}],!A.every(I=>I<=0)){var O,T;const I=(((O=a.flip)==null?void 0:O.index)||0)+1,B=N[I];if(B)return{data:{index:I,overflows:R},reset:{placement:B}};let $=(T=R.filter(L=>L.overflows[0]<=0).sort((L,D)=>L.overflows[1]-D.overflows[1])[0])==null?void 0:T.placement;if(!$)switch(f){case"bestFit":{var z;const L=(z=R.filter(D=>{if(_){const E=Hs(D.placement);return E===v||E==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(E=>E>0).reduce((E,k)=>E+k,0)]).sort((D,E)=>D[1]-E[1])[0])==null?void 0:z[0];L&&($=L);break}case"initialPlacement":$=l;break}if(s!==$)return{reset:{placement:$}}}return{}}}};function xv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function vv(e){return CT.some(t=>e[t]>=0)}const FT=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=es(e,t);switch(r){case"referenceHidden":{const a=await ul(t,{...s,elementContext:"reference"}),o=xv(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:vv(o)}}}case"escaped":{const a=await ul(t,{...s,altBoundary:!0}),o=xv(a,n.floating);return{data:{escapedOffsets:o,escaped:vv(o)}}}default:return{}}}}};async function $T(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ts(n),l=Qa(n),c=Hs(n)==="y",u=["left","top"].includes(o)?-1:1,d=a&&c?-1:1,h=es(t,e);let{mainAxis:p,crossAxis:f,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof b=="number"&&(f=l==="end"?b*-1:b),c?{x:f*d,y:p*u}:{x:p*u,y:f*d}}const zT=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=t,c=await $T(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},UT=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x,y:v}=w;return{x,y:v}}},...c}=es(e,t),u={x:n,y:r},d=await ul(t,c),h=Hs(ts(s)),p=Up(h);let f=u[p],b=u[h];if(a){const w=p==="y"?"top":"left",x=p==="y"?"bottom":"right",v=f+d[w],y=f-d[x];f=qf(v,f,y)}if(o){const w=h==="y"?"top":"left",x=h==="y"?"bottom":"right",v=b+d[w],y=b-d[x];b=qf(v,b,y)}const g=l.fn({...t,[p]:f,[h]:b});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[p]:a,[h]:o}}}}}},BT=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=es(e,t),d={x:n,y:r},h=Hs(s),p=Up(h);let f=d[p],b=d[h];const g=es(l,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const y=p==="y"?"height":"width",j=a.reference[p]-a.floating[y]+w.mainAxis,S=a.reference[p]+a.reference[y]-w.mainAxis;f<j?f=j:f>S&&(f=S)}if(u){var x,v;const y=p==="y"?"width":"height",j=["top","left"].includes(ts(s)),S=a.reference[h]-a.floating[y]+(j&&((x=o.offset)==null?void 0:x[h])||0)+(j?0:w.crossAxis),_=a.reference[h]+a.reference[y]+(j?0:((v=o.offset)==null?void 0:v[h])||0)-(j?w.crossAxis:0);b<S?b=S:b>_&&(b=_)}return{[p]:f,[h]:b}}}},VT=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...u}=es(e,t),d=await ul(t,u),h=ts(s),p=Qa(s),f=Hs(s)==="y",{width:b,height:g}=a.floating;let w,x;h==="top"||h==="bottom"?(w=h,x=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,w=p==="end"?"top":"bottom");const v=g-d.top-d.bottom,y=b-d.left-d.right,j=qs(g-d[w],v),S=qs(b-d[x],y),_=!t.middlewareData.shift;let N=j,C=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=y),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=v),_&&!p){const R=kn(d.left,0),O=kn(d.right,0),T=kn(d.top,0),z=kn(d.bottom,0);f?C=b-2*(R!==0||O!==0?R+O:kn(d.left,d.right)):N=g-2*(T!==0||z!==0?T+z:kn(d.top,d.bottom))}await c({...t,availableWidth:C,availableHeight:N});const A=await o.getDimensions(l.floating);return b!==A.width||g!==A.height?{reset:{rects:!0}}:{}}}};function Yu(){return typeof window<"u"}function Ya(e){return Tj(e)?(e.nodeName||"").toLowerCase():"#document"}function Tn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Mr(e){var t;return(t=(Tj(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Tj(e){return Yu()?e instanceof Node||e instanceof Tn(e).Node:!1}function hr(e){return Yu()?e instanceof Element||e instanceof Tn(e).Element:!1}function Or(e){return Yu()?e instanceof HTMLElement||e instanceof Tn(e).HTMLElement:!1}function yv(e){return!Yu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Tn(e).ShadowRoot}function Tl(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=fr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function qT(e){return["table","td","th"].includes(Ya(e))}function Xu(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function qp(e){const t=Wp(),n=hr(e)?fr(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function WT(e){let t=Gs(e);for(;Or(t)&&!Fa(t);){if(qp(t))return t;if(Xu(t))return null;t=Gs(t)}return null}function Wp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fa(e){return["html","body","#document"].includes(Ya(e))}function fr(e){return Tn(e).getComputedStyle(e)}function Ju(e){return hr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Gs(e){if(Ya(e)==="html")return e;const t=e.assignedSlot||e.parentNode||yv(e)&&e.host||Mr(e);return yv(t)?t.host:t}function Rj(e){const t=Gs(e);return Fa(t)?e.ownerDocument?e.ownerDocument.body:e.body:Or(t)&&Tl(t)?t:Rj(t)}function dl(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Rj(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),o=Tn(s);if(a){const l=Hf(o);return t.concat(o,o.visualViewport||[],Tl(s)?s:[],l&&n?dl(l):[])}return t.concat(s,dl(s,[],n))}function Hf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Aj(e){const t=fr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Or(e),a=s?e.offsetWidth:n,o=s?e.offsetHeight:r,l=hu(n)!==a||hu(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function Hp(e){return hr(e)?e:e.contextElement}function xa(e){const t=Hp(e);if(!Or(t))return Ws(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=Aj(t);let o=(a?hu(n.width):n.width)/r,l=(a?hu(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const HT=Ws(0);function Ij(e){const t=Tn(e);return!Wp()||!t.visualViewport?HT:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function GT(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Tn(e)?!1:t}function Ti(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=Hp(e);let o=Ws(1);t&&(r?hr(r)&&(o=xa(r)):o=xa(e));const l=GT(a,n,r)?Ij(a):Ws(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(a){const p=Tn(a),f=r&&hr(r)?Tn(r):r;let b=p,g=Hf(b);for(;g&&r&&f!==b;){const w=xa(g),x=g.getBoundingClientRect(),v=fr(g),y=x.left+(g.clientLeft+parseFloat(v.paddingLeft))*w.x,j=x.top+(g.clientTop+parseFloat(v.paddingTop))*w.y;c*=w.x,u*=w.y,d*=w.x,h*=w.y,c+=y,u+=j,b=Tn(g),g=Hf(b)}}return mu({width:d,height:h,x:c,y:u})}function KT(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",o=Mr(r),l=t?Xu(t.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=Ws(1);const d=Ws(0),h=Or(r);if((h||!h&&!a)&&((Ya(r)!=="body"||Tl(o))&&(c=Ju(r)),Or(r))){const p=Ti(r);u=xa(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x,y:n.y*u.y-c.scrollTop*u.y+d.y}}function QT(e){return Array.from(e.getClientRects())}function Gf(e,t){const n=Ju(e).scrollLeft;return t?t.left+n:Ti(Mr(e)).left+n}function YT(e){const t=Mr(e),n=Ju(e),r=e.ownerDocument.body,s=kn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=kn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Gf(e);const l=-n.scrollTop;return fr(r).direction==="rtl"&&(o+=kn(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}function XT(e,t){const n=Tn(e),r=Mr(e),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const u=Wp();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}function JT(e,t){const n=Ti(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=Or(e)?xa(e):Ws(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:o,height:l,x:c,y:u}}function wv(e,t,n){let r;if(t==="viewport")r=XT(e,n);else if(t==="document")r=YT(Mr(e));else if(hr(t))r=JT(t,n);else{const s=Ij(e);r={...t,x:t.x-s.x,y:t.y-s.y}}return mu(r)}function Oj(e,t){const n=Gs(e);return n===t||!hr(n)||Fa(n)?!1:fr(n).position==="fixed"||Oj(n,t)}function ZT(e,t){const n=t.get(e);if(n)return n;let r=dl(e,[],!1).filter(l=>hr(l)&&Ya(l)!=="body"),s=null;const a=fr(e).position==="fixed";let o=a?Gs(e):e;for(;hr(o)&&!Fa(o);){const l=fr(o),c=qp(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Tl(o)&&!c&&Oj(e,o))?r=r.filter(d=>d!==o):s=l,o=Gs(o)}return t.set(e,r),r}function eR(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?Xu(t)?[]:ZT(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=wv(t,d,s);return u.top=kn(h.top,u.top),u.right=qs(h.right,u.right),u.bottom=qs(h.bottom,u.bottom),u.left=kn(h.left,u.left),u},wv(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function tR(e){const{width:t,height:n}=Aj(e);return{width:t,height:n}}function nR(e,t,n){const r=Or(t),s=Mr(t),a=n==="fixed",o=Ti(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Ws(0);if(r||!r&&!a)if((Ya(t)!=="body"||Tl(s))&&(l=Ju(t)),r){const f=Ti(t,!0,a,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else s&&(c.x=Gf(s));let u=0,d=0;if(s&&!r&&!a){const f=s.getBoundingClientRect();d=f.top+l.scrollTop,u=f.left+l.scrollLeft-Gf(s,f)}const h=o.left+l.scrollLeft-c.x-u,p=o.top+l.scrollTop-c.y-d;return{x:h,y:p,width:o.width,height:o.height}}function dh(e){return fr(e).position==="static"}function bv(e,t){if(!Or(e)||fr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Mr(e)===n&&(n=n.ownerDocument.body),n}function Lj(e,t){const n=Tn(e);if(Xu(e))return n;if(!Or(e)){let s=Gs(e);for(;s&&!Fa(s);){if(hr(s)&&!dh(s))return s;s=Gs(s)}return n}let r=bv(e,t);for(;r&&qT(r)&&dh(r);)r=bv(r,t);return r&&Fa(r)&&dh(r)&&!qp(r)?n:r||WT(e)||n}const rR=async function(e){const t=this.getOffsetParent||Lj,n=this.getDimensions,r=await n(e.floating);return{reference:nR(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function sR(e){return fr(e).direction==="rtl"}const iR={convertOffsetParentRelativeRectToViewportRelativeRect:KT,getDocumentElement:Mr,getClippingRect:eR,getOffsetParent:Lj,getElementRects:rR,getClientRects:QT,getDimensions:tR,getScale:xa,isElement:hr,isRTL:sR};function aR(e,t){let n=null,r;const s=Mr(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const{left:u,top:d,width:h,height:p}=e.getBoundingClientRect();if(l||t(),!h||!p)return;const f=oc(d),b=oc(s.clientWidth-(u+h)),g=oc(s.clientHeight-(d+p)),w=oc(u),v={rootMargin:-f+"px "+-b+"px "+-g+"px "+-w+"px",threshold:kn(0,qs(1,c))||1};let y=!0;function j(S){const _=S[0].intersectionRatio;if(_!==c){if(!y)return o();_?o(!1,_):r=setTimeout(()=>{o(!1,1e-7)},1e3)}y=!1}try{n=new IntersectionObserver(j,{...v,root:s.ownerDocument})}catch{n=new IntersectionObserver(j,v)}n.observe(e)}return o(!0),a}function oR(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Hp(e),d=s||a?[...u?dl(u):[],...dl(t)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),a&&x.addEventListener("resize",n)});const h=u&&l?aR(u,n):null;let p=-1,f=null;o&&(f=new ResizeObserver(x=>{let[v]=x;v&&v.target===u&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var y;(y=f)==null||y.observe(t)})),n()}),u&&!c&&f.observe(u),f.observe(t));let b,g=c?Ti(e):null;c&&w();function w(){const x=Ti(e);g&&(x.x!==g.x||x.y!==g.y||x.width!==g.width||x.height!==g.height)&&n(),g=x,b=requestAnimationFrame(w)}return n(),()=>{var x;d.forEach(v=>{s&&v.removeEventListener("scroll",n),a&&v.removeEventListener("resize",n)}),h==null||h(),(x=f)==null||x.disconnect(),f=null,c&&cancelAnimationFrame(b)}}const lR=zT,cR=UT,uR=DT,dR=VT,hR=FT,jv=MT,fR=BT,mR=(e,t,n)=>{const r=new Map,s={platform:iR,...n},a={...s.platform,_c:r};return LT(e,t,{...s,platform:a})};var Lc=typeof document<"u"?m.useLayoutEffect:m.useEffect;function pu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!pu(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!pu(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Mj(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function _v(e,t){const n=Mj(e);return Math.round(t*n)/n}function hh(e){const t=m.useRef(e);return Lc(()=>{t.current=e}),t}function pR(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=m.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=m.useState(r);pu(p,r)||f(r);const[b,g]=m.useState(null),[w,x]=m.useState(null),v=m.useCallback(D=>{D!==_.current&&(_.current=D,g(D))},[]),y=m.useCallback(D=>{D!==N.current&&(N.current=D,x(D))},[]),j=a||b,S=o||w,_=m.useRef(null),N=m.useRef(null),C=m.useRef(d),A=c!=null,R=hh(c),O=hh(s),T=hh(u),z=m.useCallback(()=>{if(!_.current||!N.current)return;const D={placement:t,strategy:n,middleware:p};O.current&&(D.platform=O.current),mR(_.current,N.current,D).then(E=>{const k={...E,isPositioned:T.current!==!1};I.current&&!pu(C.current,k)&&(C.current=k,Mi.flushSync(()=>{h(k)}))})},[p,t,n,O,T]);Lc(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,h(D=>({...D,isPositioned:!1})))},[u]);const I=m.useRef(!1);Lc(()=>(I.current=!0,()=>{I.current=!1}),[]),Lc(()=>{if(j&&(_.current=j),S&&(N.current=S),j&&S){if(R.current)return R.current(j,S,z);z()}},[j,S,z,R,A]);const B=m.useMemo(()=>({reference:_,floating:N,setReference:v,setFloating:y}),[v,y]),$=m.useMemo(()=>({reference:j,floating:S}),[j,S]),L=m.useMemo(()=>{const D={position:n,left:0,top:0};if(!$.floating)return D;const E=_v($.floating,d.x),k=_v($.floating,d.y);return l?{...D,transform:"translate("+E+"px, "+k+"px)",...Mj($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:E,top:k}},[n,l,$.floating,d.x,d.y]);return m.useMemo(()=>({...d,update:z,refs:B,elements:$,floatingStyles:L}),[d,z,B,$,L])}const gR=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?jv({element:r.current,padding:s}).fn(n):{}:r?jv({element:r,padding:s}).fn(n):{}}}},xR=(e,t)=>({...lR(e),options:[e,t]}),vR=(e,t)=>({...cR(e),options:[e,t]}),yR=(e,t)=>({...fR(e),options:[e,t]}),wR=(e,t)=>({...uR(e),options:[e,t]}),bR=(e,t)=>({...dR(e),options:[e,t]}),jR=(e,t)=>({...hR(e),options:[e,t]}),_R=(e,t)=>({...gR(e),options:[e,t]});var SR="Arrow",Dj=m.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return i.jsx(xe.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Dj.displayName=SR;var NR=Dj;function Zu(e){const[t,n]=m.useState(void 0);return Nt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Gp="Popper",[Fj,ed]=yn(Gp),[kR,$j]=Fj(Gp),zj=e=>{const{__scopePopper:t,children:n}=e,[r,s]=m.useState(null);return i.jsx(kR,{scope:t,anchor:r,onAnchorChange:s,children:n})};zj.displayName=Gp;var Uj="PopperAnchor",Bj=m.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=$j(Uj,n),o=m.useRef(null),l=Me(t,o);return m.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(xe.div,{...s,ref:l})});Bj.displayName=Uj;var Kp="PopperContent",[CR,ER]=Fj(Kp),Vj=m.forwardRef((e,t)=>{var Y,re,fe,Z,U,ce;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:f="optimized",onPlaced:b,...g}=e,w=$j(Kp,n),[x,v]=m.useState(null),y=Me(t,ge=>v(ge)),[j,S]=m.useState(null),_=Zu(j),N=(_==null?void 0:_.width)??0,C=(_==null?void 0:_.height)??0,A=r+(a!=="center"?"-"+a:""),R=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(u)?u:[u],T=O.length>0,z={padding:R,boundary:O.filter(TR),altBoundary:T},{refs:I,floatingStyles:B,placement:$,isPositioned:L,middlewareData:D}=pR({strategy:"fixed",placement:A,whileElementsMounted:(...ge)=>oR(...ge,{animationFrame:f==="always"}),elements:{reference:w.anchor},middleware:[xR({mainAxis:s+C,alignmentAxis:o}),c&&vR({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?yR():void 0,...z}),c&&wR({...z}),bR({...z,apply:({elements:ge,rects:ne,availableWidth:me,availableHeight:He})=>{const{width:Re,height:ct}=ne.reference,Ge=ge.floating.style;Ge.setProperty("--radix-popper-available-width",`${me}px`),Ge.setProperty("--radix-popper-available-height",`${He}px`),Ge.setProperty("--radix-popper-anchor-width",`${Re}px`),Ge.setProperty("--radix-popper-anchor-height",`${ct}px`)}}),j&&_R({element:j,padding:l}),RR({arrowWidth:N,arrowHeight:C}),p&&jR({strategy:"referenceHidden",...z})]}),[E,k]=Hj($),F=An(b);Nt(()=>{L&&(F==null||F())},[L,F]);const H=(Y=D.arrow)==null?void 0:Y.x,P=(re=D.arrow)==null?void 0:re.y,q=((fe=D.arrow)==null?void 0:fe.centerOffset)!==0,[de,le]=m.useState();return Nt(()=>{x&&le(window.getComputedStyle(x).zIndex)},[x]),i.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:L?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[(Z=D.transformOrigin)==null?void 0:Z.x,(U=D.transformOrigin)==null?void 0:U.y].join(" "),...((ce=D.hide)==null?void 0:ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(CR,{scope:n,placedSide:E,onArrowChange:S,arrowX:H,arrowY:P,shouldHideArrow:q,children:i.jsx(xe.div,{"data-side":E,"data-align":k,...g,ref:y,style:{...g.style,animation:L?void 0:"none"}})})})});Vj.displayName=Kp;var qj="PopperArrow",PR={top:"bottom",right:"left",bottom:"top",left:"right"},Wj=m.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,a=ER(qj,r),o=PR[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(NR,{...s,ref:n,style:{...s.style,display:"block"}})})});Wj.displayName=qj;function TR(e){return e!==null}var RR=e=>({name:"transformOrigin",options:e,fn(t){var w,x,v;const{placement:n,rects:r,middlewareData:s}=t,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=Hj(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,f=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let b="",g="";return u==="bottom"?(b=o?h:`${p}px`,g=`${-c}px`):u==="top"?(b=o?h:`${p}px`,g=`${r.floating.height+c}px`):u==="right"?(b=`${-c}px`,g=o?h:`${f}px`):u==="left"&&(b=`${r.floating.width+c}px`,g=o?h:`${f}px`),{data:{x:b,y:g}}}});function Hj(e){const[t,n="center"]=e.split("-");return[t,n]}var Gj=zj,Kj=Bj,Qj=Vj,Yj=Wj,[td,sB]=yn("Tooltip",[ed]),nd=ed(),Xj="TooltipProvider",AR=700,Kf="tooltip.open",[IR,Qp]=td(Xj),Jj=e=>{const{__scopeTooltip:t,delayDuration:n=AR,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,o=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(IR,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};Jj.displayName=Xj;var hl="Tooltip",[OR,rd]=td(hl),Zj=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,c=Qp(hl,e.__scopeTooltip),u=nd(t),[d,h]=m.useState(null),p=Kr(),f=m.useRef(0),b=o??c.disableHoverableContent,g=l??c.delayDuration,w=m.useRef(!1),[x,v]=Ar({prop:r,defaultProp:s??!1,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(Kf))):c.onClose(),a==null||a(N)},caller:hl}),y=m.useMemo(()=>x?w.current?"delayed-open":"instant-open":"closed",[x]),j=m.useCallback(()=>{window.clearTimeout(f.current),f.current=0,w.current=!1,v(!0)},[v]),S=m.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v(!1)},[v]),_=m.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{w.current=!0,v(!0),f.current=0},g)},[g,v]);return m.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),i.jsx(Gj,{...u,children:i.jsx(OR,{scope:t,contentId:p,open:x,stateAttribute:y,trigger:d,onTriggerChange:h,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayedRef.current?_():j()},[c.isOpenDelayedRef,_,j]),onTriggerLeave:m.useCallback(()=>{b?S():(window.clearTimeout(f.current),f.current=0)},[S,b]),onOpen:j,onClose:S,disableHoverableContent:b,children:n})})};Zj.displayName=hl;var Qf="TooltipTrigger",e1=m.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=rd(Qf,n),a=Qp(Qf,n),o=nd(n),l=m.useRef(null),c=Me(t,l,s.onTriggerChange),u=m.useRef(!1),d=m.useRef(!1),h=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),i.jsx(Kj,{asChild:!0,...o,children:i.jsx(xe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:pe(e.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:pe(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:pe(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:pe(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:pe(e.onBlur,s.onClose),onClick:pe(e.onClick,s.onClose)})})});e1.displayName=Qf;var LR="TooltipPortal",[iB,MR]=td(LR,{forceMount:void 0}),$a="TooltipContent",t1=m.forwardRef((e,t)=>{const n=MR($a,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,o=rd($a,e.__scopeTooltip);return i.jsx(is,{present:r||o.open,children:o.disableHoverableContent?i.jsx(n1,{side:s,...a,ref:t}):i.jsx(DR,{side:s,...a,ref:t})})}),DR=m.forwardRef((e,t)=>{const n=rd($a,e.__scopeTooltip),r=Qp($a,e.__scopeTooltip),s=m.useRef(null),a=Me(t,s),[o,l]=m.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,p=m.useCallback(()=>{l(null),h(!1)},[h]),f=m.useCallback((b,g)=>{const w=b.currentTarget,x={x:b.clientX,y:b.clientY},v=BR(x,w.getBoundingClientRect()),y=VR(x,v),j=qR(g.getBoundingClientRect()),S=HR([...y,...j]);l(S),h(!0)},[h]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&d){const b=w=>f(w,d),g=w=>f(w,c);return c.addEventListener("pointerleave",b),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",b),d.removeEventListener("pointerleave",g)}}},[c,d,f,p]),m.useEffect(()=>{if(o){const b=g=>{const w=g.target,x={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(w))||(d==null?void 0:d.contains(w)),y=!WR(x,o);v?p():y&&(p(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,d,o,u,p]),i.jsx(n1,{...e,ref:a})}),[FR,$R]=td(hl,{isInside:!1}),zR=o2("TooltipContent"),n1=m.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=rd($a,n),u=nd(n),{onClose:d}=c;return m.useEffect(()=>(document.addEventListener(Kf,d),()=>document.removeEventListener(Kf,d)),[d]),m.useEffect(()=>{if(c.trigger){const h=p=>{const f=p.target;f!=null&&f.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),i.jsx(Cl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:i.jsxs(Qj,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(zR,{children:r}),i.jsx(FR,{scope:n,isInside:!0,children:i.jsx(P2,{id:c.contentId,role:"tooltip",children:s||r})})]})})});t1.displayName=$a;var r1="TooltipArrow",UR=m.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=nd(n);return $R(r1,n).isInside?null:i.jsx(Yj,{...s,...r,ref:t})});UR.displayName=r1;function BR(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function VR(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function qR(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function WR(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a],c=t[o],u=l.x,d=l.y,h=c.x,p=c.y;d>r!=p>r&&n<(h-u)*(r-d)/(p-d)+u&&(s=!s)}return s}function HR(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),GR(t)}function GR(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var KR=Jj,QR=Zj,YR=e1,s1=t1;const i1=KR,XR=QR,JR=YR,a1=m.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(s1,{ref:r,sideOffset:t,className:oe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));a1.displayName=s1.displayName;var sd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},id=typeof window>"u"||"Deno"in globalThis;function Zn(){}function ZR(e,t){return typeof e=="function"?e(t):e}function eA(e){return typeof e=="number"&&e>=0&&e!==1/0}function tA(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Yf(e,t){return typeof e=="function"?e(t):e}function nA(e,t){return typeof e=="function"?e(t):e}function Sv(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==Yp(o,t.options))return!1}else if(!ml(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function Nv(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(fl(t.options.mutationKey)!==fl(a))return!1}else if(!ml(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Yp(e,t){return((t==null?void 0:t.queryKeyHashFn)||fl)(e)}function fl(e){return JSON.stringify(e,(t,n)=>Xf(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ml(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>ml(e[n],t[n])):!1}function o1(e,t){if(e===t)return e;const n=kv(e)&&kv(t);if(n||Xf(e)&&Xf(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:a[d];(!n&&c.has(h)||n)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,u++):(l[h]=o1(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&u++)}return s===o&&u===s?e:l}return t}function kv(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Xf(e){if(!Cv(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Cv(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Cv(e){return Object.prototype.toString.call(e)==="[object Object]"}function rA(e){return new Promise(t=>{setTimeout(t,e)})}function sA(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?o1(e,t):t}function iA(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function aA(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Xp=Symbol();function l1(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Xp?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var pi,Ss,ja,dw,oA=(dw=class extends sd{constructor(){super();Fe(this,pi);Fe(this,Ss);Fe(this,ja);Ne(this,ja,t=>{if(!id&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){G(this,Ss)||this.setEventListener(G(this,ja))}onUnsubscribe(){var t;this.hasListeners()||((t=G(this,Ss))==null||t.call(this),Ne(this,Ss,void 0))}setEventListener(t){var n;Ne(this,ja,t),(n=G(this,Ss))==null||n.call(this),Ne(this,Ss,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){G(this,pi)!==t&&(Ne(this,pi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof G(this,pi)=="boolean"?G(this,pi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},pi=new WeakMap,Ss=new WeakMap,ja=new WeakMap,dw),c1=new oA,_a,Ns,Sa,hw,lA=(hw=class extends sd{constructor(){super();Fe(this,_a,!0);Fe(this,Ns);Fe(this,Sa);Ne(this,Sa,t=>{if(!id&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){G(this,Ns)||this.setEventListener(G(this,Sa))}onUnsubscribe(){var t;this.hasListeners()||((t=G(this,Ns))==null||t.call(this),Ne(this,Ns,void 0))}setEventListener(t){var n;Ne(this,Sa,t),(n=G(this,Ns))==null||n.call(this),Ne(this,Ns,t(this.setOnline.bind(this)))}setOnline(t){G(this,_a)!==t&&(Ne(this,_a,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return G(this,_a)}},_a=new WeakMap,Ns=new WeakMap,Sa=new WeakMap,hw),gu=new lA;function cA(){let e,t;const n=new Promise((s,a)=>{e=s,t=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function uA(e){return Math.min(1e3*2**e,3e4)}function u1(e){return(e??"online")==="online"?gu.isOnline():!0}var d1=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function fh(e){return e instanceof d1}function h1(e){let t=!1,n=0,r=!1,s;const a=cA(),o=g=>{var w;r||(p(new d1(g)),(w=e.abort)==null||w.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>c1.isFocused()&&(e.networkMode==="always"||gu.isOnline())&&e.canRun(),d=()=>u1(e.networkMode)&&e.canRun(),h=g=>{var w;r||(r=!0,(w=e.onSuccess)==null||w.call(e,g),s==null||s(),a.resolve(g))},p=g=>{var w;r||(r=!0,(w=e.onError)==null||w.call(e,g),s==null||s(),a.reject(g))},f=()=>new Promise(g=>{var w;s=x=>{(r||u())&&g(x)},(w=e.onPause)==null||w.call(e)}).then(()=>{var g;s=void 0,r||(g=e.onContinue)==null||g.call(e)}),b=()=>{if(r)return;let g;const w=n===0?e.initialPromise:void 0;try{g=w??e.fn()}catch(x){g=Promise.reject(x)}Promise.resolve(g).then(h).catch(x=>{var _;if(r)return;const v=e.retry??(id?0:3),y=e.retryDelay??uA,j=typeof y=="function"?y(n,x):y,S=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,x);if(t||!S){p(x);return}n++,(_=e.onFail)==null||_.call(e,n,x),rA(j).then(()=>u()?void 0:f()).then(()=>{t?p(x):b()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?b():f().then(b),a)}}var dA=e=>setTimeout(e,0);function hA(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=dA;const a=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var nn=hA(),gi,fw,f1=(fw=class{constructor(){Fe(this,gi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),eA(this.gcTime)&&Ne(this,gi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(id?1/0:5*60*1e3))}clearGcTimeout(){G(this,gi)&&(clearTimeout(G(this,gi)),Ne(this,gi,void 0))}},gi=new WeakMap,fw),Na,xi,Dn,vi,Vt,wl,yi,er,$r,mw,fA=(mw=class extends f1{constructor(t){super();Fe(this,er);Fe(this,Na);Fe(this,xi);Fe(this,Dn);Fe(this,vi);Fe(this,Vt);Fe(this,wl);Fe(this,yi);Ne(this,yi,!1),Ne(this,wl,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ne(this,vi,t.client),Ne(this,Dn,G(this,vi).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ne(this,Na,pA(this.options)),this.state=t.state??G(this,Na),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=G(this,Vt))==null?void 0:t.promise}setOptions(t){this.options={...G(this,wl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,Dn).remove(this)}setData(t,n){const r=sA(this.state.data,t,this.options);return zt(this,er,$r).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){zt(this,er,$r).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=G(this,Vt))==null?void 0:r.promise;return(s=G(this,Vt))==null||s.cancel(t),n?n.then(Zn).catch(Zn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,Na))}isActive(){return this.observers.some(t=>nA(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Xp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Yf(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!tA(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=G(this,Vt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=G(this,Vt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),G(this,Dn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(G(this,Vt)&&(G(this,yi)?G(this,Vt).cancel({revert:!0}):G(this,Vt).cancelRetry()),this.scheduleGc()),G(this,Dn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||zt(this,er,$r).call(this,{type:"invalidate"})}fetch(t,n){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(G(this,Vt))return G(this,Vt).continueRetry(),G(this,Vt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(f=>f.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,s=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Ne(this,yi,!0),r.signal)})},a=()=>{const p=l1(this.options,n),b=(()=>{const g={client:G(this,vi),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return Ne(this,yi,!1),this.options.persister?this.options.persister(p,b,this):p(b)},l=(()=>{const p={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:G(this,vi),state:this.state,fetchFn:a};return s(p),p})();(u=this.options.behavior)==null||u.onFetch(l,this),Ne(this,xi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&zt(this,er,$r).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=p=>{var f,b,g,w;fh(p)&&p.silent||zt(this,er,$r).call(this,{type:"error",error:p}),fh(p)||((b=(f=G(this,Dn).config).onError)==null||b.call(f,p,this),(w=(g=G(this,Dn).config).onSettled)==null||w.call(g,this.state.data,p,this)),this.scheduleGc()};return Ne(this,Vt,h1({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var f,b,g,w;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(x){c(x);return}(b=(f=G(this,Dn).config).onSuccess)==null||b.call(f,p,this),(w=(g=G(this,Dn).config).onSettled)==null||w.call(g,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,f)=>{zt(this,er,$r).call(this,{type:"failed",failureCount:p,error:f})},onPause:()=>{zt(this,er,$r).call(this,{type:"pause"})},onContinue:()=>{zt(this,er,$r).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),G(this,Vt).start()}},Na=new WeakMap,xi=new WeakMap,Dn=new WeakMap,vi=new WeakMap,Vt=new WeakMap,wl=new WeakMap,yi=new WeakMap,er=new WeakSet,$r=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...mA(r.data,this.options),fetchMeta:t.meta??null};case"success":return Ne(this,xi,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return fh(s)&&s.revert&&G(this,xi)?{...G(this,xi),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),nn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),G(this,Dn).notify({query:this,type:"updated",action:t})})},mw);function mA(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:u1(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function pA(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var jr,pw,gA=(pw=class extends sd{constructor(t={}){super();Fe(this,jr);this.config=t,Ne(this,jr,new Map)}build(t,n,r){const s=n.queryKey,a=n.queryHash??Yp(s,n);let o=this.get(a);return o||(o=new fA({client:t,queryKey:s,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){G(this,jr).has(t.queryHash)||(G(this,jr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=G(this,jr).get(t.queryHash);n&&(t.destroy(),n===t&&G(this,jr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){nn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return G(this,jr).get(t)}getAll(){return[...G(this,jr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Sv(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Sv(t,r)):n}notify(t){nn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){nn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){nn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},jr=new WeakMap,pw),_r,en,wi,Sr,gs,gw,xA=(gw=class extends f1{constructor(t){super();Fe(this,Sr);Fe(this,_r);Fe(this,en);Fe(this,wi);this.mutationId=t.mutationId,Ne(this,en,t.mutationCache),Ne(this,_r,[]),this.state=t.state||vA(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){G(this,_r).includes(t)||(G(this,_r).push(t),this.clearGcTimeout(),G(this,en).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ne(this,_r,G(this,_r).filter(n=>n!==t)),this.scheduleGc(),G(this,en).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){G(this,_r).length||(this.state.status==="pending"?this.scheduleGc():G(this,en).remove(this))}continue(){var t;return((t=G(this,wi))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,o,l,c,u,d,h,p,f,b,g,w,x,v,y,j,S,_,N,C;const n=()=>{zt(this,Sr,gs).call(this,{type:"continue"})};Ne(this,wi,h1({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(A,R)=>{zt(this,Sr,gs).call(this,{type:"failed",failureCount:A,error:R})},onPause:()=>{zt(this,Sr,gs).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,en).canRun(this)}));const r=this.state.status==="pending",s=!G(this,wi).canStart();try{if(r)n();else{zt(this,Sr,gs).call(this,{type:"pending",variables:t,isPaused:s}),await((o=(a=G(this,en).config).onMutate)==null?void 0:o.call(a,t,this));const R=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));R!==this.state.context&&zt(this,Sr,gs).call(this,{type:"pending",context:R,variables:t,isPaused:s})}const A=await G(this,wi).start();return await((d=(u=G(this,en).config).onSuccess)==null?void 0:d.call(u,A,t,this.state.context,this)),await((p=(h=this.options).onSuccess)==null?void 0:p.call(h,A,t,this.state.context)),await((b=(f=G(this,en).config).onSettled)==null?void 0:b.call(f,A,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,A,null,t,this.state.context)),zt(this,Sr,gs).call(this,{type:"success",data:A}),A}catch(A){try{throw await((v=(x=G(this,en).config).onError)==null?void 0:v.call(x,A,t,this.state.context,this)),await((j=(y=this.options).onError)==null?void 0:j.call(y,A,t,this.state.context)),await((_=(S=G(this,en).config).onSettled)==null?void 0:_.call(S,void 0,A,this.state.variables,this.state.context,this)),await((C=(N=this.options).onSettled)==null?void 0:C.call(N,void 0,A,t,this.state.context)),A}finally{zt(this,Sr,gs).call(this,{type:"error",error:A})}}finally{G(this,en).runNext(this)}}},_r=new WeakMap,en=new WeakMap,wi=new WeakMap,Sr=new WeakSet,gs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),nn.batch(()=>{G(this,_r).forEach(r=>{r.onMutationUpdate(t)}),G(this,en).notify({mutation:this,type:"updated",action:t})})},gw);function vA(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qr,tr,bl,xw,yA=(xw=class extends sd{constructor(t={}){super();Fe(this,qr);Fe(this,tr);Fe(this,bl);this.config=t,Ne(this,qr,new Set),Ne(this,tr,new Map),Ne(this,bl,0)}build(t,n,r){const s=new xA({mutationCache:this,mutationId:++zl(this,bl)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){G(this,qr).add(t);const n=lc(t);if(typeof n=="string"){const r=G(this,tr).get(n);r?r.push(t):G(this,tr).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(G(this,qr).delete(t)){const n=lc(t);if(typeof n=="string"){const r=G(this,tr).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&G(this,tr).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=lc(t);if(typeof n=="string"){const r=G(this,tr).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=lc(t);if(typeof n=="string"){const s=(r=G(this,tr).get(n))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){nn.batch(()=>{G(this,qr).forEach(t=>{this.notify({type:"removed",mutation:t})}),G(this,qr).clear(),G(this,tr).clear()})}getAll(){return Array.from(G(this,qr))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Nv(n,r))}findAll(t={}){return this.getAll().filter(n=>Nv(t,n))}notify(t){nn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return nn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Zn))))}},qr=new WeakMap,tr=new WeakMap,bl=new WeakMap,xw);function lc(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Ev(e){return{onFetch:(t,n)=>{var d,h,p,f,b;const r=t.options,s=(p=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,a=((f=t.state.data)==null?void 0:f.pages)||[],o=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const w=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},x=l1(t.options,t.fetchOptions),v=async(y,j,S)=>{if(g)return Promise.reject();if(j==null&&y.pages.length)return Promise.resolve(y);const N=(()=>{const O={client:t.client,queryKey:t.queryKey,pageParam:j,direction:S?"backward":"forward",meta:t.options.meta};return w(O),O})(),C=await x(N),{maxPages:A}=t.options,R=S?aA:iA;return{pages:R(y.pages,C,A),pageParams:R(y.pageParams,j,A)}};if(s&&a.length){const y=s==="backward",j=y?wA:Pv,S={pages:a,pageParams:o},_=j(r,S);l=await v(S,_,y)}else{const y=e??a.length;do{const j=c===0?o[0]??r.initialPageParam:Pv(r,l);if(c>0&&j==null)break;l=await v(l,j),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>{var g,w;return(w=(g=t.options).persister)==null?void 0:w.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function Pv(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function wA(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var pt,ks,Cs,ka,Ca,Es,Ea,Pa,vw,bA=(vw=class{constructor(e={}){Fe(this,pt);Fe(this,ks);Fe(this,Cs);Fe(this,ka);Fe(this,Ca);Fe(this,Es);Fe(this,Ea);Fe(this,Pa);Ne(this,pt,e.queryCache||new gA),Ne(this,ks,e.mutationCache||new yA),Ne(this,Cs,e.defaultOptions||{}),Ne(this,ka,new Map),Ne(this,Ca,new Map),Ne(this,Es,0)}mount(){zl(this,Es)._++,G(this,Es)===1&&(Ne(this,Ea,c1.subscribe(async e=>{e&&(await this.resumePausedMutations(),G(this,pt).onFocus())})),Ne(this,Pa,gu.subscribe(async e=>{e&&(await this.resumePausedMutations(),G(this,pt).onOnline())})))}unmount(){var e,t;zl(this,Es)._--,G(this,Es)===0&&((e=G(this,Ea))==null||e.call(this),Ne(this,Ea,void 0),(t=G(this,Pa))==null||t.call(this),Ne(this,Pa,void 0))}isFetching(e){return G(this,pt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return G(this,ks).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=G(this,pt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=G(this,pt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Yf(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return G(this,pt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=G(this,pt).get(r.queryHash),a=s==null?void 0:s.state.data,o=ZR(t,a);if(o!==void 0)return G(this,pt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return nn.batch(()=>G(this,pt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=G(this,pt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=G(this,pt);nn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=G(this,pt);return nn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=nn.batch(()=>G(this,pt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Zn).catch(Zn)}invalidateQueries(e,t={}){return nn.batch(()=>(G(this,pt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=nn.batch(()=>G(this,pt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Zn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Zn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=G(this,pt).build(this,t);return n.isStaleByTime(Yf(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Zn).catch(Zn)}fetchInfiniteQuery(e){return e.behavior=Ev(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Zn).catch(Zn)}ensureInfiniteQueryData(e){return e.behavior=Ev(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return gu.isOnline()?G(this,ks).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,pt)}getMutationCache(){return G(this,ks)}getDefaultOptions(){return G(this,Cs)}setDefaultOptions(e){Ne(this,Cs,e)}setQueryDefaults(e,t){G(this,ka).set(fl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...G(this,ka).values()],n={};return t.forEach(r=>{ml(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){G(this,Ca).set(fl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...G(this,Ca).values()],n={};return t.forEach(r=>{ml(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...G(this,Cs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Yp(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Xp&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...G(this,Cs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){G(this,pt).clear(),G(this,ks).clear()}},pt=new WeakMap,ks=new WeakMap,Cs=new WeakMap,ka=new WeakMap,Ca=new WeakMap,Es=new WeakMap,Ea=new WeakMap,Pa=new WeakMap,vw),jA=m.createContext(void 0),_A=({client:e,children:t})=>(m.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(jA.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pl(){return pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pl.apply(this,arguments)}var Rs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Rs||(Rs={}));const Tv="popstate";function SA(e){e===void 0&&(e={});function t(r,s){let{pathname:a,search:o,hash:l}=r.location;return Jf("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:xu(s)}return kA(t,n,null,e)}function ht(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function m1(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function NA(){return Math.random().toString(36).substr(2,8)}function Rv(e,t){return{usr:e.state,key:e.key,idx:t}}function Jf(e,t,n,r){return n===void 0&&(n=null),pl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Xa(t):t,{state:n,key:t&&t.key||r||NA()})}function xu(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Xa(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function kA(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=Rs.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(pl({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Rs.Pop;let w=d(),x=w==null?null:w-u;u=w,c&&c({action:l,location:g.location,delta:x})}function p(w,x){l=Rs.Push;let v=Jf(g.location,w,x);u=d()+1;let y=Rv(v,u),j=g.createHref(v);try{o.pushState(y,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(j)}a&&c&&c({action:l,location:g.location,delta:1})}function f(w,x){l=Rs.Replace;let v=Jf(g.location,w,x);u=d();let y=Rv(v,u),j=g.createHref(v);o.replaceState(y,"",j),a&&c&&c({action:l,location:g.location,delta:0})}function b(w){let x=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof w=="string"?w:xu(w);return v=v.replace(/ $/,"%20"),ht(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let g={get action(){return l},get location(){return e(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Tv,h),c=w,()=>{s.removeEventListener(Tv,h),c=null}},createHref(w){return t(s,w)},createURL:b,encodeLocation(w){let x=b(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:f,go(w){return o.go(w)}};return g}var Av;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Av||(Av={}));function CA(e,t,n){return n===void 0&&(n="/"),EA(e,t,n,!1)}function EA(e,t,n,r){let s=typeof t=="string"?Xa(t):t,a=za(s.pathname||"/",n);if(a==null)return null;let o=p1(e);PA(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=zA(a);l=FA(o[c],u,r)}return l}function p1(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(ht(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=zs([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(ht(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),p1(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:MA(u,a.index),routesMeta:d})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of g1(a.path))s(a,o,c)}),t}function g1(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=g1(r.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function PA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:DA(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const TA=/^:[\w-]+$/,RA=3,AA=2,IA=1,OA=10,LA=-2,Iv=e=>e==="*";function MA(e,t){let n=e.split("/"),r=n.length;return n.some(Iv)&&(r+=LA),t&&(r+=AA),n.filter(s=>!Iv(s)).reduce((s,a)=>s+(TA.test(a)?RA:a===""?IA:OA),r)}function DA(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function FA(e,t,n){let{routesMeta:r}=e,s={},a="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=a==="/"?t:t.slice(a.length)||"/",h=vu({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=vu({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:zs([a,h.pathname]),pathnameBase:qA(zs([a,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(a=zs([a,h.pathnameBase]))}return o}function vu(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=$A(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:p,isOptional:f}=d;if(p==="*"){let g=l[h]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const b=l[h];return f&&!b?u[p]=void 0:u[p]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:e}}function $A(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),m1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function zA(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return m1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function za(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function UA(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Xa(e):e;return{pathname:n?n.startsWith("/")?n:BA(n,t):t,search:WA(r),hash:HA(s)}}function BA(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function mh(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VA(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Jp(e,t){let n=VA(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Zp(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Xa(e):(s=pl({},e),ht(!s.pathname||!s.pathname.includes("?"),mh("?","pathname","search",s)),ht(!s.pathname||!s.pathname.includes("#"),mh("#","pathname","hash",s)),ht(!s.search||!s.search.includes("#"),mh("#","search","hash",s)));let a=e===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}l=h>=0?t[h]:"/"}let c=UA(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const zs=e=>e.join("/").replace(/\/\/+/g,"/"),qA=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),WA=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,HA=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function GA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const x1=["post","put","patch","delete"];new Set(x1);const KA=["get",...x1];new Set(KA);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gl(){return gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gl.apply(this,arguments)}const ad=m.createContext(null),v1=m.createContext(null),as=m.createContext(null),od=m.createContext(null),os=m.createContext({outlet:null,matches:[],isDataRoute:!1}),y1=m.createContext(null);function QA(e,t){let{relative:n}=t===void 0?{}:t;Ja()||ht(!1);let{basename:r,navigator:s}=m.useContext(as),{hash:a,pathname:o,search:l}=ld(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:zs([r,o])),s.createHref({pathname:c,search:l,hash:a})}function Ja(){return m.useContext(od)!=null}function Js(){return Ja()||ht(!1),m.useContext(od).location}function w1(e){m.useContext(as).static||m.useLayoutEffect(e)}function Gn(){let{isDataRoute:e}=m.useContext(os);return e?lI():YA()}function YA(){Ja()||ht(!1);let e=m.useContext(ad),{basename:t,future:n,navigator:r}=m.useContext(as),{matches:s}=m.useContext(os),{pathname:a}=Js(),o=JSON.stringify(Jp(s,n.v7_relativeSplatPath)),l=m.useRef(!1);return w1(()=>{l.current=!0}),m.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=Zp(u,JSON.parse(o),a,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:zs([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,o,a,e])}function Rl(){let{matches:e}=m.useContext(os),t=e[e.length-1];return t?t.params:{}}function ld(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=m.useContext(as),{matches:s}=m.useContext(os),{pathname:a}=Js(),o=JSON.stringify(Jp(s,r.v7_relativeSplatPath));return m.useMemo(()=>Zp(e,JSON.parse(o),a,n==="path"),[e,o,a,n])}function XA(e,t){return JA(e,t)}function JA(e,t,n,r){Ja()||ht(!1);let{navigator:s}=m.useContext(as),{matches:a}=m.useContext(os),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Js(),d;if(t){var h;let w=typeof t=="string"?Xa(t):t;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||ht(!1),d=w}else d=u;let p=d.pathname||"/",f=p;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=CA(e,{pathname:f}),g=rI(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:zs([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:zs([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,n,r);return t&&g?m.createElement(od.Provider,{value:{location:gl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Rs.Pop}},g):g}function ZA(){let e=oI(),t=GA(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),n?m.createElement("pre",{style:s},n):null,null)}const eI=m.createElement(ZA,null);class tI extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?m.createElement(os.Provider,{value:this.props.routeContext},m.createElement(y1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nI(e){let{routeContext:t,match:n,children:r}=e,s=m.useContext(ad);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(os.Provider,{value:t},r)}function rI(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||ht(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:p,errors:f}=n,b=h.route.loader&&p[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,p)=>{let f,b=!1,g=null,w=null;n&&(f=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||eI,c&&(u<0&&p===0?(b=!0,w=null):u===p&&(b=!0,w=h.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,p+1)),v=()=>{let y;return f?y=g:b?y=w:h.route.Component?y=m.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=d,m.createElement(nI,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:y})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?m.createElement(tI,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var b1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(b1||{}),yu=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yu||{});function sI(e){let t=m.useContext(ad);return t||ht(!1),t}function iI(e){let t=m.useContext(v1);return t||ht(!1),t}function aI(e){let t=m.useContext(os);return t||ht(!1),t}function j1(e){let t=aI(),n=t.matches[t.matches.length-1];return n.route.id||ht(!1),n.route.id}function oI(){var e;let t=m.useContext(y1),n=iI(yu.UseRouteError),r=j1(yu.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function lI(){let{router:e}=sI(b1.UseNavigateStable),t=j1(yu.UseNavigateStable),n=m.useRef(!1);return w1(()=>{n.current=!0}),m.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,gl({fromRouteId:t},a)))},[e,t])}function cI(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ir(e){let{to:t,replace:n,state:r,relative:s}=e;Ja()||ht(!1);let{future:a,static:o}=m.useContext(as),{matches:l}=m.useContext(os),{pathname:c}=Js(),u=Gn(),d=Zp(t,Jp(l,a.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return m.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function Qe(e){ht(!1)}function uI(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Rs.Pop,navigator:a,static:o=!1,future:l}=e;Ja()&&ht(!1);let c=t.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:a,static:o,future:gl({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof r=="string"&&(r=Xa(r));let{pathname:d="/",search:h="",hash:p="",state:f=null,key:b="default"}=r,g=m.useMemo(()=>{let w=za(d,c);return w==null?null:{location:{pathname:w,search:h,hash:p,state:f,key:b},navigationType:s}},[c,d,h,p,f,b,s]);return g==null?null:m.createElement(as.Provider,{value:u},m.createElement(od.Provider,{children:n,value:g}))}function dI(e){let{children:t,location:n}=e;return XA(Zf(t),n)}new Promise(()=>{});function Zf(e,t){t===void 0&&(t=[]);let n=[];return m.Children.forEach(e,(r,s)=>{if(!m.isValidElement(r))return;let a=[...t,s];if(r.type===m.Fragment){n.push.apply(n,Zf(r.props.children,a));return}r.type!==Qe&&ht(!1),!r.props.index||!r.props.children||ht(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Zf(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wu(){return wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wu.apply(this,arguments)}function _1(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function hI(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function fI(e,t){return e.button===0&&(!t||t==="_self")&&!hI(e)}const mI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],pI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],gI="6";try{window.__reactRouterVersion=gI}catch{}const xI=m.createContext({isTransitioning:!1}),vI="startTransition",Ov=Vm[vI];function yI(e){let{basename:t,children:n,future:r,window:s}=e,a=m.useRef();a.current==null&&(a.current=SA({window:s,v5Compat:!0}));let o=a.current,[l,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=m.useCallback(h=>{u&&Ov?Ov(()=>c(h)):c(h)},[c,u]);return m.useLayoutEffect(()=>o.listen(d),[o,d]),m.useEffect(()=>cI(r),[r]),m.createElement(uI,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const wI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ar=m.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,p=_1(t,mI),{basename:f}=m.useContext(as),b,g=!1;if(typeof u=="string"&&bI.test(u)&&(b=u,wI))try{let y=new URL(window.location.href),j=u.startsWith("//")?new URL(y.protocol+u):new URL(u),S=za(j.pathname,f);j.origin===y.origin&&S!=null?u=S+j.search+j.hash:g=!0}catch{}let w=QA(u,{relative:s}),x=_I(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function v(y){r&&r(y),y.defaultPrevented||x(y)}return m.createElement("a",wu({},p,{href:b||w,onClick:g||a?r:v,ref:n,target:c}))}),Lv=m.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,h=_1(t,pI),p=ld(c,{relative:h.relative}),f=Js(),b=m.useContext(v1),{navigator:g,basename:w}=m.useContext(as),x=b!=null&&SI(p)&&u===!0,v=g.encodeLocation?g.encodeLocation(p).pathname:p.pathname,y=f.pathname,j=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(y=y.toLowerCase(),j=j?j.toLowerCase():null,v=v.toLowerCase()),j&&w&&(j=za(j,w)||j);const S=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let _=y===v||!o&&y.startsWith(v)&&y.charAt(S)==="/",N=j!=null&&(j===v||!o&&j.startsWith(v)&&j.charAt(v.length)==="/"),C={isActive:_,isPending:N,isTransitioning:x},A=_?r:void 0,R;typeof a=="function"?R=a(C):R=[a,_?"active":null,N?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(C):l;return m.createElement(ar,wu({},h,{"aria-current":A,className:R,ref:n,style:O,to:c,viewTransition:u}),typeof d=="function"?d(C):d)});var em;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(em||(em={}));var Mv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Mv||(Mv={}));function jI(e){let t=m.useContext(ad);return t||ht(!1),t}function _I(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=t===void 0?{}:t,c=Gn(),u=Js(),d=ld(e,{relative:o});return m.useCallback(h=>{if(fI(h,n)){h.preventDefault();let p=r!==void 0?r:xu(u)===xu(d);c(e,{replace:p,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,s,n,e,a,o,l])}function SI(e,t){t===void 0&&(t={});let n=m.useContext(xI);n==null&&ht(!1);let{basename:r}=jI(em.useViewTransitionState),s=ld(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=za(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=za(n.nextLocation.pathname,r)||n.nextLocation.pathname;return vu(s.pathname,o)!=null||vu(s.pathname,a)!=null}const NI="modulepreload",kI=function(e){return"/"+e},Dv={},Za=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=kI(c),c in Dv)return;Dv[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":NI,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},CI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Za(async()=>{const{default:r}=await Promise.resolve().then(()=>eo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class eg extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class EI extends eg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Fv extends eg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class $v extends eg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var tm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(tm||(tm={}));var PI=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class TI{constructor(t,{headers:n={},customFetch:r,region:s=tm.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=CI(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return PI(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(g=>{throw new EI(g)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new Fv(h);if(!h.ok)throw new $v(h);let f=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return f==="application/json"?b=yield h.json():f==="application/octet-stream"?b=yield h.blob():f==="text/event-stream"?b=h:f==="multipart/form-data"?b=yield h.formData():b=yield h.text(),{data:b,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof $v||s instanceof Fv?s.context:void 0}}})}}var hn={},tg={},cd={},Al={},ud={},dd={},RI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ua=RI();const AI=Ua.fetch,S1=Ua.fetch.bind(Ua),N1=Ua.Headers,II=Ua.Request,OI=Ua.Response,eo=Object.freeze(Object.defineProperty({__proto__:null,Headers:N1,Request:II,Response:OI,default:S1,fetch:AI},Symbol.toStringTag,{value:"Module"})),LI=Ck(eo);var hd={};Object.defineProperty(hd,"__esModule",{value:!0});let MI=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};hd.default=MI;var k1=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dd,"__esModule",{value:!0});const DI=k1(LI),FI=k1(hd);let $I=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=DI.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c,u;let d=null,h=null,p=null,f=a.status,b=a.statusText;if(a.ok){if(this.method!=="HEAD"){const v=await a.text();v===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=v:h=JSON.parse(v))}const w=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&x&&x.length>1&&(p=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,f=406,b="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const w=await a.text();try{d=JSON.parse(w),Array.isArray(d)&&a.status===404&&(h=[],d=null,f=200,b="OK")}catch{a.status===404&&w===""?(f=204,b="No Content"):d={message:w}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,f=200,b="OK"),d&&this.shouldThrowOnError)throw new FI.default(d)}return{error:d,data:h,count:p,status:f,statusText:b}});return this.shouldThrowOnError||(s=s.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};dd.default=$I;var zI=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ud,"__esModule",{value:!0});const UI=zI(dd);let BI=class extends UI.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};ud.default=BI;var VI=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Al,"__esModule",{value:!0});const qI=VI(ud);let WI=class extends qI.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${a}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Al.default=WI;var HI=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cd,"__esModule",{value:!0});const yo=HI(Al);let GI=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new yo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const a="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new yo.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new yo.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new yo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new yo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};cd.default=GI;var C1=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tg,"__esModule",{value:!0});const KI=C1(cd),QI=C1(Al);let YI=class E1{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new KI.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new E1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:a}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{c.searchParams.append(h,p)})):(l="POST",u=n);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new QI.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};tg.default=YI;var to=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hn,"__esModule",{value:!0});hn.PostgrestError=hn.PostgrestBuilder=hn.PostgrestTransformBuilder=hn.PostgrestFilterBuilder=hn.PostgrestQueryBuilder=hn.PostgrestClient=void 0;const P1=to(tg);hn.PostgrestClient=P1.default;const T1=to(cd);hn.PostgrestQueryBuilder=T1.default;const R1=to(Al);hn.PostgrestFilterBuilder=R1.default;const A1=to(ud);hn.PostgrestTransformBuilder=A1.default;const I1=to(dd);hn.PostgrestBuilder=I1.default;const O1=to(hd);hn.PostgrestError=O1.default;var XI=hn.default={PostgrestClient:P1.default,PostgrestQueryBuilder:T1.default,PostgrestFilterBuilder:R1.default,PostgrestTransformBuilder:A1.default,PostgrestBuilder:I1.default,PostgrestError:O1.default};const{PostgrestClient:JI,PostgrestQueryBuilder:dB,PostgrestFilterBuilder:hB,PostgrestTransformBuilder:fB,PostgrestBuilder:mB,PostgrestError:pB}=XI;class ZI{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const eO="2.15.5",tO=`realtime-js/${eO}`,nO="1.0.0",nm=1e4,rO=1e3,sO=100;var Uo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Uo||(Uo={}));var Et;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Et||(Et={}));var rr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(rr||(rr={}));var rm;(function(e){e.websocket="websocket"})(rm||(rm={}));var ui;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ui||(ui={}));class iO{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),a=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+s));o=o+s;const c=r.decode(t.slice(o,o+a));o=o+a;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class L1{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ye;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ye||(Ye={}));const zv=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((a,o)=>(a[o]=aO(o,e,t,s),a),{})},aO=(e,t,n,r)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,o=n[e];return a&&!r.includes(a)?M1(a,o):sm(o)},M1=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return uO(t,n)}switch(e){case Ye.bool:return oO(t);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return lO(t);case Ye.json:case Ye.jsonb:return cO(t);case Ye.timestamp:return dO(t);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return sm(t);default:return sm(t)}},sm=e=>e,oO=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},lO=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},cO=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},uO=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const o=e.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>M1(t,l))}return e},dO=e=>typeof e=="string"?e.replace(" ","T"):e,D1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ph{constructor(t,n,r={},s=nm){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Uv;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Uv||(Uv={}));class Bo{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bo.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=Bo.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Bo.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const a=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=a[u];if(h){const p=d.map(w=>w.presence_ref),f=h.map(w=>w.presence_ref),b=d.filter(w=>f.indexOf(w.presence_ref)<0),g=h.filter(w=>p.indexOf(w.presence_ref)<0);b.length>0&&(l[u]=b),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(f=>f.presence_ref),p=d.filter(f=>h.indexOf(f.presence_ref)<0);t[l].unshift(...p)}r(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Bv;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Bv||(Bv={}));var Vo;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Vo||(Vo={}));var Br;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Br||(Br={}));class ng{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ph(this,rr.join,this.params,this.timeout),this.rejoinTimer=new L1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Et.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rr.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Bo(this),this.broadcastEndpointURL=D1(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Et.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Vo.PRESENCE]&&this.bindings[Vo.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Br.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Br.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var b;if(this.socket.setAuth(),f===void 0){t==null||t(Br.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(b=g==null?void 0:g.length)!==null&&b!==void 0?b:0,x=[];for(let v=0;v<w;v++){const y=g[v],{filter:{event:j,schema:S,table:_,filter:N}}=y,C=f&&f[v];if(C&&C.event===j&&C.schema===S&&C.table===_&&C.filter===N)x.push(Object.assign(Object.assign({},y),{id:C.id}));else{this.unsubscribe(),this.state=Et.errored,t==null||t(Br.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Br.SUBSCRIBED);return}}).receive("error",f=>{this.state=Et.errored,t==null||t(Br.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Br.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Et.joined&&t===Vo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Et.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new ph(this,rr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Et.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ph(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>sO){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=rr;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var b,g,w;return((b=f.filter)===null||b===void 0?void 0:b.event)==="*"||((w=(g=f.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(f=>f.callback(p,r)):(a=this.bindings[o])===null||a===void 0||a.filter(f=>{var b,g,w,x,v,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const j=f.id,S=(b=f.filter)===null||b===void 0?void 0:b.event;return j&&((g=n.ids)===null||g===void 0?void 0:g.includes(j))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const j=(v=(x=f==null?void 0:f.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return j==="*"||j===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:g,table:w,commit_timestamp:x,type:v,errors:y}=b;p=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:x,eventType:v,new:{},old:{},errors:y}),this._getPayloadRecords(b))}f.callback(p,r)})}_isClosed(){return this.state===Et.closed}_isJoined(){return this.state===Et.joined}_isJoining(){return this.state===Et.joining}_isLeaving(){return this.state===Et.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&ng.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(rr.close,{},t)}_onError(t){this._on(rr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Et.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=zv(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=zv(t.columns,t.old_record)),n}}const gh=()=>{},cc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},hO=[1e3,2e3,5e3,1e4],fO=1e4,mO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class pO{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=nm,this.transport=null,this.heartbeatIntervalMs=cc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gh,this.ref=0,this.reconnectTimer=null,this.logger=gh,this.conn=null,this.sendBuffer=[],this.serializer=new iO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>Za(async()=>{const{default:l}=await Promise.resolve().then(()=>eo);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${rm.websocket}`,this.httpEndpoint=D1(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ZI.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:nO}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Uo.connecting:return ui.Connecting;case Uo.open:return ui.Open;case Uo.closing:return ui.Closing;default:return ui.Closed}}isConnected(){return this.connectionState()===ui.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new ng(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:s,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(rO,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},cc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:a,ref:o}=n,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(rr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([mO],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:tO};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(rr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new L1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},cc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,a,o,l,c,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:nm,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:cc.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:gh,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>hO[h-1]||fO,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,p)=>p(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class rg extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Pt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class gO extends rg{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class im extends rg{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var xO=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const F1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Za(async()=>{const{default:r}=await Promise.resolve().then(()=>eo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},vO=()=>xO(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Za(()=>Promise.resolve().then(()=>eo),void 0)).Response:Response}),am=e=>{if(Array.isArray(e))return e.map(n=>am(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=am(r)}),t},yO=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Fi=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const xh=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wO=(e,t,n)=>Fi(void 0,void 0,void 0,function*(){const r=yield vO();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const a=e.status||500,o=(s==null?void 0:s.statusCode)||a+"";t(new gO(xh(s),a,o))}).catch(s=>{t(new im(xh(s),s))}):t(new im(xh(e),e))}),bO=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(yO(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Il(e,t,n,r,s,a){return Fi(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,bO(t,r,s,a)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>wO(c,l,r))})})}function bu(e,t,n,r){return Fi(this,void 0,void 0,function*(){return Il(e,"GET",t,n,r)})}function wr(e,t,n,r,s){return Fi(this,void 0,void 0,function*(){return Il(e,"POST",t,r,s,n)})}function om(e,t,n,r,s){return Fi(this,void 0,void 0,function*(){return Il(e,"PUT",t,r,s,n)})}function jO(e,t,n,r){return Fi(this,void 0,void 0,function*(){return Il(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function $1(e,t,n,r,s){return Fi(this,void 0,void 0,function*(){return Il(e,"DELETE",t,r,s,n)})}var Zt=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const _O={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class SO{constructor(t,n={},r,s){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=F1(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,s){return Zt(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Vv),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?om:wr)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Pt(a))return{data:null,error:a};throw a}})}upload(t,n,r){return Zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Zt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:Vv.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield om(this.fetch,l.toString(),c,{headers:d});return{data:{path:a,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Pt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Zt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield wr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new rg("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Zt(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Pt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Zt(this,void 0,void 0,function*(){try{return{data:{path:(yield wr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Pt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Zt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield wr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Pt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Zt(this,void 0,void 0,function*(){try{const s=yield wr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Pt(s))return{data:null,error:s};throw s}})}download(t,n){return Zt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield bu(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Pt(l))return{data:null,error:l};throw l}})}info(t){return Zt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield bu(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:am(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}exists(t){return Zt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield jO(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r)&&r instanceof im){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Zt(this,void 0,void 0,function*(){try{return{data:yield $1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Zt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},_O),n),{prefix:t||""});return{data:yield wr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Pt(s))return{data:null,error:s};throw s}})}listV2(t,n){return Zt(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield wr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const NO="2.12.1",kO={"X-Client-Info":`storage-js/${NO}`};var Ui=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class CO{constructor(t,n={},r,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},kO),n),this.fetch=F1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ui(this,void 0,void 0,function*(){try{return{data:yield bu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Pt(t))return{data:null,error:t};throw t}})}getBucket(t){return Ui(this,void 0,void 0,function*(){try{return{data:yield bu(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Ui(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Ui(this,void 0,void 0,function*(){try{return{data:yield om(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Pt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Ui(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ui(this,void 0,void 0,function*(){try{return{data:yield $1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Pt(n))return{data:null,error:n};throw n}})}}class EO extends CO{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new SO(this.url,this.headers,t,this.fetch)}}const PO="2.57.4";let Co="";typeof Deno<"u"?Co="deno":typeof document<"u"?Co="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Co="react-native":Co="node";const TO={"X-Client-Info":`supabase-js-${Co}/${PO}`},RO={headers:TO},AO={schema:"public"},IO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},OO={};var LO=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const MO=e=>{let t;return e?t=e:typeof fetch>"u"?t=S1:t=fetch,(...n)=>t(...n)},DO=()=>typeof Headers>"u"?N1:Headers,FO=(e,t,n)=>{const r=MO(n),s=DO();return(a,o)=>LO(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(a,Object.assign(Object.assign({},o),{headers:u}))})};var $O=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function zO(e){return e.endsWith("/")?e:e+"/"}function UO(e,t){var n,r;const{db:s,auth:a,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,p={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>$O(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}function BO(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(zO(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const z1="2.71.1",Yi=30*1e3,lm=3,vh=lm*Yi,VO="http://localhost:9999",qO="supabase.auth.token",WO={"X-Client-Info":`gotrue-js/${z1}`},cm="X-Supabase-Api-Version",U1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},HO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,GO=10*60*1e3;class sg extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ce(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class KO extends sg{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function QO(e){return Ce(e)&&e.name==="AuthApiError"}class B1 extends sg{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Zs extends sg{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class xs extends Zs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function YO(e){return Ce(e)&&e.name==="AuthSessionMissingError"}class uc extends Zs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class dc extends Zs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class hc extends Zs{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function XO(e){return Ce(e)&&e.name==="AuthImplicitGrantRedirectError"}class qv extends Zs{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class um extends Zs{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function yh(e){return Ce(e)&&e.name==="AuthRetryableFetchError"}class Wv extends Zs{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class dm extends Zs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ju="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hv=` 	
\r=`.split(""),JO=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Hv.length;t+=1)e[Hv[t].charCodeAt(0)]=-2;for(let t=0;t<ju.length;t+=1)e[ju[t].charCodeAt(0)]=t;return e})();function Gv(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ju[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ju[r]),t.queuedBits-=6}}function V1(e,t,n){const r=JO[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Kv(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{t4(o,r,n)};for(let o=0;o<e.length;o+=1)V1(e.charCodeAt(o),s,a);return t.join("")}function ZO(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function e4(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}ZO(r,t)}}function t4(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function n4(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)V1(e.charCodeAt(s),n,r);return new Uint8Array(t)}function r4(e){const t=[];return e4(e,n=>t.push(n)),new Uint8Array(t)}function s4(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Gv(s,n,r)),Gv(null,n,r),t.join("")}function i4(e){return Math.round(Date.now()/1e3)+e}function a4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Yn=()=>typeof window<"u"&&typeof document<"u",ii={tested:!1,writable:!1},q1=()=>{if(!Yn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ii.tested)return ii.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ii.tested=!0,ii.writable=!0}catch{ii.tested=!0,ii.writable=!1}return ii.writable};function o4(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const W1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Za(async()=>{const{default:r}=await Promise.resolve().then(()=>eo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},l4=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Xi=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ai=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ms=async(e,t)=>{await e.removeItem(t)};class fd{constructor(){this.promise=new fd.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}fd.promiseConstructor=Promise;function wh(e){const t=e.split(".");if(t.length!==3)throw new dm("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!HO.test(t[r]))throw new dm("JWT not in base64url format");return{header:JSON.parse(Kv(t[0])),payload:JSON.parse(Kv(t[1])),signature:n4(t[2]),raw:{header:t[0],payload:t[1]}}}async function c4(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function u4(e,t){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){r(o);return}}catch(o){if(!t(a,o)){s(o);return}}})()})}function d4(e){return("0"+e.toString(16)).substr(-2)}function h4(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,d4).join("")}async function f4(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function m4(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await f4(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bi(e,t,n=!1){const r=h4();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Xi(e,`${t}-code-verifier`,s);const a=await m4(r);return[a,r===a?"plain":"s256"]}const p4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function g4(e){const t=e.headers.get(cm);if(!t||!t.match(p4))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function x4(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function v4(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const y4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vi(e){if(!y4.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function bh(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Qv(e){return JSON.parse(JSON.stringify(e))}var w4=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const ci=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),b4=[502,503,504];async function Yv(e){var t;if(!l4(e))throw new um(ci(e),0);if(b4.includes(e.status))throw new um(ci(e),e.status);let n;try{n=await e.json()}catch(a){throw new B1(ci(a),a)}let r;const s=g4(e);if(s&&s.getTime()>=U1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Wv(ci(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new xs}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Wv(ci(n),e.status,n.weak_password.reasons);throw new KO(ci(n),e.status||500,r)}const j4=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ae(e,t,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[cm]||(a[cm]=U1["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await _4(e,t,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function _4(e,t,n,r,s,a){const o=j4(t,r,s,a);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new um(ci(c),0)}if(l.ok||await Yv(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Yv(c)}}function zr(e){var t;let n=null;C4(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=i4(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Xv(e){const t=zr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function _s(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function S4(e){return{data:e,error:null}}function N4(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,o=w4(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function k4(e){return e}function C4(e){return e.access_token&&e.refresh_token&&e.expires_in}const jh=["global","local","others"];var E4=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class P4{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=W1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=jh[0]){if(jh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jh.join(", ")}`);try{return await Ae(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_s})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=E4(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:N4,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ce(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ae(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:_s})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:k4});if(d.error)throw d.error;const h=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Ce(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Vi(t);try{return await Ae(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:_s})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Vi(t);try{return await Ae(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:_s})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Vi(t);try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:_s})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Vi(t.userId);try{const{data:n,error:r}=await Ae(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Vi(t.userId),Vi(t.id);try{return{data:await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}}function Jv(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function T4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qi={debug:!!(globalThis&&q1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class H1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class R4 extends H1{}async function A4(e,t,n){qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),qi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new R4(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(qi.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}T4();const I4={url:VO,storageKey:qO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:WO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Zv(e,t,n){return await n()}const Wi={};class xl{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xl.nextInstanceID,xl.nextInstanceID+=1,this.instanceID>0&&Yn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},I4),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new P4({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=W1(s.fetch),this.lock=s.lock||Zv,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Yn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=A4:this.lock=Zv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:q1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jv(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Jv(this.memoryStorage)),Yn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Wi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Wi[this.storageKey]=Object.assign(Object.assign({},Wi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Wi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Wi[this.storageKey]=Object.assign(Object.assign({},Wi[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${z1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=o4(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Yn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),XO(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ce(n)?{error:n}:{error:new B1("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const a=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:zr}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Ce(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var n,r,s;try{let a;if("email"in t){const{email:d,password:h,options:p}=t;let f=null,b=null;this.flowType==="pkce"&&([f,b]=await Bi(this.storage,this.storageKey)),a=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:f,code_challenge_method:b},xform:zr})}else if("phone"in t){const{phone:d,password:h,options:p}=t;a=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:zr})}else throw new dc("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Ce(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:o,options:l}=t;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Xv})}else if("phone"in t){const{phone:a,password:o,options:l}=t;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Xv})}else throw new dc("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new uc}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,a,o,l,c,u,d,h,p,f;let b,g;if("message"in t)b=t.message,g=t.signature;else{const{chain:w,wallet:x,statement:v,options:y}=t;let j;if(Yn())if(typeof x=="object")j=x;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))j=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const S=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const _=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),v?{statement:v}:null));let N;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")N=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)N=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)b=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${S.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const _=await j.signMessage(new TextEncoder().encode(b),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=_}}try{const{data:w,error:x}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:s4(g)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:zr});if(x)throw x;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new uc}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:x})}catch(w){if(Ce(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const n=await ai(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:o}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:zr});if(await ms(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new uc}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(Ce(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:a,nonce:o}=t,l=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:zr}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new uc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,a,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Bi(this.storage,this.storageKey));const{error:h}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new dc("You must provide either an email or phone number.")}catch(l){if(Ce(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,a;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:zr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Bi(this.storage,this.storageKey)),await Ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:S4})}catch(a){if(Ce(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new xs;const{error:s}=await Ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:a}=t,{error:o}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:a}=t,{data:o,error:l}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new dc("You must provide either an email or phone number and a type")}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ai(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<vh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await ai(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=bh()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:_s}):await this._useSession(async n=>{var r,s,a;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xs}:await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:_s})})}catch(n){if(Ce(n))return YO(n)&&(await this._removeSession(),await ms(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new xs;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Bi(this.storage,this.storageKey));const{data:u,error:d}=await Ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:_s});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new xs;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:o}=wh(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(Ce(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new xs;const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Yn())throw new hc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new hc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new qv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new qv("No code detected.");const{data:v,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!o||!u)throw new hc("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let p=d+h;c&&(p=parseInt(c));const f=p-d;f*1e3<=Yi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const b=p-h;d-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,d):d-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,d);const{data:g,error:w}=await this._getUser(a);if(w)throw w;const x={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:p,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(r){if(Ce(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ai(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{error:a};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(QO(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await ms(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=a4(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Bi(this.storage,this.storageKey,!0));try{return await Ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Ce(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var o,l,c,u,d;const{data:h,error:p}=a;if(p)throw p;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ae(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Yn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ce(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)throw o;return await Ae(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await u4(async s=>(s>0&&await c4(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:zr})),(s,a)=>{const o=200*Math.pow(2,s);return a&&yh(a)&&Date.now()+o-r<Yi})}catch(r){if(this._debug(n,"error",r),Ce(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Yn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await ai(this.storage,this.storageKey);if(s&&this.userStorage){let o=await ai(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Xi(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:bh()}else if(s&&!s.user&&!s.user){const o=await ai(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await ms(this.storage,this.storageKey+"-user"),await Xi(this.storage,this.storageKey,s)):s.user=bh()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<vh;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${vh}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),yh(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new xs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new fd;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new xs;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),Ce(a)){const o={session:null,error:a};return yh(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Xi(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=Qv(s);await Xi(this.storage,this.storageKey,a)}else{const s=Qv(n);await Xi(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ms(this.storage,this.storageKey),await ms(this.storage,this.storageKey+"-code-verifier"),await ms(this.storage,this.storageKey+"-user"),this.userStorage&&await ms(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Yn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Yi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Yi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Yi}ms, refresh threshold is ${lm} ticks`),s<=lm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof H1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Yn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await Bi(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ae(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await Ae(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const{data:o,error:l}=await Ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:a}=t;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=wh(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+GO>s)return r;const{data:a,error:o}=await Ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:f,error:b}=await this.getSession();if(b||!f.session)return{data:null,error:b};r=f.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:c}}=wh(r);n!=null&&n.allowExpired||x4(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:a,header:s,signature:o},error:null}}const d=v4(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,r4(`${l}.${c}`)))throw new dm("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}}xl.nextInstanceID=0;const O4=xl;class L4 extends O4{constructor(t){super(t)}}var M4=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class D4{constructor(t,n,r){var s,a,o;this.supabaseUrl=t,this.supabaseKey=n;const l=BO(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:AO,realtime:OO,auth:Object.assign(Object.assign({},IO),{storageKey:c}),global:RO},d=UO(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=FO(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new JI(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new EO(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new TI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return M4(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:o,flowType:l,lock:c,debug:u},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new L4({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new pO(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const F4=(e,t,n)=>new D4(e,t,n);function $4(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}$4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const z4="https://epqalebkqmkddlfomnyf.supabase.co",U4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVwcWFsZWJrcW1rZGRsZm9tbnlmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY5ODY2NzksImV4cCI6MjA3MjU2MjY3OX0.ER4376BoXZfLvFu4ERbPmNs1O16mhyqjj9E06ZBvTg0",M=F4(z4,U4,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),B4=Object.freeze(Object.defineProperty({__proto__:null,supabase:M},Symbol.toStringTag,{value:"Module"})),G1=m.createContext(void 0);function V4({children:e}){const[t,n]=m.useState(null),[r,s]=m.useState(null),[a,o]=m.useState(null),[l,c]=m.useState(!0),{toast:u}=Ve(),d=Gn();m.useEffect(()=>{const{data:{subscription:g}}=M.auth.onAuthStateChange(async(w,x)=>{o(x),n((x==null?void 0:x.user)??null),x!=null&&x.user?setTimeout(async()=>{const{data:v,error:y}=await M.from("profiles").select("*").eq("id",x.user.id).single();if(y)console.error("Error fetching profile:",y),s(null);else{const j=_=>_==="teacher"||_==="profesor"?"formador":_==="administrador"?"admin":_==="estudiante"?"student":_==="voluntariuo"?"voluntario":_,S=v?{...v,email:x.user.email,role:j(v.role)}:null;s(S)}},0):s(null),c(!1)});return M.auth.getSession().then(({data:{session:w}})=>{o(w),n((w==null?void 0:w.user)??null),w!=null&&w.user?M.from("profiles").select("*").eq("id",w.user.id).single().then(({data:x,error:v})=>{if(!v&&x){const y=S=>S==="teacher"||S==="profesor"?"formador":S==="administrador"?"admin":S==="estudiante"?"student":S==="voluntariuo"?"voluntario":S,j={...x,email:w.user.email,role:y(x.role)};s(j)}c(!1)}):c(!1)}),()=>g.unsubscribe()},[]);const b={user:t,profile:r,session:a,loading:l,signIn:async(g,w)=>{try{const{error:x}=await M.auth.signInWithPassword({email:g,password:w});return x?{error:x.message}:{}}catch{return{error:"Error inesperado al iniciar sesin"}}},signUp:async(g,w,x)=>{try{const v=`${window.location.origin}/`,{error:y}=await M.auth.signUp({email:g,password:w,options:{emailRedirectTo:v,data:{full_name:x}}});return y?{error:y.message}:{}}catch{return{error:"Error inesperado al crear cuenta"}}},signOut:async()=>{try{await M.auth.signOut(),d("/")}catch{u({title:"Error",description:"Error al cerrar sesin",variant:"destructive"})}}};return i.jsx(G1.Provider,{value:b,children:e})}function it(){const e=m.useContext(G1);if(e===void 0)throw new Error("useAuth debe ser usado dentro de AuthProvider");return e}const K1=m.createContext(void 0);function q4({children:e}){const[t,n]=m.useState(()=>localStorage.getItem("theme")||"dark");m.useEffect(()=>{const o=window.document.documentElement;o.classList.remove("light","dark"),o.classList.add(t),localStorage.setItem("theme",t)},[t]);const a={theme:t,setTheme:o=>{n(o)},toggleTheme:()=>{n(t==="dark"?"light":"dark")}};return i.jsx(K1.Provider,{value:a,children:e})}function Q1(){const e=m.useContext(K1);if(e===void 0)throw new Error("useTheme debe ser usado dentro de ThemeProvider");return e}const _h=768;function ig(){const[e,t]=m.useState(void 0);return m.useEffect(()=>{const n=window.matchMedia(`(max-width: ${_h-1}px)`),r=()=>{t(window.innerWidth<_h)};return n.addEventListener("change",r),t(window.innerWidth<_h),()=>n.removeEventListener("change",r)},[]),!!e}const W4=Di("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 will-change-transform focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 elev-1 hover:elev-2 hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 elev-1 hover:elev-2 hover:-translate-y-0.5",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground elev-1 hover:elev-2 hover:-translate-y-0.5",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 elev-1 hover:elev-2 hover:-translate-y-0.5",ghost:"hover:bg-accent hover:text-accent-foreground hover:-translate-y-0.5",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),V=m.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},a)=>{const o=r?Ha:"button";return i.jsx(o,{className:oe(W4({variant:t,size:n,className:e})),ref:a,...s})});V.displayName="Button";const ve=m.forwardRef(({className:e,type:t,...n},r)=>i.jsx("input",{type:t,className:oe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));ve.displayName="Input";var H4="Separator",ey="horizontal",G4=["horizontal","vertical"],Y1=m.forwardRef((e,t)=>{const{decorative:n,orientation:r=ey,...s}=e,a=K4(r)?r:ey,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(xe.div,{"data-orientation":a,...l,...s,ref:t})});Y1.displayName=H4;function K4(e){return G4.includes(e)}var X1=Y1;const ag=m.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>i.jsx(X1,{ref:s,decorative:n,orientation:t,className:oe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));ag.displayName=X1.displayName;var Sh="focusScope.autoFocusOnMount",Nh="focusScope.autoFocusOnUnmount",ty={bubbles:!1,cancelable:!0},Q4="FocusScope",og=m.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=e,[l,c]=m.useState(null),u=An(s),d=An(a),h=m.useRef(null),p=Me(t,g=>c(g)),f=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let g=function(y){if(f.paused||!l)return;const j=y.target;l.contains(j)?h.current=j:vs(h.current,{select:!0})},w=function(y){if(f.paused||!l)return;const j=y.relatedTarget;j!==null&&(l.contains(j)||vs(h.current,{select:!0}))},x=function(y){if(document.activeElement===document.body)for(const S of y)S.removedNodes.length>0&&vs(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const v=new MutationObserver(x);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),v.disconnect()}}},[r,l,f.paused]),m.useEffect(()=>{if(l){ry.add(f);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(Sh,ty);l.addEventListener(Sh,u),l.dispatchEvent(x),x.defaultPrevented||(Y4(tL(J1(l)),{select:!0}),document.activeElement===g&&vs(l))}return()=>{l.removeEventListener(Sh,u),setTimeout(()=>{const x=new CustomEvent(Nh,ty);l.addEventListener(Nh,d),l.dispatchEvent(x),x.defaultPrevented||vs(g??document.body,{select:!0}),l.removeEventListener(Nh,d),ry.remove(f)},0)}}},[l,u,d,f]);const b=m.useCallback(g=>{if(!n&&!r||f.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(w&&x){const v=g.currentTarget,[y,j]=X4(v);y&&j?!g.shiftKey&&x===j?(g.preventDefault(),n&&vs(y,{select:!0})):g.shiftKey&&x===y&&(g.preventDefault(),n&&vs(j,{select:!0})):x===v&&g.preventDefault()}},[n,r,f.paused]);return i.jsx(xe.div,{tabIndex:-1,...o,ref:p,onKeyDown:b})});og.displayName=Q4;function Y4(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(vs(r,{select:t}),document.activeElement!==n)return}function X4(e){const t=J1(e),n=ny(t,e),r=ny(t.reverse(),e);return[n,r]}function J1(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ny(e,t){for(const n of e)if(!J4(n,{upTo:t}))return n}function J4(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Z4(e){return e instanceof HTMLInputElement&&"select"in e}function vs(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Z4(e)&&t&&e.select()}}var ry=eL();function eL(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=sy(e,t),e.unshift(t)},remove(t){var n;e=sy(e,t),(n=e[0])==null||n.resume()}}}function sy(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function tL(e){return e.filter(t=>t.tagName!=="A")}var kh=0;function Z1(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??iy()),document.body.insertAdjacentElement("beforeend",e[1]??iy()),kh++,()=>{kh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),kh--}},[])}function iy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var kr=function(){return kr=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},kr.apply(this,arguments)};function e_(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function nL(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var Mc="right-scroll-bar-position",Dc="width-before-scroll-bar",rL="with-scroll-bars-hidden",sL="--removed-body-scroll-bar-size";function Ch(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function iL(e,t){var n=m.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var aL=typeof window<"u"?m.useLayoutEffect:m.useEffect,ay=new WeakMap;function oL(e,t){var n=iL(null,function(r){return e.forEach(function(s){return Ch(s,r)})});return aL(function(){var r=ay.get(n);if(r){var s=new Set(r),a=new Set(e),o=n.current;s.forEach(function(l){a.has(l)||Ch(l,null)}),a.forEach(function(l){s.has(l)||Ch(l,o)})}ay.set(n,e)},[e]),n}function lL(e){return e}function cL(e,t){t===void 0&&(t=lL);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=t(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function uL(e){e===void 0&&(e={});var t=cL(null);return t.options=kr({async:!0,ssr:!1},e),t}var t_=function(e){var t=e.sideCar,n=e_(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,kr({},n))};t_.isSideCarExport=!0;function dL(e,t){return e.useMedium(t),t_}var n_=uL(),Eh=function(){},md=m.forwardRef(function(e,t){var n=m.useRef(null),r=m.useState({onScrollCapture:Eh,onWheelCapture:Eh,onTouchMoveCapture:Eh}),s=r[0],a=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,p=e.sideCar,f=e.noRelative,b=e.noIsolation,g=e.inert,w=e.allowPinchZoom,x=e.as,v=x===void 0?"div":x,y=e.gapMode,j=e_(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=p,_=oL([n,t]),N=kr(kr({},j),s);return m.createElement(m.Fragment,null,d&&m.createElement(S,{sideCar:n_,removeScrollBar:u,shards:h,noRelative:f,noIsolation:b,inert:g,setCallbacks:a,allowPinchZoom:!!w,lockRef:n,gapMode:y}),o?m.cloneElement(m.Children.only(l),kr(kr({},N),{ref:_})):m.createElement(v,kr({},N,{className:c,ref:_}),l))});md.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};md.classNames={fullWidth:Dc,zeroRight:Mc};var hL=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fL(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=hL();return t&&e.setAttribute("nonce",t),e}function mL(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function pL(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var gL=function(){var e=0,t=null;return{add:function(n){e==0&&(t=fL())&&(mL(t,n),pL(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},xL=function(){var e=gL();return function(t,n){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},r_=function(){var e=xL(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},vL={left:0,top:0,right:0,gap:0},Ph=function(e){return parseInt(e||"",10)||0},yL=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Ph(n),Ph(r),Ph(s)]},wL=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return vL;var t=yL(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},bL=r_(),va="data-scroll-locked",jL=function(e,t,n,r){var s=e.left,a=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(rL,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(va,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Mc,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Dc,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Mc," .").concat(Mc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Dc," .").concat(Dc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(va,`] {
    `).concat(sL,": ").concat(l,`px;
  }
`)},oy=function(){var e=parseInt(document.body.getAttribute(va)||"0",10);return isFinite(e)?e:0},_L=function(){m.useEffect(function(){return document.body.setAttribute(va,(oy()+1).toString()),function(){var e=oy()-1;e<=0?document.body.removeAttribute(va):document.body.setAttribute(va,e.toString())}},[])},SL=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;_L();var a=m.useMemo(function(){return wL(s)},[s]);return m.createElement(bL,{styles:jL(a,!t,s,n?"":"!important")})},hm=!1;if(typeof window<"u")try{var fc=Object.defineProperty({},"passive",{get:function(){return hm=!0,!0}});window.addEventListener("test",fc,fc),window.removeEventListener("test",fc,fc)}catch{hm=!1}var Hi=hm?{passive:!1}:!1,NL=function(e){return e.tagName==="TEXTAREA"},s_=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!NL(e)&&n[t]==="visible")},kL=function(e){return s_(e,"overflowY")},CL=function(e){return s_(e,"overflowX")},ly=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=i_(e,r);if(s){var a=a_(e,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},EL=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},PL=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},i_=function(e,t){return e==="v"?kL(t):CL(t)},a_=function(e,t){return e==="v"?EL(t):PL(t)},TL=function(e,t){return e==="h"&&t==="rtl"?-1:1},RL=function(e,t,n,r,s){var a=TL(e,window.getComputedStyle(t).direction),o=a*r,l=n.target,c=t.contains(l),u=!1,d=o>0,h=0,p=0;do{if(!l)break;var f=a_(e,l),b=f[0],g=f[1],w=f[2],x=g-w-a*b;(b||x)&&i_(e,l)&&(h+=x,p+=b);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(p)<1||!s))&&(u=!0),u},mc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},cy=function(e){return[e.deltaX,e.deltaY]},uy=function(e){return e&&"current"in e?e.current:e},AL=function(e,t){return e[0]===t[0]&&e[1]===t[1]},IL=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},OL=0,Gi=[];function LL(e){var t=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(OL++)[0],a=m.useState(r_)[0],o=m.useRef(e);m.useEffect(function(){o.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=nL([e.lockRef.current],(e.shards||[]).map(uy),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=m.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var x=mc(g),v=n.current,y="deltaX"in g?g.deltaX:v[0]-x[0],j="deltaY"in g?g.deltaY:v[1]-x[1],S,_=g.target,N=Math.abs(y)>Math.abs(j)?"h":"v";if("touches"in g&&N==="h"&&_.type==="range")return!1;var C=ly(N,_);if(!C)return!0;if(C?S=N:(S=N==="v"?"h":"v",C=ly(N,_)),!C)return!1;if(!r.current&&"changedTouches"in g&&(y||j)&&(r.current=S),!S)return!0;var A=r.current||S;return RL(A,w,g,A==="h"?y:j,!0)},[]),c=m.useCallback(function(g){var w=g;if(!(!Gi.length||Gi[Gi.length-1]!==a)){var x="deltaY"in w?cy(w):mc(w),v=t.current.filter(function(S){return S.name===w.type&&(S.target===w.target||w.target===S.shadowParent)&&AL(S.delta,x)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var y=(o.current.shards||[]).map(uy).filter(Boolean).filter(function(S){return S.contains(w.target)}),j=y.length>0?l(w,y[0]):!o.current.noIsolation;j&&w.cancelable&&w.preventDefault()}}},[]),u=m.useCallback(function(g,w,x,v){var y={name:g,delta:w,target:x,should:v,shadowParent:ML(x)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(j){return j!==y})},1)},[]),d=m.useCallback(function(g){n.current=mc(g),r.current=void 0},[]),h=m.useCallback(function(g){u(g.type,cy(g),g.target,l(g,e.lockRef.current))},[]),p=m.useCallback(function(g){u(g.type,mc(g),g.target,l(g,e.lockRef.current))},[]);m.useEffect(function(){return Gi.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Hi),document.addEventListener("touchmove",c,Hi),document.addEventListener("touchstart",d,Hi),function(){Gi=Gi.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,Hi),document.removeEventListener("touchmove",c,Hi),document.removeEventListener("touchstart",d,Hi)}},[]);var f=e.removeScrollBar,b=e.inert;return m.createElement(m.Fragment,null,b?m.createElement(a,{styles:IL(s)}):null,f?m.createElement(SL,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function ML(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const DL=dL(n_,LL);var lg=m.forwardRef(function(e,t){return m.createElement(md,kr({},e,{ref:t,sideCar:DL}))});lg.classNames=md.classNames;var FL=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ki=new WeakMap,pc=new WeakMap,gc={},Th=0,o_=function(e){return e&&(e.host||o_(e.parentNode))},$L=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=o_(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},zL=function(e,t,n,r){var s=$L(t,Array.isArray(e)?e:[e]);gc[n]||(gc[n]=new WeakMap);var a=gc[n],o=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(l.has(p))d(p);else try{var f=p.getAttribute(r),b=f!==null&&f!=="false",g=(Ki.get(p)||0)+1,w=(a.get(p)||0)+1;Ki.set(p,g),a.set(p,w),o.push(p),g===1&&b&&pc.set(p,!0),w===1&&p.setAttribute(n,"true"),b||p.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return d(t),l.clear(),Th++,function(){o.forEach(function(h){var p=Ki.get(h)-1,f=a.get(h)-1;Ki.set(h,p),a.set(h,f),p||(pc.has(h)||h.removeAttribute(r),pc.delete(h)),f||h.removeAttribute(n)}),Th--,Th||(Ki=new WeakMap,Ki=new WeakMap,pc=new WeakMap,gc={})}},l_=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=FL(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),zL(r,s,n,"aria-hidden")):function(){return null}},pd="Dialog",[c_,gB]=yn(pd),[UL,mr]=c_(pd),u_=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,l=m.useRef(null),c=m.useRef(null),[u,d]=Ar({prop:r,defaultProp:s??!1,onChange:a,caller:pd});return i.jsx(UL,{scope:t,triggerRef:l,contentRef:c,contentId:Kr(),titleId:Kr(),descriptionId:Kr(),open:u,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};u_.displayName=pd;var d_="DialogTrigger",h_=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=mr(d_,n),a=Me(t,s.triggerRef);return i.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":dg(s.open),...r,ref:a,onClick:pe(e.onClick,s.onOpenToggle)})});h_.displayName=d_;var cg="DialogPortal",[BL,f_]=c_(cg,{forceMount:void 0}),m_=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=mr(cg,t);return i.jsx(BL,{scope:t,forceMount:n,children:m.Children.map(r,o=>i.jsx(is,{present:n||a.open,children:i.jsx(Hu,{asChild:!0,container:s,children:o})}))})};m_.displayName=cg;var _u="DialogOverlay",p_=m.forwardRef((e,t)=>{const n=f_(_u,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=mr(_u,e.__scopeDialog);return a.modal?i.jsx(is,{present:r||a.open,children:i.jsx(qL,{...s,ref:t})}):null});p_.displayName=_u;var VL=Da("DialogOverlay.RemoveScroll"),qL=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=mr(_u,n);return i.jsx(lg,{as:VL,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(xe.div,{"data-state":dg(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ri="DialogContent",g_=m.forwardRef((e,t)=>{const n=f_(Ri,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=mr(Ri,e.__scopeDialog);return i.jsx(is,{present:r||a.open,children:a.modal?i.jsx(WL,{...s,ref:t}):i.jsx(HL,{...s,ref:t})})});g_.displayName=Ri;var WL=m.forwardRef((e,t)=>{const n=mr(Ri,e.__scopeDialog),r=m.useRef(null),s=Me(t,n.contentRef,r);return m.useEffect(()=>{const a=r.current;if(a)return l_(a)},[]),i.jsx(x_,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pe(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:pe(e.onFocusOutside,a=>a.preventDefault())})}),HL=m.forwardRef((e,t)=>{const n=mr(Ri,e.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return i.jsx(x_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),x_=m.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=e,l=mr(Ri,n),c=m.useRef(null),u=Me(t,c);return Z1(),i.jsxs(i.Fragment,{children:[i.jsx(og,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(Cl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":dg(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(GL,{titleId:l.titleId}),i.jsx(QL,{contentRef:c,descriptionId:l.descriptionId})]})]})}),ug="DialogTitle",v_=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=mr(ug,n);return i.jsx(xe.h2,{id:s.titleId,...r,ref:t})});v_.displayName=ug;var y_="DialogDescription",w_=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=mr(y_,n);return i.jsx(xe.p,{id:s.descriptionId,...r,ref:t})});w_.displayName=y_;var b_="DialogClose",j_=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=mr(b_,n);return i.jsx(xe.button,{type:"button",...r,ref:t,onClick:pe(e.onClick,()=>s.onOpenChange(!1))})});j_.displayName=b_;function dg(e){return e?"open":"closed"}var __="DialogTitleWarning",[xB,S_]=s2(__,{contentName:Ri,titleName:ug,docsSlug:"dialog"}),GL=({titleId:e})=>{const t=S_(__),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},KL="DialogDescriptionWarning",QL=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${S_(KL).contentName}}.`;return m.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},N_=u_,YL=h_,k_=m_,gd=p_,xd=g_,vd=v_,yd=w_,C_=j_;const XL=N_,JL=k_,E_=m.forwardRef(({className:e,...t},n)=>i.jsx(gd,{className:oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));E_.displayName=gd.displayName;const ZL=Di("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),P_=m.forwardRef(({side:e="right",className:t,children:n,...r},s)=>i.jsxs(JL,{children:[i.jsx(E_,{}),i.jsxs(xd,{ref:s,className:oe(ZL({side:e}),t),...r,children:[n,i.jsxs(C_,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[i.jsx(Ga,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));P_.displayName=xd.displayName;const eM=m.forwardRef(({className:e,...t},n)=>i.jsx(vd,{ref:n,className:oe("text-lg font-semibold text-foreground",e),...t}));eM.displayName=vd.displayName;const tM=m.forwardRef(({className:e,...t},n)=>i.jsx(yd,{ref:n,className:oe("text-sm text-muted-foreground",e),...t}));tM.displayName=yd.displayName;function dy({className:e,...t}){return i.jsx("div",{className:oe("animate-pulse rounded-md bg-muted",e),...t})}const nM="sidebar:state",rM=60*60*24*7,sM="16rem",iM="18rem",aM="3rem",oM="b",T_=m.createContext(null);function Ol(){const e=m.useContext(T_);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const R_=m.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:s,children:a,...o},l)=>{const c=ig(),[u,d]=m.useState(!1),[h,p]=m.useState(e),f=t??h,b=m.useCallback(v=>{const y=typeof v=="function"?v(f):v;n?n(y):p(y),document.cookie=`${nM}=${y}; path=/; max-age=${rM}`},[n,f]),g=m.useCallback(()=>c?d(v=>!v):b(v=>!v),[c,b,d]);m.useEffect(()=>{const v=y=>{y.key===oM&&(y.metaKey||y.ctrlKey)&&(y.preventDefault(),g())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[g]);const w=f?"expanded":"collapsed",x=m.useMemo(()=>({state:w,open:f,setOpen:b,isMobile:c,openMobile:u,setOpenMobile:d,toggleSidebar:g}),[w,f,b,c,u,d,g]);return i.jsx(T_.Provider,{value:x,children:i.jsx(i1,{delayDuration:0,children:i.jsx("div",{style:{"--sidebar-width":sM,"--sidebar-width-icon":aM,...s},className:oe("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...o,children:a})})})});R_.displayName="SidebarProvider";const A_=m.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:s,...a},o)=>{const{isMobile:l,state:c,openMobile:u,setOpenMobile:d}=Ol();return n==="none"?i.jsx("div",{className:oe("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...a,children:s}):l?i.jsx(XL,{open:u,onOpenChange:d,...a,children:i.jsx(P_,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":iM},side:e,children:i.jsx("div",{className:"flex h-full w-full flex-col",children:s})})}):i.jsxs("div",{ref:o,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":t,"data-side":e,children:[i.jsx("div",{className:oe("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),i.jsx("div",{className:oe("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:i.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});A_.displayName="Sidebar";const I_=m.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:s}=Ol();return i.jsxs(V,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:oe("h-7 w-7",e),onClick:a=>{t==null||t(a),s()},...n,children:[i.jsx(aP,{}),i.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});I_.displayName="SidebarTrigger";const lM=m.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=Ol();return i.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:oe("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});lM.displayName="SidebarRail";const cM=m.forwardRef(({className:e,...t},n)=>i.jsx("main",{ref:n,className:oe("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));cM.displayName="SidebarInset";const uM=m.forwardRef(({className:e,...t},n)=>i.jsx(ve,{ref:n,"data-sidebar":"input",className:oe("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));uM.displayName="SidebarInput";const O_=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,"data-sidebar":"header",className:oe("flex flex-col gap-2 p-2",e),...t}));O_.displayName="SidebarHeader";const L_=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,"data-sidebar":"footer",className:oe("flex flex-col gap-2 p-2",e),...t}));L_.displayName="SidebarFooter";const dM=m.forwardRef(({className:e,...t},n)=>i.jsx(ag,{ref:n,"data-sidebar":"separator",className:oe("mx-2 w-auto bg-sidebar-border",e),...t}));dM.displayName="SidebarSeparator";const M_=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,"data-sidebar":"content",className:oe("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));M_.displayName="SidebarContent";const fm=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,"data-sidebar":"group",className:oe("relative flex w-full min-w-0 flex-col p-2",e),...t}));fm.displayName="SidebarGroup";const mm=m.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const s=t?Ha:"div";return i.jsx(s,{ref:r,"data-sidebar":"group-label",className:oe("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});mm.displayName="SidebarGroupLabel";const hM=m.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const s=t?Ha:"button";return i.jsx(s,{ref:r,"data-sidebar":"group-action",className:oe("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});hM.displayName="SidebarGroupAction";const pm=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,"data-sidebar":"group-content",className:oe("w-full text-sm",e),...t}));pm.displayName="SidebarGroupContent";const gm=m.forwardRef(({className:e,...t},n)=>i.jsx("ul",{ref:n,"data-sidebar":"menu",className:oe("flex w-full min-w-0 flex-col gap-1",e),...t}));gm.displayName="SidebarMenu";const Eo=m.forwardRef(({className:e,...t},n)=>i.jsx("li",{ref:n,"data-sidebar":"menu-item",className:oe("group/menu-item relative",e),...t}));Eo.displayName="SidebarMenuItem";const fM=Di("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Po=m.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:s,className:a,...o},l)=>{const c=e?Ha:"button",{isMobile:u,state:d}=Ol(),h=i.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:oe(fM({variant:n,size:r}),a),...o});return s?(typeof s=="string"&&(s={children:s}),i.jsxs(XR,{children:[i.jsx(JR,{asChild:!0,children:h}),i.jsx(a1,{side:"right",align:"center",hidden:d!=="collapsed"||u,...s})]})):h});Po.displayName="SidebarMenuButton";const mM=m.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},s)=>{const a=t?Ha:"button";return i.jsx(a,{ref:s,"data-sidebar":"menu-action",className:oe("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});mM.displayName="SidebarMenuAction";const pM=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:oe("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));pM.displayName="SidebarMenuBadge";const gM=m.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const s=m.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return i.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:oe("rounded-md h-8 flex gap-2 px-2 items-center",e),...n,children:[t&&i.jsx(dy,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),i.jsx(dy,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});gM.displayName="SidebarMenuSkeleton";const xM=m.forwardRef(({className:e,...t},n)=>i.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:oe("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));xM.displayName="SidebarMenuSub";const vM=m.forwardRef(({...e},t)=>i.jsx("li",{ref:t,...e}));vM.displayName="SidebarMenuSubItem";const yM=m.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...s},a)=>{const o=e?Ha:"a";return i.jsx(o,{ref:a,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:oe("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...s})});yM.displayName="SidebarMenuSubButton";var D_={exports:{}},F_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=m;function wM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bM=typeof Object.is=="function"?Object.is:wM,jM=Ba.useState,_M=Ba.useEffect,SM=Ba.useLayoutEffect,NM=Ba.useDebugValue;function kM(e,t){var n=t(),r=jM({inst:{value:n,getSnapshot:t}}),s=r[0].inst,a=r[1];return SM(function(){s.value=n,s.getSnapshot=t,Rh(s)&&a({inst:s})},[e,n,t]),_M(function(){return Rh(s)&&a({inst:s}),e(function(){Rh(s)&&a({inst:s})})},[e]),NM(n),n}function Rh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bM(e,n)}catch{return!0}}function CM(e,t){return t()}var EM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?CM:kM;F_.useSyncExternalStore=Ba.useSyncExternalStore!==void 0?Ba.useSyncExternalStore:EM;D_.exports=F_;var PM=D_.exports;function TM(){return PM.useSyncExternalStore(RM,()=>!0,()=>!1)}function RM(){return()=>{}}var hg="Avatar",[AM,vB]=yn(hg),[IM,$_]=AM(hg),z_=m.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,a]=m.useState("idle");return i.jsx(IM,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(xe.span,{...r,ref:t})})});z_.displayName=hg;var U_="AvatarImage",B_=m.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=e,o=$_(U_,n),l=OM(r,a),c=An(u=>{s(u),o.onImageLoadingStatusChange(u)});return Nt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(xe.img,{...a,ref:t,src:r}):null});B_.displayName=U_;var V_="AvatarFallback",q_=m.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,a=$_(V_,n),[o,l]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(xe.span,{...s,ref:t}):null});q_.displayName=V_;function hy(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function OM(e,{referrerPolicy:t,crossOrigin:n}){const r=TM(),s=m.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=m.useState(()=>hy(a,e));return Nt(()=>{l(hy(a,e))},[a,e]),Nt(()=>{const c=h=>()=>{l(h)};if(!a)return;const u=c("loaded"),d=c("error");return a.addEventListener("load",u),a.addEventListener("error",d),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",u),a.removeEventListener("error",d)}},[a,n,t]),o}var W_=z_,H_=B_,G_=q_;const ns=m.forwardRef(({className:e,...t},n)=>i.jsx(W_,{ref:n,className:oe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ns.displayName=W_.displayName;const LM=m.forwardRef(({className:e,...t},n)=>i.jsx(H_,{ref:n,className:oe("aspect-square h-full w-full",e),...t}));LM.displayName=H_.displayName;const rs=m.forwardRef(({className:e,...t},n)=>i.jsx(G_,{ref:n,className:oe("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));rs.displayName=G_.displayName;const St=N_,MM=YL,DM=k_,K_=m.forwardRef(({className:e,...t},n)=>i.jsx(gd,{ref:n,className:oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));K_.displayName=gd.displayName;const wt=m.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(DM,{children:[i.jsx(K_,{}),i.jsxs(xd,{ref:r,className:oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,i.jsxs(C_,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Ga,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wt.displayName=xd.displayName;const kt=({className:e,...t})=>i.jsx("div",{className:oe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});kt.displayName="DialogHeader";const Ct=m.forwardRef(({className:e,...t},n)=>i.jsx(vd,{ref:n,className:oe("text-lg font-semibold leading-none tracking-tight",e),...t}));Ct.displayName=vd.displayName;const ei=m.forwardRef(({className:e,...t},n)=>i.jsx(yd,{ref:n,className:oe("text-sm text-muted-foreground",e),...t}));ei.displayName=yd.displayName;var FM="Label",Q_=m.forwardRef((e,t)=>i.jsx(xe.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Q_.displayName=FM;var Y_=Q_;const $M=Di("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),X=m.forwardRef(({className:e,...t},n)=>i.jsx(Y_,{ref:n,className:oe($M(),e),...t}));X.displayName=Y_.displayName;const At=m.forwardRef(({className:e,...t},n)=>i.jsx("textarea",{className:oe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));At.displayName="Textarea";const zM=e=>{const t=[];return(e==="admin"||e==="formador"||e==="teacher"||e==="profesor")&&(t.push({title:"Actividad",url:"/admin",icon:lj}),t.push({title:"Usuarios",url:"/usuarios",icon:rn})),e==="student"?t.push({title:"Mi Formacin",url:"/mi-formacion",icon:Ir}):t.push({title:"Programas",url:"/programas",icon:qe},{title:"Cursos",url:"/cursos",icon:Ir}),(e==="admin"||e==="formador"||e==="teacher"||e==="profesor")&&(t.push({title:"Lecciones",url:"/lecciones",icon:ur}),t.push({title:"Trabajos Prcticos",url:"/profesor",icon:vj})),t.push({title:"Calendario",url:"/calendario",icon:or},{title:"Comunidad",url:"/comunidad",icon:Pi}),e!=="student"&&t.push({title:"Slack",url:"/slack",icon:Pi}),t};function UM(){const{state:e}=Ol(),{profile:t,signOut:n}=it(),{theme:r,toggleTheme:s}=Q1();Js().pathname;const o=zM((t==null?void 0:t.role)||"student"),l=({isActive:v})=>v?"bg-sidebar-accent text-sidebar-accent-foreground font-medium":"text-sidebar-foreground hover:bg-sidebar-accent/50 hover:text-sidebar-accent-foreground",c=v=>v.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2),u=e==="collapsed",[d,h]=m.useState(!1),[p,f]=m.useState(""),[b,g]=m.useState(""),w=v=>{switch((v||"").toLowerCase()){case"admin":case"administrador":return"Administrador";case"teacher":case"formador":return"Formador";case"voluntario":return"Voluntario";case"student":case"estudiante":default:return"Estudiante"}},x=v=>{v.preventDefault();const y=`mailto:soporte@espaciodegemotriasagrada.com?subject=${encodeURIComponent("Consulta de soporte")}&body=${encodeURIComponent(`De: ${p}

${b}`)}`;window.location.href=y,h(!1)};return i.jsxs(A_,{className:u?"w-14 overflow-hidden":"w-60 overflow-hidden",collapsible:"icon",style:{background:"hsl(var(--surface) / 0.9)",backdropFilter:"blur(12px)",boxShadow:"var(--shadow-elev-1)"},children:[i.jsxs(O_,{className:"border-b border-sidebar-border p-4",children:[!u&&i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("img",{src:"/Logo-email.png",alt:"Logo",className:"h-8 w-auto object-contain max-w-[160px]"})}),u&&i.jsx("img",{src:"/Logo-email.png",alt:"GS",className:"h-8 w-auto object-contain mx-auto"})]}),i.jsxs(M_,{className:"overflow-hidden scrollbar-hide",children:[i.jsxs(fm,{children:[i.jsx(mm,{children:!u&&"Navegacin"}),i.jsx(pm,{children:i.jsx(gm,{children:o.map(v=>i.jsx(Eo,{children:i.jsx(Po,{asChild:!0,children:i.jsxs(Lv,{to:v.url,className:l,children:[i.jsx(v.icon,{className:"h-4 w-4"}),!u&&i.jsx("span",{children:v.title})]})})},v.title))})})]}),i.jsx(ag,{className:"mx-4"}),i.jsxs(fm,{children:[i.jsx(mm,{children:!u&&"Configuracin"}),i.jsx(pm,{children:i.jsxs(gm,{children:[i.jsx(Eo,{children:i.jsx(Po,{asChild:!0,children:i.jsxs(Lv,{to:"/cuenta",className:l,children:[i.jsx($p,{className:"h-4 w-4"}),!u&&i.jsx("span",{children:"Mi Cuenta"})]})})}),i.jsx(Eo,{children:i.jsxs(Po,{onClick:s,children:[r==="dark"?i.jsx(xj,{className:"h-4 w-4"}):i.jsx(hj,{className:"h-4 w-4"}),!u&&i.jsx("span",{children:r==="dark"?"Modo Claro":"Modo Oscuro"})]})}),(t==null?void 0:t.role)==="student"&&i.jsx(Eo,{children:i.jsxs(Po,{onClick:()=>h(!0),children:[i.jsx(Pi,{className:"h-4 w-4"}),!u&&i.jsx("span",{children:"Soporte"})]})})]})})]})]}),i.jsxs(L_,{className:"border-t border-sidebar-border p-4",children:[!u&&t&&i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx(ns,{className:"h-8 w-8",children:i.jsx(rs,{className:"bg-accent text-accent-foreground text-xs",children:c(t.full_name)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium truncate",children:t.full_name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:w(t.role)})]})]}),i.jsxs(V,{onClick:n,variant:"ghost",size:u?"icon":"sm",className:"w-full justify-start text-muted-foreground hover:text-foreground",children:[i.jsx(sP,{className:"h-4 w-4"}),!u&&i.jsx("span",{className:"ml-2",children:"Salir"})]}),i.jsx(St,{open:d,onOpenChange:h,children:i.jsxs(wt,{children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Enviar consulta"})}),i.jsxs("form",{onSubmit:x,className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Tu email"}),i.jsx(ve,{type:"email",value:p,onChange:v=>f(v.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Mensaje"}),i.jsx(At,{value:b,onChange:v=>g(v.target.value),rows:4,required:!0})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(V,{type:"submit",children:"Enviar"})})]})]})})]})]})}function vt({children:e}){const{user:t,loading:n}=it();return n?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):t?i.jsx(R_,{children:i.jsxs("div",{className:"min-h-screen flex w-full bg-gradient-to-br from-background via-background to-surface/30",children:[i.jsx(UM,{}),i.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[i.jsxs("header",{className:"h-14 border-b border-border bg-surface/80 backdrop-blur-md flex items-center px-4 sticky top-0 z-40 elev-1",children:[i.jsx(I_,{className:"mr-2"}),i.jsx("div",{className:"flex-1"})]}),i.jsx("main",{className:"flex-1 p-6 overflow-auto",children:e})]})]})}):i.jsx(ir,{to:"/",replace:!0})}const K=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:oe("rounded-lg border bg-card text-card-foreground elev-2 hover:elev-3 hover:-translate-y-0.5 transition-all duration-300 will-change-transform",e),...t}));K.displayName="Card";const ye=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:oe("flex flex-col space-y-1.5 p-6",e),...t}));ye.displayName="CardHeader";const we=m.forwardRef(({className:e,...t},n)=>i.jsx("h3",{ref:n,className:oe("text-2xl font-semibold leading-none tracking-tight",e),...t}));we.displayName="CardTitle";const X_=m.forwardRef(({className:e,...t},n)=>i.jsx("p",{ref:n,className:oe("text-sm text-muted-foreground",e),...t}));X_.displayName="CardDescription";const Q=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:oe("p-6 pt-0",e),...t}));Q.displayName="CardContent";const BM=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:oe("flex items-center p-6 pt-0",e),...t}));BM.displayName="CardFooter";const VM=Di("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ee({className:e,variant:t,...n}){return i.jsx("div",{className:oe(VM({variant:t}),e),...n})}function qM(){const{user:e}=it(),[t,n]=m.useState([]),[r,s]=m.useState([]),[a,o]=m.useState(!0);m.useEffect(()=>{e&&l()},[e]);const l=async()=>{if(e)try{o(!0);const{data:u,error:d}=await M.from("enrollments").select(`
          status,
          created_at,
          programs (
            id,
            title,
            summary,
            slug,
            poster_2x3_url,
            wide_11x6_url
          )
        `).eq("user_id",e.id).eq("status","active");if(d)throw d;const h=await Promise.all((u||[]).map(async y=>{const j=y.programs;if(!j)return null;const{data:S,error:_}=await M.from("program_courses").select(`
              courses (
                id,
                title,
                summary,
                slug,
                sort_order
              )
            `).eq("program_id",j.id).order("sort_order");if(_)throw _;const N=(S==null?void 0:S.map(C=>C.courses).filter(Boolean))||[];if(N.length>0){const C=await Promise.all(N.map(async A=>{const{count:R}=await M.from("lessons").select("*",{count:"exact",head:!0}).eq("course_id",A.id),{data:O}=await M.from("lessons").select("id").eq("course_id",A.id),T=(O==null?void 0:O.map(B=>B.id))||[];let z=0;if(T.length>0){const{count:B}=await M.from("lesson_progress").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("completed",!0).in("lesson_id",T);z=B||0}const I=R&&R>0?Math.round(z/R*100):0;return{...A,lessons_count:R||0,progress_percent:I}}));return{...j,enrollment_status:y.status,enrolled_at:y.created_at,courses:C}}return{...j,enrollment_status:y.status,enrolled_at:y.created_at,courses:[]}})),{data:p,error:f}=await M.from("course_enrollments").select(`
          status,
          created_at,
          courses (
            id,
            title,
            summary,
            slug,
            poster_2x3_url,
            wide_11x6_url
          )
        `).eq("user_id",e.id).eq("status","active");if(f)throw f;const b=await Promise.all((p||[]).map(async y=>{const j=y.courses;if(!j)return null;const{count:S}=await M.from("lessons").select("*",{count:"exact",head:!0}).eq("course_id",j.id),{data:_}=await M.from("lessons").select("id").eq("course_id",j.id),N=(_==null?void 0:_.map(O=>O.id))||[];let C=0;if(N.length>0){const{count:O}=await M.from("lesson_progress").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("completed",!0).in("lesson_id",N);C=O||0}const A=S&&S>0?Math.round(C/S*100):0;return{...j,enrollment_status:y.status,enrolled_at:y.created_at,lessons_count:S||0,progress_percent:A,type:"individual"}})),{data:g}=await M.from("enrollments").select("program_id").eq("user_id",e.id).eq("status","active"),w=(g||[]).map(y=>y.program_id).filter(Boolean);let x=new Set;if(w.length>0){const{data:y}=await M.from("program_courses").select("course_id").in("program_id",w);(y||[]).forEach(j=>{j.course_id&&x.add(j.course_id)})}const v=(b||[]).filter(y=>y&&!x.has(y.id));n(h.filter(Boolean)),s(v.filter(Boolean))}catch(u){console.error("Error fetching enrolled data:",u)}finally{o(!1)}},c=u=>new Date(u).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});return a?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Mis Programas"}),i.jsx("p",{className:"text-muted-foreground",children:"Programas en los que ests inscrito y tu progreso"})]}),t.length===0&&r.length===0?i.jsx(K,{children:i.jsxs(Q,{className:"p-8 text-center",children:[i.jsx(qe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No tienes programas asignados"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Contacta con tu instructor para que te asigne programas de estudio"}),i.jsx(V,{asChild:!0,children:i.jsx(ar,{to:"/programas",children:"Explorar Programas"})})]})}):i.jsxs("div",{className:"space-y-6",children:[t.length>0&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Programas"}),i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.map(u=>{var f,b,g;const d=((f=u.courses)==null?void 0:f.reduce((w,x)=>w+(x.progress_percent||0),0))/(((b=u.courses)==null?void 0:b.length)||1)||0,h=d>0,p=((g=u.courses)==null?void 0:g.length)||0;return i.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-shadow group",children:i.jsxs(ar,{to:`/programas/${u.slug}`,children:[i.jsxs("div",{className:"aspect-[2/3] relative overflow-hidden rounded-t-lg",children:[u.poster_2x3_url||u.wide_11x6_url?i.jsx("img",{src:u.poster_2x3_url||u.wide_11x6_url,alt:u.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/20 to-accent/10 flex items-center justify-center",children:i.jsx(qe,{className:"h-16 w-16 text-accent"})}),h&&i.jsx("div",{className:"absolute top-3 left-3",children:i.jsxs(Ee,{className:"bg-accent text-white",children:[Math.round(d),"% completo"]})})]}),i.jsxs(Q,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:u.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-3",children:u.summary||"Descubre los secretos de la geometra sagrada"}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(qe,{className:"h-3 w-3"}),i.jsxs("span",{children:[p," cursos"]})]}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(or,{className:"h-3 w-3"}),i.jsxs("span",{children:["Desde ",c(u.enrolled_at)]})]})]}),u.courses&&u.courses.length>0&&i.jsxs("div",{className:"mb-3",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Progreso por curso:"}),i.jsxs("div",{className:"space-y-1",children:[u.courses.slice(0,3).map(w=>i.jsxs("div",{className:"text-xs text-foreground flex items-center justify-between",children:[i.jsx("span",{className:"truncate",children:w.title}),i.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground ml-2",children:[i.jsxs("span",{children:[w.progress_percent||0,"%"]}),i.jsx("div",{className:"w-8 bg-border rounded-full h-1",children:i.jsx("div",{className:"bg-accent h-1 rounded-full",style:{width:`${w.progress_percent||0}%`}})})]})]},w.id)),u.courses.length>3&&i.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",u.courses.length-3," cursos ms"]})]})]}),i.jsxs(V,{size:"sm",className:"w-full",children:[i.jsx(ur,{className:"h-4 w-4 mr-1"}),h?"Continuar":"Comenzar"]}),h&&i.jsx("div",{className:"w-full bg-border rounded-full h-1.5 mt-2",children:i.jsx("div",{className:"bg-accent h-1.5 rounded-full transition-all duration-300",style:{width:`${d}%`}})})]})]})},u.id)})})]}),r.length>0&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Cursos Individuales"}),i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(u=>i.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-shadow group",children:i.jsxs(ar,{to:`/ver-curso/${u.slug}`,children:[i.jsxs("div",{className:"aspect-[2/3] relative overflow-hidden rounded-t-lg",children:[u.poster_2x3_url||u.wide_11x6_url?i.jsx("img",{src:u.poster_2x3_url||u.wide_11x6_url,alt:u.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:i.jsx(qe,{className:"h-16 w-16 text-primary"})}),u.progress_percent&&u.progress_percent>0&&i.jsx("div",{className:"absolute top-3 left-3",children:i.jsxs(Ee,{className:"bg-primary text-white",children:[u.progress_percent,"% completo"]})})]}),i.jsxs(Q,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:u.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-3",children:u.summary||"Curso individual"}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(qe,{className:"h-3 w-3"}),i.jsxs("span",{children:[u.lessons_count||0," lecciones"]})]}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(or,{className:"h-3 w-3"}),i.jsxs("span",{children:["Desde ",c(u.enrolled_at)]})]})]}),i.jsxs(V,{size:"sm",className:"w-full",children:[i.jsx(ur,{className:"h-4 w-4 mr-1"}),u.progress_percent&&u.progress_percent>0?"Continuar":"Comenzar"]}),u.progress_percent&&u.progress_percent>0&&i.jsx("div",{className:"w-full bg-border rounded-full h-1.5 mt-2",children:i.jsx("div",{className:"bg-primary h-1.5 rounded-full transition-all duration-300",style:{width:`${u.progress_percent}%`}})})]})]})},u.id))})]})]}),(t.length>0||r.length>0)&&i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Programas"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:t.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Inscritos"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Cursos"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:t.reduce((u,d)=>{var h;return u+(((h=d.courses)==null?void 0:h.length)||0)},0)+r.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Disponibles"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Zr,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Progreso"})]}),i.jsxs("p",{className:"text-2xl font-bold mt-2",children:[Math.round(t.reduce((u,d)=>{var p,f;const h=((p=d.courses)==null?void 0:p.reduce((b,g)=>b+(g.progress_percent||0),0))/(((f=d.courses)==null?void 0:f.length)||1)||0;return u+h},0)/(t.length||1)),"%"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Promedio"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(or,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Activos"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:t.filter(u=>u.enrollment_status==="active").length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"En progreso"})]})})]})]})}const WM=()=>{const{user:e,profile:t,loading:n}=it();if(n)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(e&&t)switch(t.role){case"admin":return i.jsx(ir,{to:"/admin",replace:!0});case"formador":return i.jsx(ir,{to:"/profesor",replace:!0});case"student":return i.jsx(ir,{to:"/mi-formacion",replace:!0});default:return i.jsx(ir,{to:"/mi-formacion",replace:!0})}return i.jsx(ir,{to:"/auth",replace:!0})},HM=Di("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),xm=m.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:oe(HM({variant:t}),e),...n}));xm.displayName="Alert";const GM=m.forwardRef(({className:e,...t},n)=>i.jsx("h5",{ref:n,className:oe("mb-1 font-medium leading-none tracking-tight",e),...t}));GM.displayName="AlertTitle";const vm=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:oe("text-sm [&_p]:leading-relaxed",e),...t}));vm.displayName="AlertDescription";function KM(){const[e,t]=m.useState(""),[n,r]=m.useState(""),[s,a]=m.useState(!1),[o,l]=m.useState(""),[c,u]=m.useState(!1),{user:d,profile:h,loading:p,signIn:f}=it(),{toast:b}=Ve();if(m.useEffect(()=>{document.documentElement.classList.add("dark")},[]),p)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(d&&h)switch(h.role){case"admin":return i.jsx(ir,{to:"/admin",replace:!0});case"teacher":return i.jsx(ir,{to:"/profesor",replace:!0});case"student":return i.jsx(ir,{to:"/mi-formacion",replace:!0});default:return i.jsx(ir,{to:"/mi-formacion",replace:!0})}const g=async x=>{x.preventDefault(),a(!0),l("");try{const{error:v}=await f(e,n);v&&l("Credenciales incorrectas. Verifica tu email y contrasea.")}catch{l("Ocurri un error al iniciar sesin.")}finally{a(!1)}},w=async()=>{if(!e){l("Ingresa tu email para recibir el link mgico");return}a(!0),l("");try{const{supabase:x}=await Za(async()=>{const{supabase:y}=await Promise.resolve().then(()=>B4);return{supabase:y}},void 0),{error:v}=await x.auth.signInWithOtp({email:e,options:{emailRedirectTo:`${window.location.origin}/`}});v?l("No se pudo enviar el link mgico. Verifica tu email."):(u(!0),b({title:"Link mgico enviado",description:"Revisa tu email y haz clic en el link para acceder"}))}catch{l("Ocurri un error al enviar el link mgico.")}finally{a(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:i.jsxs("div",{className:"w-full max-w-[calc(42rem-10px)]",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("img",{src:"/Logo-email.png",alt:"Geometra Sagrada",className:"h-20 w-auto object-contain mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Accede a tu cuenta para continuar"})]}),i.jsxs(K,{children:[i.jsxs(ye,{children:[i.jsx(we,{children:"Iniciar Sesin"}),i.jsx(X_,{children:"Ingresa tus credenciales para acceder a la plataforma"})]}),i.jsx(Q,{children:c?i.jsxs("div",{className:"text-center space-y-4",children:[i.jsxs(xm,{children:[i.jsx(av,{className:"h-4 w-4"}),i.jsx(vm,{children:"Se ha enviado un link mgico a tu email. Revisa tu bandeja de entrada y haz clic en el link para acceder."})]}),i.jsx(V,{variant:"outline",onClick:()=>u(!1),className:"w-full",children:"Volver al login"})]}):i.jsxs("form",{onSubmit:g,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"email",children:"Email"}),i.jsx(ve,{id:"email",type:"email",value:e,onChange:x=>t(x.target.value),placeholder:"tu@email.com",required:!0,disabled:s})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"password",children:"Contrasea"}),i.jsx(ve,{id:"password",type:"password",value:n,onChange:x=>r(x.target.value),placeholder:"Tu contrasea",required:!0,disabled:s})]})]}),o&&i.jsxs(xm,{variant:"destructive",children:[i.jsx(av,{className:"h-4 w-4"}),i.jsx(vm,{children:o})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(V,{type:"submit",disabled:s,className:"w-full btn-modern",children:s?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"mr-2 h-4 w-4 animate-spin"}),"Iniciando sesin..."]}):"Iniciar Sesin"}),i.jsx(V,{type:"button",variant:"outline",onClick:w,disabled:s,className:"w-full btn-modern",children:"Enviar Link Mgico"})]})]})})]}),i.jsxs("div",{className:"mt-4 text-center text-xs text-muted-foreground space-y-1",children:[i.jsx("div",{children:'Olvidaste tu contrasea? Haz click en enviar "Link Mgico"'}),i.jsx("div",{children:"No tienes cuenta? Contacta a info@espaciodegeometriasagrada.com"})]})]})})}function fg(){const[e,t]=m.useState([]),[n,r]=m.useState(!0),[s,a]=m.useState(null),{user:o}=it();m.useEffect(()=>{l()},[o]);const l=async()=>{var c;try{r(!0),a(null);const{data:u}=await M.from("profiles").select("role").eq("id",(o==null?void 0:o.id)||"").single(),d=((c=u==null?void 0:u.role)==null?void 0:c.toString())||"";if(d==="teacher"||d==="formador"||d==="admin"){const{data:b,error:g}=await M.from("programs").select(`
            id,
            title,
            summary,
            slug,
            poster_2x3_url,
            wide_11x6_url,
            published_at,
            program_courses (
              sort_order,
              courses (
                id,
                title,
                summary,
                slug,
                sort_order,
                published_at
              )
            )
          `).order("sort_order");if(g)throw g;const w=(b||[]).map(x=>({...x,courses:(x.program_courses||[]).map(v=>v.courses).filter(Boolean)}));t(w);return}if(o){const{data:b,error:g}=await M.from("enrollments").select("program_id").eq("user_id",o.id).eq("status","active");if(g)throw g;const w=(b==null?void 0:b.map(S=>S.program_id))||[];if(w.length===0){t([]);return}const{data:x,error:v}=await M.from("programs").select(`
            id,
            title,
            summary,
            slug,
            poster_2x3_url,
            wide_11x6_url,
            published_at,
            program_courses (
              sort_order,
              courses (
                id,
                title,
                summary,
                slug,
                sort_order,
                published_at
              )
            )
          `).in("id",w).order("sort_order");if(v)throw v;const y=(x||[]).map(S=>({...S,courses:(S.program_courses||[]).map(_=>_.courses).filter(Boolean)})),j=await Promise.all(y.map(async S=>{var _;if((_=S.courses)!=null&&_.length){const N=await Promise.all(S.courses.map(async C=>{const{count:A}=await M.from("lessons").select("*",{count:"exact",head:!0}).eq("course_id",C.id),{data:R}=await M.from("lessons").select("id").eq("course_id",C.id),O=(R==null?void 0:R.map(I=>I.id))||[];let T=0;if(O.length>0){const{count:I}=await M.from("lesson_progress").select("*",{count:"exact",head:!0}).eq("user_id",o.id).eq("completed",!0).in("lesson_id",O);T=I||0}const z=A&&A>0?Math.round(T/A*100):0;return{...C,lessons_count:A||0,progress_percent:z}}));return{...S,courses:N}}return S}));t(j);return}const{data:p,error:f}=await M.from("programs").select(`
          id,
          title,
          summary,
          slug,
          poster_2x3_url,
          wide_11x6_url,
          published_at
        `).not("published_at","is",null).order("sort_order");if(f)throw f;t(p||[])}catch(u){console.error("Error fetching programs:",u),a(u instanceof Error?u.message:"Error desconocido")}finally{r(!1)}};return{programs:e,loading:n,error:s,refetch:l}}function J_(){const[e,t]=m.useState({total_programs:0,active_programs:0,completed_lessons:0,total_study_time:0,certificates:0}),[n,r]=m.useState(!0),[s,a]=m.useState(null),{user:o}=it();m.useEffect(()=>{o&&l()},[o]);const l=async()=>{var c,u,d;if(o)try{r(!0),a(null);const{data:h,error:p}=await M.from("lesson_progress").select(`
          completed,
          watched_seconds,
          lesson:lessons (
            id,
            title,
            duration_minutes,
            lesson_courses (
              courses (
                id,
                title,
                program_courses (
                  programs (
                    id,
                    title
                  )
                )
              )
            )
          )
        `).eq("user_id",o.id);if(p)throw p;const f=(h==null?void 0:h.filter(y=>y.completed))||[],b=(h==null?void 0:h.reduce((y,j)=>y+Math.floor((j.watched_seconds||0)/60),0))||0,g=new Set,w=new Set;h==null||h.forEach(y=>{var _,N,C,A,R;const j=(C=(N=(_=y.lesson)==null?void 0:_.lesson_courses)==null?void 0:N[0])==null?void 0:C.courses,S=(R=(A=j==null?void 0:j.program_courses)==null?void 0:A[0])==null?void 0:R.programs;S&&(g.add(S.id),(y.completed||y.watched_seconds&&y.watched_seconds>0)&&w.add(S.id))});const x=h==null?void 0:h.find(y=>!y.completed&&y.watched_seconds&&y.watched_seconds>0);let v;if(x&&x.lesson){const y=Math.floor((x.watched_seconds||0)/60),j=x.lesson.duration_minutes||0,S=j>0?Math.round(y/j*100):0,_=(d=(u=(c=x.lesson)==null?void 0:c.lesson_courses)==null?void 0:u[0])==null?void 0:d.courses;v={id:x.lesson.id,title:x.lesson.title,course_title:(_==null?void 0:_.title)||"",progress_percent:S,remaining_minutes:Math.max(0,j-y)}}t({total_programs:g.size,active_programs:w.size,completed_lessons:f.length,total_study_time:b,certificates:0,current_lesson:v})}catch(h){console.error("Error fetching user stats:",h),a(h instanceof Error?h.message:"Error desconocido")}finally{r(!1)}};return{stats:e,loading:n,error:s,refetch:l}}function QM(){const{programs:e,loading:t}=fg(),{stats:n,loading:r}=J_(),{profile:s}=it(),[a,o]=m.useState([]),[l,c]=m.useState([]);m.useEffect(()=>{(async()=>{if(s)try{const{data:h}=await M.from("enrollments").select("program_id").eq("user_id",s.id).eq("status","active"),p=(h||[]).map(x=>x.program_id),{data:f}=await M.from("course_enrollments").select("course_id").eq("user_id",s.id).eq("status","active"),b=(f||[]).map(x=>x.course_id);let g=null,w=null;try{const{data:x,error:v}=await M.from("events").select("*").gte("start_at",new Date().toISOString()).or(["target_scope.eq.campus",p.length?`and(target_scope.eq.program,program_id.in.(${p.join(",")}))`:"",b.length?`and(target_scope.eq.course,course_id.in.(${b.join(",")}))`:""].filter(Boolean).join(",")).order("start_at",{ascending:!0}).limit(5);g=x,w=v}catch(x){w=x}if(w){const{data:x}=await M.from("events").select("*").gte("start_at",new Date().toISOString()).order("start_at",{ascending:!0}).limit(5);o(x||[])}else o(g||[])}catch(h){console.error("Error fetching events:",h)}})()},[s]),m.useEffect(()=>{(async()=>{if(!(s!=null&&s.id)){c([]);return}try{const{data:h}=await M.from("enrollments").select("program_id").eq("user_id",s.id).eq("status","active"),p=(h||[]).map(j=>j.program_id);let f=[];if(p.length>0){const{data:j}=await M.from("program_courses").select("courses (id, title, summary, slug, poster_2x3_url, wide_11x6_url)").in("program_id",p).order("program_id");f=j||[]}const b=f.map(j=>j.courses).filter(Boolean),{data:g}=await M.from("enrollments").select("program_id").eq("user_id",s.id).eq("status","active"),w=(g||[]).map(j=>j.program_id).filter(Boolean);let x=new Set;if(w.length>0){const{data:j}=await M.from("program_courses").select("course_id").in("program_id",w);(j||[]).forEach(S=>{S.course_id&&x.add(S.course_id)})}const{data:v}=await M.from("course_enrollments").select("courses (id, title, summary, slug, poster_2x3_url, wide_11x6_url)").eq("user_id",s.id).eq("status","active"),y=(v||[]).map(j=>j.courses).filter(Boolean).filter(j=>!x.has(j.id));c(y)}catch(h){console.error("Error fetching my courses:",h),c([])}})()},[s==null?void 0:s.id]);const u=d=>new Date(d).toLocaleDateString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"});return t||r?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-foreground",children:["Bienvenido, ",(s==null?void 0:s.full_name)||(s==null?void 0:s.email)||"Estudiante","!"]}),i.jsx("p",{className:"text-muted-foreground",children:"Contina tu viaje en la geometra sagrada"})]}),n.current_lesson&&i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-5 w-5 text-accent"}),"Continuar Aprendiendo"]})}),i.jsx(Q,{children:i.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg border bg-surface/50",children:[i.jsx("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-accent to-accent/80 flex items-center justify-center",children:i.jsx(ur,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-foreground",children:n.current_lesson.course_title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:n.current_lesson.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Zr,{className:"h-3 w-3 text-muted-foreground"}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.current_lesson.remaining_minutes," min restantes"]})]}),i.jsx("div",{className:"w-full bg-border rounded-full h-1.5 mt-2",children:i.jsx("div",{className:"bg-accent h-1.5 rounded-full",style:{width:`${n.current_lesson.progress_percent}%`}})})]}),i.jsx(V,{asChild:!0,className:"btn-modern",children:i.jsx(ar,{to:`/lecciones/${n.current_lesson.id}`,children:"Continuar"})})]})})]}),a.length>0&&i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(or,{className:"h-5 w-5 text-accent"}),"Prximos Eventos"]})}),i.jsx(Q,{className:"space-y-3",children:a.map(d=>{const h=d.description?d.description.match(/https?:\/\/[^\s]+/i):null,p=h?h[0]:null,f=d.meeting_url||p;return i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-lg bg-accent/20 flex items-center justify-center",children:i.jsx(or,{className:"h-4 w-4 text-accent"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-sm",children:d.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:u(d.start_at)})]})]}),f&&i.jsxs(V,{size:"sm",onClick:()=>window.open(f,"_blank"),className:"gap-1 btn-modern",children:["Abrir",i.jsx(dj,{className:"h-3 w-3"})]})]},d.id)})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Mis Programas"}),i.jsx(V,{variant:"outline",asChild:!0,children:i.jsx(ar,{to:"/mis-programas",children:"Ver todos"})})]}),i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.slice(0,6).map(d=>{var f,b;const h=((f=d.courses)==null?void 0:f.reduce((g,w)=>g+(w.progress_percent||0),0))/(((b=d.courses)==null?void 0:b.length)||1)||0,p=h>0;return i.jsx(K,{className:"cursor-pointer hover:elev-3 hover:-translate-y-1 transition-all duration-300 glow-hover",children:i.jsxs(ar,{to:`/programas/${d.slug}`,children:[i.jsx("div",{className:"aspect-[2/3] bg-gradient-to-br from-accent/20 to-accent/10 rounded-t-lg flex items-center justify-center",children:d.poster_2x3_url?i.jsx("img",{src:d.poster_2x3_url,alt:d.title,className:"w-full h-full object-cover rounded-t-lg",loading:"lazy"}):i.jsx(qe,{className:"h-12 w-12 text-accent"})}),i.jsxs(Q,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:d.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:d.summary||"Explora los misterios de la geometra sagrada"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Ee,{variant:p?"secondary":"outline",children:p?"En progreso":"No iniciado"}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(h),"% completo"]})]}),p&&i.jsx("div",{className:"w-full bg-border rounded-full h-1.5 mt-2",children:i.jsx("div",{className:"bg-accent h-1.5 rounded-full",style:{width:`${h}%`}})})]})]})},d.id)})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Mis Cursos"}),i.jsx(V,{variant:"outline",asChild:!0,children:i.jsx(ar,{to:"/cursos",children:"Ver todos"})})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[l.slice(0,6).map(d=>i.jsx(K,{className:"cursor-pointer hover:elev-3 hover:-translate-y-1 transition-all duration-300 glow-hover",children:i.jsxs(ar,{to:`/ver-curso/${d.slug}`,children:[i.jsx("div",{className:"aspect-[2/3] relative overflow-hidden rounded-t-lg",children:d.poster_2x3_url||d.wide_11x6_url?i.jsx("img",{src:d.poster_2x3_url||d.wide_11x6_url,alt:d.title,className:"w-full h-full object-cover",loading:"lazy"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/20 to-accent/10 flex items-center justify-center",children:i.jsx(qe,{className:"h-12 w-12 text-accent"})})}),i.jsxs(Q,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:d.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:d.summary||"Curso"})]})]})},d.id)),l.length===0&&i.jsx("div",{className:"text-sm text-muted-foreground",children:"An no tienes cursos asignados."})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Programas"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.active_programs}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"En progreso"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Lecciones"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.completed_lessons}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Completadas"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Zr,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Tiempo"})]}),i.jsxs("p",{className:"text-2xl font-bold mt-2",children:[Math.floor(n.total_study_time/60),"h ",n.total_study_time%60,"m"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Total estudiado"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ei,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Certificados"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.certificates}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Obtenidos"})]})})]})]})}var YM=m.createContext(void 0);function wd(e){const t=m.useContext(YM);return e||t||"ltr"}var Ah="rovingFocusGroup.onEntryFocus",XM={bubbles:!1,cancelable:!0},Ll="RovingFocusGroup",[ym,Z_,JM]=Op(Ll),[ZM,bd]=yn(Ll,[JM]),[eD,tD]=ZM(Ll),eS=m.forwardRef((e,t)=>i.jsx(ym.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(ym.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(nD,{...e,ref:t})})}));eS.displayName=Ll;var nD=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,p=m.useRef(null),f=Me(t,p),b=wd(a),[g,w]=Ar({prop:o,defaultProp:l??null,onChange:c,caller:Ll}),[x,v]=m.useState(!1),y=An(u),j=Z_(n),S=m.useRef(!1),[_,N]=m.useState(0);return m.useEffect(()=>{const C=p.current;if(C)return C.addEventListener(Ah,y),()=>C.removeEventListener(Ah,y)},[y]),i.jsx(eD,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:g,onItemFocus:m.useCallback(C=>w(C),[w]),onItemShiftTab:m.useCallback(()=>v(!0),[]),onFocusableItemAdd:m.useCallback(()=>N(C=>C+1),[]),onFocusableItemRemove:m.useCallback(()=>N(C=>C-1),[]),children:i.jsx(xe.div,{tabIndex:x||_===0?-1:0,"data-orientation":r,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:pe(e.onMouseDown,()=>{S.current=!0}),onFocus:pe(e.onFocus,C=>{const A=!S.current;if(C.target===C.currentTarget&&A&&!x){const R=new CustomEvent(Ah,XM);if(C.currentTarget.dispatchEvent(R),!R.defaultPrevented){const O=j().filter($=>$.focusable),T=O.find($=>$.active),z=O.find($=>$.id===g),B=[T,z,...O].filter(Boolean).map($=>$.ref.current);rS(B,d)}}S.current=!1}),onBlur:pe(e.onBlur,()=>v(!1))})})}),tS="RovingFocusGroupItem",nS=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:o,...l}=e,c=Kr(),u=a||c,d=tD(tS,n),h=d.currentTabStopId===u,p=Z_(n),{onFocusableItemAdd:f,onFocusableItemRemove:b,currentTabStopId:g}=d;return m.useEffect(()=>{if(r)return f(),()=>b()},[r,f,b]),i.jsx(ym.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:i.jsx(xe.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:pe(e.onMouseDown,w=>{r?d.onItemFocus(u):w.preventDefault()}),onFocus:pe(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:pe(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=iD(w,d.orientation,d.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let y=p().filter(j=>j.focusable).map(j=>j.ref.current);if(x==="last")y.reverse();else if(x==="prev"||x==="next"){x==="prev"&&y.reverse();const j=y.indexOf(w.currentTarget);y=d.loop?aD(y,j+1):y.slice(j+1)}setTimeout(()=>rS(y))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});nS.displayName=tS;var rD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function sD(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function iD(e,t,n){const r=sD(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return rD[r]}function rS(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function aD(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var sS=eS,iS=nS,jd="Tabs",[oD,yB]=yn(jd,[bd]),aS=bd(),[lD,mg]=oD(jd),oS=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=wd(l),[h,p]=Ar({prop:r,onChange:s,defaultProp:a??"",caller:jd});return i.jsx(lD,{scope:n,baseId:Kr(),value:h,onValueChange:p,orientation:o,dir:d,activationMode:c,children:i.jsx(xe.div,{dir:d,"data-orientation":o,...u,ref:t})})});oS.displayName=jd;var lS="TabsList",cS=m.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,a=mg(lS,n),o=aS(n);return i.jsx(sS,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(xe.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});cS.displayName=lS;var uS="TabsTrigger",dS=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=e,o=mg(uS,n),l=aS(n),c=mS(o.baseId,r),u=pS(o.baseId,r),d=r===o.value;return i.jsx(iS,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(xe.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:t,onMouseDown:pe(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:pe(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:pe(e.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(r)})})})});dS.displayName=uS;var hS="TabsContent",fS=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=e,l=mg(hS,n),c=mS(l.baseId,r),u=pS(l.baseId,r),d=r===l.value,h=m.useRef(d);return m.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),i.jsx(is,{present:s||d,children:({present:p})=>i.jsx(xe.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&a})})});fS.displayName=hS;function mS(e,t){return`${e}-trigger-${t}`}function pS(e,t){return`${e}-content-${t}`}var cD=oS,gS=cS,xS=dS,vS=fS;const uD=cD,yS=m.forwardRef(({className:e,...t},n)=>i.jsx(gS,{ref:n,className:oe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));yS.displayName=gS.displayName;const wm=m.forwardRef(({className:e,...t},n)=>i.jsx(xS,{ref:n,className:oe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));wm.displayName=xS.displayName;const bm=m.forwardRef(({className:e,...t},n)=>i.jsx(vS,{ref:n,className:oe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));bm.displayName=vS.displayName;const dD="https://epqalebkqmkddlfomnyf.functions.supabase.co/email-dispatcher";async function pg(e){const t=await fetch(dD,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)try{const n=await t.json();throw new Error((n==null?void 0:n.error)||"send_error")}catch{throw new Error("send_error")}return{success:!0}}function gg({title:e,body:t,ctaLabel:n,ctaUrl:r,logoUrl:s}){return`
  <div style="font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background:#0b0b0b; color:#e5e5e5; padding:24px;">
    <div style="max-width:640px;margin:0 auto;background:#111213;border:1px solid #232323;border-radius:12px;overflow:hidden;">
      <div style="padding:20px 24px;border-bottom:1px solid #232323;display:flex;align-items:center;gap:12px;">
        ${s?`<img src="${s}" alt="Logo" style="height:28px;width:28px;border-radius:8px;object-fit:cover;" />`:""}
        <h1 style="margin:0;font-size:18px;">${e}</h1>
      </div>
      <div style="padding:24px;line-height:1.6;">
        ${t}
        ${n&&r?`
        <div style="margin-top:20px;">
          <a href="${r}" style="display:inline-block;padding:10px 14px;border-radius:8px;background:#1f2937;color:white;text-decoration:none;">${n}</a>
        </div>`:""}
      </div>
      <div style="padding:16px 24px;border-top:1px solid #232323;font-size:12px;color:#9ca3af;">
        Enviado por el Campus  No responder a este correo.
      </div>
    </div>
  </div>`}async function wS(e){const t=`Felicitaciones, completaste el modulo ${e.modulo}`,n=`
    <p>Gran trabajo! </p>
    <p>Lo que sigue: ${e.proximo||"Continu con el siguiente mdulo cuando quieras."}</p>
  `,r=typeof window<"u"?`${window.location.origin}/Logo-email.png`:void 0,s=gg({title:t,body:n,ctaLabel:"Ver siguiente mdulo",ctaUrl:e.ctaUrl,logoUrl:r});return pg({to:e.to,subject:t,html:s})}async function hD(e){const t=`Increble, ${e.nombre||""}. Finalizaste el curso ${e.curso}`.trim(),n=`
    <p>Felicitaciones por completar el curso!</p>
    <p>Descarga tu certificado personalizado.</p>
  `,r=typeof window<"u"?`${window.location.origin}/Logo-email.png`:void 0,s=gg({title:t,body:n,ctaLabel:"Descargar certificado",ctaUrl:e.ctaUrl,logoUrl:r});return pg({to:e.to,subject:t,html:s})}async function fD(e){const t=`Ya completaste ${e.curso}`,n=`
    <p>Te recomendamos continuar con <strong>${e.siguiente_programa}</strong>.</p>
  `,r=typeof window<"u"?`${window.location.origin}/Logo-email.png`:void 0,s=gg({title:t,body:n,ctaLabel:"Ver siguiente programa",ctaUrl:e.ctaUrl,logoUrl:r});return pg({to:e.to,subject:t,html:s})}function mD(){const{profile:e}=it(),{toast:t}=Ve(),[n,r]=m.useState([]),[s,a]=m.useState([]),[o,l]=m.useState([]),[c,u]=m.useState(!0),[d,h]=m.useState(null),[p,f]=m.useState(""),[b,g]=m.useState(""),[w,x]=m.useState(!1);m.useEffect(()=>{((e==null?void 0:e.role)==="formador"||(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="profesor"||(e==null?void 0:e.role)==="teacher")&&v()},[e]);const v=async()=>{try{u(!0);const{data:_,error:N}=await M.from("assignments").select(`
          *,
          lesson:lessons(
            title,
            course:courses(title)
          )
        `).order("updated_at",{ascending:!1}).order("created_at",{ascending:!1}).limit(200);if(N)throw N;const C=await Promise.all((_||[]).map(async L=>{const[{data:D},E]=await Promise.all([M.from("profiles").select("full_name").eq("id",L.user_id).single(),L.lesson?Promise.resolve({data:L.lesson}):M.from("lessons").select("title, course:courses(title)").eq("id",L.lesson_id).single()]);return{...L,lesson:(E==null?void 0:E.data)||L.lesson,user_profile:{full_name:(D==null?void 0:D.full_name)||"Usuario desconocido"}}}));r(C);const{data:A,error:R}=await M.from("programs").select(`
          id,
          title,
          courses(id)
        `);if(R)throw R;const O=(A==null?void 0:A.map(async L=>{var E;const{count:D}=await M.from("enrollments").select("*",{count:"exact",head:!0}).eq("program_id",L.id);return{program_id:L.id,program_title:L.title,enrolled_count:D||0,courses_count:((E=L.courses)==null?void 0:E.length)||0}}))||[],T=await Promise.all(O);a(T);const{data:z,error:I}=await M.from("courses").select(`
          id,
          title,
          program_id,
          program:programs(title),
          lessons(id)
        `);if(I)throw I;const B=(z==null?void 0:z.map(async L=>{var E,k;const{count:D}=await M.from("enrollments").select("*",{count:"exact",head:!0}).eq("program_id",L.program_id);return{course_id:L.id,course_title:L.title,program_title:((E=L.program)==null?void 0:E.title)||"Sin programa",enrolled_count:D||0,lessons_count:((k=L.lessons)==null?void 0:k.length)||0}}))||[],$=await Promise.all(B);l($)}catch(_){console.error("Error fetching data:",_),t({title:"Error",description:"No se pudieron cargar los datos",variant:"destructive"})}finally{u(!1)}},y=async(_,N)=>{if(!p.trim()&&N==="rejected"){t({title:"Error",description:"El feedback es requerido para rechazar una entrega",variant:"destructive"});return}const C=b!==""?parseInt(b):null;if(N==="approved"&&C!==null&&C<0){t({title:"Error",description:"La calificacin debe ser un nmero positivo",variant:"destructive"});return}x(!0);try{const A=n.find(O=>O.id===_);if(!A)return;const{error:R}=await M.from("assignments").update({status:N,grade:C,feedback:p.trim(),reviewed_by:e==null?void 0:e.id,reviewed_at:new Date().toISOString()}).eq("id",_);if(R)throw R;if(N==="approved"){const{data:O}=await M.from("profiles").select("email, full_name").eq("id",A.user_id).single();if(O!=null&&O.email)try{await wS({to:O.email,modulo:A.lesson.title,proximo:void 0,ctaUrl:`${window.location.origin}/curso/${A.lesson_id}`})}catch{}}t({title:"xito",description:`Entrega ${N==="approved"?"aprobada":"rechazada"} y notificacin enviada`}),h(null),f(""),g(""),v()}catch(A){console.error("Error processing assignment:",A),t({title:"Error",description:"No se pudo procesar la entrega",variant:"destructive"})}finally{x(!1)}},j=_=>new Date(_).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});if((e==null?void 0:e.role)!=="formador"&&(e==null?void 0:e.role)!=="admin"&&(e==null?void 0:e.role)!=="profesor"&&(e==null?void 0:e.role)!=="teacher")return i.jsxs("div",{className:"text-center py-12",children:[i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Acceso Denegado"}),i.jsx("p",{className:"text-muted-foreground",children:"No tienes permisos para acceder a esta seccin."})]});if(c)return i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});const S=n;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard del Profesor"}),i.jsx("p",{className:"text-muted-foreground",children:"Gestiona entregas y supervisa el progreso de los estudiantes"})]}),i.jsxs(uD,{defaultValue:"assignments",className:"space-y-6",children:[i.jsxs(yS,{children:[i.jsxs(wm,{value:"assignments",children:["Entregas (",S.length,")"]}),i.jsx(wm,{value:"stats",children:"Estadsticas"})]}),i.jsx(bm,{value:"assignments",className:"space-y-6",children:S.length===0?i.jsx(K,{children:i.jsxs(Q,{className:"p-12 text-center",children:[i.jsx(Ir,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No hay entregas pendientes"}),i.jsx("p",{className:"text-muted-foreground",children:"Todas las entregas han sido revisadas"})]})}):i.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Entregas por Revisar"}),S.map(_=>{var N,C,A;return i.jsxs(K,{className:"transition-all hover:shadow-md",children:[i.jsx(ye,{className:"pb-2",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx(we,{className:"text-lg",children:((N=_.lesson)==null?void 0:N.title)||"Leccin"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:((A=(C=_.lesson)==null?void 0:C.course)==null?void 0:A.title)||"Curso"})]}),i.jsx(Ee,{variant:"secondary",children:_.status==="approved"?"Aprobada":_.status==="rejected"?"Rechazada":"Pendiente"})]})}),i.jsxs(Q,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rn,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm",children:_.user_profile.full_name})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Zr,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:j(_.created_at)})]})]}),(_.file_url||_.text_answer)&&i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx(Un,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:_.file_url?"Archivo adjunto":"Respuesta de texto"}),_.file_url&&i.jsxs(V,{size:"sm",variant:"outline",onClick:()=>window.open(_.file_url,"_blank"),children:[i.jsx(lv,{className:"h-3 w-3 mr-1"})," Abrir"]})]}),i.jsx("div",{className:"flex gap-2 mt-3",children:_.status!=="approved"&&i.jsxs(V,{size:"sm",className:"flex-1",onClick:()=>y(_.id,"approved"),disabled:w,children:[i.jsx(Ei,{className:"h-4 w-4 mr-1"})," Aprobar"]})})]})]},_.id)})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Revisar Entrega"}),d?i.jsxs(K,{children:[i.jsxs(ye,{children:[i.jsx(we,{children:d.lesson.title}),i.jsxs("p",{className:"text-muted-foreground",children:["Estudiante: ",d.user_profile.full_name]})]}),i.jsxs(Q,{className:"space-y-4",children:[d.file_url&&i.jsxs("div",{children:[i.jsx(X,{children:"Archivo Adjunto"}),i.jsxs(V,{variant:"outline",className:"w-full mt-2",onClick:()=>window.open(d.file_url,"_blank"),children:[i.jsx(lv,{className:"h-4 w-4 mr-2"}),"Descargar Archivo"]})]}),d.text_answer&&i.jsxs("div",{children:[i.jsx(X,{children:"Respuesta del Estudiante"}),i.jsx("div",{className:"p-3 border rounded-lg mt-2 bg-muted/50",children:i.jsx("p",{className:"text-sm",children:d.text_answer})})]}),i.jsxs("div",{children:[i.jsxs(X,{htmlFor:"grade",children:["Calificacin (0-",d.max_grade,")"]}),i.jsx(ve,{id:"grade",type:"number",min:"0",max:d.max_grade,value:b,onChange:_=>g(_.target.value),placeholder:"Ingresa la calificacin"})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"feedback",children:"Comentarios"}),i.jsx(At,{id:"feedback",value:p,onChange:_=>f(_.target.value),placeholder:"Escribe tus comentarios sobre la entrega...",className:"mt-2",rows:4})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsxs(V,{onClick:()=>y(d.id,"approved"),disabled:w,className:"flex-1",children:[i.jsx(Ei,{className:"h-4 w-4 mr-2"}),"Aprobar"]}),i.jsxs(V,{variant:"destructive",onClick:()=>y(d.id,"rejected"),disabled:w,className:"flex-1",children:[i.jsx(Z2,{className:"h-4 w-4 mr-2"}),"Rechazar"]})]})]})]}):i.jsx(K,{children:i.jsxs(Q,{className:"p-12 text-center",children:[i.jsx(Pi,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Selecciona una entrega"}),i.jsx("p",{className:"text-muted-foreground",children:"Haz clic en una entrega de la lista para revisarla"})]})})]})]})}),i.jsx(bm,{value:"stats",className:"space-y-6",children:i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-5 w-5"}),"Estadsticas de Programas"]})}),i.jsxs(Q,{className:"space-y-3",children:[s.map(_=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:_.program_title}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[_.courses_count," curso(s)"]})]}),i.jsx("div",{className:"text-right",children:i.jsxs(Ee,{variant:"secondary",children:[i.jsx(rn,{className:"h-3 w-3 mr-1"}),_.enrolled_count," estudiante(s)"]})})]},_.program_id)),s.length===0&&i.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No hay programas disponibles"})]})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(Ir,{className:"h-5 w-5"}),"Estadsticas de Cursos"]})}),i.jsxs(Q,{className:"space-y-3",children:[o.map(_=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:_.course_title}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[_.program_title,"  ",_.lessons_count," leccin(es)"]})]}),i.jsx("div",{className:"text-right",children:i.jsxs(Ee,{variant:"secondary",children:[i.jsx(rn,{className:"h-3 w-3 mr-1"}),_.enrolled_count," estudiante(s)"]})})]},_.course_id)),o.length===0&&i.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No hay cursos disponibles"})]})]})]})})]})]})}function fy(e,[t,n]){return Math.min(n,Math.max(t,e))}function _d(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var pD=[" ","Enter","ArrowUp","ArrowDown"],gD=[" ","Enter"],Ai="Select",[Sd,Nd,xD]=Op(Ai),[no,wB]=yn(Ai,[xD,ed]),kd=ed(),[vD,ti]=no(Ai),[yD,wD]=no(Ai),bS=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:p,required:f,form:b}=e,g=kd(t),[w,x]=m.useState(null),[v,y]=m.useState(null),[j,S]=m.useState(!1),_=wd(u),[N,C]=Ar({prop:r,defaultProp:s??!1,onChange:a,caller:Ai}),[A,R]=Ar({prop:o,defaultProp:l,onChange:c,caller:Ai}),O=m.useRef(null),T=w?b||!!w.closest("form"):!0,[z,I]=m.useState(new Set),B=Array.from(z).map($=>$.props.value).join(";");return i.jsx(Gj,{...g,children:i.jsxs(vD,{required:f,scope:t,trigger:w,onTriggerChange:x,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:j,onValueNodeHasChildrenChange:S,contentId:Kr(),value:A,onValueChange:R,open:N,onOpenChange:C,dir:_,triggerPointerDownPosRef:O,disabled:p,children:[i.jsx(Sd.Provider,{scope:t,children:i.jsx(yD,{scope:e.__scopeSelect,onNativeOptionAdd:m.useCallback($=>{I(L=>new Set(L).add($))},[]),onNativeOptionRemove:m.useCallback($=>{I(L=>{const D=new Set(L);return D.delete($),D})},[]),children:n})}),T?i.jsxs(WS,{"aria-hidden":!0,required:f,tabIndex:-1,name:d,autoComplete:h,value:A,onChange:$=>R($.target.value),disabled:p,form:b,children:[A===void 0?i.jsx("option",{value:""}):null,Array.from(z)]},B):null]})})};bS.displayName=Ai;var jS="SelectTrigger",_S=m.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,a=kd(n),o=ti(jS,n),l=o.disabled||r,c=Me(t,o.onTriggerChange),u=Nd(n),d=m.useRef("touch"),[h,p,f]=GS(g=>{const w=u().filter(y=>!y.disabled),x=w.find(y=>y.value===o.value),v=KS(w,g,x);v!==void 0&&o.onValueChange(v.value)}),b=g=>{l||(o.onOpenChange(!0),f()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return i.jsx(Kj,{asChild:!0,...a,children:i.jsx(xe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":HS(o.value)?"":void 0,...s,ref:c,onClick:pe(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&b(g)}),onPointerDown:pe(s.onPointerDown,g=>{d.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(b(g),g.preventDefault())}),onKeyDown:pe(s.onKeyDown,g=>{const w=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(w&&g.key===" ")&&pD.includes(g.key)&&(b(),g.preventDefault())})})})});_S.displayName=jS;var SS="SelectValue",NS=m.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:o="",...l}=e,c=ti(SS,n),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,h=Me(t,c.onValueNodeChange);return Nt(()=>{u(d)},[u,d]),i.jsx(xe.span,{...l,ref:h,style:{pointerEvents:"none"},children:HS(c.value)?i.jsx(i.Fragment,{children:o}):a})});NS.displayName=SS;var bD="SelectIcon",kS=m.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return i.jsx(xe.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});kS.displayName=bD;var jD="SelectPortal",CS=e=>i.jsx(Hu,{asChild:!0,...e});CS.displayName=jD;var Ii="SelectContent",ES=m.forwardRef((e,t)=>{const n=ti(Ii,e.__scopeSelect),[r,s]=m.useState();if(Nt(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?Mi.createPortal(i.jsx(PS,{scope:e.__scopeSelect,children:i.jsx(Sd.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),a):null}return i.jsx(TS,{...e,ref:t})});ES.displayName=Ii;var Xn=10,[PS,ni]=no(Ii),_D="SelectContentImpl",SD=Da("SelectContent.RemoveScroll"),TS=m.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:f,sticky:b,hideWhenDetached:g,avoidCollisions:w,...x}=e,v=ti(Ii,n),[y,j]=m.useState(null),[S,_]=m.useState(null),N=Me(t,Y=>j(Y)),[C,A]=m.useState(null),[R,O]=m.useState(null),T=Nd(n),[z,I]=m.useState(!1),B=m.useRef(!1);m.useEffect(()=>{if(y)return l_(y)},[y]),Z1();const $=m.useCallback(Y=>{const[re,...fe]=T().map(ce=>ce.ref.current),[Z]=fe.slice(-1),U=document.activeElement;for(const ce of Y)if(ce===U||(ce==null||ce.scrollIntoView({block:"nearest"}),ce===re&&S&&(S.scrollTop=0),ce===Z&&S&&(S.scrollTop=S.scrollHeight),ce==null||ce.focus(),document.activeElement!==U))return},[T,S]),L=m.useCallback(()=>$([C,y]),[$,C,y]);m.useEffect(()=>{z&&L()},[z,L]);const{onOpenChange:D,triggerPointerDownPosRef:E}=v;m.useEffect(()=>{if(y){let Y={x:0,y:0};const re=Z=>{var U,ce;Y={x:Math.abs(Math.round(Z.pageX)-(((U=E.current)==null?void 0:U.x)??0)),y:Math.abs(Math.round(Z.pageY)-(((ce=E.current)==null?void 0:ce.y)??0))}},fe=Z=>{Y.x<=10&&Y.y<=10?Z.preventDefault():y.contains(Z.target)||D(!1),document.removeEventListener("pointermove",re),E.current=null};return E.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",fe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",fe,{capture:!0})}}},[y,D,E]),m.useEffect(()=>{const Y=()=>D(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[D]);const[k,F]=GS(Y=>{const re=T().filter(U=>!U.disabled),fe=re.find(U=>U.ref.current===document.activeElement),Z=KS(re,Y,fe);Z&&setTimeout(()=>Z.ref.current.focus())}),H=m.useCallback((Y,re,fe)=>{const Z=!B.current&&!fe;(v.value!==void 0&&v.value===re||Z)&&(A(Y),Z&&(B.current=!0))},[v.value]),P=m.useCallback(()=>y==null?void 0:y.focus(),[y]),q=m.useCallback((Y,re,fe)=>{const Z=!B.current&&!fe;(v.value!==void 0&&v.value===re||Z)&&O(Y)},[v.value]),de=r==="popper"?jm:RS,le=de===jm?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:f,sticky:b,hideWhenDetached:g,avoidCollisions:w}:{};return i.jsx(PS,{scope:n,content:y,viewport:S,onViewportChange:_,itemRefCallback:H,selectedItem:C,onItemLeave:P,itemTextRefCallback:q,focusSelectedItem:L,selectedItemText:R,position:r,isPositioned:z,searchRef:k,children:i.jsx(lg,{as:SD,allowPinchZoom:!0,children:i.jsx(og,{asChild:!0,trapped:v.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:pe(s,Y=>{var re;(re=v.trigger)==null||re.focus({preventScroll:!0}),Y.preventDefault()}),children:i.jsx(Cl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:i.jsx(de,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:Y=>Y.preventDefault(),...x,...le,onPlaced:()=>I(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:pe(x.onKeyDown,Y=>{const re=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!re&&Y.key.length===1&&F(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let Z=T().filter(U=>!U.disabled).map(U=>U.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(Z=Z.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const U=Y.target,ce=Z.indexOf(U);Z=Z.slice(ce+1)}setTimeout(()=>$(Z)),Y.preventDefault()}})})})})})})});TS.displayName=_D;var ND="SelectItemAlignedPosition",RS=m.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,a=ti(Ii,n),o=ni(Ii,n),[l,c]=m.useState(null),[u,d]=m.useState(null),h=Me(t,N=>d(N)),p=Nd(n),f=m.useRef(!1),b=m.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:x,focusSelectedItem:v}=o,y=m.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&g&&w&&x){const N=a.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),A=a.valueNode.getBoundingClientRect(),R=x.getBoundingClientRect();if(a.dir!=="rtl"){const U=R.left-C.left,ce=A.left-U,ge=N.left-ce,ne=N.width+ge,me=Math.max(ne,C.width),He=window.innerWidth-Xn,Re=fy(ce,[Xn,Math.max(Xn,He-me)]);l.style.minWidth=ne+"px",l.style.left=Re+"px"}else{const U=C.right-R.right,ce=window.innerWidth-A.right-U,ge=window.innerWidth-N.right-ce,ne=N.width+ge,me=Math.max(ne,C.width),He=window.innerWidth-Xn,Re=fy(ce,[Xn,Math.max(Xn,He-me)]);l.style.minWidth=ne+"px",l.style.right=Re+"px"}const O=p(),T=window.innerHeight-Xn*2,z=g.scrollHeight,I=window.getComputedStyle(u),B=parseInt(I.borderTopWidth,10),$=parseInt(I.paddingTop,10),L=parseInt(I.borderBottomWidth,10),D=parseInt(I.paddingBottom,10),E=B+$+z+D+L,k=Math.min(w.offsetHeight*5,E),F=window.getComputedStyle(g),H=parseInt(F.paddingTop,10),P=parseInt(F.paddingBottom,10),q=N.top+N.height/2-Xn,de=T-q,le=w.offsetHeight/2,Y=w.offsetTop+le,re=B+$+Y,fe=E-re;if(re<=q){const U=O.length>0&&w===O[O.length-1].ref.current;l.style.bottom="0px";const ce=u.clientHeight-g.offsetTop-g.offsetHeight,ge=Math.max(de,le+(U?P:0)+ce+L),ne=re+ge;l.style.height=ne+"px"}else{const U=O.length>0&&w===O[0].ref.current;l.style.top="0px";const ge=Math.max(q,B+g.offsetTop+(U?H:0)+le)+fe;l.style.height=ge+"px",g.scrollTop=re-q+g.offsetTop}l.style.margin=`${Xn}px 0`,l.style.minHeight=k+"px",l.style.maxHeight=T+"px",r==null||r(),requestAnimationFrame(()=>f.current=!0)}},[p,a.trigger,a.valueNode,l,u,g,w,x,a.dir,r]);Nt(()=>y(),[y]);const[j,S]=m.useState();Nt(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const _=m.useCallback(N=>{N&&b.current===!0&&(y(),v==null||v(),b.current=!1)},[y,v]);return i.jsx(CD,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:_,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:i.jsx(xe.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});RS.displayName=ND;var kD="SelectPopperPosition",jm=m.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Xn,...a}=e,o=kd(n);return i.jsx(Qj,{...o,...a,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});jm.displayName=kD;var[CD,xg]=no(Ii,{}),_m="SelectViewport",AS=m.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,a=ni(_m,n),o=xg(_m,n),l=Me(t,a.onViewportChange),c=m.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(Sd.Slot,{scope:n,children:i.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:pe(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const f=Math.abs(c.current-d.scrollTop);if(f>0){const b=window.innerHeight-Xn*2,g=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),x=Math.max(g,w);if(x<b){const v=x+f,y=Math.min(b,v),j=v-y;h.style.height=y+"px",h.style.bottom==="0px"&&(d.scrollTop=j>0?j:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});AS.displayName=_m;var IS="SelectGroup",[ED,PD]=no(IS),TD=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Kr();return i.jsx(ED,{scope:n,id:s,children:i.jsx(xe.div,{role:"group","aria-labelledby":s,...r,ref:t})})});TD.displayName=IS;var OS="SelectLabel",LS=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=PD(OS,n);return i.jsx(xe.div,{id:s.id,...r,ref:t})});LS.displayName=OS;var Su="SelectItem",[RD,MS]=no(Su),DS=m.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...o}=e,l=ti(Su,n),c=ni(Su,n),u=l.value===r,[d,h]=m.useState(a??""),[p,f]=m.useState(!1),b=Me(t,v=>{var y;return(y=c.itemRefCallback)==null?void 0:y.call(c,v,r,s)}),g=Kr(),w=m.useRef("touch"),x=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(RD,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:m.useCallback(v=>{h(y=>y||((v==null?void 0:v.textContent)??"").trim())},[]),children:i.jsx(Sd.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:i.jsx(xe.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:pe(o.onFocus,()=>f(!0)),onBlur:pe(o.onBlur,()=>f(!1)),onClick:pe(o.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:pe(o.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:pe(o.onPointerDown,v=>{w.current=v.pointerType}),onPointerMove:pe(o.onPointerMove,v=>{var y;w.current=v.pointerType,s?(y=c.onItemLeave)==null||y.call(c):w.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(o.onPointerLeave,v=>{var y;v.currentTarget===document.activeElement&&((y=c.onItemLeave)==null||y.call(c))}),onKeyDown:pe(o.onKeyDown,v=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&v.key===" "||(gD.includes(v.key)&&x(),v.key===" "&&v.preventDefault())})})})})});DS.displayName=Su;var To="SelectItemText",FS=m.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...a}=e,o=ti(To,n),l=ni(To,n),c=MS(To,n),u=wD(To,n),[d,h]=m.useState(null),p=Me(t,x=>h(x),c.onItemTextChange,x=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,x,c.value,c.disabled)}),f=d==null?void 0:d.textContent,b=m.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=u;return Nt(()=>(g(b),()=>w(b)),[g,w,b]),i.jsxs(i.Fragment,{children:[i.jsx(xe.span,{id:c.textId,...a,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Mi.createPortal(a.children,o.valueNode):null]})});FS.displayName=To;var $S="SelectItemIndicator",zS=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return MS($S,n).isSelected?i.jsx(xe.span,{"aria-hidden":!0,...r,ref:t}):null});zS.displayName=$S;var Sm="SelectScrollUpButton",US=m.forwardRef((e,t)=>{const n=ni(Sm,e.__scopeSelect),r=xg(Sm,e.__scopeSelect),[s,a]=m.useState(!1),o=Me(t,r.onScrollButtonChange);return Nt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(VS,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});US.displayName=Sm;var Nm="SelectScrollDownButton",BS=m.forwardRef((e,t)=>{const n=ni(Nm,e.__scopeSelect),r=xg(Nm,e.__scopeSelect),[s,a]=m.useState(!1),o=Me(t,r.onScrollButtonChange);return Nt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(VS,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});BS.displayName=Nm;var VS=m.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,a=ni("SelectScrollButton",n),o=m.useRef(null),l=Nd(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),Nt(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(xe.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:pe(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:pe(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:pe(s.onPointerLeave,()=>{c()})})}),AD="SelectSeparator",qS=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return i.jsx(xe.div,{"aria-hidden":!0,...r,ref:t})});qS.displayName=AD;var km="SelectArrow",ID=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=kd(n),a=ti(km,n),o=ni(km,n);return a.open&&o.position==="popper"?i.jsx(Yj,{...s,...r,ref:t}):null});ID.displayName=km;var OD="SelectBubbleInput",WS=m.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=m.useRef(null),a=Me(r,s),o=_d(t);return m.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[o,t]),i.jsx(xe.select,{...n,style:{...$b,...n.style},ref:a,defaultValue:t})});WS.displayName=OD;function HS(e){return e===""||e===void 0}function GS(e){const t=An(e),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function KS(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=LD(e,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function LD(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var MD=bS,QS=_S,DD=NS,FD=kS,$D=CS,YS=ES,zD=AS,XS=LS,JS=DS,UD=FS,BD=zS,ZS=US,eN=BS,tN=qS;const ot=MD,lt=DD,nt=m.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(QS,{ref:r,className:oe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(FD,{asChild:!0,children:i.jsx(uj,{className:"h-4 w-4 opacity-50"})})]}));nt.displayName=QS.displayName;const nN=m.forwardRef(({className:e,...t},n)=>i.jsx(ZS,{ref:n,className:oe("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(J2,{className:"h-4 w-4"})}));nN.displayName=ZS.displayName;const rN=m.forwardRef(({className:e,...t},n)=>i.jsx(eN,{ref:n,className:oe("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(uj,{className:"h-4 w-4"})}));rN.displayName=eN.displayName;const rt=m.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>i.jsx($D,{children:i.jsxs(YS,{ref:s,className:oe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(nN,{}),i.jsx(zD,{className:oe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(rN,{})]})}));rt.displayName=YS.displayName;const VD=m.forwardRef(({className:e,...t},n)=>i.jsx(XS,{ref:n,className:oe("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));VD.displayName=XS.displayName;const he=m.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(JS,{ref:r,className:oe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(BD,{children:i.jsx(cj,{className:"h-4 w-4"})})}),i.jsx(UD,{children:t})]}));he.displayName=JS.displayName;const qD=m.forwardRef(({className:e,...t},n)=>i.jsx(tN,{ref:n,className:oe("-mx-1 my-1 h-px bg-muted",e),...t}));qD.displayName=tN.displayName;function Ks({label:e,value:t,onChange:n,aspectRatio:r="16/9",disabled:s}){const[a,o]=m.useState(!1),l=m.useRef(null),{toast:c}=Ve(),u=async h=>{var f;const p=(f=h.target.files)==null?void 0:f[0];if(p){if(!p.type.startsWith("image/")){c({title:"Error",description:"Por favor selecciona un archivo de imagen",variant:"destructive"});return}if(p.size>5*1024*1024){c({title:"Error",description:"La imagen debe ser menor a 5MB",variant:"destructive"});return}o(!0);try{const b=p.name.split(".").pop(),w=`images/${`${Date.now()}-${Math.random().toString(36).substr(2,9)}.${b}`}`,{error:x}=await M.storage.from("program-images").upload(w,p);if(x)throw x;const{data:v}=M.storage.from("program-images").getPublicUrl(w);n(v.publicUrl),c({title:"Imagen subida",description:"La imagen se ha subido exitosamente"})}catch(b){c({title:"Error al subir imagen",description:b.message||"No se pudo subir la imagen",variant:"destructive"})}finally{o(!1)}}},d=()=>{n(""),l.current&&(l.current.value="")};return i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:e}),t?i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border bg-muted",style:{aspectRatio:r},children:[i.jsx("img",{src:t,alt:"Preview",className:"w-full h-full object-cover"}),i.jsx(V,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:d,disabled:s,children:i.jsx(Ga,{className:"h-4 w-4"})})]})}):i.jsx("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center hover:border-accent cursor-pointer transition-colors",style:{aspectRatio:r},onClick:()=>{var h;return(h=l.current)==null?void 0:h.click()},children:i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a?i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"}):i.jsx(vj,{className:"h-8 w-8 text-muted-foreground"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:a?"Subiendo imagen...":"Haz clic para subir una imagen"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, WEBP hasta 5MB"})]})}),i.jsx(ve,{ref:l,type:"file",accept:"image/*",onChange:u,className:"hidden",disabled:s||a})]})}function sN({open:e,onOpenChange:t,onSuccess:n}){const[r,s]=m.useState(""),[a,o]=m.useState(""),[l,c]=m.useState(""),[u,d]=m.useState(""),[h,p]=m.useState(""),[f,b]=m.useState(!1),{toast:g}=Ve(),w=y=>y.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),x=y=>{s(y),c(w(y))},v=async y=>{if(y.preventDefault(),!r.trim()||!l.trim()){g({title:"Error",description:"El ttulo es obligatorio",variant:"destructive"});return}b(!0);try{const{error:j}=await M.from("programs").insert([{title:r.trim(),summary:a.trim()||null,slug:l.trim(),poster_2x3_url:u.trim()||null,wide_11x6_url:h.trim()||null,sort_order:0}]);if(j)throw j;g({title:"Programa creado",description:`El programa "${r}" ha sido creado exitosamente`}),s(""),o(""),c(""),d(""),p(""),t(!1),n()}catch(j){g({title:"Error",description:j.message||"No se pudo crear el programa",variant:"destructive"})}finally{b(!1)}};return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Crear Nuevo Programa"})}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Ttulo del Programa"}),i.jsx(ve,{id:"title",value:r,onChange:y=>x(y.target.value),placeholder:"Ej: Geometra Sagrada Avanzada",disabled:f})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"slug",children:"Slug (URL)"}),i.jsx(ve,{id:"slug",value:l,onChange:y=>c(y.target.value),placeholder:"geometria-sagrada-avanzada",disabled:f})]})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"summary",children:"Resumen"}),i.jsx(At,{id:"summary",value:a,onChange:y=>o(y.target.value),placeholder:"Describe brevemente el programa...",rows:3,disabled:f})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Ks,{label:"Imagen Poster (2x3)",value:u,onChange:d,aspectRatio:"2/3",disabled:f}),i.jsx(Ks,{label:"Imagen Wide (11x6)",value:h,onChange:p,aspectRatio:"11/6",disabled:f})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{type:"submit",disabled:f,className:"flex-1",children:f?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}),"Creando..."]}):"Crear Programa"}),i.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:f,children:"Cancelar"})]})]})]})})}function iN({open:e,onOpenChange:t,onSuccess:n}){const[r,s]=m.useState(""),[a,o]=m.useState(""),[l,c]=m.useState(""),[u,d]=m.useState(""),[h,p]=m.useState(""),[f,b]=m.useState(!1),{toast:g}=Ve(),w=j=>j.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),x=async j=>{const S=j||"curso",{data:_}=await M.from("courses").select("slug").ilike("slug",`${S}%`),N=new Set((_||[]).map(A=>A.slug));if(!N.has(S))return S;let C=2;for(;N.has(`${S}-${C}`);)C++;return`${S}-${C}`},v=j=>{s(j),c(w(j))},y=async j=>{if(j.preventDefault(),!r.trim()){g({title:"Error",description:"Ttulo es obligatorio",variant:"destructive"});return}b(!0);try{const S=w(r.trim()),_=await x(S),{error:N}=await M.from("courses").insert([{title:r.trim(),summary:a.trim()||null,slug:_,poster_2x3_url:u.trim()||null,wide_11x6_url:h.trim()||null,sort_order:0}]);if(N)throw N;g({title:"Curso creado",description:`El curso "${r}" ha sido creado exitosamente`}),s(""),o(""),c(""),d(""),p(""),t(!1),n()}catch(S){g({title:"Error",description:S.message||"No se pudo crear el curso",variant:"destructive"})}finally{b(!1)}};return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[i.jsxs(kt,{children:[i.jsx(Ct,{children:"Crear Nuevo Curso"}),i.jsx(ei,{children:"Completa los campos para crear un curso. Opcionalmente asgnalo a un programa."})]}),i.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Ttulo del Curso"}),i.jsx(ve,{id:"title",value:r,onChange:j=>v(j.target.value),placeholder:"Ej: Introduccin a los Patrones",disabled:f})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"summary",children:"Resumen"}),i.jsx(At,{id:"summary",value:a,onChange:j=>o(j.target.value),placeholder:"Describe brevemente el curso...",rows:3,disabled:f})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Ks,{label:"Imagen Poster (2x3)",value:u,onChange:d,aspectRatio:"2/3",disabled:f}),i.jsx(Ks,{label:"Imagen Wide (11x6)",value:h,onChange:p,aspectRatio:"11/6",disabled:f})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{type:"submit",disabled:f,className:"flex-1",children:f?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}),"Creando..."]}):"Crear Curso"}),i.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:f,children:"Cancelar"})]})]})]})})}var vg="Progress",yg=100,[WD,bB]=yn(vg),[HD,GD]=WD(vg),aN=m.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=KD,...o}=e;(s||s===0)&&!my(s)&&console.error(QD(`${s}`,"Progress"));const l=my(s)?s:yg;r!==null&&!py(r,l)&&console.error(YD(`${r}`,"Progress"));const c=py(r,l)?r:null,u=Nu(c)?a(c,l):void 0;return i.jsx(HD,{scope:n,value:c,max:l,children:i.jsx(xe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Nu(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":cN(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});aN.displayName=vg;var oN="ProgressIndicator",lN=m.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=GD(oN,n);return i.jsx(xe.div,{"data-state":cN(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});lN.displayName=oN;function KD(e,t){return`${Math.round(e/t*100)}%`}function cN(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Nu(e){return typeof e=="number"}function my(e){return Nu(e)&&!isNaN(e)&&e>0}function py(e,t){return Nu(e)&&!isNaN(e)&&e<=t&&e>=0}function QD(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${yg}\`.`}function YD(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${yg} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var uN=aN,XD=lN;const Cm=m.forwardRef(({className:e,value:t,...n},r)=>i.jsx(uN,{ref:r,className:oe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:i.jsx(XD,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Cm.displayName=uN.displayName;function dN({open:e,onOpenChange:t,userId:n}){const[r,s]=m.useState(null),[a,o]=m.useState([]),[l,c]=m.useState([]),[u,d]=m.useState(null),[h,p]=m.useState(!0),[f,b]=m.useState(!1),[g,w]=m.useState(!1),[x,v]=m.useState([]),[y,j]=m.useState([]),[S,_]=m.useState(""),[N,C]=m.useState("");m.useEffect(()=>{e&&n&&A()},[e,n]);const A=async()=>{p(!0);try{let L=[],D=[],E=null;try{const{data:re}=await M.rpc("get_users_with_emails").eq("id",n).single();E=re||null}catch{}if(!E){const{data:re}=await M.from("profiles").select("id, full_name, role, created_at").eq("id",n).maybeSingle();re&&(E={...re,email:""})}E&&s({id:E.id,full_name:E.full_name,email:E.email||"",role:E.role,created_at:E.created_at,last_sign_in_at:E.last_sign_in_at||E.last_signin_at||null});const{data:k}=await M.from("enrollments").select(`
          program_id,
          created_at,
          programs!inner (
            id,
            title,
            id
          )
        `).eq("user_id",n).eq("status","active");let F={};const H=new Set;if(k&&k.length>0){const re=k.map(fe=>fe.program_id).filter(Boolean);if(re.length>0){const{data:fe}=await M.from("program_courses").select("program_id, courses (id, title)").in("program_id",re).order("sort_order");(fe||[]).forEach(Z=>{const U=Z.courses;U&&(F[Z.program_id]||(F[Z.program_id]=[]),F[Z.program_id].push({id:U.id,title:U.title}),H.add(U.id))})}}const{data:P}=await M.from("course_enrollments").select("course_id, created_at").eq("user_id",n).eq("status","active");if(P&&P.length>0){const re=Array.from(new Set(P.map(Z=>Z.course_id).filter(Boolean)));let fe={};if(re.length>0){const{data:Z}=await M.from("courses").select("id, title").in("id",re);(Z||[]).forEach(U=>{fe[U.id]={id:U.id,title:U.title}}),re.forEach(U=>H.add(U))}D=(P||[]).map(Z=>{const U=fe[Z.course_id];return U?{id:U.id,title:U.title,progress_percent:0,enrolled_at:Z.created_at}:null}).filter(Boolean)}else D=[];const q=Array.from(H);let de={},le={};if(q.length>0){const{data:re}=await M.from("lessons").select("id, course_id").in("course_id",q);(re||[]).forEach(U=>{le[U.id]=U.course_id,de[U.course_id]=(de[U.course_id]||0)+1});const fe=Object.keys(le);let Z={};if(fe.length>0){const{data:U}=await M.from("lesson_progress").select("lesson_id, completed").eq("user_id",n).in("lesson_id",fe);(U||[]).forEach(ge=>{if(ge.completed){const ne=le[ge.lesson_id];ne&&(Z[ne]=(Z[ne]||0)+1)}});const ce={};if(Object.keys(de).forEach(ge=>{const ne=de[ge]||0,me=Z[ge]||0;ce[ge]=ne>0?Math.round(me/ne*100):0}),k){const ge=k.map(ne=>{const me=ne.programs,He=F[ne.program_id]||[],Re=He.length;let ct=0,Ge=0;He.forEach(bt=>{const Ue=ce[bt.id]||0;ct+=Ue,Ue===100&&(Ge+=1)});const xt=Re>0?Math.round(ct/Re):0;return{id:me.id,title:me.title,progress_percent:xt,enrolled_at:ne.created_at,courses_count:Re,completed_courses:Ge}});L=ge,o(ge)}D=D.map(ge=>({...ge,progress_percent:ce[ge.id]||0})),c(D)}else{if(k){const U=k.map(ce=>({id:ce.programs.id,title:ce.programs.title,progress_percent:0,enrolled_at:ce.created_at,courses_count:(F[ce.program_id]||[]).length,completed_courses:0}));L=U,o(U)}c(D)}}else L=[],o([]),c([]);const{data:Y}=await M.from("lesson_progress").select(`
          completed,
          watched_seconds,
          lessons!inner (
            title,
            duration_minutes,
            courses!inner (title)
          )
        `).eq("user_id",n);if(Y){const re=Y.filter(U=>U.completed).length,fe=Y.reduce((U,ce)=>U+(ce.watched_seconds||0),0),Z=Y.find(U=>!U.completed);d({total_programs:L.length,active_programs:L.filter(U=>U.progress_percent<100).length,completed_lessons:re,total_study_time:Math.round(fe/60),total_individual_courses:D.length,current_lesson:Z?{title:Z.lessons.title,course_title:Z.lessons.courses.title}:void 0})}}catch(L){console.error("Error fetching user data:",L)}finally{p(!1)}},R=async()=>{if(n){w(!0);try{const L={},{data:D}=await M.from("enrollments").select("program_id, programs!inner(id)").eq("user_id",n).eq("status","active"),E=(D||[]).map(H=>H.program_id).filter(Boolean);if(E.length>0){const{data:H}=await M.from("program_courses").select("courses (id, title), program_id").in("program_id",E);(H||[]).forEach(P=>{P.courses&&(L[P.courses.id]={id:P.courses.id,title:P.courses.title})})}const{data:k}=await M.from("course_enrollments").select("courses (id, title)").eq("user_id",n).eq("status","active");(k||[]).forEach(H=>{H.courses&&(L[H.courses.id]={id:H.courses.id,title:H.courses.title})});const F=Object.values(L).sort((H,P)=>H.title.localeCompare(P.title));v(F),j([]),_(""),C("")}finally{w(!1)}}},O=async L=>{if(_(L),C(""),!L){j([]);return}const{data:D}=await M.from("lessons").select("id, title").eq("course_id",L).order("sort_order");j((D||[]).map(E=>({id:E.id,title:E.title})))},T=async()=>{if(!(!n||!N)){w(!0);try{await fetch("https://epqalebkqmkddlfomnyf.functions.supabase.co/assign-progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n,action:"mark_lesson",lesson_id:N})}),await A(),b(!1)}finally{w(!1)}}},z=async()=>{if(!(!n||!S)){w(!0);try{await fetch("https://epqalebkqmkddlfomnyf.functions.supabase.co/assign-progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n,action:"mark_course",course_id:S})}),await A(),b(!1)}finally{w(!1)}}},I=async()=>{if(!(!n||!S)){w(!0);try{await fetch("https://epqalebkqmkddlfomnyf.functions.supabase.co/assign-progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n,action:"reset_course",course_id:S})}),await A()}finally{w(!1)}}},B=L=>new Date(L).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"}),$=L=>{switch(L){case"formador":return"Formador";case"voluntario":return"Voluntario";case"admin":return"Administrador";default:return"Estudiante"}};return h?i.jsx(St,{open:e,onOpenChange:t,children:i.jsx(wt,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})}):i.jsxs(i.Fragment,{children:[i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[i.jsxs(kt,{children:[i.jsxs(Ct,{className:"flex items-center gap-2",children:[i.jsx($p,{className:"h-5 w-5"}),"Perfil de Usuario"]}),i.jsx(ei,{children:"Informacin completa del estudiante seleccion ado."})]}),i.jsx("div",{className:"flex justify-end mb-2",children:i.jsx(V,{variant:"outline",size:"sm",onClick:()=>{b(!0),R()},children:"Asignar progreso"})}),r&&i.jsxs("div",{className:"space-y-6",children:[i.jsx(K,{children:i.jsx(Q,{className:"p-6",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ns,{className:"h-16 w-16",children:i.jsx(rs,{className:"bg-accent text-accent-foreground text-lg",children:r.full_name.split(" ").map(L=>L[0]).join("").toUpperCase()})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-xl font-semibold text-foreground",children:r.full_name}),i.jsx("p",{className:"text-muted-foreground",children:r.email}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx(Ee,{variant:"secondary",children:$(r.role)}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:["Miembro desde ",B(r.created_at)]}),r.last_sign_in_at&&i.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ltimo acceso ",B(r.last_sign_in_at)]})]})]})]})})}),u&&i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-4 w-4 text-blue-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Programas"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:u.total_programs}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Inscritos"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ei,{className:"h-4 w-4 text-green-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Lecciones"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:u.completed_lessons}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Completadas"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Zr,{className:"h-4 w-4 text-orange-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Tiempo"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:u.total_study_time}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Minutos"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ir,{className:"h-4 w-4 text-purple-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Activos"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:u.active_programs}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Programas"})]})})]}),(u==null?void 0:u.current_lesson)&&i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{className:"text-sm",children:"Leccin Actual"})}),i.jsxs(Q,{children:[i.jsx("p",{className:"font-medium",children:u.current_lesson.title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:u.current_lesson.course_title})]})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Programas Inscritos"})}),i.jsx(Q,{children:a.length===0?i.jsx("p",{className:"text-muted-foreground",children:"No est inscrito en ningn programa"}):i.jsx("div",{className:"space-y-4",children:a.map(L=>i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium",children:L.title}),i.jsxs(Ee,{variant:"outline",children:[L.completed_courses,"/",L.courses_count," cursos"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{children:"Progreso"}),i.jsxs("span",{children:[L.progress_percent,"%"]})]}),i.jsx(Cm,{value:L.progress_percent,className:"h-2"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Inscrito el ",B(L.enrolled_at)]})]})]},L.id))})})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Cursos Individuales"})}),i.jsx(Q,{children:l.length===0?i.jsx("p",{className:"text-muted-foreground",children:"No est inscrito en cursos individuales"}):i.jsx("div",{className:"space-y-3",children:l.map(L=>i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium",children:L.title}),i.jsxs(Ee,{variant:"outline",children:[L.progress_percent,"%"]})]}),i.jsx(Cm,{value:L.progress_percent,className:"h-2"}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Inscrito el ",B(L.enrolled_at)]})]},L.id))})})]})]})]})}),i.jsx(St,{open:f,onOpenChange:b,children:i.jsxs(wt,{className:"sm:max-w-[600px]",children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Asignar progreso manual"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-muted-foreground",children:"Curso"}),i.jsxs(ot,{value:S,onValueChange:O,children:[i.jsx(nt,{className:"w-full mt-1",children:i.jsx(lt,{placeholder:"Elegir curso"})}),i.jsx(rt,{children:x.map(L=>i.jsx(he,{value:L.id,children:L.title},L.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-muted-foreground",children:"Leccin (opcional)"}),i.jsxs(ot,{value:N,onValueChange:C,children:[i.jsx(nt,{className:"w-full mt-1",children:i.jsx(lt,{placeholder:"Elegir leccin"})}),i.jsx(rt,{children:y.map(L=>i.jsx(he,{value:L.id,children:L.title},L.id))})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(V,{disabled:!S||g,onClick:z,className:"flex-1",children:"Marcar curso completado"}),i.jsx(V,{disabled:!N||g,variant:"secondary",onClick:T,className:"flex-1",children:"Marcar leccin"}),i.jsx(V,{disabled:!S||g,variant:"destructive",onClick:I,children:"Reset curso"})]})]})]})})]})}var Cd="Checkbox",[JD,jB]=yn(Cd),[ZD,wg]=JD(Cd);function e3(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:a,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[p,f]=Ar({prop:n,defaultProp:s??!1,onChange:c,caller:Cd}),[b,g]=m.useState(null),[w,x]=m.useState(null),v=m.useRef(!1),y=b?!!o||!!b.closest("form"):!0,j={checked:p,disabled:a,setChecked:f,control:b,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:v,required:u,defaultChecked:Us(s)?!1:s,isFormControl:y,bubbleInput:w,setBubbleInput:x};return i.jsx(ZD,{scope:t,...j,children:t3(h)?h(j):r})}var hN="CheckboxTrigger",fN=m.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:a,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:f,bubbleInput:b}=wg(hN,e),g=Me(s,d),w=m.useRef(c);return m.useEffect(()=>{const x=a==null?void 0:a.form;if(x){const v=()=>h(w.current);return x.addEventListener("reset",v),()=>x.removeEventListener("reset",v)}},[a,h]),i.jsx(xe.button,{type:"button",role:"checkbox","aria-checked":Us(c)?"mixed":c,"aria-required":u,"data-state":vN(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:g,onKeyDown:pe(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:pe(n,x=>{h(v=>Us(v)?!0:!v),b&&f&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})})});fN.displayName=hN;var bg=m.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return i.jsx(e3,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:p})=>i.jsxs(i.Fragment,{children:[i.jsx(fN,{...h,ref:t,__scopeCheckbox:n}),p&&i.jsx(xN,{__scopeCheckbox:n})]})})});bg.displayName=Cd;var mN="CheckboxIndicator",pN=m.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=wg(mN,n);return i.jsx(is,{present:r||Us(a.checked)||a.checked===!0,children:i.jsx(xe.span,{"data-state":vN(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});pN.displayName=mN;var gN="CheckboxBubbleInput",xN=m.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:p,setBubbleInput:f}=wg(gN,e),b=Me(n,f),g=_d(a),w=Zu(r);m.useEffect(()=>{const v=p;if(!v)return;const y=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(y,"checked").set,_=!s.current;if(g!==a&&S){const N=new Event("click",{bubbles:_});v.indeterminate=Us(a),S.call(v,Us(a)?!1:a),v.dispatchEvent(N)}},[p,g,a,s]);const x=m.useRef(Us(a)?!1:a);return i.jsx(xe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:b,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});xN.displayName=gN;function t3(e){return typeof e=="function"}function Us(e){return e==="indeterminate"}function vN(e){return Us(e)?"indeterminate":e?"checked":"unchecked"}const fn=m.forwardRef(({className:e,...t},n)=>i.jsx(bg,{ref:n,className:oe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(pN,{className:oe("flex items-center justify-center text-current"),children:i.jsx(cj,{className:"h-4 w-4"})})}));fn.displayName=bg.displayName;function yN({open:e,onOpenChange:t,programId:n,onSuccess:r}){const[s,a]=m.useState([]),[o,l]=m.useState([]),[c,u]=m.useState(""),[d,h]=m.useState(!1),{toast:p}=Ve();m.useEffect(()=>{e&&f()},[e,n]);const f=async()=>{try{const{data:x}=await M.from("program_courses").select("course_id").eq("program_id",n),v=(x==null?void 0:x.map(S=>S.course_id))||[],{data:y,error:j}=await M.from("courses").select("id, title, summary, published_at").not("id","in",`(${v.join(",")||"NULL"})`).order("title");if(j)throw j;a(y||[])}catch{p({title:"Error",description:"No se pudieron cargar los cursos disponibles",variant:"destructive"})}},b=x=>{l(v=>v.includes(x)?v.filter(y=>y!==x):[...v,x])},g=async()=>{var x;if(o.length===0){p({title:"Error",description:"Selecciona al menos un curso",variant:"destructive"});return}h(!0);try{const{data:v}=await M.from("program_courses").select("sort_order").eq("program_id",n).order("sort_order",{ascending:!1}).limit(1),y=(((x=v==null?void 0:v[0])==null?void 0:x.sort_order)||0)+1,j=o.map((_,N)=>({program_id:n,course_id:_,sort_order:y+N})),{error:S}=await M.from("program_courses").insert(j);if(S)throw S;p({title:"Cursos agregados",description:`Se agregaron ${o.length} curso(s) al programa`}),l([]),t(!1),r()}catch{p({title:"Error",description:"No se pudieron agregar los cursos al programa",variant:"destructive"})}finally{h(!1)}},w=s.filter(x=>x.title.toLowerCase().includes(c.toLowerCase())||x.summary&&x.summary.toLowerCase().includes(c.toLowerCase()));return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[700px] max-h-[80vh] overflow-hidden flex flex-col",children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Agregar Cursos al Programa"})}),i.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Buscar cursos"}),i.jsxs("div",{className:"relative",children:[i.jsx(Qu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(ve,{placeholder:"Buscar por ttulo o descripcin...",value:c,onChange:x=>u(x.target.value),className:"pl-10"})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-3",children:w.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(qe,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay cursos disponibles para agregar"}),i.jsx("p",{className:"text-sm mt-2",children:c?"Prueba con otros trminos de bsqueda":"Todos los cursos ya estn en este programa"})]}):w.map(x=>i.jsx(K,{className:"cursor-pointer hover:bg-muted/50",children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(fn,{checked:o.includes(x.id),onCheckedChange:()=>b(x.id)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h4",{className:"font-medium text-foreground",children:x.title}),i.jsx(Ee,{variant:x.published_at?"default":"secondary",children:x.published_at?"Publicado":"Borrador"})]}),x.summary&&i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:x.summary})]})]})})},x.id))})]}),i.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[i.jsx(V,{onClick:g,disabled:d||o.length===0,className:"flex-1",children:d?"Agregando...":`Agregar ${o.length} curso(s)`}),i.jsx(V,{variant:"outline",onClick:()=>t(!1),disabled:d,children:"Cancelar"})]})]})})}var jg="Radio",[n3,wN]=yn(jg),[r3,s3]=n3(jg),bN=m.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:a,disabled:o,value:l="on",onCheck:c,form:u,...d}=e,[h,p]=m.useState(null),f=Me(t,w=>p(w)),b=m.useRef(!1),g=h?u||!!h.closest("form"):!0;return i.jsxs(r3,{scope:n,checked:s,disabled:o,children:[i.jsx(xe.button,{type:"button",role:"radio","aria-checked":s,"data-state":NN(s),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:f,onClick:pe(e.onClick,w=>{s||c==null||c(),g&&(b.current=w.isPropagationStopped(),b.current||w.stopPropagation())})}),g&&i.jsx(SN,{control:h,bubbles:!b.current,name:r,value:l,checked:s,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});bN.displayName=jg;var jN="RadioIndicator",_N=m.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,a=s3(jN,n);return i.jsx(is,{present:r||a.checked,children:i.jsx(xe.span,{"data-state":NN(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})})});_N.displayName=jN;var i3="RadioBubbleInput",SN=m.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const o=m.useRef(null),l=Me(o,a),c=_d(n),u=Zu(t);return m.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&f){const b=new Event("click",{bubbles:r});f.call(d,n),d.dispatchEvent(b)}},[c,n,r]),i.jsx(xe.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});SN.displayName=i3;function NN(e){return e?"checked":"unchecked"}var a3=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ed="RadioGroup",[o3,_B]=yn(Ed,[bd,wN]),kN=bd(),CN=wN(),[l3,c3]=o3(Ed),EN=m.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:a,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:h,...p}=e,f=kN(n),b=wd(u),[g,w]=Ar({prop:a,defaultProp:s??null,onChange:h,caller:Ed});return i.jsx(l3,{scope:n,name:r,required:o,disabled:l,value:g,onValueChange:w,children:i.jsx(sS,{asChild:!0,...f,orientation:c,dir:b,loop:d,children:i.jsx(xe.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:b,...p,ref:t})})})});EN.displayName=Ed;var PN="RadioGroupItem",TN=m.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,a=c3(PN,n),o=a.disabled||r,l=kN(n),c=CN(n),u=m.useRef(null),d=Me(t,u),h=a.value===s.value,p=m.useRef(!1);return m.useEffect(()=>{const f=g=>{a3.includes(g.key)&&(p.current=!0)},b=()=>p.current=!1;return document.addEventListener("keydown",f),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",b)}},[]),i.jsx(iS,{asChild:!0,...l,focusable:!o,active:h,children:i.jsx(bN,{disabled:o,required:a.required,checked:h,...c,...s,name:a.name,ref:d,onCheck:()=>a.onValueChange(s.value),onKeyDown:pe(f=>{f.key==="Enter"&&f.preventDefault()}),onFocus:pe(s.onFocus,()=>{var f;p.current&&((f=u.current)==null||f.click())})})})});TN.displayName=PN;var u3="RadioGroupIndicator",RN=m.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=CN(n);return i.jsx(_N,{...s,...r,ref:t})});RN.displayName=u3;var AN=EN,IN=TN,d3=RN;const ON=m.forwardRef(({className:e,...t},n)=>i.jsx(AN,{className:oe("grid gap-2",e),...t,ref:n}));ON.displayName=AN.displayName;const LN=m.forwardRef(({className:e,...t},n)=>i.jsx(IN,{ref:n,className:oe("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:i.jsx(d3,{className:"flex items-center justify-center",children:i.jsx(eP,{className:"h-2.5 w-2.5 fill-current text-current"})})}));LN.displayName=IN.displayName;function h3({open:e,onOpenChange:t,onProgramSelected:n}){const[r,s]=m.useState([]),[a,o]=m.useState(""),[l,c]=m.useState(!0);m.useEffect(()=>{e&&u()},[e]);const u=async()=>{c(!0);try{const{data:h,error:p}=await M.from("programs").select("id, title, summary").order("title");if(p)throw p;s(h||[])}catch(h){console.error("Error fetching programs:",h)}finally{c(!1)}},d=()=>{a&&(n(a),t(!1),o(""))};return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[500px]",children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Seleccionar Programa"})}),l?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecciona el programa al cual quieres agregar cursos:"}),i.jsx(ON,{value:a,onValueChange:o,children:r.map(h=>i.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[i.jsx(LN,{value:h.id,id:h.id}),i.jsx(X,{htmlFor:h.id,className:"flex-1 cursor-pointer",children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:h.title}),h.summary&&i.jsx("p",{className:"text-sm text-muted-foreground",children:h.summary})]})})]},h.id))}),r.length===0&&i.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No hay programas disponibles. Crea un programa primero."}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{onClick:d,disabled:!a,className:"flex-1",children:"Continuar"}),i.jsx(V,{variant:"outline",onClick:()=>t(!1),className:"flex-1",children:"Cancelar"})]})]})]})})}function f3(){const[e,t]=m.useState({totalUsers:0,totalPrograms:0,totalCourses:0,totalEnrollments:0,activePrograms:0}),[n,r]=m.useState(!0),[s,a]=m.useState(null);m.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0),a(null);const[{count:l},{count:c},{count:u},{count:d},{data:h}]=await Promise.all([M.from("profiles").select("*",{count:"exact",head:!0}),M.from("programs").select("*",{count:"exact",head:!0}),M.from("courses").select("*",{count:"exact",head:!0}),M.from("enrollments").select("*",{count:"exact",head:!0}),M.from("programs").select("id").not("published_at","is",null)]);t({totalUsers:l||0,totalPrograms:c||0,totalCourses:u||0,totalEnrollments:d||0,activePrograms:(h==null?void 0:h.length)||0})}catch(l){console.error("Error fetching stats:",l),a(l instanceof Error?l.message:"Error desconocido")}finally{r(!1)}};return{stats:e,loading:n,error:s,refetch:o}}function m3(){const{profile:e,loading:t}=it(),n=ig(),[r,s]=m.useState(!1),[a,o]=m.useState(!1),[l,c]=m.useState(!1),[u,d]=m.useState(""),[h,p]=m.useState(!1),{stats:f,loading:b,refetch:g}=f3(),[w,x]=m.useState(!0),[v,y]=m.useState({programs:0,courses:0,usersInPrograms:0,usersInIndividual:0,newWeek:0,newMonth:0,newYear:0,active30:0,active7:0,totalStudents:0,totalActiveStudentsMonth:0,totalTeachers:0,totalVolunteers:0,topCourses:[],topCourseTitle:"",topCourseMinutes:0,topProgramTitle:"",topProgramMinutes:0,activeUsersList:[],activeUsers20List:[]}),j=new Date().toISOString().slice(0,10),S=new Date(Date.now()-30*24*60*60*1e3).toISOString().slice(0,10),[_,N]=m.useState(S),[C,A]=m.useState(j),[R,O]=m.useState(!1),[T,z]=m.useState(""),[I,B]=m.useState(!1),[$,L]=m.useState(!1),[D,E]=m.useState([]),[k,F]=m.useState(""),[H,P]=m.useState("Usuarios"),[q,de]=m.useState("todos"),le=()=>{const ne=["nombre","email","programas","cursos"],me=k.trim().toLowerCase(),He=D.filter(Ue=>{var It,pr;return!me||((It=Ue.name)==null?void 0:It.toLowerCase().includes(me))||((pr=Ue.email)==null?void 0:pr.toLowerCase().includes(me))||Ue.programs.join(", ").toLowerCase().includes(me)||Ue.courses.join(", ").toLowerCase().includes(me)}).map(Ue=>({nombre:Ue.name||"",email:Ue.email||"",programas:Ue.programs.join(" | "),cursos:Ue.courses.join(" | ")})),Re=[ne.join(",")].concat(He.map(Ue=>ne.map(It=>`"${String(Ue[It]??"").replace(/"/g,'""')}"`).join(","))),ct=new Blob([Re.join(`
`)],{type:"text/csv;charset=utf-8;"}),Ge=URL.createObjectURL(ct),xt=document.createElement("a"),bt=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");xt.href=Ge,xt.download=`usuarios-activos-${bt}.csv`,document.body.appendChild(xt),xt.click(),document.body.removeChild(xt),URL.revokeObjectURL(Ge)};if(t)return i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx(Be,{className:"h-6 w-6 animate-spin text-muted-foreground"})});if(!(e&&(e.role==="admin"||e.role==="formador")))return i.jsx(ir,{to:"/mi-formacion",replace:!0});const re=async(ne,me)=>{var He;try{L(!0),B(!0),P(me);let Re=[];const ct=new Date,Ge=new Date(ct.getTime()-7*24*60*60*1e3).toISOString(),xt=new Date(ct.getTime()-30*24*60*60*1e3).toISOString(),bt=new Date(ct.getTime()-365*24*60*60*1e3).toISOString();if(ne==="active30"){const{data:se}=await M.from("lesson_progress").select("user_id").gte("updated_at",xt).limit(1e4);Re=Array.from(new Set((se||[]).map(ae=>ae.user_id).filter(Boolean)))}else if(ne==="active7"){const{data:se}=await M.from("lesson_progress").select("user_id").gte("updated_at",Ge).limit(1e4);Re=Array.from(new Set((se||[]).map(ae=>ae.user_id).filter(Boolean)))}else if(ne==="usersInPrograms"||ne==="programs"){const{data:se}=await M.from("enrollments").select("user_id").eq("status","active").limit(2e4);Re=Array.from(new Set((se||[]).map(ae=>ae.user_id).filter(Boolean)))}else if(ne==="usersInIndividual"||ne==="courses"){const{data:se}=await M.from("course_enrollments").select("user_id").eq("status","active").limit(2e4);Re=Array.from(new Set((se||[]).map(ae=>ae.user_id).filter(Boolean)))}else if(ne==="newWeek"){const{data:se}=await M.from("profiles").select("id").gte("created_at",Ge).limit(2e4);Re=(se||[]).map(ae=>ae.id)}else if(ne==="newMonth"){const{data:se}=await M.from("profiles").select("id").gte("created_at",xt).limit(2e4);Re=(se||[]).map(ae=>ae.id)}else if(ne==="newYear"){const{data:se}=await M.from("profiles").select("id").gte("created_at",bt).limit(2e4);Re=(se||[]).map(ae=>ae.id)}else if(ne==="totalStudents"){const{data:se}=await M.from("profiles").select("id").eq("role","student").limit(2e4);Re=(se||[]).map(ae=>ae.id)}else if(ne==="totalTeachers"){const{data:se}=await M.from("profiles").select("id").eq("role","teacher").limit(2e4);Re=(se||[]).map(ae=>ae.id)}else if(ne==="totalVolunteers"){const{data:se}=await M.from("profiles").select("id").eq("role","voluntario").limit(2e4);Re=(se||[]).map(ae=>ae.id)}else if(ne==="activeStudentsMonth"){const{data:se}=await M.from("lesson_progress").select("user_id").gte("updated_at",xt).limit(2e4),ae=new Set((se||[]).map($e=>$e.user_id).filter(Boolean)),{data:Se}=await M.from("profiles").select("id").eq("role","student").in("id",Array.from(ae));Re=(Se||[]).map($e=>$e.id)}if(Re.length===0){E([]);return}let Ue={};try{const ae=await(await fetch("undefined/functions/v1/list-users?all=true&pageSize=2000&sortBy=created_at&sortDir=desc",{headers:{Authorization:"Bearer undefined"}})).json();(((He=ae==null?void 0:ae.data)==null?void 0:He.users)||[]).forEach($e=>{Ue[$e.id]=$e})}catch{Ue={}}const[{data:It},{data:pr}]=await Promise.all([M.from("enrollments").select("user_id, programs(title)").in("user_id",Re),M.from("course_enrollments").select("user_id, courses(title)").in("user_id",Re)]),Ln={};(It||[]).forEach(se=>{var $e;const ae=se.user_id,Se=($e=se.programs)==null?void 0:$e.title;!ae||!Se||(Ln[ae]||(Ln[ae]=[]),Ln[ae].push(Se))});const W={};(pr||[]).forEach(se=>{var $e;const ae=se.user_id,Se=($e=se.courses)==null?void 0:$e.title;!ae||!Se||(W[ae]||(W[ae]=[]),W[ae].push(Se))});const ee=Re.map(se=>{var ae,Se,$e,Kt;return{id:se,name:((ae=Ue[se])==null?void 0:ae.full_name)||((Se=Ue[se])==null?void 0:Se.email)||"",email:(($e=Ue[se])==null?void 0:$e.email)||"",role:((Kt=Ue[se])==null?void 0:Kt.role)||"student",programs:(Ln[se]||[]).slice(0,5),courses:(W[se]||[]).slice(0,5)}});E(ee)}finally{L(!1)}};m.useEffect(()=>{fe(_,C)},[]);const fe=async(ne,me)=>{var He,Re;try{x(!0);const ct=new URLSearchParams;ne&&ct.set("start",ne),me&&ct.set("end",me);try{const Oe=await(await fetch(`undefined/functions/v1/activity?${ct.toString()}`,{headers:{Authorization:"Bearer undefined"}})).json();if(Oe!=null&&Oe.success&&(Oe!=null&&Oe.data)){y(si=>({...si,...Oe.data}));return}}catch(ke){console.warn("Edge activity fallback:",ke)}const{count:Ge}=await M.from("programs").select("*",{count:"exact",head:!0}),{count:xt}=await M.from("courses").select("*",{count:"exact",head:!0}),{data:bt}=await M.from("enrollments").select("user_id").eq("status","active"),Ue=new Set((bt||[]).map(ke=>ke.user_id)).size,{data:It}=await M.from("course_enrollments").select("user_id").eq("status","active"),pr=new Set((It||[]).map(ke=>ke.user_id)).size,Ln=new Date,W=new Date(Ln.getTime()-7*24*60*60*1e3).toISOString(),ee=new Date(Ln.getTime()-30*24*60*60*1e3).toISOString(),se=new Date(Ln.getTime()-365*24*60*60*1e3).toISOString(),{data:ae}=await M.from("profiles").select("id, created_at").gte("created_at",W),{data:Se}=await M.from("profiles").select("id, created_at").gte("created_at",ee),{data:$e}=await M.from("profiles").select("id, created_at").gte("created_at",se),{count:Kt}=await M.from("profiles").select("*",{count:"exact",head:!0}).eq("role","student"),{count:Qt}=await M.from("profiles").select("*",{count:"exact",head:!0}).eq("role","teacher"),{count:ln}=await M.from("profiles").select("*",{count:"exact",head:!0}).eq("role","voluntario");let Mn=M.from("lesson_progress").select("watched_seconds, updated_at, lessons!inner(course_id, courses!inner(title))").limit(1e4);if(ne&&me){const ke=new Date(ne).toISOString(),Oe=new Date(new Date(me).getTime()+24*60*60*1e3).toISOString();Mn=Mn.gte("updated_at",ke).lt("updated_at",Oe)}const{data:mt}=await Mn,Yt={};(mt||[]).forEach(ke=>{var cs,us,$l;const Oe=(cs=ke.lessons)==null?void 0:cs.course_id,si=(($l=(us=ke.lessons)==null?void 0:us.courses)==null?void 0:$l.title)||"Curso";Oe&&(Yt[Oe]||(Yt[Oe]={title:si,minutes:0}),Yt[Oe].minutes+=Math.floor((ke.watched_seconds||0)/60))});const Xt=Object.entries(Yt).map(([ke,Oe])=>({courseId:ke,title:Oe.title,minutes:Oe.minutes})).sort((ke,Oe)=>Oe.minutes-ke.minutes).slice(0,5);let io="",ao=0;const Fl=Object.keys(Yt);if(Fl.length>0){const{data:ke}=await M.from("program_courses").select("program_id, course_id, programs(title)").in("course_id",Fl),Oe={};(ke||[]).forEach(cs=>{var Ug,Bg;const us=cs.program_id,$l=((Ug=cs.programs)==null?void 0:Ug.title)||"Programa",Nk=((Bg=Yt[cs.course_id])==null?void 0:Bg.minutes)||0;Oe[us]||(Oe[us]={title:$l,minutes:0}),Oe[us].minutes+=Nk});const si=Object.values(Oe).sort((cs,us)=>us.minutes-cs.minutes)[0];si&&(io=si.title,ao=si.minutes)}const oo=((He=Xt[0])==null?void 0:He.title)||"",gr=((Re=Xt[0])==null?void 0:Re.minutes)||0,ls=new Set,je=new Date(_).toISOString(),De=new Date(new Date(C).getTime()+24*60*60*1e3).toISOString(),{data:Ke}=await M.from("lesson_progress").select("user_id, updated_at").gte("updated_at",je).lt("updated_at",De);(Ke||[]).forEach(ke=>ke.user_id&&ls.add(ke.user_id));const{data:bn}=await M.from("assignments").select("user_id, created_at").gte("created_at",je).lt("created_at",De);(bn||[]).forEach(ke=>ke.user_id&&ls.add(ke.user_id));try{const{data:ke}=await M.from("messages").select("sender_id, created_at").gte("created_at",je).lt("created_at",De);(ke||[]).forEach(Oe=>Oe.sender_id&&ls.add(Oe.sender_id))}catch{}const Jt=new Date(Date.now()-7*24*60*60*1e3).toISOString(),jn=new Set,{data:Dr}=await M.from("lesson_progress").select("user_id, updated_at").gte("updated_at",Jt);(Dr||[]).forEach(ke=>ke.user_id&&jn.add(ke.user_id));const{data:_n}=await M.from("assignments").select("user_id, created_at").gte("created_at",Jt);(_n||[]).forEach(ke=>ke.user_id&&jn.add(ke.user_id));try{const{data:ke}=await M.from("messages").select("sender_id, created_at").gte("created_at",Jt);(ke||[]).forEach(Oe=>Oe.sender_id&&jn.add(Oe.sender_id))}catch{}y({programs:Ge||0,courses:xt||0,usersInPrograms:Ue,usersInIndividual:pr,newWeek:(ae||[]).length,newMonth:(Se||[]).length,newYear:($e||[]).length,active30:ls.size,active7:jn.size,totalStudents:Kt||0,totalActiveStudentsMonth:0,totalTeachers:Qt||0,totalVolunteers:ln||0,topCourses:Xt,topCourseTitle:oo,topCourseMinutes:gr,topProgramTitle:io,topProgramMinutes:ao});const{data:xr}=await M.from("lesson_progress").select("user_id, updated_at").gte("updated_at",ee),Fg=new Set((xr||[]).map(ke=>ke.user_id).filter(Boolean));let $g=0;if(Fg.size>0){const{data:ke}=await M.from("profiles").select("id").eq("role","student").in("id",Array.from(Fg));$g=(ke||[]).length}let zg=[];if(ls.size>0){const{data:ke}=await M.from("profiles").select("id, full_name").in("id",Array.from(ls)).limit(12);zg=(ke||[]).map(Oe=>({id:Oe.id,name:Oe.full_name||""}))}y(ke=>({...ke,totalActiveStudentsMonth:$g,activeUsersList:zg}))}finally{x(!1)}},Z=()=>{s(!0)},U=()=>{o(!0)},ce=()=>{g()},ge=()=>{const ne=[],me=bt=>ne.push(bt.map(Ue=>`"${String(Ue).replace(/"/g,'""')}"`).join(","));me(["Mtrica","Valor"]),me(["Programas",v.programs]),me(["Usuarios en programas",v.usersInPrograms]),me(["Cursos",v.courses]),me(["Usuarios en cursos individuales",v.usersInIndividual]),me(["Nuevos 7 das",v.newWeek]),me(["Nuevos 30 das",v.newMonth]),me(["Nuevos 365 das",v.newYear]),me(["Activos 30 das",v.active30]),ne.push(""),me(["Top Cursos","Minutos"]),v.topCourses.forEach(bt=>me([bt.title,bt.minutes]));const He=ne.join(`
`),Re=new Blob([He],{type:"text/csv;charset=utf-8;"}),ct=URL.createObjectURL(Re),Ge=document.createElement("a"),xt=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");Ge.href=ct,Ge.download=`actividad-campus-${xt}.csv`,document.body.appendChild(Ge),Ge.click(),document.body.removeChild(Ge),URL.revokeObjectURL(ct)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Panel de Administrador"}),i.jsx("p",{className:"text-muted-foreground",children:"Gestiona todo el Campus de Geometra Sagrada"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(V,{onClick:Z,className:"gap-2",children:[i.jsx(qn,{className:"h-4 w-4"}),"Nuevo Programa"]}),i.jsxs(V,{onClick:U,className:"gap-2",variant:"outline",children:[i.jsx(qn,{className:"h-4 w-4"}),"Nuevo Curso"]}),i.jsxs(V,{onClick:()=>{f.totalPrograms>0&&p(!0)},className:"gap-2",variant:"outline",disabled:f.totalPrograms===0,children:[i.jsx(qe,{className:"h-4 w-4"}),"Asignar Cursos"]}),i.jsxs(V,{className:"gap-2",variant:"outline",onClick:()=>window.open("/cuenta","_blank"),children:[i.jsx(gj,{className:"h-4 w-4"}),"Configuracin"]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(lj,{className:"h-5 w-5 text-accent"}),i.jsx("h2",{className:"text-xl font-semibold",children:"Actividad"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[i.jsx("span",{children:"Desde"}),i.jsx("input",{type:"date",value:_,onChange:ne=>N(ne.target.value),className:"bg-transparent border rounded px-2 py-1"}),i.jsx("span",{children:"Hasta"}),i.jsx("input",{type:"date",value:C,onChange:ne=>A(ne.target.value),className:"bg-transparent border rounded px-2 py-1"}),i.jsx(V,{size:"sm",variant:"outline",onClick:()=>fe(_,C),children:"Aplicar"})]}),i.jsx(V,{variant:"outline",size:"sm",onClick:ge,children:"Exportar CSV"})]})]}),w?i.jsx("div",{className:"flex items-center justify-center py-6",children:i.jsx(Be,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`grid gap-6 ${n?"grid-cols-1":"md:grid-cols-2 lg:grid-cols-3"}`,children:[i.jsxs(K,{role:"button",onClick:()=>re("programs","Programas"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Programas"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.programs})})]}),i.jsxs(K,{role:"button",onClick:()=>re("usersInPrograms","Usuarios en programas"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Usuarios en programas"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.usersInPrograms})})]}),i.jsxs(K,{role:"button",onClick:()=>re("courses","Cursos"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Cursos"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.courses})})]}),i.jsxs(K,{role:"button",onClick:()=>re("usersInIndividual","Usuarios en cursos individuales"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Usuarios en cursos individuales"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.usersInIndividual})})]}),i.jsxs(K,{role:"button",onClick:()=>re("newWeek","Nuevos usuarios 7 das"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Nuevos usuarios 7 das"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.newWeek})})]}),i.jsxs(K,{role:"button",onClick:()=>re("newMonth","Nuevos usuarios en 30 das"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Nuevos usuarios en 30 das"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.newMonth})})]}),i.jsxs(K,{role:"button",onClick:()=>re("active30","Usuarios activos 30 das"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Usuarios activos 30 das"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.active30})})]}),i.jsxs(K,{role:"button",onClick:()=>re("active7","Usuarios activos esta semana"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Usuarios activos esta semana"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.active7})})]}),i.jsxs(K,{role:"button",onClick:()=>re("newYear","Nuevos usuarios este ao"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Nuevos usuarios este ao"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.newYear})})]})]}),i.jsxs("div",{className:`grid gap-6 ${n?"grid-cols-1":"md:grid-cols-2 lg:grid-cols-2"} mt-4`,children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{className:"text-sm",children:"Ms Vistos"})}),i.jsx(Q,{children:i.jsxs("div",{className:`grid ${n?"grid-cols-1":"md:grid-cols-2 lg:grid-cols-2"} gap-3`,children:[i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Programa ms visto"}),i.jsx("div",{className:"font-medium line-clamp-2",children:v.topProgramTitle||""}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[v.topProgramMinutes," min"]})]}),i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Curso ms visto"}),i.jsx("div",{className:"font-medium line-clamp-2",children:v.topCourseTitle||""}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[v.topCourseMinutes," min"]})]})]})})]}),i.jsxs(K,{role:"button",className:"cursor-pointer",onClick:()=>re("active30","Usuarios activos 30 das"),children:[i.jsx(ye,{children:i.jsx(we,{className:"text-sm",children:"Estudiantes activos (30 das)"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold text-center",children:v.active30})})]})]}),i.jsxs("div",{className:`grid gap-6 ${n?"grid-cols-2":"md:grid-cols-2 lg:grid-cols-4"} mt-4`,children:[i.jsxs(K,{role:"button",className:"cursor-pointer",onClick:()=>re("totalStudents","Total de estudiantes"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Total de estudiantes"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.totalStudents})})]}),i.jsxs(K,{role:"button",className:"cursor-pointer",onClick:()=>re("activeStudentsMonth","Estudiantes activos ltimo mes"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Estudiantes activos ltimo mes"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.totalActiveStudentsMonth})})]}),i.jsxs(K,{role:"button",className:"cursor-pointer",onClick:()=>re("totalTeachers","Total de formadores"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Total de formadores"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.totalTeachers})})]}),i.jsxs(K,{role:"button",className:"cursor-pointer",onClick:()=>re("totalVolunteers","Total de voluntarios"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Total de voluntarios"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.totalVolunteers})})]})]})]})]}),!b&&f.totalPrograms===0&&i.jsx("div",{className:"text-center py-12",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsx(qe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Comienza creando contenido!"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Tu campus est listo. Crea programas y cursos para empezar a gestionar el aprendizaje."}),i.jsx("div",{className:"flex gap-2 justify-center",children:i.jsxs(V,{onClick:Z,className:"gap-2",children:[i.jsx(qn,{className:"h-4 w-4"}),"Mi Primer Programa"]})})]})}),i.jsx(sN,{open:r,onOpenChange:s,onSuccess:ce}),i.jsx(iN,{open:a,onOpenChange:o,onSuccess:ce}),i.jsx(h3,{open:h,onOpenChange:p,onProgramSelected:ne=>{d(ne),c(!0)}}),u&&i.jsx(yN,{open:l,onOpenChange:c,programId:u,onSuccess:ce}),T&&i.jsx(dN,{open:R,onOpenChange:O,userId:T}),i.jsx(St,{open:I,onOpenChange:B,children:i.jsxs(wt,{className:"sm:max-w-[700px]",children:[i.jsxs(kt,{children:[i.jsxs(Ct,{children:[H,i.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:[D.filter(ne=>q==="todos"||ne.role===q).filter(ne=>{const me=k.trim().toLowerCase();return me?(ne.name||"").toLowerCase().includes(me)||(ne.email||"").toLowerCase().includes(me)||ne.programs.join(", ").toLowerCase().includes(me)||ne.courses.join(", ").toLowerCase().includes(me):!0}).length," resultados"]})]}),i.jsx(ei,{children:"Nombre, email y asociaciones recientes"})]}),$?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ve,{placeholder:"Buscar por nombre, email, programa o curso",value:k,onChange:ne=>F(ne.target.value),disabled:!0}),i.jsx(V,{variant:"outline",disabled:!0,children:"Cargando..."})]}),i.jsx("div",{className:"flex items-center justify-center py-6",children:i.jsx(Be,{className:"h-6 w-6 animate-spin text-muted-foreground"})})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ve,{placeholder:"Buscar por nombre, email, programa o curso",value:k,onChange:ne=>F(ne.target.value)}),i.jsxs(ot,{value:q,onValueChange:ne=>de(ne),children:[i.jsx(nt,{className:"w-40",children:i.jsx(lt,{placeholder:"Rol"})}),i.jsxs(rt,{children:[i.jsx(he,{value:"todos",children:"Todos"}),i.jsx(he,{value:"student",children:"Estudiante"}),i.jsx(he,{value:"teacher",children:"Formador"}),i.jsx(he,{value:"admin",children:"Admin"}),i.jsx(he,{value:"voluntario",children:"Voluntario"})]})]}),i.jsx(V,{variant:"outline",onClick:le,children:"Exportar CSV"})]}),i.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-auto",children:[D.filter(ne=>q==="todos"||ne.role===q).filter(ne=>{const me=k.trim().toLowerCase();return me?(ne.name||"").toLowerCase().includes(me)||(ne.email||"").toLowerCase().includes(me)||ne.programs.join(", ").toLowerCase().includes(me)||ne.courses.join(", ").toLowerCase().includes(me):!0}).map(ne=>i.jsxs("div",{className:"p-3 border rounded-md",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:ne.name}),i.jsx("div",{className:"text-sm text-muted-foreground",children:ne.email})]}),i.jsx(V,{size:"sm",variant:"outline",onClick:()=>{z(ne.id),O(!0)},children:"Ver perfil"})]}),i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsxs("div",{className:"text-muted-foreground",children:["Programas: ",ne.programs.join(", ")||""]}),i.jsxs("div",{className:"text-muted-foreground",children:["Cursos: ",ne.courses.join(", ")||""]})]})]},ne.id)),D.length===0&&i.jsx("p",{className:"text-sm text-muted-foreground",children:"Sin datos"})]})]})]})})]})}function p3({open:e,onOpenChange:t,onSuccess:n,programId:r,programTitle:s}){const[a,o]=m.useState(""),[l,c]=m.useState(""),[u,d]=m.useState(""),[h,p]=m.useState(!1),{toast:f}=Ve(),b=x=>x.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),g=x=>{o(x),d(b(x))},w=async x=>{if(x.preventDefault(),!a.trim()||!u.trim()){f({title:"Error",description:"El ttulo es obligatorio",variant:"destructive"});return}p(!0);try{const{data:v,error:y}=await M.from("courses").insert({title:a.trim(),summary:l.trim()||null,slug:u.trim(),program_id:r,sort_order:0}).select().single();if(y)throw y;f({title:"Curso creado",description:`El curso "${a}" ha sido agregado al programa "${s}"`}),o(""),c(""),d(""),t(!1),n()}catch(v){f({title:"Error",description:v.message||"No se pudo crear el curso",variant:"destructive"})}finally{p(!1)}};return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[500px]",children:[i.jsx(kt,{children:i.jsxs(Ct,{children:['Crear Curso para "',s,'"']})}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Ttulo del Curso"}),i.jsx(ve,{id:"title",value:a,onChange:x=>g(x.target.value),placeholder:"Ej: Los Nmeros Sagrados",disabled:h})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"slug",children:"Slug (URL)"}),i.jsx(ve,{id:"slug",value:u,onChange:x=>d(x.target.value),placeholder:"los-numeros-sagrados",disabled:h})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"summary",children:"Descripcin"}),i.jsx(At,{id:"summary",value:l,onChange:x=>c(x.target.value),placeholder:"Describe brevemente el curso...",rows:3,disabled:h})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{type:"submit",disabled:h,className:"flex-1",children:h?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}),"Creando..."]}):"Crear Curso"}),i.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:h,children:"Cancelar"})]})]})]})})}function g3(){const{profile:e}=it(),{programs:t,loading:n,error:r,refetch:s}=fg(),{toast:a}=Ve(),o=Gn(),[l,c]=m.useState(!1),[u,d]=m.useState(!1),[h,p]=m.useState(null),f=((e==null?void 0:e.role)||"").toString(),b=["formador","teacher","profesor","admin"].includes(f),g=()=>{c(!0)},w=(v,y)=>{p({id:v,title:y}),d(!0)},x=async(v,y)=>{if(confirm(`Ests seguro de que quieres eliminar el programa "${y}"?`))try{const{error:j}=await M.from("programs").delete().eq("id",v);if(j)throw j;a({title:"Programa eliminado",description:`El programa "${y}" ha sido eliminado exitosamente`}),s()}catch{a({title:"Error",description:"No se pudo eliminar el programa",variant:"destructive"})}};return n?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):r?i.jsx("div",{className:"text-center py-8",children:i.jsxs("p",{className:"text-destructive",children:["Error al cargar programas: ",r]})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Programas"}),i.jsx("p",{className:"text-muted-foreground",children:b?"Gestiona los programas de estudio":"Explora los programas disponibles"})]}),b&&i.jsx("div",{className:"flex gap-2",children:i.jsxs(V,{className:"gap-2",onClick:g,children:[i.jsx(qn,{className:"h-4 w-4"}),"Nuevo Programa"]})})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.map(v=>{var N,C,A;const y=((N=v.courses)==null?void 0:N.reduce((R,O)=>R+(O.progress_percent||0),0))/(((C=v.courses)==null?void 0:C.length)||1)||0,j=y>0,S=((A=v.courses)==null?void 0:A.length)||0,_=!!v.published_at;return i.jsxs(K,{className:"cursor-pointer hover:shadow-lg transition-shadow group",children:[i.jsxs("div",{className:"aspect-[2/3] relative overflow-hidden rounded-t-lg",children:[v.poster_2x3_url||v.wide_11x6_url?i.jsx("img",{src:v.poster_2x3_url||v.wide_11x6_url,alt:v.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):i.jsx("div",{className:`w-full h-full bg-gradient-to-br ${_?"from-accent/20 to-accent/10":"from-muted/20 to-muted/10"} flex items-center justify-center`,children:i.jsx(qe,{className:`h-16 w-16 ${_?"text-accent":"text-muted"}`})}),j&&_&&i.jsx("div",{className:"absolute top-3 left-3",children:i.jsxs(Ee,{className:"bg-accent text-white",children:[Math.round(y),"% completo"]})})]}),i.jsxs(Q,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:v.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-3",children:v.summary||"Descubre los secretos de la geometra sagrada"}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx(Ee,{variant:_?"default":"secondary",children:_?"Publicado":"Borrador"}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(qe,{className:"h-3 w-3"}),i.jsxs("span",{children:[S," cursos"]})]})]}),v.courses&&v.courses.length>0&&i.jsxs("div",{className:"mb-3",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Cursos incluidos:"}),i.jsxs("div",{className:"space-y-1",children:[v.courses.slice(0,3).map(R=>i.jsxs("div",{className:"text-xs text-foreground flex items-center justify-between",children:[i.jsx("span",{className:"truncate",children:R.title}),R.progress_percent!==void 0&&i.jsxs("span",{className:"text-muted-foreground ml-2",children:[R.progress_percent,"%"]})]},R.id)),v.courses.length>3&&i.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",v.courses.length-3," cursos ms"]})]})]}),i.jsx("div",{className:"flex gap-2",children:b?i.jsxs(i.Fragment,{children:[i.jsx(V,{size:"sm",variant:"outline",onClick:()=>o(`/programas/${v.slug}`),children:"Editar"}),i.jsx(V,{size:"sm",variant:"secondary",onClick:()=>w(v.id,v.title),children:"+ Curso"}),i.jsx(V,{size:"sm",variant:"destructive",onClick:()=>x(v.id,v.title),children:"Eliminar"}),i.jsx(V,{size:"sm",onClick:()=>o(`/programa/${v.slug}`),children:"Ver"})]}):i.jsx(V,{size:"sm",className:"w-full",disabled:!_,children:_?j?"Continuar":"Comenzar":"No Disponible"})}),j&&_&&i.jsx("div",{className:"w-full bg-border rounded-full h-1.5 mt-2",children:i.jsx("div",{className:"bg-accent h-1.5 rounded-full transition-all duration-300",style:{width:`${y}%`}})})]})]},v.id)}),b&&i.jsx(K,{className:"border-dashed",children:i.jsxs(Q,{className:"p-6 flex flex-col items-center justify-center text-center aspect-[2/3]",children:[i.jsx(qn,{className:"h-12 w-12 text-muted-foreground mb-4"}),i.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Crear Programa"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Agrega un nuevo programa de estudio"}),i.jsx(V,{onClick:g,children:"Crear Programa"})]})})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Total"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:t.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Programas"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rn,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Cursos"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:t.reduce((v,y)=>{var j;return v+(((j=y.courses)==null?void 0:j.length)||0)},0)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Disponibles"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Zr,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Publicados"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:t.filter(v=>v.published_at).length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Activos"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Borradores"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:t.filter(v=>!v.published_at).length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"En desarrollo"})]})})]}),i.jsx(sN,{open:l,onOpenChange:c,onSuccess:s}),h&&i.jsx(p3,{open:u,onOpenChange:d,onSuccess:s,programId:h.id,programTitle:h.title})]})}function x3({open:e,onOpenChange:t,programId:n,programTitle:r,onSuccess:s}){const[a,o]=m.useState([]),[l,c]=m.useState([]),[u,d]=m.useState(""),[h,p]=m.useState(!1),{toast:f}=Ve();m.useEffect(()=>{e&&b()},[e,n]);const b=async()=>{try{const{data:S}=await M.from("enrollments").select("user_id").eq("program_id",n),_=(S==null?void 0:S.map(A=>A.user_id))||[],{data:N,error:C}=await M.from("profiles").select("id, full_name, role").not("id","in",`(${_.join(",")||"NULL"})`).order("full_name");if(C)throw C;o(N||[])}catch{f({title:"Error",description:"No se pudieron cargar los usuarios disponibles",variant:"destructive"})}},g=S=>{c(_=>_.includes(S)?_.filter(N=>N!==S):[..._,S])},w=async()=>{if(l.length===0){f({title:"Error",description:"Selecciona al menos un usuario",variant:"destructive"});return}p(!0);try{const S=l.map(N=>({user_id:N,program_id:n,status:"active",progress_percent:0})),{error:_}=await M.from("enrollments").upsert(S,{onConflict:"user_id,program_id"});if(_)throw _;f({title:"Usuarios inscritos",description:`Se inscribieron ${l.length} usuario(s) al programa "${r}"`}),c([]),t(!1),s()}catch{f({title:"Error",description:"No se pudieron inscribir los usuarios al programa",variant:"destructive"})}finally{p(!1)}},x=a.filter(S=>S.full_name.toLowerCase().includes(u.toLowerCase())),v=S=>S.split(" ").map(_=>_[0]).join("").toUpperCase(),y=S=>{switch(S){case"formador":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"voluntario":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300";case"admin":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300";default:return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300"}},j=S=>{switch(S){case"formador":return"Formador";case"voluntario":return"Voluntario";case"admin":return"Admin";default:return"Estudiante"}};return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[700px] max-h-[80vh] overflow-hidden flex flex-col",children:[i.jsx(kt,{children:i.jsxs(Ct,{children:["Inscribir Usuarios - ",r]})}),i.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Buscar usuarios"}),i.jsxs("div",{className:"relative",children:[i.jsx(Qu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(ve,{placeholder:"Buscar por nombre...",value:u,onChange:S=>d(S.target.value),className:"pl-10"})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-3",children:x.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(rn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay usuarios disponibles para inscribir"}),i.jsx("p",{className:"text-sm mt-2",children:u?"Prueba con otros trminos de bsqueda":"Todos los usuarios ya estn inscritos en este programa"})]}):x.map(S=>i.jsx(K,{className:"cursor-pointer hover:bg-muted/50",children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(fn,{checked:l.includes(S.id),onCheckedChange:()=>g(S.id)}),i.jsx(ns,{className:"h-10 w-10",children:i.jsx(rs,{children:v(S.full_name)})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-foreground",children:S.full_name}),i.jsx(Ee,{className:`text-xs ${y(S.role)}`,children:j(S.role)})]})]})})},S.id))})]}),i.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[i.jsx(V,{onClick:w,disabled:h||l.length===0,className:"flex-1",children:h?"Inscribiendo...":`Inscribir ${l.length} usuario(s)`}),i.jsx(V,{variant:"outline",onClick:()=>t(!1),disabled:h,children:"Cancelar"})]})]})})}function v3(){const{slug:e}=Rl(),t=Gn(),{profile:n}=it(),{toast:r}=Ve(),[s,a]=m.useState(null),[o,l]=m.useState([]),[c,u]=m.useState(!0),[d,h]=m.useState(!1),[p,f]=m.useState(!1),[b,g]=m.useState(!1),[w,x]=m.useState(!1),[v,y]=m.useState({title:"",summary:"",poster_2x3_url:"",wide_11x6_url:""}),j=(n==null?void 0:n.role)==="formador"||(n==null?void 0:n.role)==="admin";m.useEffect(()=>{e&&S()},[e]);const S=async()=>{u(!0);try{const{data:T,error:z}=await M.from("programs").select("*").eq("slug",e).single();if(z)throw z;a(T),y({title:T.title,summary:T.summary||"",poster_2x3_url:T.poster_2x3_url||"",wide_11x6_url:T.wide_11x6_url||""});const{data:I,error:B}=await M.from("program_courses").select(`
          courses (
            id,
            title,
            summary,
            slug,
            sort_order,
            published_at
          )
        `).eq("program_id",T.id).order("sort_order");if(B)throw B;l((I==null?void 0:I.map($=>$.courses).filter(Boolean))||[])}catch{r({title:"Error",description:"No se pudo cargar el programa",variant:"destructive"}),t("/programas")}finally{u(!1)}},_=async()=>{if(s){f(!0);try{const{error:T}=await M.from("programs").update({title:v.title,summary:v.summary||null,poster_2x3_url:v.poster_2x3_url||null,wide_11x6_url:v.wide_11x6_url||null}).eq("id",s.id);if(T)throw T;r({title:"Programa actualizado",description:"Los cambios han sido guardados exitosamente"}),a({...s,title:v.title,summary:v.summary,poster_2x3_url:v.poster_2x3_url,wide_11x6_url:v.wide_11x6_url}),h(!1)}catch{r({title:"Error",description:"No se pudo actualizar el programa",variant:"destructive"})}finally{f(!1)}}},N=async()=>{if(!s)return;const T=s.published_at?null:new Date().toISOString();try{const{error:z}=await M.from("programs").update({published_at:T}).eq("id",s.id);if(z)throw z;a({...s,published_at:T}),r({title:T?"Programa publicado":"Programa despublicado",description:T?"El programa ya est visible para los estudiantes":"El programa ya no es visible para los estudiantes"})}catch{r({title:"Error",description:"No se pudo cambiar el estado del programa",variant:"destructive"})}};if(c)return i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!s)return i.jsxs("div",{className:"text-center py-8",children:[i.jsx("p",{className:"text-destructive",children:"Programa no encontrado"}),i.jsx(V,{onClick:()=>t("/programas"),className:"mt-4",children:"Volver a Programas"})]});const C=!!s.published_at,A=T=>T.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),R=(T,z)=>{if(!T)return!1;const I=T.trim(),B=A(I).replace(/\s+/g,"-"),$=z?A(z):"";return!!($&&(B===$||B===$.replace(/\//g,"-"))||!I.includes(" ")&&(I.includes("-")||I.includes("/"))||(I.match(/-/g)||[]).length>=2&&I.split(" ").length<=2)},O=s.summary&&!R(s.summary,s.slug)?s.summary:null;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>t("/mi-formacion"),children:[i.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Mi Formacin"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:s.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[j&&i.jsx(Ee,{variant:C?"default":"secondary",children:C?"Publicado":"Borrador"}),i.jsx("span",{className:"text-muted-foreground",children:""}),i.jsxs("span",{className:"text-muted-foreground",children:[o.length," cursos"]})]})]})]}),j&&i.jsx("div",{className:"flex gap-2",children:d?i.jsxs(i.Fragment,{children:[i.jsxs(V,{onClick:_,disabled:p,children:[p?i.jsx(Be,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(mj,{className:"h-4 w-4 mr-2"}),"Guardar"]}),i.jsxs(V,{variant:"outline",onClick:()=>h(!1),disabled:p,children:[i.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]}):i.jsxs(i.Fragment,{children:[i.jsxs(V,{onClick:()=>h(!0),children:[i.jsx(fj,{className:"h-4 w-4 mr-2"}),"Editar"]}),i.jsx(V,{variant:C?"destructive":"default",onClick:N,children:C?"Despublicar":"Publicar"})]})})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Detalles del Programa"})}),i.jsx(Q,{className:"space-y-4",children:d?i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(X,{children:"Ttulo"}),i.jsx(ve,{value:v.title,onChange:T=>y({...v,title:T.target.value})})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Resumen"}),i.jsx(At,{value:v.summary,onChange:T=>y({...v,summary:T.target.value}),rows:4})]}),i.jsx(Ks,{label:"Imagen Poster (2x3)",value:v.poster_2x3_url,onChange:T=>y({...v,poster_2x3_url:T}),aspectRatio:"2/3"}),i.jsx(Ks,{label:"Imagen Wide (11x6)",value:v.wide_11x6_url,onChange:T=>y({...v,wide_11x6_url:T}),aspectRatio:"11/6"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"aspect-[2/3] relative overflow-hidden rounded-lg",children:s.poster_2x3_url||s.wide_11x6_url?i.jsx("img",{src:s.poster_2x3_url||s.wide_11x6_url,alt:s.title,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/20 to-accent/10 flex items-center justify-center",children:i.jsx(qe,{className:"h-16 w-16 text-accent"})})}),O&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Resumen"}),i.jsx("p",{className:"text-muted-foreground",children:O})]})]})})]})}),i.jsx("div",{className:"lg:col-span-2",children:i.jsxs(K,{children:[i.jsxs(ye,{className:"flex flex-row items-center justify-between",children:[i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-5 w-5 text-accent"}),"Cursos (",o.length,")"]}),j&&i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(V,{size:"sm",onClick:()=>g(!0),children:[i.jsx(qn,{className:"h-4 w-4 mr-2"}),"Agregar Cursos"]}),i.jsxs(V,{size:"sm",variant:"outline",onClick:()=>x(!0),children:[i.jsx(rn,{className:"h-4 w-4 mr-2"}),"Inscribir Usuarios"]})]})]}),i.jsx(Q,{children:o.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(qe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Sin cursos"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Este programa an no tiene cursos asignados"}),j&&i.jsx(V,{onClick:()=>t("/cursos"),children:"Crear Primer Curso"})]}):i.jsx("div",{className:"space-y-3",children:o.map((T,z)=>i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/10 cursor-pointer group",onClick:()=>t(`/ver-curso/${T.slug}`),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground font-mono w-8",children:String(z+1).padStart(2,"0")}),i.jsx("div",{children:i.jsx("h4",{className:"font-medium group-hover:text-accent transition-colors",children:T.title})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[j&&i.jsxs(i.Fragment,{children:[i.jsx(Ee,{variant:T.published_at?"default":"secondary",children:T.published_at?"Publicado":"Borrador"}),i.jsx(V,{size:"sm",variant:"outline",onClick:I=>{I.stopPropagation(),t(`/curso/${T.id}/edit`)},children:"Editar"})]}),i.jsx(V,{size:"sm",onClick:I=>{I.stopPropagation(),t(`/ver-curso/${T.slug}?from=programa&programa=${s==null?void 0:s.slug}`)},className:"btn-modern",children:"Empezar"})]})]},T.id))})})]})})]}),s&&i.jsxs(i.Fragment,{children:[i.jsx(yN,{open:b,onOpenChange:g,programId:s.id,onSuccess:S}),i.jsx(x3,{open:w,onOpenChange:x,programId:s.id,programTitle:s.title,onSuccess:()=>{}})]})]})}function y3(){const{profile:e,user:t}=it(),n=Gn(),{toast:r}=Ve(),[s,a]=m.useState([]),[o,l]=m.useState(!0),[c,u]=m.useState(!1),d=((e==null?void 0:e.role)||"").toString(),h=["formador","teacher","profesor","admin"].includes(d);m.useEffect(()=>{p()},[e==null?void 0:e.role]);const p=async()=>{l(!0);try{if(h){const{data:R,error:O}=await M.from("courses").select(`
            id,
            title,
            summary,
            slug,
            sort_order,
            poster_2x3_url,
            wide_11x6_url,
            published_at,
            program_courses (
              program_id,
              programs (title)
            )
          `).order("sort_order");if(O)throw O;const T={};(R||[]).forEach(I=>{var $,L,D;const B=((D=(L=($=I.program_courses)==null?void 0:$[0])==null?void 0:L.programs)==null?void 0:D.title)||"Sin programa";T[B]||(T[B]=[]),T[B].push(I)});const z=Object.entries(T).map(([I,B])=>({programTitle:I,courses:B})).sort((I,B)=>I.programTitle.localeCompare(B.programTitle));a(z);return}if(!t){a([]);return}const{data:w,error:x}=await M.from("course_enrollments").select("course_id").eq("user_id",t.id).eq("status","active");if(x)throw x;const v=(w||[]).map(R=>R.course_id),{data:y,error:j}=await M.from("courses").select(`
          id,
          title,
          summary,
          slug,
          sort_order,
          poster_2x3_url,
          wide_11x6_url,
          published_at,
          program_courses (program_id)
        `).in("id",v.length>0?v:["00000000-0000-0000-0000-000000000000"]).not("published_at","is",null).order("sort_order");if(j)throw j;const S=(y||[]).filter(R=>!R.program_courses||R.program_courses.length===0),{data:_}=await M.from("enrollments").select("program_id").eq("user_id",t.id).eq("status","active"),N=(_||[]).map(R=>R.program_id);let C=[];if(N.length>0){const{data:R}=await M.from("program_courses").select("program_id, courses (id, title, summary, slug, poster_2x3_url, wide_11x6_url, published_at)").in("program_id",N).order("program_id");C=R||[]}const A=[];if(C.length>0){const R={};for(const O of C){const T=O.courses;T&&(R[O.program_id]||(R[O.program_id]=[]),R[O.program_id].push(T))}for(const O of Object.keys(R))A.push({programTitle:"Cursos del Programa",courses:R[O]})}S.length>0&&A.push({programTitle:"Mis cursos individuales",courses:S}),a(A)}catch{r({title:"Error",description:"No se pudieron cargar los cursos",variant:"destructive"})}finally{l(!1)}},f=w=>{n(`/curso/${w}`)},b=()=>{u(!0)},g=async(w,x)=>{if(confirm(`Ests seguro de que quieres eliminar el curso "${x}"?`))try{const{error:v}=await M.from("courses").delete().eq("id",w);if(v)throw v;r({title:"Curso eliminado",description:`El curso "${x}" ha sido eliminado exitosamente`}),p()}catch{r({title:"Error",description:"No se pudo eliminar el curso",variant:"destructive"})}};return o?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Cursos"}),i.jsx("p",{className:"text-muted-foreground",children:h?"Gestiona los cursos de los programas":"Explora los cursos disponibles"})]}),h&&i.jsxs(V,{className:"gap-2",onClick:b,children:[i.jsx(qn,{className:"h-4 w-4"}),"Nuevo Curso"]})]}),i.jsxs("div",{className:"space-y-6",children:[s.map(w=>i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-5 w-5 text-accent"}),w.programTitle]})}),i.jsx(Q,{children:i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:w.courses.map(x=>{const v=!!x.published_at;return i.jsxs(K,{children:[i.jsx("div",{className:"aspect-[11/6] relative overflow-hidden rounded-t-lg",children:x.poster_2x3_url||x.wide_11x6_url?i.jsx("img",{src:x.poster_2x3_url||x.wide_11x6_url,alt:x.title,className:"w-full h-full object-cover"}):i.jsx("div",{className:`w-full h-full bg-gradient-to-r ${v?"from-accent/20 to-accent/10":"from-muted/20 to-muted/10"} flex items-center justify-center`,children:i.jsx(Ir,{className:`h-8 w-8 ${v?"text-accent":"text-muted"}`})})}),i.jsxs(Q,{className:"p-4",children:[i.jsx("h4",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:x.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:x.summary||"Curso de geometra sagrada"}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx(Ee,{variant:v?"default":"secondary",children:v?"Publicado":"Borrador"}),h&&i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(rn,{className:"h-3 w-3"}),i.jsx("span",{children:"0 estudiantes"})]})]}),i.jsx("div",{className:"flex gap-2",children:h?i.jsxs(i.Fragment,{children:[i.jsx(V,{size:"sm",variant:"outline",onClick:()=>n(`/curso/${x.id}/edit`),children:"Editar"}),i.jsx(V,{size:"sm",variant:"destructive",onClick:()=>g(x.id,x.title),children:"Eliminar"}),i.jsx(V,{size:"sm",onClick:()=>f(x.slug),children:"Ver"})]}):i.jsx(V,{size:"sm",className:"w-full",onClick:()=>f(x.slug),disabled:!v,children:v?"Empezar":"No Disponible"})})]})]},x.id)})})})]},w.programTitle)),h&&i.jsx(K,{className:"border-dashed",children:i.jsxs(Q,{className:"p-6 flex flex-col items-center justify-center text-center",children:[i.jsx(qn,{className:"h-12 w-12 text-muted-foreground mb-4"}),i.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Crear Curso"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Agrega un nuevo curso a un programa existente"}),i.jsx(V,{onClick:b,children:"Crear Curso"})]})})]}),i.jsx(iN,{open:c,onOpenChange:u,onSuccess:p})]})}function w3(){const{courseId:e}=Rl(),t=Gn(),{profile:n}=it(),{toast:r}=Ve(),[s,a]=m.useState(null),[o,l]=m.useState([]),[c,u]=m.useState(!0),[d,h]=m.useState(!1),[p,f]=m.useState(!1),[b,g]=m.useState({title:"",summary:"",slug:"",poster_2x3_url:"",wide_11x6_url:"",program_id:""}),w=(n==null?void 0:n.role)==="formador"||(n==null?void 0:n.role)==="admin";m.useEffect(()=>{e&&(v(),x())},[e]);const x=async()=>{const{data:C}=await M.from("programs").select("id, title").order("title");l(C||[])},v=async()=>{var C,A;u(!0);try{window.location.pathname.includes("/edit")&&h(!0);const{data:O,error:T}=await M.from("courses").select(`
          *,
          program_courses!inner (program_id)
        `).eq("id",e).single();if(T)throw T;const z={...O,program_id:((A=(C=O.program_courses)==null?void 0:C[0])==null?void 0:A.program_id)||""};a(z),g({title:z.title,summary:z.summary||"",slug:z.slug,poster_2x3_url:z.poster_2x3_url||"",wide_11x6_url:z.wide_11x6_url||"",program_id:z.program_id})}catch{r({title:"Error",description:"No se pudo cargar el curso",variant:"destructive"}),t("/cursos")}finally{u(!1)}},y=C=>C.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),j=async()=>{if(s){f(!0);try{const{error:C}=await M.from("courses").update({title:b.title,summary:b.summary||null,slug:b.slug,poster_2x3_url:b.poster_2x3_url||null,wide_11x6_url:b.wide_11x6_url||null}).eq("id",s.id);if(C)throw C;if(b.program_id!==s.program_id&&(s.program_id&&await M.from("program_courses").delete().eq("course_id",s.id).eq("program_id",s.program_id),b.program_id)){const{error:A}=await M.from("program_courses").insert({program_id:b.program_id,course_id:s.id,sort_order:0});if(A)throw A}r({title:"Curso actualizado",description:"Los cambios han sido guardados exitosamente"}),a({...s,title:b.title,summary:b.summary,slug:b.slug,poster_2x3_url:b.poster_2x3_url,wide_11x6_url:b.wide_11x6_url,program_id:b.program_id}),h(!1)}catch{r({title:"Error",description:"No se pudo actualizar el curso",variant:"destructive"})}finally{f(!1)}}},S=async()=>{if(!s)return;const C=s.published_at?null:new Date().toISOString();try{const{error:A}=await M.from("courses").update({published_at:C}).eq("id",s.id);if(A)throw A;a({...s,published_at:C}),r({title:C?"Curso publicado":"Curso despublicado",description:C?"El curso ya est visible para los estudiantes":"El curso ya no es visible para los estudiantes"})}catch{r({title:"Error",description:"No se pudo cambiar el estado del curso",variant:"destructive"})}};if(c)return i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!s)return i.jsxs("div",{className:"text-center py-8",children:[i.jsx("p",{className:"text-destructive",children:"Curso no encontrado"}),i.jsx(V,{onClick:()=>t("/cursos"),className:"mt-4",children:"Volver a Cursos"})]});const _=!!s.published_at,N=o.find(C=>C.id===s.program_id);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>t("/cursos"),children:[i.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Cursos"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:s.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Ee,{variant:_?"default":"secondary",children:_?"Publicado":"Borrador"}),N&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-muted-foreground",children:""}),i.jsx("span",{className:"text-muted-foreground",children:N.title})]})]})]})]}),w&&i.jsx("div",{className:"flex gap-2",children:d?i.jsxs(i.Fragment,{children:[i.jsxs(V,{onClick:j,disabled:p,children:[p?i.jsx(Be,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(mj,{className:"h-4 w-4 mr-2"}),"Guardar"]}),i.jsxs(V,{variant:"outline",onClick:()=>h(!1),disabled:p,children:[i.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]}):i.jsxs(i.Fragment,{children:[i.jsxs(V,{onClick:()=>h(!0),children:[i.jsx(fj,{className:"h-4 w-4 mr-2"}),"Editar"]}),i.jsx(V,{variant:_?"destructive":"default",onClick:S,children:_?"Despublicar":"Publicar"})]})})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Detalles del Curso"})}),i.jsx(Q,{className:"space-y-4",children:d?i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(X,{children:"Ttulo"}),i.jsx(ve,{value:b.title,onChange:C=>{const A=C.target.value;g({...b,title:A,slug:y(A)})}})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Slug (URL)"}),i.jsx(ve,{value:b.slug,onChange:C=>g({...b,slug:C.target.value})})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Programa"}),i.jsxs(ot,{value:b.program_id,onValueChange:C=>g({...b,program_id:C}),children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Seleccionar programa"})}),i.jsxs(rt,{children:[i.jsx(he,{value:"",children:"Sin programa"}),o.map(C=>i.jsx(he,{value:C.id,children:C.title},C.id))]})]})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Resumen"}),i.jsx(At,{value:b.summary,onChange:C=>g({...b,summary:C.target.value}),rows:4})]}),i.jsx(Ks,{label:"Imagen Poster (2x3)",value:b.poster_2x3_url,onChange:C=>g({...b,poster_2x3_url:C}),aspectRatio:"2/3"}),i.jsx(Ks,{label:"Imagen Wide (11x6)",value:b.wide_11x6_url,onChange:C=>g({...b,wide_11x6_url:C}),aspectRatio:"11/6"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Informacin General"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Programa:"}),i.jsx("span",{children:(N==null?void 0:N.title)||"Sin asignar"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"URL:"}),i.jsxs("span",{className:"font-mono text-sm",children:["/curso/",s.slug]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Estado:"}),i.jsx(Ee,{variant:_?"default":"secondary",children:_?"Publicado":"Borrador"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Resumen"}),i.jsx("p",{className:"text-muted-foreground",children:s.summary||"Sin descripcin disponible"})]})]})})]})}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Imagen del Curso"})}),i.jsx(Q,{children:i.jsx("div",{className:"aspect-[11/6] relative overflow-hidden rounded-lg",children:s.poster_2x3_url||s.wide_11x6_url?i.jsx("img",{src:s.poster_2x3_url||s.wide_11x6_url,alt:s.title,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/20 to-accent/10 flex items-center justify-center",children:i.jsx(Ir,{className:"h-16 w-16 text-accent"})})})})]}),w&&i.jsxs(K,{className:"mt-4",children:[i.jsx(ye,{children:i.jsx(we,{children:"Acciones Rpidas"})}),i.jsxs(Q,{className:"space-y-2",children:[i.jsxs(V,{className:"w-full",variant:"outline",children:[i.jsx(qe,{className:"h-4 w-4 mr-2"}),"Ver Lecciones"]}),i.jsx(V,{className:"w-full",variant:"outline",children:"Gestionar Contenido"}),i.jsx(V,{className:"w-full",variant:"outline",children:"Ver Estudiantes"})]})]})]})]})]})}function b3({videoUrl:e,title:t}){const[n,r]=m.useState(!0),a=(o=>{var l,c;return o.includes("youtube.com/watch?v=")?`https://www.youtube.com/embed/${(l=o.split("v=")[1])==null?void 0:l.split("&")[0]}?autoplay=0&rel=0&modestbranding=1`:o.includes("youtu.be/")?`https://www.youtube.com/embed/${(c=o.split("youtu.be/")[1])==null?void 0:c.split("?")[0]}?autoplay=0&rel=0&modestbranding=1`:o})(e);return i.jsx(K,{className:"overflow-hidden",children:i.jsxs("div",{className:"relative aspect-video bg-black",children:[n&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cargando video..."})]})}),i.jsx("iframe",{src:a,title:t,className:"w-full h-full",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",onLoad:()=>r(!1)})]})})}function j3(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const _3=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,S3=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,N3={};function gy(e,t){return(N3.jsx?S3:_3).test(e)}const k3=/[ \t\n\f\r]/g;function C3(e){return typeof e=="object"?e.type==="text"?xy(e.value):!1:xy(e)}function xy(e){return e.replace(k3,"")===""}class Ml{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Ml.prototype.normal={};Ml.prototype.property={};Ml.prototype.space=void 0;function MN(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new Ml(n,r,t)}function Em(e){return e.toLowerCase()}class wn{constructor(t,n){this.attribute=n,this.property=t}}wn.prototype.attribute="";wn.prototype.booleanish=!1;wn.prototype.boolean=!1;wn.prototype.commaOrSpaceSeparated=!1;wn.prototype.commaSeparated=!1;wn.prototype.defined=!1;wn.prototype.mustUseProperty=!1;wn.prototype.number=!1;wn.prototype.overloadedBoolean=!1;wn.prototype.property="";wn.prototype.spaceSeparated=!1;wn.prototype.space=void 0;let E3=0;const Te=$i(),jt=$i(),Pm=$i(),te=$i(),Xe=$i(),ya=$i(),Sn=$i();function $i(){return 2**++E3}const Tm=Object.freeze(Object.defineProperty({__proto__:null,boolean:Te,booleanish:jt,commaOrSpaceSeparated:Sn,commaSeparated:ya,number:te,overloadedBoolean:Pm,spaceSeparated:Xe},Symbol.toStringTag,{value:"Module"})),Ih=Object.keys(Tm);class _g extends wn{constructor(t,n,r,s){let a=-1;if(super(t,n),vy(this,"space",s),typeof r=="number")for(;++a<Ih.length;){const o=Ih[a];vy(this,Ih[a],(r&Tm[o])===Tm[o])}}}_g.prototype.defined=!0;function vy(e,t,n){n&&(e[t]=n)}function ro(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const a=new _g(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[Em(r)]=r,n[Em(a.attribute)]=r}return new Ml(t,n,e.space)}const DN=ro({properties:{ariaActiveDescendant:null,ariaAtomic:jt,ariaAutoComplete:null,ariaBusy:jt,ariaChecked:jt,ariaColCount:te,ariaColIndex:te,ariaColSpan:te,ariaControls:Xe,ariaCurrent:null,ariaDescribedBy:Xe,ariaDetails:null,ariaDisabled:jt,ariaDropEffect:Xe,ariaErrorMessage:null,ariaExpanded:jt,ariaFlowTo:Xe,ariaGrabbed:jt,ariaHasPopup:null,ariaHidden:jt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Xe,ariaLevel:te,ariaLive:null,ariaModal:jt,ariaMultiLine:jt,ariaMultiSelectable:jt,ariaOrientation:null,ariaOwns:Xe,ariaPlaceholder:null,ariaPosInSet:te,ariaPressed:jt,ariaReadOnly:jt,ariaRelevant:null,ariaRequired:jt,ariaRoleDescription:Xe,ariaRowCount:te,ariaRowIndex:te,ariaRowSpan:te,ariaSelected:jt,ariaSetSize:te,ariaSort:null,ariaValueMax:te,ariaValueMin:te,ariaValueNow:te,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function FN(e,t){return t in e?e[t]:t}function $N(e,t){return FN(e,t.toLowerCase())}const P3=ro({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ya,acceptCharset:Xe,accessKey:Xe,action:null,allow:null,allowFullScreen:Te,allowPaymentRequest:Te,allowUserMedia:Te,alt:null,as:null,async:Te,autoCapitalize:null,autoComplete:Xe,autoFocus:Te,autoPlay:Te,blocking:Xe,capture:null,charSet:null,checked:Te,cite:null,className:Xe,cols:te,colSpan:null,content:null,contentEditable:jt,controls:Te,controlsList:Xe,coords:te|ya,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Te,defer:Te,dir:null,dirName:null,disabled:Te,download:Pm,draggable:jt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Te,formTarget:null,headers:Xe,height:te,hidden:Pm,high:te,href:null,hrefLang:null,htmlFor:Xe,httpEquiv:Xe,id:null,imageSizes:null,imageSrcSet:null,inert:Te,inputMode:null,integrity:null,is:null,isMap:Te,itemId:null,itemProp:Xe,itemRef:Xe,itemScope:Te,itemType:Xe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Te,low:te,manifest:null,max:null,maxLength:te,media:null,method:null,min:null,minLength:te,multiple:Te,muted:Te,name:null,nonce:null,noModule:Te,noValidate:Te,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Te,optimum:te,pattern:null,ping:Xe,placeholder:null,playsInline:Te,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Te,referrerPolicy:null,rel:Xe,required:Te,reversed:Te,rows:te,rowSpan:te,sandbox:Xe,scope:null,scoped:Te,seamless:Te,selected:Te,shadowRootClonable:Te,shadowRootDelegatesFocus:Te,shadowRootMode:null,shape:null,size:te,sizes:null,slot:null,span:te,spellCheck:jt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:te,step:null,style:null,tabIndex:te,target:null,title:null,translate:null,type:null,typeMustMatch:Te,useMap:null,value:jt,width:te,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Xe,axis:null,background:null,bgColor:null,border:te,borderColor:null,bottomMargin:te,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Te,declare:Te,event:null,face:null,frame:null,frameBorder:null,hSpace:te,leftMargin:te,link:null,longDesc:null,lowSrc:null,marginHeight:te,marginWidth:te,noResize:Te,noHref:Te,noShade:Te,noWrap:Te,object:null,profile:null,prompt:null,rev:null,rightMargin:te,rules:null,scheme:null,scrolling:jt,standby:null,summary:null,text:null,topMargin:te,valueType:null,version:null,vAlign:null,vLink:null,vSpace:te,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Te,disableRemotePlayback:Te,prefix:null,property:null,results:te,security:null,unselectable:null},space:"html",transform:$N}),T3=ro({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Sn,accentHeight:te,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:te,amplitude:te,arabicForm:null,ascent:te,attributeName:null,attributeType:null,azimuth:te,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:te,by:null,calcMode:null,capHeight:te,className:Xe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:te,diffuseConstant:te,direction:null,display:null,dur:null,divisor:te,dominantBaseline:null,download:Te,dx:null,dy:null,edgeMode:null,editable:null,elevation:te,enableBackground:null,end:null,event:null,exponent:te,externalResourcesRequired:null,fill:null,fillOpacity:te,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ya,g2:ya,glyphName:ya,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:te,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:te,horizOriginX:te,horizOriginY:te,id:null,ideographic:te,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:te,k:te,k1:te,k2:te,k3:te,k4:te,kernelMatrix:Sn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:te,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:te,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:te,overlineThickness:te,paintOrder:null,panose1:null,path:null,pathLength:te,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Xe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:te,pointsAtY:te,pointsAtZ:te,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Sn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Sn,rev:Sn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Sn,requiredFeatures:Sn,requiredFonts:Sn,requiredFormats:Sn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:te,specularExponent:te,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:te,strikethroughThickness:te,string:null,stroke:null,strokeDashArray:Sn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:te,strokeOpacity:te,strokeWidth:null,style:null,surfaceScale:te,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Sn,tabIndex:te,tableValues:null,target:null,targetX:te,targetY:te,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Sn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:te,underlineThickness:te,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:te,values:null,vAlphabetic:te,vMathematical:te,vectorEffect:null,vHanging:te,vIdeographic:te,version:null,vertAdvY:te,vertOriginX:te,vertOriginY:te,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:te,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:FN}),zN=ro({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),UN=ro({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:$N}),BN=ro({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),R3={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},A3=/[A-Z]/g,yy=/-[a-z]/g,I3=/^data[-\w.:]+$/i;function O3(e,t){const n=Em(t);let r=t,s=wn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&I3.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(yy,M3);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!yy.test(a)){let o=a.replace(A3,L3);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}s=_g}return new s(r,t)}function L3(e){return"-"+e.toLowerCase()}function M3(e){return e.charAt(1).toUpperCase()}const D3=MN([DN,P3,zN,UN,BN],"html"),Sg=MN([DN,T3,zN,UN,BN],"svg");function F3(e){return e.join(" ").trim()}var Ng={},wy=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,$3=/\n/g,z3=/^\s*/,U3=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,B3=/^:\s*/,V3=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,q3=/^[;\s]*/,W3=/^\s+|\s+$/g,H3=`
`,by="/",jy="*",di="",G3="comment",K3="declaration",Q3=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(b){var g=b.match($3);g&&(n+=g.length);var w=b.lastIndexOf(H3);r=~w?b.length-w:r+b.length}function a(){var b={line:n,column:r};return function(g){return g.position=new o(b),u(),g}}function o(b){this.start=b,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(b){var g=new Error(t.source+":"+n+":"+r+": "+b);if(g.reason=b,g.filename=t.source,g.line=n,g.column=r,g.source=e,!t.silent)throw g}function c(b){var g=b.exec(e);if(g){var w=g[0];return s(w),e=e.slice(w.length),g}}function u(){c(z3)}function d(b){var g;for(b=b||[];g=h();)g!==!1&&b.push(g);return b}function h(){var b=a();if(!(by!=e.charAt(0)||jy!=e.charAt(1))){for(var g=2;di!=e.charAt(g)&&(jy!=e.charAt(g)||by!=e.charAt(g+1));)++g;if(g+=2,di===e.charAt(g-1))return l("End of comment missing");var w=e.slice(2,g-2);return r+=2,s(w),e=e.slice(g),r+=2,b({type:G3,comment:w})}}function p(){var b=a(),g=c(U3);if(g){if(h(),!c(B3))return l("property missing ':'");var w=c(V3),x=b({type:K3,property:_y(g[0].replace(wy,di)),value:w?_y(w[0].replace(wy,di)):di});return c(q3),x}}function f(){var b=[];d(b);for(var g;g=p();)g!==!1&&(b.push(g),d(b));return b}return u(),f()};function _y(e){return e?e.replace(W3,di):di}var Y3=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ng,"__esModule",{value:!0});Ng.default=J3;var X3=Y3(Q3);function J3(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,X3.default)(e),s=typeof t=="function";return r.forEach(function(a){if(a.type==="declaration"){var o=a.property,l=a.value;s?t(o,l,a):l&&(n=n||{},n[o]=l)}}),n}var Pd={};Object.defineProperty(Pd,"__esModule",{value:!0});Pd.camelCase=void 0;var Z3=/^--[a-zA-Z0-9_-]+$/,eF=/-([a-z])/g,tF=/^[^-]+$/,nF=/^-(webkit|moz|ms|o|khtml)-/,rF=/^-(ms)-/,sF=function(e){return!e||tF.test(e)||Z3.test(e)},iF=function(e,t){return t.toUpperCase()},Sy=function(e,t){return"".concat(t,"-")},aF=function(e,t){return t===void 0&&(t={}),sF(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(rF,Sy):e=e.replace(nF,Sy),e.replace(eF,iF))};Pd.camelCase=aF;var oF=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},lF=oF(Ng),cF=Pd;function Rm(e,t){var n={};return!e||typeof e!="string"||(0,lF.default)(e,function(r,s){r&&s&&(n[(0,cF.camelCase)(r,t)]=s)}),n}Rm.default=Rm;var uF=Rm;const dF=Pu(uF),VN=qN("end"),kg=qN("start");function qN(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function hF(e){const t=kg(e),n=VN(e);if(t&&n)return{start:t,end:n}}function qo(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Ny(e.position):"start"in e||"end"in e?Ny(e):"line"in e||"column"in e?Am(e):""}function Am(e){return ky(e&&e.line)+":"+ky(e&&e.column)}function Ny(e){return Am(e&&e.start)+"-"+Am(e&&e.end)}function ky(e){return e&&typeof e=="number"?e:1}class Gt extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?s=t:!a.cause&&t&&(o=!0,s=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?a.ruleId=r:(a.source=r.slice(0,c),a.ruleId=r.slice(c+1))}if(!a.place&&a.ancestors&&a.ancestors){const c=a.ancestors[a.ancestors.length-1];c&&(a.place=c.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=qo(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Gt.prototype.file="";Gt.prototype.name="";Gt.prototype.reason="";Gt.prototype.message="";Gt.prototype.stack="";Gt.prototype.column=void 0;Gt.prototype.line=void 0;Gt.prototype.ancestors=void 0;Gt.prototype.cause=void 0;Gt.prototype.fatal=void 0;Gt.prototype.place=void 0;Gt.prototype.ruleId=void 0;Gt.prototype.source=void 0;const Cg={}.hasOwnProperty,fF=new Map,mF=/[A-Z]/g,pF=new Set(["table","tbody","thead","tfoot","tr"]),gF=new Set(["td","th"]),WN="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function xF(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=NF(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=SF(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Sg:D3,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=HN(s,e,void 0);return a&&typeof a!="string"?a:s.create(e,s.Fragment,{children:a||void 0},void 0)}function HN(e,t,n){if(t.type==="element")return vF(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return yF(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return bF(e,t,n);if(t.type==="mdxjsEsm")return wF(e,t);if(t.type==="root")return jF(e,t,n);if(t.type==="text")return _F(e,t)}function vF(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Sg,e.schema=s),e.ancestors.push(t);const a=KN(e,t.tagName,!1),o=kF(e,t);let l=Pg(e,t);return pF.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!C3(c):!0})),GN(e,o,a,t),Eg(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function yF(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}vl(e,t.position)}function wF(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);vl(e,t.position)}function bF(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Sg,e.schema=s),e.ancestors.push(t);const a=t.name===null?e.Fragment:KN(e,t.name,!0),o=CF(e,t),l=Pg(e,t);return GN(e,o,a,t),Eg(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function jF(e,t,n){const r={};return Eg(r,Pg(e,t)),e.create(t,e.Fragment,r,n)}function _F(e,t){return t.value}function GN(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Eg(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function SF(e,t,n){return r;function r(s,a,o,l){const u=Array.isArray(o.children)?n:t;return l?u(a,o,l):u(a,o)}}function NF(e,t){return n;function n(r,s,a,o){const l=Array.isArray(a.children),c=kg(r);return t(s,a,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function kF(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&Cg.call(t.properties,s)){const a=EF(e,s,t.properties[s]);if(a){const[o,l]=a;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&gF.has(t.tagName)?r=l:n[o]=l}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function CF(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else vl(e,t.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,a=e.evaluater.evaluateExpression(l.expression)}else vl(e,t.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function Pg(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:fF;for(;++r<t.children.length;){const a=t.children[r];let o;if(e.passKeys){const c=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(c){const u=s.get(c)||0;o=c+"-"+u,s.set(c,u+1)}}const l=HN(e,a,o);l!==void 0&&n.push(l)}return n}function EF(e,t,n){const r=O3(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?j3(n):F3(n)),r.property==="style"){let s=typeof n=="object"?n:PF(e,String(n));return e.stylePropertyNameCase==="css"&&(s=TF(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?R3[r.property]||r.property:r.attribute,n]}}function PF(e,t){try{return dF(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new Gt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=WN+"#cannot-parse-style-attribute",s}}function KN(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let a=-1,o;for(;++a<s.length;){const l=gy(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}r=o}else r=gy(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return Cg.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);vl(e)}function vl(e,t){const n=new Gt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=WN+"#cannot-handle-mdx-estrees-without-createevaluater",n}function TF(e){const t={};let n;for(n in e)Cg.call(e,n)&&(t[RF(n)]=e[n]);return t}function RF(e){let t=e.replace(mF,AF);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function AF(e){return"-"+e.toLowerCase()}const Oh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},IF={};function OF(e,t){const n=IF,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return QN(e,r,s)}function QN(e,t,n){if(LF(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Cy(e.children,t,n)}return Array.isArray(e)?Cy(e,t,n):""}function Cy(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=QN(e[s],t,n);return r.join("")}function LF(e){return!!(e&&typeof e=="object")}const Ey=document.createElement("i");function Tg(e){const t="&"+e+";";Ey.innerHTML=t;const n=Ey.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Lr(e,t,n,r){const s=e.length;let a=0,o;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function zn(e,t){return e.length>0?(Lr(e,e.length,0,t),e):t}const Py={}.hasOwnProperty;function MF(e){const t={};let n=-1;for(;++n<e.length;)DF(t,e[n]);return t}function DF(e,t){let n;for(n in t){const s=(Py.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){Py.call(s,o)||(s[o]=[]);const l=a[o];FF(s[o],Array.isArray(l)?l:l?[l]:[])}}}function FF(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Lr(e,0,0,r)}function YN(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function wa(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Cr=ri(/[A-Za-z]/),En=ri(/[\dA-Za-z]/),$F=ri(/[#-'*+\--9=?A-Z^-~]/);function Im(e){return e!==null&&(e<32||e===127)}const Om=ri(/\d/),zF=ri(/[\dA-Fa-f]/),UF=ri(/[!-/:-@[-`{-~]/);function _e(e){return e!==null&&e<-2}function vn(e){return e!==null&&(e<0||e===32)}function ze(e){return e===-2||e===-1||e===32}const BF=ri(new RegExp("\\p{P}|\\p{S}","u")),VF=ri(/\s/);function ri(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function so(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const a=e.charCodeAt(n);let o="";if(a===37&&En(e.charCodeAt(n+1))&&En(e.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const l=e.charCodeAt(n+1);a<56320&&l>56319&&l<57344?(o=String.fromCharCode(a,l),s=1):o=""}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+s+1,o=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function Ze(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(c){return ze(c)?(e.enter(n),l(c)):t(c)}function l(c){return ze(c)&&a++<s?(e.consume(c),l):(e.exit(n),t(c))}}const qF={tokenize:WF};function WF(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Ze(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),a(l)}function a(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return _e(l)?(e.consume(l),e.exit("chunkText"),a):(e.consume(l),o)}}const HF={tokenize:GF},Ty={tokenize:KF};function GF(e){const t=this,n=[];let r=0,s,a,o;return l;function l(y){if(r<n.length){const j=n[r];return t.containerState=j[1],e.attempt(j[0].continuation,c,u)(y)}return u(y)}function c(y){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&v();const j=t.events.length;let S=j,_;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){_=t.events[S][1].end;break}x(r);let N=j;for(;N<t.events.length;)t.events[N][1].end={..._},N++;return Lr(t.events,S+1,0,t.events.slice(j)),t.events.length=N,u(y)}return l(y)}function u(y){if(r===n.length){if(!s)return p(y);if(s.currentConstruct&&s.currentConstruct.concrete)return b(y);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Ty,d,h)(y)}function d(y){return s&&v(),x(r),p(y)}function h(y){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,b(y)}function p(y){return t.containerState={},e.attempt(Ty,f,b)(y)}function f(y){return r++,n.push([t.currentConstruct,t.containerState]),p(y)}function b(y){if(y===null){s&&v(),x(0),e.consume(y);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),g(y)}function g(y){if(y===null){w(e.exit("chunkFlow"),!0),x(0),e.consume(y);return}return _e(y)?(e.consume(y),w(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(y),g)}function w(y,j){const S=t.sliceStream(y);if(j&&S.push(null),y.previous=a,a&&(a.next=y),a=y,s.defineSkip(y.start),s.write(S),t.parser.lazy[y.start.line]){let _=s.events.length;for(;_--;)if(s.events[_][1].start.offset<o&&(!s.events[_][1].end||s.events[_][1].end.offset>o))return;const N=t.events.length;let C=N,A,R;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){R=t.events[C][1].end;break}A=!0}for(x(r),_=N;_<t.events.length;)t.events[_][1].end={...R},_++;Lr(t.events,C+1,0,t.events.slice(N)),t.events.length=_}}function x(y){let j=n.length;for(;j-- >y;){const S=n[j];t.containerState=S[1],S[0].exit.call(t,e)}n.length=y}function v(){s.write([null]),a=void 0,s=void 0,t.containerState._closeFlow=void 0}}function KF(e,t,n){return Ze(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ry(e){if(e===null||vn(e)||VF(e))return 1;if(BF(e))return 2}function Rg(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const a=e[s].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const Lm={name:"attention",resolveAll:QF,tokenize:YF};function QF(e,t){let n=-1,r,s,a,o,l,c,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},p={...e[n][1].start};Ay(h,-c),Ay(p,c),o={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:p},a={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=zn(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=zn(u,[["enter",s,t],["enter",o,t],["exit",o,t],["enter",a,t]]),u=zn(u,Rg(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=zn(u,[["exit",a,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=zn(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,Lr(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function YF(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Ry(r);let a;return o;function o(c){return a=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===a)return e.consume(c),l;const u=e.exit("attentionSequence"),d=Ry(c),h=!d||d===2&&s||n.includes(c),p=!s||s===2&&d||n.includes(r);return u._open=!!(a===42?h:h&&(s||!p)),u._close=!!(a===42?p:p&&(d||!h)),t(c)}}function Ay(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const XF={name:"autolink",tokenize:JF};function JF(e,t,n){let r=0;return s;function s(f){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(f){return Cr(f)?(e.consume(f),o):f===64?n(f):u(f)}function o(f){return f===43||f===45||f===46||En(f)?(r=1,l(f)):u(f)}function l(f){return f===58?(e.consume(f),r=0,c):(f===43||f===45||f===46||En(f))&&r++<32?(e.consume(f),l):(r=0,u(f))}function c(f){return f===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):f===null||f===32||f===60||Im(f)?n(f):(e.consume(f),c)}function u(f){return f===64?(e.consume(f),d):$F(f)?(e.consume(f),u):n(f)}function d(f){return En(f)?h(f):n(f)}function h(f){return f===46?(e.consume(f),r=0,d):f===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(f),e.exit("autolinkMarker"),e.exit("autolink"),t):p(f)}function p(f){if((f===45||En(f))&&r++<63){const b=f===45?p:h;return e.consume(f),b}return n(f)}}const Td={partial:!0,tokenize:ZF};function ZF(e,t,n){return r;function r(a){return ze(a)?Ze(e,s,"linePrefix")(a):s(a)}function s(a){return a===null||_e(a)?t(a):n(a)}}const XN={continuation:{tokenize:t$},exit:n$,name:"blockQuote",tokenize:e$};function e$(e,t,n){const r=this;return s;function s(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return n(o)}function a(o){return ze(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function t$(e,t,n){const r=this;return s;function s(o){return ze(o)?Ze(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(XN,t,n)(o)}}function n$(e){e.exit("blockQuote")}const JN={name:"characterEscape",tokenize:r$};function r$(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),s}function s(a){return UF(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const ZN={name:"characterReference",tokenize:s$};function s$(e,t,n){const r=this;let s=0,a,o;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),a=31,o=En,d(h))}function u(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=zF,d):(e.enter("characterReferenceValue"),a=7,o=Om,d(h))}function d(h){if(h===59&&s){const p=e.exit("characterReferenceValue");return o===En&&!Tg(r.sliceSerialize(p))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(h)&&s++<a?(e.consume(h),d):n(h)}}const Iy={partial:!0,tokenize:a$},Oy={concrete:!0,name:"codeFenced",tokenize:i$};function i$(e,t,n){const r=this,s={partial:!0,tokenize:S};let a=0,o=0,l;return c;function c(_){return u(_)}function u(_){const N=r.events[r.events.length-1];return a=N&&N[1].type==="linePrefix"?N[2].sliceSerialize(N[1],!0).length:0,l=_,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(_)}function d(_){return _===l?(o++,e.consume(_),d):o<3?n(_):(e.exit("codeFencedFenceSequence"),ze(_)?Ze(e,h,"whitespace")(_):h(_))}function h(_){return _===null||_e(_)?(e.exit("codeFencedFence"),r.interrupt?t(_):e.check(Iy,g,j)(_)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(_))}function p(_){return _===null||_e(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(_)):ze(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ze(e,f,"whitespace")(_)):_===96&&_===l?n(_):(e.consume(_),p)}function f(_){return _===null||_e(_)?h(_):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),b(_))}function b(_){return _===null||_e(_)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(_)):_===96&&_===l?n(_):(e.consume(_),b)}function g(_){return e.attempt(s,j,w)(_)}function w(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),x}function x(_){return a>0&&ze(_)?Ze(e,v,"linePrefix",a+1)(_):v(_)}function v(_){return _===null||_e(_)?e.check(Iy,g,j)(_):(e.enter("codeFlowValue"),y(_))}function y(_){return _===null||_e(_)?(e.exit("codeFlowValue"),v(_)):(e.consume(_),y)}function j(_){return e.exit("codeFenced"),t(_)}function S(_,N,C){let A=0;return R;function R(B){return _.enter("lineEnding"),_.consume(B),_.exit("lineEnding"),O}function O(B){return _.enter("codeFencedFence"),ze(B)?Ze(_,T,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):T(B)}function T(B){return B===l?(_.enter("codeFencedFenceSequence"),z(B)):C(B)}function z(B){return B===l?(A++,_.consume(B),z):A>=o?(_.exit("codeFencedFenceSequence"),ze(B)?Ze(_,I,"whitespace")(B):I(B)):C(B)}function I(B){return B===null||_e(B)?(_.exit("codeFencedFence"),N(B)):C(B)}}}function a$(e,t,n){const r=this;return s;function s(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Lh={name:"codeIndented",tokenize:l$},o$={partial:!0,tokenize:c$};function l$(e,t,n){const r=this;return s;function s(u){return e.enter("codeIndented"),Ze(e,a,"linePrefix",5)(u)}function a(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):_e(u)?e.attempt(o$,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||_e(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function c$(e,t,n){const r=this;return s;function s(o){return r.parser.lazy[r.now().line]?n(o):_e(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):Ze(e,a,"linePrefix",5)(o)}function a(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):_e(o)?s(o):n(o)}}const u$={name:"codeText",previous:h$,resolve:d$,tokenize:f$};function d$(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function h$(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function f$(e,t,n){let r=0,s,a;return o;function o(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(a=e.enter("codeTextSequence"),s=0,d(h)):_e(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||_e(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),u)}function d(h){return h===96?(e.consume(h),s++,d):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(a.type="codeTextData",u(h))}}class m${constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&wo(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),wo(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),wo(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);wo(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);wo(this.left,n.reverse())}}}function wo(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ek(e){const t={};let n=-1,r,s,a,o,l,c,u;const d=new m$(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,p$(d,n)),n=t[n],u=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(o=d.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;s&&(r[1].end={...d.get(s)[1].start},l=d.slice(s,n),l.unshift(r),d.splice(s,n-s+1,l))}}return Lr(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function p$(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const a=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let d,h,p=-1,f=n,b=0,g=0;const w=[g];for(;f;){for(;e.get(++s)[1]!==f;);a.push(s),f._tokenizer||(d=r.sliceStream(f),f.next||d.push(null),h&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=n;++p<l.length;)l[p][0]==="exit"&&l[p-1][0]==="enter"&&l[p][1].type===l[p-1][1].type&&l[p][1].start.line!==l[p][1].end.line&&(g=p+1,w.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):w.pop(),p=w.length;p--;){const x=l.slice(w[p],w[p+1]),v=a.pop();c.push([v,v+x.length-1]),e.splice(v,2,x)}for(c.reverse(),p=-1;++p<c.length;)u[b+c[p][0]]=b+c[p][1],b+=c[p][1]-c[p][0]-1;return u}const g$={resolve:v$,tokenize:y$},x$={partial:!0,tokenize:w$};function v$(e){return ek(e),e}function y$(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?a(l):_e(l)?e.check(x$,o,a)(l):(e.consume(l),s)}function a(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function w$(e,t,n){const r=this;return s;function s(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ze(e,a,"linePrefix")}function a(o){if(o===null||_e(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function tk(e,t,n,r,s,a,o,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return h;function h(x){return x===60?(e.enter(r),e.enter(s),e.enter(a),e.consume(x),e.exit(a),p):x===null||x===32||x===41||Im(x)?n(x):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),g(x))}function p(x){return x===62?(e.enter(a),e.consume(x),e.exit(a),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),f(x))}function f(x){return x===62?(e.exit("chunkString"),e.exit(l),p(x)):x===null||x===60||_e(x)?n(x):(e.consume(x),x===92?b:f)}function b(x){return x===60||x===62||x===92?(e.consume(x),f):f(x)}function g(x){return!d&&(x===null||x===41||vn(x))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(x)):d<u&&x===40?(e.consume(x),d++,g):x===41?(e.consume(x),d--,g):x===null||x===32||x===40||Im(x)?n(x):(e.consume(x),x===92?w:g)}function w(x){return x===40||x===41||x===92?(e.consume(x),g):g(x)}}function nk(e,t,n,r,s,a){const o=this;let l=0,c;return u;function u(f){return e.enter(r),e.enter(s),e.consume(f),e.exit(s),e.enter(a),d}function d(f){return l>999||f===null||f===91||f===93&&!c||f===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(f):f===93?(e.exit(a),e.enter(s),e.consume(f),e.exit(s),e.exit(r),t):_e(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||_e(f)||l++>999?(e.exit("chunkString"),d(f)):(e.consume(f),c||(c=!ze(f)),f===92?p:h)}function p(f){return f===91||f===92||f===93?(e.consume(f),l++,h):h(f)}}function rk(e,t,n,r,s,a){let o;return l;function l(p){return p===34||p===39||p===40?(e.enter(r),e.enter(s),e.consume(p),e.exit(s),o=p===40?41:p,c):n(p)}function c(p){return p===o?(e.enter(s),e.consume(p),e.exit(s),e.exit(r),t):(e.enter(a),u(p))}function u(p){return p===o?(e.exit(a),c(o)):p===null?n(p):_e(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),Ze(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===o||p===null||_e(p)?(e.exit("chunkString"),u(p)):(e.consume(p),p===92?h:d)}function h(p){return p===o||p===92?(e.consume(p),d):d(p)}}function Wo(e,t){let n;return r;function r(s){return _e(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):ze(s)?Ze(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const b$={name:"definition",tokenize:_$},j$={partial:!0,tokenize:S$};function _$(e,t,n){const r=this;let s;return a;function a(f){return e.enter("definition"),o(f)}function o(f){return nk.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function l(f){return s=wa(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(e.enter("definitionMarker"),e.consume(f),e.exit("definitionMarker"),c):n(f)}function c(f){return vn(f)?Wo(e,u)(f):u(f)}function u(f){return tk(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function d(f){return e.attempt(j$,h,h)(f)}function h(f){return ze(f)?Ze(e,p,"whitespace")(f):p(f)}function p(f){return f===null||_e(f)?(e.exit("definition"),r.parser.defined.push(s),t(f)):n(f)}}function S$(e,t,n){return r;function r(l){return vn(l)?Wo(e,s)(l):n(l)}function s(l){return rk(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return ze(l)?Ze(e,o,"whitespace")(l):o(l)}function o(l){return l===null||_e(l)?t(l):n(l)}}const N$={name:"hardBreakEscape",tokenize:k$};function k$(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),s}function s(a){return _e(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const C$={name:"headingAtx",resolve:E$,tokenize:P$};function E$(e,t){let n=e.length-2,r=3,s,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Lr(e,r,n-r+1,[["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t]])),e}function P$(e,t,n){let r=0;return s;function s(d){return e.enter("atxHeading"),a(d)}function a(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(e.consume(d),o):d===null||vn(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||_e(d)?(e.exit("atxHeading"),t(d)):ze(d)?Ze(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||vn(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const T$=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ly=["pre","script","style","textarea"],R$={concrete:!0,name:"htmlFlow",resolveTo:O$,tokenize:L$},A$={partial:!0,tokenize:D$},I$={partial:!0,tokenize:M$};function O$(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function L$(e,t,n){const r=this;let s,a,o,l,c;return u;function u(P){return d(P)}function d(P){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(P),h}function h(P){return P===33?(e.consume(P),p):P===47?(e.consume(P),a=!0,g):P===63?(e.consume(P),s=3,r.interrupt?t:k):Cr(P)?(e.consume(P),o=String.fromCharCode(P),w):n(P)}function p(P){return P===45?(e.consume(P),s=2,f):P===91?(e.consume(P),s=5,l=0,b):Cr(P)?(e.consume(P),s=4,r.interrupt?t:k):n(P)}function f(P){return P===45?(e.consume(P),r.interrupt?t:k):n(P)}function b(P){const q="CDATA[";return P===q.charCodeAt(l++)?(e.consume(P),l===q.length?r.interrupt?t:T:b):n(P)}function g(P){return Cr(P)?(e.consume(P),o=String.fromCharCode(P),w):n(P)}function w(P){if(P===null||P===47||P===62||vn(P)){const q=P===47,de=o.toLowerCase();return!q&&!a&&Ly.includes(de)?(s=1,r.interrupt?t(P):T(P)):T$.includes(o.toLowerCase())?(s=6,q?(e.consume(P),x):r.interrupt?t(P):T(P)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):a?v(P):y(P))}return P===45||En(P)?(e.consume(P),o+=String.fromCharCode(P),w):n(P)}function x(P){return P===62?(e.consume(P),r.interrupt?t:T):n(P)}function v(P){return ze(P)?(e.consume(P),v):R(P)}function y(P){return P===47?(e.consume(P),R):P===58||P===95||Cr(P)?(e.consume(P),j):ze(P)?(e.consume(P),y):R(P)}function j(P){return P===45||P===46||P===58||P===95||En(P)?(e.consume(P),j):S(P)}function S(P){return P===61?(e.consume(P),_):ze(P)?(e.consume(P),S):y(P)}function _(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),c=P,N):ze(P)?(e.consume(P),_):C(P)}function N(P){return P===c?(e.consume(P),c=null,A):P===null||_e(P)?n(P):(e.consume(P),N)}function C(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||vn(P)?S(P):(e.consume(P),C)}function A(P){return P===47||P===62||ze(P)?y(P):n(P)}function R(P){return P===62?(e.consume(P),O):n(P)}function O(P){return P===null||_e(P)?T(P):ze(P)?(e.consume(P),O):n(P)}function T(P){return P===45&&s===2?(e.consume(P),$):P===60&&s===1?(e.consume(P),L):P===62&&s===4?(e.consume(P),F):P===63&&s===3?(e.consume(P),k):P===93&&s===5?(e.consume(P),E):_e(P)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(A$,H,z)(P)):P===null||_e(P)?(e.exit("htmlFlowData"),z(P)):(e.consume(P),T)}function z(P){return e.check(I$,I,H)(P)}function I(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),B}function B(P){return P===null||_e(P)?z(P):(e.enter("htmlFlowData"),T(P))}function $(P){return P===45?(e.consume(P),k):T(P)}function L(P){return P===47?(e.consume(P),o="",D):T(P)}function D(P){if(P===62){const q=o.toLowerCase();return Ly.includes(q)?(e.consume(P),F):T(P)}return Cr(P)&&o.length<8?(e.consume(P),o+=String.fromCharCode(P),D):T(P)}function E(P){return P===93?(e.consume(P),k):T(P)}function k(P){return P===62?(e.consume(P),F):P===45&&s===2?(e.consume(P),k):T(P)}function F(P){return P===null||_e(P)?(e.exit("htmlFlowData"),H(P)):(e.consume(P),F)}function H(P){return e.exit("htmlFlow"),t(P)}}function M$(e,t,n){const r=this;return s;function s(o){return _e(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function D$(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Td,t,n)}}const F$={name:"htmlText",tokenize:$$};function $$(e,t,n){const r=this;let s,a,o;return l;function l(k){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(k),c}function c(k){return k===33?(e.consume(k),u):k===47?(e.consume(k),S):k===63?(e.consume(k),y):Cr(k)?(e.consume(k),C):n(k)}function u(k){return k===45?(e.consume(k),d):k===91?(e.consume(k),a=0,b):Cr(k)?(e.consume(k),v):n(k)}function d(k){return k===45?(e.consume(k),f):n(k)}function h(k){return k===null?n(k):k===45?(e.consume(k),p):_e(k)?(o=h,L(k)):(e.consume(k),h)}function p(k){return k===45?(e.consume(k),f):h(k)}function f(k){return k===62?$(k):k===45?p(k):h(k)}function b(k){const F="CDATA[";return k===F.charCodeAt(a++)?(e.consume(k),a===F.length?g:b):n(k)}function g(k){return k===null?n(k):k===93?(e.consume(k),w):_e(k)?(o=g,L(k)):(e.consume(k),g)}function w(k){return k===93?(e.consume(k),x):g(k)}function x(k){return k===62?$(k):k===93?(e.consume(k),x):g(k)}function v(k){return k===null||k===62?$(k):_e(k)?(o=v,L(k)):(e.consume(k),v)}function y(k){return k===null?n(k):k===63?(e.consume(k),j):_e(k)?(o=y,L(k)):(e.consume(k),y)}function j(k){return k===62?$(k):y(k)}function S(k){return Cr(k)?(e.consume(k),_):n(k)}function _(k){return k===45||En(k)?(e.consume(k),_):N(k)}function N(k){return _e(k)?(o=N,L(k)):ze(k)?(e.consume(k),N):$(k)}function C(k){return k===45||En(k)?(e.consume(k),C):k===47||k===62||vn(k)?A(k):n(k)}function A(k){return k===47?(e.consume(k),$):k===58||k===95||Cr(k)?(e.consume(k),R):_e(k)?(o=A,L(k)):ze(k)?(e.consume(k),A):$(k)}function R(k){return k===45||k===46||k===58||k===95||En(k)?(e.consume(k),R):O(k)}function O(k){return k===61?(e.consume(k),T):_e(k)?(o=O,L(k)):ze(k)?(e.consume(k),O):A(k)}function T(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),s=k,z):_e(k)?(o=T,L(k)):ze(k)?(e.consume(k),T):(e.consume(k),I)}function z(k){return k===s?(e.consume(k),s=void 0,B):k===null?n(k):_e(k)?(o=z,L(k)):(e.consume(k),z)}function I(k){return k===null||k===34||k===39||k===60||k===61||k===96?n(k):k===47||k===62||vn(k)?A(k):(e.consume(k),I)}function B(k){return k===47||k===62||vn(k)?A(k):n(k)}function $(k){return k===62?(e.consume(k),e.exit("htmlTextData"),e.exit("htmlText"),t):n(k)}function L(k){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),D}function D(k){return ze(k)?Ze(e,E,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):E(k)}function E(k){return e.enter("htmlTextData"),o(k)}}const Ag={name:"labelEnd",resolveAll:V$,resolveTo:q$,tokenize:W$},z$={tokenize:H$},U$={tokenize:G$},B$={tokenize:K$};function V$(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&Lr(e,0,e.length,n),e}function q$(e,t){let n=e.length,r=0,s,a,o,l;for(;n--;)if(s=e[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(o=n);const c={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},d={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=zn(l,e.slice(a+1,a+r+3)),l=zn(l,[["enter",d,t]]),l=zn(l,Rg(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),l=zn(l,[["exit",d,t],e[o-2],e[o-1],["exit",u,t]]),l=zn(l,e.slice(o+1)),l=zn(l,[["exit",c,t]]),Lr(e,a,e.length,l),e}function W$(e,t,n){const r=this;let s=r.events.length,a,o;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return l;function l(p){return a?a._inactive?h(p):(o=r.parser.defined.includes(wa(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(p),e.exit("labelMarker"),e.exit("labelEnd"),c):n(p)}function c(p){return p===40?e.attempt(z$,d,o?d:h)(p):p===91?e.attempt(U$,d,o?u:h)(p):o?d(p):h(p)}function u(p){return e.attempt(B$,d,h)(p)}function d(p){return t(p)}function h(p){return a._balanced=!0,n(p)}}function H$(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),s}function s(h){return vn(h)?Wo(e,a)(h):a(h)}function a(h){return h===41?d(h):tk(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return vn(h)?Wo(e,c)(h):d(h)}function l(h){return n(h)}function c(h){return h===34||h===39||h===40?rk(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function u(h){return vn(h)?Wo(e,d)(h):d(h)}function d(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function G$(e,t,n){const r=this;return s;function s(l){return nk.call(r,e,a,o,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes(wa(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function K$(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),s}function s(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const Q$={name:"labelStartImage",resolveAll:Ag.resolveAll,tokenize:Y$};function Y$(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),a}function a(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const X$={name:"labelStartLink",resolveAll:Ag.resolveAll,tokenize:J$};function J$(e,t,n){const r=this;return s;function s(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Mh={name:"lineEnding",tokenize:Z$};function Z$(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ze(e,t,"linePrefix")}}const Fc={name:"thematicBreak",tokenize:ez};function ez(e,t,n){let r=0,s;return a;function a(u){return e.enter("thematicBreak"),o(u)}function o(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||_e(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===s?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),ze(u)?Ze(e,l,"whitespace")(u):l(u))}}const cn={continuation:{tokenize:sz},exit:az,name:"list",tokenize:rz},tz={partial:!0,tokenize:oz},nz={partial:!0,tokenize:iz};function rz(e,t,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return l;function l(f){const b=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:Om(f)){if(r.containerState.type||(r.containerState.type=b,e.enter(b,{_container:!0})),b==="listUnordered")return e.enter("listItemPrefix"),f===42||f===45?e.check(Fc,n,u)(f):u(f);if(!r.interrupt||f===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(f)}return n(f)}function c(f){return Om(f)&&++o<10?(e.consume(f),c):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(e.exit("listItemValue"),u(f)):n(f)}function u(f){return e.enter("listItemMarker"),e.consume(f),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,e.check(Td,r.interrupt?n:d,e.attempt(tz,p,h))}function d(f){return r.containerState.initialBlankLine=!0,a++,p(f)}function h(f){return ze(f)?(e.enter("listItemPrefixWhitespace"),e.consume(f),e.exit("listItemPrefixWhitespace"),p):n(f)}function p(f){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(f)}}function sz(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Td,s,a);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ze(e,t,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!ze(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(nz,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ze(e,e.attempt(cn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function iz(e,t,n){const r=this;return Ze(e,s,"listItemIndent",r.containerState.size+1);function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(a):n(a)}}function az(e){e.exit(this.containerState.type)}function oz(e,t,n){const r=this;return Ze(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const o=r.events[r.events.length-1];return!ze(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const My={name:"setextUnderline",resolveTo:lz,tokenize:cz};function lz(e,t){let n=e.length,r,s,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",a?(e.splice(s,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function cz(e,t,n){const r=this;let s;return a;function a(u){let d=r.events.length,h;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){h=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),s=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),ze(u)?Ze(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||_e(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const uz={tokenize:dz};function dz(e){const t=this,n=e.attempt(Td,r,e.attempt(this.parser.constructs.flowInitial,s,Ze(e,e.attempt(this.parser.constructs.flow,s,e.attempt(g$,s)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const hz={resolveAll:ik()},fz=sk("string"),mz=sk("text");function sk(e){return{resolveAll:ik(e==="text"?pz:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],a=n.attempt(s,o,l);return o;function o(d){return u(d)?a(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),c}function c(d){return u(d)?(n.exit("data"),a(d)):(n.consume(d),c)}function u(d){if(d===null)return!0;const h=s[d];let p=-1;if(h)for(;++p<h.length;){const f=h[p];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function ik(e){return t;function t(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return e?e(n,r):n}}function pz(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let a=s.length,o=-1,l=0,c;for(;a--;){const u=s[a];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const gz={42:cn,43:cn,45:cn,48:cn,49:cn,50:cn,51:cn,52:cn,53:cn,54:cn,55:cn,56:cn,57:cn,62:XN},xz={91:b$},vz={[-2]:Lh,[-1]:Lh,32:Lh},yz={35:C$,42:Fc,45:[My,Fc],60:R$,61:My,95:Fc,96:Oy,126:Oy},wz={38:ZN,92:JN},bz={[-5]:Mh,[-4]:Mh,[-3]:Mh,33:Q$,38:ZN,42:Lm,60:[XF,F$],91:X$,92:[N$,JN],93:Ag,95:Lm,96:u$},jz={null:[Lm,hz]},_z={null:[42,95]},Sz={null:[]},Nz=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:_z,contentInitial:xz,disable:Sz,document:gz,flow:yz,flowInitial:vz,insideSpan:jz,string:wz,text:bz},Symbol.toStringTag,{value:"Module"}));function kz(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let o=[],l=[];const c={attempt:N(S),check:N(_),consume:v,enter:y,exit:j,interrupt:N(_,{interrupt:!0})},u={code:null,containerState:{},defineSkip:g,events:[],now:b,parser:e,previous:null,sliceSerialize:p,sliceStream:f,write:h};let d=t.tokenize.call(u,c);return t.resolveAll&&a.push(t),u;function h(O){return o=zn(o,O),w(),o[o.length-1]!==null?[]:(C(t,0),u.events=Rg(a,u.events,u),u.events)}function p(O,T){return Ez(f(O),T)}function f(O){return Cz(o,O)}function b(){const{_bufferIndex:O,_index:T,line:z,column:I,offset:B}=r;return{_bufferIndex:O,_index:T,line:z,column:I,offset:B}}function g(O){s[O.line]=O.column,R()}function w(){let O;for(;r._index<o.length;){const T=o[r._index];if(typeof T=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<T.length;)x(T.charCodeAt(r._bufferIndex));else x(T)}}function x(O){d=d(O)}function v(O){_e(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,R()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=O}function y(O,T){const z=T||{};return z.type=O,z.start=b(),u.events.push(["enter",z,u]),l.push(z),z}function j(O){const T=l.pop();return T.end=b(),u.events.push(["exit",T,u]),T}function S(O,T){C(O,T.from)}function _(O,T){T.restore()}function N(O,T){return z;function z(I,B,$){let L,D,E,k;return Array.isArray(I)?H(I):"tokenize"in I?H([I]):F(I);function F(le){return Y;function Y(re){const fe=re!==null&&le[re],Z=re!==null&&le.null,U=[...Array.isArray(fe)?fe:fe?[fe]:[],...Array.isArray(Z)?Z:Z?[Z]:[]];return H(U)(re)}}function H(le){return L=le,D=0,le.length===0?$:P(le[D])}function P(le){return Y;function Y(re){return k=A(),E=le,le.partial||(u.currentConstruct=le),le.name&&u.parser.constructs.disable.null.includes(le.name)?de():le.tokenize.call(T?Object.assign(Object.create(u),T):u,c,q,de)(re)}}function q(le){return O(E,k),B}function de(le){return k.restore(),++D<L.length?P(L[D]):$}}}function C(O,T){O.resolveAll&&!a.includes(O)&&a.push(O),O.resolve&&Lr(u.events,T,u.events.length-T,O.resolve(u.events.slice(T),u)),O.resolveTo&&(u.events=O.resolveTo(u.events,u))}function A(){const O=b(),T=u.previous,z=u.currentConstruct,I=u.events.length,B=Array.from(l);return{from:I,restore:$};function $(){r=O,u.previous=T,u.currentConstruct=z,u.events.length=I,l=B,R()}}function R(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function Cz(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,a=t.end._bufferIndex;let o;if(n===s)o=[e[n].slice(r,a)];else{if(o=e.slice(n,s),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}a>0&&o.push(e[s].slice(0,a))}return o}function Ez(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const a=e[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&s)continue;o=" ";break}default:o=String.fromCharCode(a)}s=a===-2,r.push(o)}return r.join("")}function Pz(e){const r={constructs:MF([Nz,...(e||{}).extensions||[]]),content:s(qF),defined:[],document:s(HF),flow:s(uz),lazy:{},string:s(fz),text:s(mz)};return r;function s(a){return o;function o(l){return kz(r,a,l)}}}function Tz(e){for(;!ek(e););return e}const Dy=/[\0\t\n\r]/g;function Rz(){let e=1,t="",n=!0,r;return s;function s(a,o,l){const c=[];let u,d,h,p,f;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),h=0,t="",n&&(a.charCodeAt(0)===65279&&h++,n=void 0);h<a.length;){if(Dy.lastIndex=h,u=Dy.exec(a),p=u&&u.index!==void 0?u.index:a.length,f=a.charCodeAt(p),!u){t=a.slice(h);break}if(f===10&&h===p&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),h<p&&(c.push(a.slice(h,p)),e+=p-h),f){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}h=p+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const Az=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Iz(e){return e.replace(Az,Oz)}function Oz(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return YN(n.slice(a?2:1),a?16:10)}return Tg(n)||e}const ak={}.hasOwnProperty;function Lz(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Mz(n)(Tz(Pz(n).document().write(Rz()(e,t,!0))))}function Mz(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Ge),autolinkProtocol:A,autolinkEmail:A,atxHeading:a(me),blockQuote:a(Z),characterEscape:A,characterReference:A,codeFenced:a(U),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(U,o),codeText:a(ce,o),codeTextData:A,data:A,codeFlowValue:A,definition:a(ge),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(ne),hardBreakEscape:a(He),hardBreakTrailing:a(He),htmlFlow:a(Re,o),htmlFlowData:A,htmlText:a(Re,o),htmlTextData:A,image:a(ct),label:o,link:a(Ge),listItem:a(bt),listItemValue:p,listOrdered:a(xt,h),listUnordered:a(xt),paragraph:a(Ue),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(me),strong:a(It),thematicBreak:a(Ln)},exit:{atxHeading:c(),atxHeadingSequence:S,autolink:c(),autolinkEmail:fe,autolinkProtocol:re,blockQuote:c(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:de,characterReferenceMarkerNumeric:de,characterReferenceValue:le,characterReference:Y,codeFenced:c(w),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:b,codeFlowValue:R,codeIndented:c(x),codeText:c(B),codeTextData:R,data:R,definition:c(),definitionDestinationString:j,definitionLabelString:v,definitionTitleString:y,emphasis:c(),hardBreakEscape:c(T),hardBreakTrailing:c(T),htmlFlow:c(z),htmlFlowData:R,htmlText:c(I),htmlTextData:R,image:c(L),label:E,labelText:D,lineEnding:O,link:c($),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:q,resourceDestinationString:k,resourceTitleString:F,resource:H,setextHeading:c(C),setextHeadingLineSequence:N,setextHeadingText:_,strong:c(),thematicBreak:c()}};ok(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(W){let ee={type:"root",children:[]};const se={stack:[ee],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:d,data:n},ae=[];let Se=-1;for(;++Se<W.length;)if(W[Se][1].type==="listOrdered"||W[Se][1].type==="listUnordered")if(W[Se][0]==="enter")ae.push(Se);else{const $e=ae.pop();Se=s(W,$e,Se)}for(Se=-1;++Se<W.length;){const $e=t[W[Se][0]];ak.call($e,W[Se][1].type)&&$e[W[Se][1].type].call(Object.assign({sliceSerialize:W[Se][2].sliceSerialize},se),W[Se][1])}if(se.tokenStack.length>0){const $e=se.tokenStack[se.tokenStack.length-1];($e[1]||Fy).call(se,void 0,$e[0])}for(ee.position={start:ps(W.length>0?W[0][1].start:{line:1,column:1,offset:0}),end:ps(W.length>0?W[W.length-2][1].end:{line:1,column:1,offset:0})},Se=-1;++Se<t.transforms.length;)ee=t.transforms[Se](ee)||ee;return ee}function s(W,ee,se){let ae=ee-1,Se=-1,$e=!1,Kt,Qt,ln,Mn;for(;++ae<=se;){const mt=W[ae];switch(mt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{mt[0]==="enter"?Se++:Se--,Mn=void 0;break}case"lineEndingBlank":{mt[0]==="enter"&&(Kt&&!Mn&&!Se&&!ln&&(ln=ae),Mn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Mn=void 0}if(!Se&&mt[0]==="enter"&&mt[1].type==="listItemPrefix"||Se===-1&&mt[0]==="exit"&&(mt[1].type==="listUnordered"||mt[1].type==="listOrdered")){if(Kt){let Yt=ae;for(Qt=void 0;Yt--;){const Xt=W[Yt];if(Xt[1].type==="lineEnding"||Xt[1].type==="lineEndingBlank"){if(Xt[0]==="exit")continue;Qt&&(W[Qt][1].type="lineEndingBlank",$e=!0),Xt[1].type="lineEnding",Qt=Yt}else if(!(Xt[1].type==="linePrefix"||Xt[1].type==="blockQuotePrefix"||Xt[1].type==="blockQuotePrefixWhitespace"||Xt[1].type==="blockQuoteMarker"||Xt[1].type==="listItemIndent"))break}ln&&(!Qt||ln<Qt)&&(Kt._spread=!0),Kt.end=Object.assign({},Qt?W[Qt][1].start:mt[1].end),W.splice(Qt||ae,0,["exit",Kt,mt[2]]),ae++,se++}if(mt[1].type==="listItemPrefix"){const Yt={type:"listItem",_spread:!1,start:Object.assign({},mt[1].start),end:void 0};Kt=Yt,W.splice(ae,0,["enter",Yt,mt[2]]),ae++,se++,ln=void 0,Mn=!0}}}return W[ee][1]._spread=$e,se}function a(W,ee){return se;function se(ae){l.call(this,W(ae),ae),ee&&ee.call(this,ae)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(W,ee,se){this.stack[this.stack.length-1].children.push(W),this.stack.push(W),this.tokenStack.push([ee,se||void 0]),W.position={start:ps(ee.start),end:void 0}}function c(W){return ee;function ee(se){W&&W.call(this,se),u.call(this,se)}}function u(W,ee){const se=this.stack.pop(),ae=this.tokenStack.pop();if(ae)ae[0].type!==W.type&&(ee?ee.call(this,W,ae[0]):(ae[1]||Fy).call(this,W,ae[0]));else throw new Error("Cannot close `"+W.type+"` ("+qo({start:W.start,end:W.end})+"): its not open");se.position.end=ps(W.end)}function d(){return OF(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function p(W){if(this.data.expectingFirstListItemValue){const ee=this.stack[this.stack.length-2];ee.start=Number.parseInt(this.sliceSerialize(W),10),this.data.expectingFirstListItemValue=void 0}}function f(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.lang=W}function b(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.meta=W}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W.replace(/(\r?\n|\r)$/g,"")}function v(W){const ee=this.resume(),se=this.stack[this.stack.length-1];se.label=ee,se.identifier=wa(this.sliceSerialize(W)).toLowerCase()}function y(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.title=W}function j(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.url=W}function S(W){const ee=this.stack[this.stack.length-1];if(!ee.depth){const se=this.sliceSerialize(W).length;ee.depth=se}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function N(W){const ee=this.stack[this.stack.length-1];ee.depth=this.sliceSerialize(W).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(W){const se=this.stack[this.stack.length-1].children;let ae=se[se.length-1];(!ae||ae.type!=="text")&&(ae=pr(),ae.position={start:ps(W.start),end:void 0},se.push(ae)),this.stack.push(ae)}function R(W){const ee=this.stack.pop();ee.value+=this.sliceSerialize(W),ee.position.end=ps(W.end)}function O(W){const ee=this.stack[this.stack.length-1];if(this.data.atHardBreak){const se=ee.children[ee.children.length-1];se.position.end=ps(W.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ee.type)&&(A.call(this,W),R.call(this,W))}function T(){this.data.atHardBreak=!0}function z(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W}function I(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W}function B(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W}function $(){const W=this.stack[this.stack.length-1];if(this.data.inReference){const ee=this.data.referenceType||"shortcut";W.type+="Reference",W.referenceType=ee,delete W.url,delete W.title}else delete W.identifier,delete W.label;this.data.referenceType=void 0}function L(){const W=this.stack[this.stack.length-1];if(this.data.inReference){const ee=this.data.referenceType||"shortcut";W.type+="Reference",W.referenceType=ee,delete W.url,delete W.title}else delete W.identifier,delete W.label;this.data.referenceType=void 0}function D(W){const ee=this.sliceSerialize(W),se=this.stack[this.stack.length-2];se.label=Iz(ee),se.identifier=wa(ee).toLowerCase()}function E(){const W=this.stack[this.stack.length-1],ee=this.resume(),se=this.stack[this.stack.length-1];if(this.data.inReference=!0,se.type==="link"){const ae=W.children;se.children=ae}else se.alt=ee}function k(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.url=W}function F(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.title=W}function H(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function q(W){const ee=this.resume(),se=this.stack[this.stack.length-1];se.label=ee,se.identifier=wa(this.sliceSerialize(W)).toLowerCase(),this.data.referenceType="full"}function de(W){this.data.characterReferenceType=W.type}function le(W){const ee=this.sliceSerialize(W),se=this.data.characterReferenceType;let ae;se?(ae=YN(ee,se==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ae=Tg(ee);const Se=this.stack[this.stack.length-1];Se.value+=ae}function Y(W){const ee=this.stack.pop();ee.position.end=ps(W.end)}function re(W){R.call(this,W);const ee=this.stack[this.stack.length-1];ee.url=this.sliceSerialize(W)}function fe(W){R.call(this,W);const ee=this.stack[this.stack.length-1];ee.url="mailto:"+this.sliceSerialize(W)}function Z(){return{type:"blockquote",children:[]}}function U(){return{type:"code",lang:null,meta:null,value:""}}function ce(){return{type:"inlineCode",value:""}}function ge(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ne(){return{type:"emphasis",children:[]}}function me(){return{type:"heading",depth:0,children:[]}}function He(){return{type:"break"}}function Re(){return{type:"html",value:""}}function ct(){return{type:"image",title:null,url:"",alt:null}}function Ge(){return{type:"link",title:null,url:"",children:[]}}function xt(W){return{type:"list",ordered:W.type==="listOrdered",start:null,spread:W._spread,children:[]}}function bt(W){return{type:"listItem",spread:W._spread,checked:null,children:[]}}function Ue(){return{type:"paragraph",children:[]}}function It(){return{type:"strong",children:[]}}function pr(){return{type:"text",value:""}}function Ln(){return{type:"thematicBreak"}}}function ps(e){return{line:e.line,column:e.column,offset:e.offset}}function ok(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?ok(e,r):Dz(e,r)}}function Dz(e,t){let n;for(n in t)if(ak.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Fy(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+qo({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+qo({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+qo({start:t.start,end:t.end})+") is still open")}function Fz(e){const t=this;t.parser=n;function n(r){return Lz(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function $z(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function zz(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Uz(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function Bz(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Vz(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function qz(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=so(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=a+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function Wz(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Hz(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function lk(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=r:s.push({type:"text",value:r}),s}function Gz(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return lk(e,t);const s={src:so(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,a),e.applyData(t,a)}function Kz(e,t){const n={src:so(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Qz(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Yz(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return lk(e,t);const s={href:so(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function Xz(e,t){const n={href:so(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Jz(e,t,n){const r=e.all(t),s=n?Zz(n):ck(t),a={},o=[];if(typeof t.checked=="boolean"){const d=r[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(s||l!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?o.push(...d.children):o.push(d)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,u),e.applyData(t,u)}function Zz(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=ck(n[r])}return t}function ck(e){const t=e.spread;return t??e.children.length>1}function eU(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const o=r[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function tU(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function nU(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function rU(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function sU(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),s.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=kg(t.children[1]),c=VN(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),s.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)}function iU(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const h=t.children[c],p={},f=o?o[c]:void 0;f&&(p.align=f);let b={type:"element",tagName:a,properties:p,children:[]};h&&(b.children=e.all(h),e.patch(h,b),b=e.applyData(h,b)),u.push(b)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function aU(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const $y=9,zy=32;function oU(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const a=[];for(;r;)a.push(Uy(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return a.push(Uy(t.slice(s),s>0,!1)),a.join("")}function Uy(e,t,n){let r=0,s=e.length;if(t){let a=e.codePointAt(r);for(;a===$y||a===zy;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(s-1);for(;a===$y||a===zy;)s--,a=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function lU(e,t){const n={type:"text",value:oU(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function cU(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const uU={blockquote:$z,break:zz,code:Uz,delete:Bz,emphasis:Vz,footnoteReference:qz,heading:Wz,html:Hz,imageReference:Gz,image:Kz,inlineCode:Qz,linkReference:Yz,link:Xz,listItem:Jz,list:eU,paragraph:tU,root:nU,strong:rU,table:sU,tableCell:aU,tableRow:iU,text:lU,thematicBreak:cU,toml:xc,yaml:xc,definition:xc,footnoteDefinition:xc};function xc(){}const uk=-1,Rd=0,Ho=1,ku=2,Ig=3,Og=4,Lg=5,Mg=6,dk=7,hk=8,By=typeof self=="object"?self:globalThis,dU=(e,t)=>{const n=(s,a)=>(e.set(a,s),s),r=s=>{if(e.has(s))return e.get(s);const[a,o]=t[s];switch(a){case Rd:case uk:return n(o,s);case Ho:{const l=n([],s);for(const c of o)l.push(r(c));return l}case ku:{const l=n({},s);for(const[c,u]of o)l[r(c)]=r(u);return l}case Ig:return n(new Date(o),s);case Og:{const{source:l,flags:c}=o;return n(new RegExp(l,c),s)}case Lg:{const l=n(new Map,s);for(const[c,u]of o)l.set(r(c),r(u));return l}case Mg:{const l=n(new Set,s);for(const c of o)l.add(r(c));return l}case dk:{const{name:l,message:c}=o;return n(new By[l](c),s)}case hk:return n(BigInt(o),s);case"BigInt":return n(Object(BigInt(o)),s);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new By[a](o),s)};return r},Vy=e=>dU(new Map,e)(0),Qi="",{toString:hU}={},{keys:fU}=Object,bo=e=>{const t=typeof e;if(t!=="object"||!e)return[Rd,t];const n=hU.call(e).slice(8,-1);switch(n){case"Array":return[Ho,Qi];case"Object":return[ku,Qi];case"Date":return[Ig,Qi];case"RegExp":return[Og,Qi];case"Map":return[Lg,Qi];case"Set":return[Mg,Qi];case"DataView":return[Ho,n]}return n.includes("Array")?[Ho,n]:n.includes("Error")?[dk,n]:[ku,n]},vc=([e,t])=>e===Rd&&(t==="function"||t==="symbol"),mU=(e,t,n,r)=>{const s=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},a=o=>{if(n.has(o))return n.get(o);let[l,c]=bo(o);switch(l){case Rd:{let d=o;switch(c){case"bigint":l=hk,d=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return s([uk],o)}return s([l,d],o)}case Ho:{if(c){let p=o;return c==="DataView"?p=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(p=new Uint8Array(o)),s([c,[...p]],o)}const d=[],h=s([l,d],o);for(const p of o)d.push(a(p));return h}case ku:{if(c)switch(c){case"BigInt":return s([c,o.toString()],o);case"Boolean":case"Number":case"String":return s([c,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const d=[],h=s([l,d],o);for(const p of fU(o))(e||!vc(bo(o[p])))&&d.push([a(p),a(o[p])]);return h}case Ig:return s([l,o.toISOString()],o);case Og:{const{source:d,flags:h}=o;return s([l,{source:d,flags:h}],o)}case Lg:{const d=[],h=s([l,d],o);for(const[p,f]of o)(e||!(vc(bo(p))||vc(bo(f))))&&d.push([a(p),a(f)]);return h}case Mg:{const d=[],h=s([l,d],o);for(const p of o)(e||!vc(bo(p)))&&d.push(a(p));return h}}const{message:u}=o;return s([l,{name:c,message:u}],o)};return a},qy=(e,{json:t,lossy:n}={})=>{const r=[];return mU(!(t||n),!!t,new Map,r)(e),r},Cu=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Vy(qy(e,t)):structuredClone(e):(e,t)=>Vy(qy(e,t));function pU(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function gU(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function xU(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||pU,r=e.options.footnoteBackLabel||gU,s=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),h=String(u.identifier).toUpperCase(),p=so(h.toLowerCase());let f=0;const b=[],g=e.footnoteCounts.get(h);for(;g!==void 0&&++f<=g;){b.length>0&&b.push({type:"text",value:" "});let v=typeof n=="string"?n:n(c,f);typeof v=="string"&&(v={type:"text",value:v}),b.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+p+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const w=d[d.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const v=w.children[w.children.length-1];v&&v.type==="text"?v.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...b)}else d.push(...b);const x={type:"element",tagName:"li",properties:{id:t+"fn-"+p},children:e.wrap(d,!0)};e.patch(u,x),l.push(x)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Cu(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const fk=function(e){if(e==null)return bU;if(typeof e=="function")return Ad(e);if(typeof e=="object")return Array.isArray(e)?vU(e):yU(e);if(typeof e=="string")return wU(e);throw new Error("Expected function, string, or object as test")};function vU(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=fk(e[n]);return Ad(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function yU(e){const t=e;return Ad(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function wU(e){return Ad(t);function t(n){return n&&n.type===e}}function Ad(e){return t;function t(n,r,s){return!!(jU(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function bU(){return!0}function jU(e){return e!==null&&typeof e=="object"&&"type"in e}const mk=[],_U=!0,Wy=!1,SU="skip";function NU(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=fk(s),o=r?-1:1;l(e,void 0,[])();function l(c,u,d){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})}return p;function p(){let f=mk,b,g,w;if((!t||a(c,u,d[d.length-1]||void 0))&&(f=kU(n(c,d)),f[0]===Wy))return f;if("children"in c&&c.children){const x=c;if(x.children&&f[0]!==SU)for(g=(r?x.children.length:-1)+o,w=d.concat(x);g>-1&&g<x.children.length;){const v=x.children[g];if(b=l(v,g,w)(),b[0]===Wy)return b;g=typeof b[1]=="number"?b[1]:g+o}}return f}}}function kU(e){return Array.isArray(e)?e:typeof e=="number"?[_U,e]:e==null?mk:[e]}function pk(e,t,n,r){let s,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,s=n):(a=t,o=n,s=r),NU(e,a,l,s);function l(c,u){const d=u[u.length-1],h=d?d.children.indexOf(c):void 0;return o(c,h,d)}}const Mm={}.hasOwnProperty,CU={};function EU(e,t){const n=t||CU,r=new Map,s=new Map,a=new Map,o={...uU,...n.handlers},l={all:u,applyData:TU,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:o,one:c,options:n,patch:PU,wrap:AU};return pk(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?r:s,p=String(d.identifier).toUpperCase();h.has(p)||h.set(p,d)}}),l;function c(d,h){const p=d.type,f=l.handlers[p];if(Mm.call(l.handlers,p)&&f)return f(l,d,h);if(l.options.passThrough&&l.options.passThrough.includes(p)){if("children"in d){const{children:g,...w}=d,x=Cu(w);return x.children=l.all(d),x}return Cu(d)}return(l.options.unknownHandler||RU)(l,d,h)}function u(d){const h=[];if("children"in d){const p=d.children;let f=-1;for(;++f<p.length;){const b=l.one(p[f],d);if(b){if(f&&p[f-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=Hy(b.value)),!Array.isArray(b)&&b.type==="element")){const g=b.children[0];g&&g.type==="text"&&(g.value=Hy(g.value))}Array.isArray(b)?h.push(...b):h.push(b)}}}return h}}function PU(e,t){e.position&&(t.position=hF(e))}function TU(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,Cu(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function RU(e,t){const n=t.data||{},r="value"in t&&!(Mm.call(n,"hProperties")||Mm.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function AU(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Hy(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Gy(e,t){const n=EU(e,t),r=n.one(e,void 0),s=xU(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function IU(e,t){return e&&"run"in e?async function(n,r){const s=Gy(n,{file:r,...t});await e.run(s,r)}:function(n,r){return Gy(n,{file:r,...e||t})}}function Ky(e){if(e)throw e}var $c=Object.prototype.hasOwnProperty,gk=Object.prototype.toString,Qy=Object.defineProperty,Yy=Object.getOwnPropertyDescriptor,Xy=function(t){return typeof Array.isArray=="function"?Array.isArray(t):gk.call(t)==="[object Array]"},Jy=function(t){if(!t||gk.call(t)!=="[object Object]")return!1;var n=$c.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&$c.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||$c.call(t,s)},Zy=function(t,n){Qy&&n.name==="__proto__"?Qy(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},ew=function(t,n){if(n==="__proto__")if($c.call(t,n)){if(Yy)return Yy(t,n).value}else return;return t[n]},OU=function e(){var t,n,r,s,a,o,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=ew(l,n),s=ew(t,n),l!==s&&(d&&s&&(Jy(s)||(a=Xy(s)))?(a?(a=!1,o=r&&Xy(r)?r:[]):o=r&&Jy(r)?r:{},Zy(l,{name:n,newValue:e(d,o,s)})):typeof s<"u"&&Zy(l,{name:n,newValue:s}));return l};const Dh=Pu(OU);function Dm(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function LU(){const e=[],t={run:n,use:r};return t;function n(...s){let a=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...s);function l(c,...u){const d=e[++a];let h=-1;if(c){o(c);return}for(;++h<s.length;)(u[h]===null||u[h]===void 0)&&(u[h]=s[h]);s=u,d?MU(d,l)(...u):o(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function MU(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(s);try{c=e.apply(this,o)}catch(u){const d=u;if(l&&n)throw d;return s(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(a,s):c instanceof Error?s(c):a(c))}function s(o,...l){n||(n=!0,t(o,...l))}function a(o){s(null,o)}}const br={basename:DU,dirname:FU,extname:$U,join:zU,sep:"/"};function DU(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Dl(e);let n=0,r=-1,s=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else o<0&&(a=!0,o=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function FU(e){if(Dl(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function $U(e){Dl(e);let t=e.length,n=-1,r=0,s=-1,a=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?s<0?s=t:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function zU(...e){let t=-1,n;for(;++t<e.length;)Dl(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":UU(n)}function UU(e){Dl(e);const t=e.codePointAt(0)===47;let n=BU(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function BU(e,t){let n="",r=0,s=-1,a=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(s===o-1||a===1))if(s!==o-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=o,a=0;continue}}else if(n.length>0){n="",r=0,s=o,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,o):n=e.slice(s+1,o),r=o-s-1;s=o,a=0}else l===46&&a>-1?a++:a=-1}return n}function Dl(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const VU={cwd:qU};function qU(){return"/"}function Fm(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function WU(e){if(typeof e=="string")e=new URL(e);else if(!Fm(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return HU(e)}function HU(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const Fh=["history","path","basename","stem","extname","dirname"];class xk{constructor(t){let n;t?Fm(t)?n={path:t}:typeof t=="string"||GU(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":VU.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Fh.length;){const a=Fh[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)Fh.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?br.basename(this.path):void 0}set basename(t){zh(t,"basename"),$h(t,"basename"),this.path=br.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?br.dirname(this.path):void 0}set dirname(t){tw(this.basename,"dirname"),this.path=br.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?br.extname(this.path):void 0}set extname(t){if($h(t,"extname"),tw(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=br.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Fm(t)&&(t=WU(t)),zh(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?br.basename(this.path,this.extname):void 0}set stem(t){zh(t,"stem"),$h(t,"stem"),this.path=br.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new Gt(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function $h(e,t){if(e&&e.includes(br.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+br.sep+"`")}function zh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function tw(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function GU(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const KU=function(e){const r=this.constructor.prototype,s=r[e],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},QU={}.hasOwnProperty;class Dg extends KU{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=LU()}copy(){const t=new Dg;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Dh(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Vh("data",this.frozen),this.namespace[t]=n,this):QU.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Vh("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=yc(t),r=this.parser||this.Parser;return Uh("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Uh("process",this.parser||this.Parser),Bh("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,o){const l=yc(t),c=r.parse(l);r.run(c,l,function(d,h,p){if(d||!h||!p)return u(d);const f=h,b=r.stringify(f,p);JU(b)?p.value=b:p.result=b,u(d,p)});function u(d,h){d||!h?o(d):a?a(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),Uh("processSync",this.parser||this.Parser),Bh("processSync",this.compiler||this.Compiler),this.process(t,s),rw("processSync","process",n),r;function s(a,o){n=!0,Ky(a),r=o}}run(t,n,r){nw(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(o,l){const c=yc(n);s.run(t,c,u);function u(d,h,p){const f=h||t;d?l(d):o?o(f):r(void 0,f,p)}}}runSync(t,n){let r=!1,s;return this.run(t,n,a),rw("runSync","run",r),s;function a(o,l){Ky(o),s=l,r=!0}}stringify(t,n){this.freeze();const r=yc(n),s=this.compiler||this.Compiler;return Bh("stringify",s),nw(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(Vh("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...h]=u;c(d,h)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=Dh(!0,s.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const h=u[d];a(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let h=-1,p=-1;for(;++h<r.length;)if(r[h][0]===u){p=h;break}if(p===-1)r.push([u,...d]);else if(d.length>0){let[f,...b]=d;const g=r[p][1];Dm(g)&&Dm(f)&&(f=Dh(!0,g,f)),r[p]=[u,f,...b]}}}}const YU=new Dg().freeze();function Uh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Bh(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Vh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function nw(e){if(!Dm(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function rw(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function yc(e){return XU(e)?e:new xk(e)}function XU(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function JU(e){return typeof e=="string"||ZU(e)}function ZU(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const e5="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",sw=[],iw={allowDangerousHtml:!0},t5=/^(https?|ircs?|mailto|xmpp)$/i,n5=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function yl(e){const t=r5(e),n=s5(e);return i5(t.runSync(t.parse(n),n),e)}function r5(e){const t=e.rehypePlugins||sw,n=e.remarkPlugins||sw,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...iw}:iw;return YU().use(Fz).use(n).use(IU,r).use(t)}function s5(e){const t=e.children||"",n=new xk;return typeof t=="string"&&(n.value=t),n}function i5(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,a=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||a5;for(const d of n5)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+e5+d.id,void 0);return pk(e,u),xF(e,{Fragment:i.Fragment,components:s,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function u(d,h,p){if(d.type==="raw"&&p&&typeof h=="number")return o?p.children.splice(h,1):p.children[h]={type:"text",value:d.value},h;if(d.type==="element"){let f;for(f in Oh)if(Object.hasOwn(Oh,f)&&Object.hasOwn(d.properties,f)){const b=d.properties[f],g=Oh[f];(g===null||g.includes(d.tagName))&&(d.properties[f]=c(String(b||""),f,d))}}if(d.type==="element"){let f=n?!n.includes(d.tagName):a?a.includes(d.tagName):!1;if(!f&&r&&typeof h=="number"&&(f=!r(d,h,p)),f&&p&&typeof h=="number")return l&&d.children?p.children.splice(h,1,...d.children):p.children.splice(h,1),h}}}function a5(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||t5.test(e.slice(0,t))?e:""}function aw(){const{courseId:e}=Rl(),t=Gn(),{profile:n}=it(),{toast:r}=Ve(),[s,a]=m.useState(null),[o,l]=m.useState(0),[c,u]=m.useState([]),[d,h]=m.useState(!0),p=!!n&&(n.role==="student"||n.role==="admin"||n.role==="formador"),[f,b]=m.useState(!1),g="https://docs.google.com/forms/d/e/1FAIpQLSeQ4xFNiHQmqbBv0tJ3T6qfEPyjTc4zVNYyS_TEPHQqBzKChA/viewform",w=R=>{try{const O=new URL(R,window.location.origin);return O.host.includes("docs.google.com")&&O.pathname.includes("/forms/")?(O.searchParams.has("embedded")||O.searchParams.set("embedded","true"),O.toString()):R}catch{return R}},x=new URLSearchParams(window.location.search),v=x.get("from")==="programa",y=x.get("programa");m.useEffect(()=>{e&&j()},[e,n==null?void 0:n.id]);const j=async()=>{try{const{data:R,error:O}=await M.from("courses").select("id, title, summary").eq("slug",e).single();if(O)throw O;const{data:T,error:z}=await M.from("lessons").select("*").eq("course_id",R.id).order("sort_order");if(z)throw z;let I=[];if(n!=null&&n.id){const{data:L}=await M.from("lesson_progress").select("lesson_id, completed").eq("user_id",n.id);I=L||[]}const B=(T||[]).map((L,D)=>{const E=I.find(H=>H.lesson_id===L.id),k=(E==null?void 0:E.completed)||!1;let F=D===0;if(D>0){const H=T[D-1],P=I.find(q=>q.lesson_id===H.id);P!=null&&P.completed&&(H.has_assignment,F=!0)}return{...L,completed:k,unlocked:F}});a({...R,lessons:B});const $=B[0];if($){const{data:L}=await M.from("lesson_materials").select("*").eq("lesson_id",$.id).order("sort_order");u(L||[])}else u([])}catch(R){console.error("Error fetching course:",R),r({title:"Error",description:"No se pudo cargar el curso",variant:"destructive"})}finally{h(!1)}},S=R=>{var T;const O=(T=s==null?void 0:s.lessons)==null?void 0:T[R];O!=null&&O.unlocked&&(l(R),(async()=>{const{data:z}=await M.from("lesson_materials").select("*").eq("lesson_id",O.id).order("sort_order");u(z||[])})())},_=async()=>{var O,T,z,I,B;const R=(O=s==null?void 0:s.lessons)==null?void 0:O[o];if(!(!R||!(n!=null&&n.id)))try{const{error:$}=await M.from("lesson_progress").upsert({user_id:n.id,lesson_id:R.id,completed:!0},{onConflict:"user_id,lesson_id"});if($)throw $;if(r({title:"Leccin completada",description:`${R.title} marcada como completada`}),n!=null&&n.email)try{await wS({to:n.email,modulo:R.title,proximo:(z=(T=s==null?void 0:s.lessons)==null?void 0:T[o+1])==null?void 0:z.title,ctaUrl:s?`${window.location.origin}/ver-curso/${e}`:void 0})}catch{}if(s&&(n!=null&&n.email)){const L=((I=s.lessons)==null?void 0:I.length)||0,E=(((B=s.lessons)==null?void 0:B.filter(k=>k.completed).length)||0)+(R.completed?0:1);if(L>0&&E>=L)try{await hD({to:n.email,nombre:n.full_name,curso:s.title,ctaUrl:`${window.location.origin}/mi-formacion`}),await fD({to:n.email,curso:s.title,siguiente_programa:"Programa avanzado",ctaUrl:`${window.location.origin}/programas`})}catch{}}j()}catch{r({title:"Error",description:"No se pudo marcar la leccin como completada",variant:"destructive"})}},N=async()=>{var T;const R=(T=s==null?void 0:s.lessons)==null?void 0:T[o];if(window.open("https://www.dropbox.com/request/LlaRtF8KefIoXHjdg0Uo","_blank","noopener,noreferrer"),!(!R||!(n!=null&&n.id)))try{const z=new Date().toISOString(),{error:I}=await M.from("assignments").insert({user_id:n.id,lesson_id:R.id,status:"submitted",text_answer:"Entrega enviada por Dropbox",updated_at:z});if(I){const{error:B}=await M.from("assignments").update({status:"submitted",text_answer:"Entrega enviada por Dropbox",updated_at:z}).eq("user_id",n.id).eq("lesson_id",R.id);if(B)throw B}r({title:"Aviso enviado",description:"Se registr tu entrega."})}catch(z){console.error("Error registrando entrega:",z),r({title:"No se pudo registrar la entrega",description:(z==null?void 0:z.message)||"Permisos/RLS o conexin.",variant:"destructive"})}};if(d)return i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!s||!s.lessons||s.lessons.length===0)return i.jsxs("div",{className:"text-center py-12",children:[i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No hay lecciones disponibles"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Este curso an no tiene lecciones publicadas."}),i.jsx(V,{onClick:()=>{t(v&&y?`/programas/${y}`:"/mis-programas")},children:v?"Volver al Programa":"Volver a Mis Programas"})]});const C=s.lessons[o],A=s.lessons.filter(R=>R.completed).length;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>t("/mi-formacion"),children:[i.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Mi Formacin"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-foreground",children:s.title}),i.jsx("p",{className:"text-muted-foreground",children:s.summary})]})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[C.video_url?i.jsx(b3,{videoUrl:C.video_url,title:C.title}):i.jsx(K,{children:i.jsxs(Q,{className:"p-12 text-center",children:[i.jsx(ur,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Sin video disponible"}),i.jsx("p",{className:"text-muted-foreground",children:"Esta leccin no tiene video asignado"})]})}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsx("div",{children:i.jsx(we,{className:"text-lg",children:C.title})}),i.jsx("div",{className:"flex items-center gap-2",children:C.duration_minutes&&C.duration_minutes>0&&i.jsxs(Ee,{variant:"secondary",className:"gap-1",children:[i.jsx(Zr,{className:"h-3 w-3"}),C.duration_minutes," min"]})})]})}),i.jsxs(Q,{children:[C.description&&i.jsx("div",{className:"mb-4 prose dark:prose-invert max-w-none",children:i.jsx(yl,{children:C.description})}),c.length>0&&i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"h-4 w-4"}),i.jsx("span",{className:"font-medium",children:"Materiales"})]}),c.map(R=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[R.type==="file"?i.jsx(Un,{className:"h-4 w-4"}):i.jsx(Fp,{className:"h-4 w-4"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:R.title}),i.jsx(Ee,{variant:"secondary",className:"text-xs",children:R.type==="file"?"Archivo":"Enlace"})]})]}),i.jsx(V,{size:"sm",onClick:()=>{const O=R.type==="file"?R.file_url:R.url;O&&window.open(O,"_blank")},children:R.type==="file"?"Descargar":"Abrir"})]},R.id))]}),p&&(C.has_assignment||C.requires_admin_approval||!!C.approval_form_url)&&i.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[(C.requires_admin_approval||C.approval_form_url)&&i.jsx(V,{variant:"outline",onClick:()=>{const R=C.approval_form_url||g;window.open(R,"_blank","noopener,noreferrer")},children:"Completar formulario"}),i.jsx(V,{onClick:N,children:"Enviar trabajo prctico"})]}),(n==null?void 0:n.id)&&!C.completed&&!C.requires_admin_approval&&i.jsxs(V,{onClick:_,className:"gap-2",children:[i.jsx(Ei,{className:"h-4 w-4"}),"Marcar como Completada"]})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{className:"text-lg",children:"Lecciones del Curso"})}),i.jsx(Q,{className:"space-y-3",children:s.lessons.map((R,O)=>i.jsx("div",{className:`
                     p-3 rounded-lg border transition-colors
                     ${R.unlocked?O===o?"bg-accent/10 border-accent cursor-pointer":"hover:bg-muted/50 cursor-pointer":"opacity-50 cursor-not-allowed bg-muted/30"}
                   `,onClick:()=>S(O),children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`
                       h-8 w-8 rounded-lg flex items-center justify-center
                       ${R.unlocked?R.completed?"bg-green-100 text-green-600 dark:bg-green-900/20":"bg-accent/20 text-accent":"bg-gray-200 text-gray-400 dark:bg-gray-700 dark:text-gray-500"}
                     `,children:R.unlocked?R.completed?i.jsx(Ei,{className:"h-4 w-4"}):i.jsx(ur,{className:"h-4 w-4"}):i.jsx("span",{className:"text-xs",children:""})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-sm leading-tight",children:R.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[R.duration_minutes&&R.duration_minutes>0&&i.jsxs(Ee,{variant:"outline",className:"text-xs",children:[R.duration_minutes," min"]}),R.completed&&i.jsx(Ee,{variant:"outline",className:"text-xs text-green-600",children:"Completada"})]})]})]})},R.id))})]}),i.jsx(K,{children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"Progreso del Curso"}),i.jsx("div",{className:"w-full bg-muted rounded-full h-2 mb-2",children:i.jsx("div",{className:"bg-accent h-2 rounded-full",style:{width:`${A/s.lessons.length*100}%`}})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[A," de ",s.lessons.length," lecciones completadas"]})]})})})]})]}),i.jsx(St,{open:f,onOpenChange:b,children:i.jsxs(wt,{className:"max-w-3xl h-[80vh]",children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Formulario de entrega"})}),i.jsx("div",{className:"w-full h-full bg-white rounded-md overflow-hidden",children:i.jsx("iframe",{src:w(C.approval_form_url||g),className:"w-full h-full",style:{border:"0"}})})]})})]})}function Eu({open:e,onOpenChange:t,lessonId:n,lessonTitle:r}){const[s,a]=m.useState([]),[o,l]=m.useState({title:"",type:"link",url:"",file:null});m.useState(!1);const[c,u]=m.useState(!1),{toast:d}=Ve();m.useEffect(()=>{e&&h()},[e,n]);const h=async()=>{try{const{data:w,error:x}=await M.from("lesson_materials").select("*").eq("lesson_id",n).order("sort_order");if(x)throw x;a(w||[])}catch{d({title:"Error",description:"No se pudieron cargar los materiales",variant:"destructive"})}},p=async w=>{try{const x=w.name.split(".").pop(),y=`materials/${`${Math.random()}.${x}`}`,{error:j}=await M.storage.from("materials").upload(y,w);if(j)throw j;const{data:S}=M.storage.from("materials").getPublicUrl(y);return S.publicUrl}catch(x){return console.error("Error uploading file:",x),null}},f=async()=>{if(console.log("Trying to add material:",o),!o.title.trim()){d({title:"Error",description:"El ttulo es obligatorio",variant:"destructive"});return}if(o.type==="link"&&!o.url.trim()){d({title:"Error",description:"La URL es obligatoria para materiales de enlace",variant:"destructive"});return}if(o.type==="file"&&!o.file){d({title:"Error",description:"Selecciona un archivo",variant:"destructive"});return}u(!0);try{let w=null,x=null;if(o.type==="file"&&o.file){if(console.log("Uploading file:",o.file.name),w=await p(o.file),!w)throw new Error("Error uploading file");console.log("File uploaded successfully:",w)}else x=o.url.trim();const v={lesson_id:n,title:o.title.trim(),type:o.type,file_url:w,url:x,sort_order:s.length+1};console.log("Inserting material data:",v);const{error:y}=await M.from("lesson_materials").insert([v]);if(y)throw console.error("Database error inserting material:",y),y;console.log("Material inserted successfully"),await M.from("lessons").update({has_materials:!0}).eq("id",n),d({title:"Material agregado",description:"El material ha sido agregado exitosamente"}),l({title:"",type:"link",url:"",file:null}),h()}catch(w){console.error("Full error adding material:",w),d({title:"Error",description:`No se pudo agregar el material: ${w.message}`,variant:"destructive"})}finally{u(!1)}},b=async w=>{try{const{error:x}=await M.from("lesson_materials").delete().eq("id",w);if(x)throw x;s.filter(y=>y.id!==w).length===0&&await M.from("lessons").update({has_materials:!1}).eq("id",n),d({title:"Material eliminado",description:"El material ha sido eliminado"}),h()}catch{d({title:"Error",description:"No se pudo eliminar el material",variant:"destructive"})}},g=w=>w==="file"?i.jsx(Un,{className:"h-4 w-4"}):i.jsx(Fp,{className:"h-4 w-4"});return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[600px] max-h-[80vh] overflow-hidden flex flex-col",children:[i.jsx(kt,{children:i.jsxs(Ct,{children:["Materiales - ",r]})}),i.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden",children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4 space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Agregar Material"}),i.jsxs("div",{children:[i.jsx(X,{children:"Ttulo"}),i.jsx(ve,{value:o.title,onChange:w=>l({...o,title:w.target.value}),placeholder:"Nombre del material"})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Tipo"}),i.jsxs(ot,{value:o.type,onValueChange:w=>l({...o,type:w}),children:[i.jsx(nt,{children:i.jsx(lt,{})}),i.jsxs(rt,{children:[i.jsx(he,{value:"link",children:"Enlace URL"}),i.jsx(he,{value:"file",children:"Archivo"})]})]})]}),o.type==="link"?i.jsxs("div",{children:[i.jsx(X,{children:"URL"}),i.jsx(ve,{type:"url",value:o.url,onChange:w=>l({...o,url:w.target.value}),placeholder:"https://..."})]}):i.jsxs("div",{children:[i.jsx(X,{children:"Archivo"}),i.jsx(ve,{type:"file",onChange:w=>{var x;return l({...o,file:((x=w.target.files)==null?void 0:x[0])||null})},accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.mp4,.mp3"})]}),i.jsxs(V,{onClick:f,disabled:c,className:"w-full",children:[i.jsx(qn,{className:"h-4 w-4 mr-2"}),c?"Agregando...":"Agregar Material"]})]})}),i.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3",children:[i.jsxs("h3",{className:"font-medium",children:["Materiales existentes (",s.length,")"]}),s.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(Un,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay materiales en esta leccin"}),i.jsx("p",{className:"text-sm mt-2",children:"Agrega el primer material usando el formulario de arriba"})]}):s.map(w=>i.jsx(K,{children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[g(w.type),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:w.title}),i.jsx(Ee,{variant:"secondary",className:"text-xs",children:w.type==="file"?"Archivo":"Enlace"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[w.type==="link"&&w.url&&i.jsx(V,{size:"sm",variant:"outline",onClick:()=>window.open(w.url,"_blank"),children:"Abrir"}),w.type==="file"&&w.file_url&&i.jsx(V,{size:"sm",variant:"outline",onClick:()=>window.open(w.file_url,"_blank"),children:"Descargar"}),i.jsx(V,{size:"sm",variant:"destructive",onClick:()=>b(w.id),children:i.jsx(uP,{className:"h-4 w-4"})})]})]})})},w.id))]})]}),i.jsx("div",{className:"pt-4 border-t",children:i.jsx(V,{variant:"outline",onClick:()=>t(!1),className:"w-full",children:"Cerrar"})})]})})}function o5(){var _,N;const{slug:e}=Rl(),t=Gn(),{profile:n}=it(),{toast:r}=Ve(),[s,a]=m.useState(null),[o,l]=m.useState([]),[c,u]=m.useState(!0),[d,h]=m.useState(!1),[p,f]=m.useState(!1),[b,g]=m.useState(""),[w,x]=m.useState("");m.useState(!1);const[v,y]=m.useState(!1),j=(n==null?void 0:n.role)==="formador"||(n==null?void 0:n.role)==="admin";m.useEffect(()=>{e&&S()},[e]);const S=async()=>{var C,A;u(!0);try{const{data:R,error:O}=await M.from("lessons").select(`
          *,
          lesson_courses (
            courses (
              title,
              programs (title)
            )
          )
        `).eq("slug",e).maybeSingle();if(O)throw O;const T=(A=(C=R.lesson_courses)==null?void 0:C[0])==null?void 0:A.courses,z={...R,course:T?{title:T.title,program:T.programs}:null};a(z);const{data:I,error:B}=await M.from("lesson_materials").select("*").eq("lesson_id",R.id).order("sort_order");if(B?console.error("Error fetching materials:",B):console.log("Materials loaded for lesson:",R.title,I),l(I||[]),n&&(R!=null&&R.id)){const{data:$}=await M.from("assignments").select("id, status, file_url, text_answer").eq("user_id",n.id).eq("lesson_id",R.id).limit(1).maybeSingle();$?(y(!0),g($.file_url||""),x($.text_answer||"")):(y(!1),g(""),x(""))}}catch{r({title:"Error",description:"No se pudo cargar la leccin",variant:"destructive"}),t("/lecciones")}finally{u(!1)}};return c?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):s?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>t("/lecciones"),children:[i.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Lecciones"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:s.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"text-muted-foreground",children:(_=s.course)==null?void 0:_.title}),((N=s.course)==null?void 0:N.program)&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-muted-foreground",children:""}),i.jsx("span",{className:"text-muted-foreground",children:s.course.program.title})]})]})]})]}),j&&i.jsx("div",{className:"flex gap-2",children:i.jsxs(V,{onClick:()=>h(!0),variant:"outline",children:[i.jsx(Un,{className:"h-4 w-4 mr-2"}),"Materiales (",o.length,")"]})})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.video_url&&i.jsx(K,{children:i.jsx(Q,{className:"p-0",children:i.jsx("div",{className:"aspect-video",children:i.jsx("iframe",{src:s.video_url,title:s.title,className:"w-full h-full rounded-lg",allowFullScreen:!0})})})}),s.description&&i.jsxs("div",{children:[i.jsx(V,{onClick:()=>f(!0),className:"w-full",children:"Leer antes de ver la leccin"}),i.jsx(St,{open:p,onOpenChange:f,children:i.jsxs(wt,{className:"max-w-2xl",children:[i.jsxs(kt,{children:[i.jsx(Ct,{children:"Descripcin"}),i.jsx(ei,{children:"Lee atentamente antes de comenzar"})]}),i.jsx("div",{className:"prose dark:prose-invert max-w-none",children:i.jsx(yl,{children:s.description})})]})})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"h-5 w-5"}),"Materiales",j&&i.jsxs(V,{variant:"outline",size:"sm",onClick:()=>h(!0),className:"ml-auto",children:[i.jsx(gj,{className:"h-4 w-4 mr-2"}),"Gestionar Materiales"]})]})}),i.jsx(Q,{className:"space-y-3",children:o.length>0?o.map(C=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[C.type==="file"?i.jsx(Un,{className:"h-4 w-4"}):i.jsx(Fp,{className:"h-4 w-4"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:C.title}),i.jsx(Ee,{variant:"secondary",className:"text-xs",children:C.type==="file"?"Archivo":"Enlace"})]})]}),i.jsx(V,{size:"sm",onClick:()=>{const A=C.type==="file"?C.file_url:C.url;A&&window.open(A,"_blank")},children:C.type==="file"?"Descargar":"Abrir"})]},C.id)):i.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[i.jsx(Un,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"No hay materiales disponibles para esta leccin"}),j&&i.jsx("p",{className:"text-sm mt-2",children:'Usa el botn "Gestionar Materiales" para agregar contenido'})]})})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Informacin"})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("span",{className:"text-sm",children:["Duracin: ",s.duration_minutes," minutos"]})]}),s.has_assignment&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rn,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm",children:"Tiene entregable"})]}),(n==null?void 0:n.role)==="student"&&i.jsx("div",{className:"space-y-2 p-3 border rounded-md",children:i.jsx(V,{className:"w-full",onClick:()=>window.open("https://www.dropbox.com/request/LlaRtF8KefIoXHjdg0Uo","_blank"),children:"Enviar trabajo prctico (Dropbox)"})})]}),s.has_materials&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("span",{className:"text-sm",children:[o.length," material(es)"]})]})]})]})})]}),s&&i.jsx(Eu,{open:d,onOpenChange:C=>{h(C),C||S()},lessonId:s.id,lessonTitle:s.title})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx("p",{className:"text-destructive",children:"Leccin no encontrada"}),i.jsx(V,{onClick:()=>t("/lecciones"),className:"mt-4",children:"Volver a Lecciones"})]})}function l5(){const{id:e}=Rl(),t=Gn(),{profile:n}=it(),{toast:r}=Ve(),[s,a]=m.useState(""),[o,l]=m.useState(!1),[c,u]=m.useState({id:e||"1",title:" Bienvenidos al Foro de Geometra Sagrada!",content:"Este es el espacio de nuestra comunidad para compartir experiencias, hacer preguntas y aprender juntos sobre los misterios de la geometra sagrada. Sintanse libres de participar y compartir sus descubrimientos! ",author:"Carlos Mndez",authorRole:"teacher",createdAt:"2025-01-04T10:30:00Z",replies:[{id:"1",content:"Excelente iniciativa! Estoy muy emocionado por aprender de todos ustedes.",author:"Mara Lpez",authorRole:"student",createdAt:"2025-01-04T10:35:00Z"},{id:"2",content:"Gracias por crear este espacio, Profesor. Tengo muchas preguntas sobre los patrones fractales.",author:"Ana Garca",authorRole:"student",createdAt:"2025-01-04T10:40:00Z"}],likes:15,category:"Anuncios",isLiked:!1,pinned:!0}),d=()=>{u(g=>({...g,likes:g.isLiked?g.likes-1:g.likes+1,isLiked:!g.isLiked}))},h=async()=>{if(!s.trim()){r({title:"Error",description:"Por favor escribe una respuesta",variant:"destructive"});return}l(!0);try{const g={id:Date.now().toString(),content:s,author:(n==null?void 0:n.full_name)||(n==null?void 0:n.email)||"",authorRole:(n==null?void 0:n.role)||"student",createdAt:new Date().toISOString()};u(w=>({...w,replies:[...w.replies,g]})),a(""),r({title:"Respuesta enviada",description:"Tu respuesta ha sido publicada exitosamente"})}finally{l(!1)}},p=g=>new Date(g).toLocaleDateString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),f=g=>{switch(g){case"teacher":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"admin":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300";default:return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300"}},b=g=>{switch(g){case"teacher":return"Profesor";case"admin":return"Admin";default:return"Estudiante"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center gap-4 mb-6",children:i.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>t("/comunidad"),children:[i.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Volver al foro"]})}),i.jsx(K,{children:i.jsx(Q,{className:"p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx(ns,{className:"h-12 w-12",children:i.jsx(rs,{className:"bg-accent text-accent-foreground",children:c.author.split(" ").map(g=>g[0]).join("").toUpperCase()})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"flex items-start justify-between mb-2",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-foreground",children:c.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:c.author}),i.jsx(Ee,{className:f(c.authorRole),children:b(c.authorRole)}),i.jsx(Ee,{variant:"outline",children:c.category}),i.jsx("span",{className:"text-xs text-muted-foreground",children:p(c.createdAt)})]})]})}),i.jsx("p",{className:"text-foreground mb-4",children:c.content}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(V,{variant:"ghost",size:"sm",className:`gap-1 ${c.isLiked?"text-accent":""}`,onClick:d,children:[i.jsx(cP,{className:"h-4 w-4"}),c.likes]}),i.jsxs(V,{variant:"ghost",size:"sm",className:"gap-1",children:[i.jsx(Pi,{className:"h-4 w-4"}),c.replies.length," respuestas"]})]})]})]})})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h2",{className:"text-lg font-semibold text-foreground",children:["Respuestas (",c.replies.length,")"]}),c.replies.map(g=>i.jsx(K,{children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(ns,{className:"h-8 w-8",children:i.jsx(rs,{className:"bg-muted text-muted-foreground text-xs",children:g.author.split(" ").map(w=>w[0]).join("").toUpperCase()})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-foreground",children:g.author}),i.jsx(Ee,{className:f(g.authorRole),variant:"outline",children:b(g.authorRole)}),i.jsx("span",{className:"text-xs text-muted-foreground",children:p(g.createdAt)})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:g.content})]})]})})},g.id))]}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"Aadir respuesta"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(At,{placeholder:"Escribe tu respuesta...",rows:3,value:s,onChange:g=>a(g.target.value)}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(V,{onClick:h,disabled:o,className:"gap-2",children:[o?i.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}):i.jsx(pj,{className:"h-4 w-4"}),o?"Enviando...":"Responder"]})})]})]})})]})}function c5({open:e,onOpenChange:t,onSuccess:n,inline:r}){const[s,a]=m.useState(""),[o,l]=m.useState(""),[c,u]=m.useState(""),[d,h]=m.useState(""),[p,f]=m.useState(""),[b,g]=m.useState(""),[w,x]=m.useState(!1),[v,y]=m.useState(""),[j,S]=m.useState(!1),[_,N]=m.useState(""),[C,A]=m.useState("none"),[R,O]=m.useState(!1),[T,z]=m.useState([]),[I,B]=m.useState([]),[$,L]=m.useState(!1),[D,E]=m.useState(!1),[k,F]=m.useState(""),{toast:H}=Ve();m.useEffect(()=>{(r||e)&&P()},[e,r]),m.useEffect(()=>{d&&q()},[d]);const P=async()=>{const{data:U}=await M.from("courses").select(`
        id, 
        title,
        program:programs (title)
      `).order("title");z(U||[])},q=async()=>{if(!d){B([]);return}try{const{data:U,error:ce}=await M.from("lessons").select("id, title, sort_order").eq("course_id",d).order("sort_order");if(ce)throw ce;B(U||[])}catch{B([])}},de=U=>U.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),le=async(U,ce)=>{const ge=U||"leccion",{data:ne}=await M.from("lessons").select("slug").eq("course_id",ce).ilike("slug",`${ge}%`),me=new Set((ne||[]).map(Re=>Re.slug));if(!me.has(ge))return ge;let He=2;for(;me.has(`${ge}-${He}`);)He++;return`${ge}-${He}`},Y=U=>{a(U),u(de(U))},re=async U=>{if(U.preventDefault(),!s.trim()||!d){H({title:"Error",description:"Ttulo y curso son obligatorios",variant:"destructive"});return}L(!0);try{const ce=de(s.trim()),ge=await le(ce,d),{data:ne,error:me}=await M.from("lessons").insert([{title:s.trim(),description:o.trim()||null,slug:ge,course_id:d,video_url:p.trim()||null,duration_minutes:b?parseInt(b):0,has_assignment:w,assignment_instructions:w&&v.trim()||null,requires_admin_approval:j,approval_form_url:j&&_.trim()||null,prerequisite_lesson_id:C&&C!=="none"?C:null,has_materials:R,sort_order:I.length+1}]).select("id").single();if(me)throw me;H({title:"Leccin creada",description:`La leccin "${s}" ha sido creada exitosamente`}),R&&ne?(F(ne.id),E(!0)):(fe(),r||t&&t(!1),n())}catch(ce){H({title:"Error",description:ce.message||"No se pudo crear la leccin",variant:"destructive"})}finally{L(!1)}},fe=()=>{a(""),l(""),u(""),h(""),f(""),g(""),x(!1),y(""),S(!1),N(""),A(""),O(!1)},Z=()=>{E(!1),fe(),r||t&&t(!1),n()};return r?i.jsxs("div",{className:"w-full",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Nueva Leccin"}),i.jsxs("form",{onSubmit:re,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"course",children:"Curso"}),i.jsxs(ot,{value:d,onValueChange:h,disabled:$,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Seleccionar curso"})}),i.jsx(rt,{children:T.map(U=>{var ce;return i.jsxs(he,{value:U.id,children:[U.title,((ce=U.program)==null?void 0:ce.title)&&i.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",U.program.title,")"]})]},U.id)})})]})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Ttulo de la Leccin"}),i.jsx(ve,{id:"title",value:s,onChange:U=>Y(U.target.value),placeholder:"Ej: Los Nmeros Sagrados",disabled:$})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"description",children:"Descripcin (Markdown)"}),i.jsx(At,{id:"description",value:o,onChange:U=>l(U.target.value),placeholder:"Puedes usar negritas, listas, ttulos, enlaces, etc.",rows:6,disabled:$}),i.jsxs("div",{className:"mt-3 p-3 border rounded-md",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Vista previa"}),i.jsx("div",{className:"prose dark:prose-invert max-w-none text-sm",children:i.jsx(yl,{children:o||"*Sin contenido*"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"videoUrl",children:"URL del Video"}),i.jsx(ve,{id:"videoUrl",value:p,onChange:U=>f(U.target.value),placeholder:"https://vimeo.com/...",disabled:$})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"duration",children:"Duracin (minutos)"}),i.jsx(ve,{id:"duration",type:"number",value:b,onChange:U=>g(U.target.value),placeholder:"30",disabled:$})]})]}),I.length>0&&i.jsxs("div",{children:[i.jsx(X,{htmlFor:"prerequisite",children:"Leccin Prerequisito"}),i.jsxs(ot,{value:C,onValueChange:A,disabled:$,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Sin prerequisito"})}),i.jsxs(rt,{children:[i.jsx(he,{value:"none",children:"Sin prerequisito"}),I.map(U=>i.jsx(he,{value:U.id,children:U.title},U.id))]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(fn,{id:"hasAssignment",checked:w,onCheckedChange:U=>x(U),disabled:$}),i.jsx(X,{htmlFor:"hasAssignment",children:"Tiene tarea/entregable"})]}),w&&i.jsxs("div",{children:[i.jsx(X,{htmlFor:"assignmentInstructions",children:"Instrucciones de la Tarea"}),i.jsx(At,{id:"assignmentInstructions",value:v,onChange:U=>y(U.target.value),placeholder:"Instrucciones para el estudiante...",rows:3,disabled:$})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(fn,{id:"requiresApproval",checked:j,onCheckedChange:U=>S(U),disabled:$}),i.jsx(X,{htmlFor:"requiresApproval",children:"Requiere aprobacin del administrador"})]}),j&&i.jsxs("div",{children:[i.jsx(X,{htmlFor:"approvalFormUrl",children:"URL del Formulario de Aprobacin"}),i.jsx(ve,{id:"approvalFormUrl",value:_,onChange:U=>N(U.target.value),placeholder:"https://docs.google.com/forms/...",disabled:$})]}),i.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-muted/50",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(fn,{id:"hasMaterials",checked:R,onCheckedChange:U=>O(U),disabled:$}),i.jsx(X,{htmlFor:"hasMaterials",className:"text-sm font-medium",children:"Cargar materiales al crear la leccin"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Si marcas esta opcin, se abrir automticamente el dilogo para cargar materiales inmediatamente despus de crear la leccin."})]}),i.jsx("div",{className:"flex gap-2 pt-4",children:i.jsx(V,{type:"submit",disabled:$,className:"flex-1",children:$?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}),"Creando..."]}):"Crear Leccin"})})]}),D&&k&&i.jsx(Eu,{open:D,onOpenChange:Z,lessonId:k,lessonTitle:s})]}):i.jsx(St,{open:!!e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[i.jsxs(kt,{children:[i.jsx(Ct,{children:"Crear Nueva Leccin"}),i.jsx(ei,{children:"Completa los campos y previsualiza la descripcin en Markdown."})]}),i.jsxs("form",{onSubmit:re,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"course",children:"Curso"}),i.jsxs(ot,{value:d,onValueChange:h,disabled:$,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Seleccionar curso"})}),i.jsx(rt,{children:T.map(U=>i.jsxs(he,{value:U.id,children:[U.title,U.program&&i.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",U.program.title,")"]})]},U.id))})]})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Ttulo de la Leccin"}),i.jsx(ve,{id:"title",value:s,onChange:U=>Y(U.target.value),placeholder:"Ej: Los Nmeros Sagrados",disabled:$})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"description",children:"Descripcin (Markdown)"}),i.jsx(At,{id:"description",value:o,onChange:U=>l(U.target.value),placeholder:"Puedes usar negritas, listas, ttulos, enlaces, etc.",rows:6,disabled:$}),i.jsxs("div",{className:"mt-3 p-3 border rounded-md",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Vista previa"}),i.jsx("div",{className:"prose dark:prose-invert max-w-none text-sm",children:i.jsx(yl,{children:o||"*Sin contenido*"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"videoUrl",children:"URL del Video"}),i.jsx(ve,{id:"videoUrl",value:p,onChange:U=>f(U.target.value),placeholder:"https://vimeo.com/...",disabled:$})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"duration",children:"Duracin (minutos)"}),i.jsx(ve,{id:"duration",type:"number",value:b,onChange:U=>g(U.target.value),placeholder:"30",disabled:$})]})]}),I.length>0&&i.jsxs("div",{children:[i.jsx(X,{htmlFor:"prerequisite",children:"Leccin Prerequisito"}),i.jsxs(ot,{value:C,onValueChange:A,disabled:$,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Sin prerequisito"})}),i.jsxs(rt,{children:[i.jsx(he,{value:"",children:"Sin prerequisito"}),I.map(U=>i.jsx(he,{value:U.id,children:U.title},U.id))]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(fn,{id:"hasAssignment",checked:w,onCheckedChange:U=>x(U),disabled:$}),i.jsx(X,{htmlFor:"hasAssignment",children:"Tiene tarea/entregable"})]}),w&&i.jsxs("div",{children:[i.jsx(X,{htmlFor:"assignmentInstructions",children:"Instrucciones de la Tarea"}),i.jsx(At,{id:"assignmentInstructions",value:v,onChange:U=>y(U.target.value),placeholder:"Instrucciones para el estudiante...",rows:3,disabled:$})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(fn,{id:"requiresApproval",checked:j,onCheckedChange:U=>S(U),disabled:$}),i.jsx(X,{htmlFor:"requiresApproval",children:"Requiere aprobacin del administrador"})]}),i.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-muted/50",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(fn,{id:"hasMaterials",checked:R,onCheckedChange:U=>O(U),disabled:$}),i.jsx(X,{htmlFor:"hasMaterials",className:"text-sm font-medium",children:"Cargar materiales al crear la leccin"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Si marcas esta opcin, se abrir automticamente el dilogo para cargar materiales inmediatamente despus de crear la leccin."})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{type:"submit",disabled:$,className:"flex-1",children:$?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}),"Creando..."]}):"Crear Leccin"}),i.jsx(V,{type:"button",variant:"outline",onClick:()=>t&&t(!1),disabled:$,children:"Cancelar"})]})]}),D&&k&&i.jsx(Eu,{open:D,onOpenChange:Z,lessonId:k,lessonTitle:s})]})})}function u5({open:e,onOpenChange:t,onSuccess:n,lessonId:r}){const[s,a]=m.useState(""),[o,l]=m.useState(""),[c,u]=m.useState(""),[d,h]=m.useState([]),[p,f]=m.useState(""),[b,g]=m.useState(""),[w,x]=m.useState(!1),[v,y]=m.useState(""),[j,S]=m.useState(!1),[_,N]=m.useState("none"),[C,A]=m.useState(!1),[R,O]=m.useState([]),[T,z]=m.useState([]),[I,B]=m.useState(!1),{toast:$}=Ve();m.useEffect(()=>{e&&r&&(L(),E())},[e,r]),m.useEffect(()=>{d.length>0&&k()},[d]);const L=async()=>{var le;const{data:q,error:de}=await M.from("lessons").select("*").eq("id",r).single();if(de){$({title:"Error",description:"No se pudo cargar la leccin",variant:"destructive"});return}q&&(a(q.title||""),l(q.description||""),u(q.slug||""),f(q.video_url||""),g(((le=q.duration_minutes)==null?void 0:le.toString())||""),x(q.has_assignment||!1),y(q.assignment_instructions||""),S(q.requires_admin_approval||!1),N(q.prerequisite_lesson_id||"none"),A(q.has_materials||!1),D())},D=async()=>{const{data:q,error:de}=await M.from("lesson_courses").select("course_id").eq("lesson_id",r);if(de){h([]);return}const le=(q||[]).map(fe=>fe.course_id).filter(Boolean);if(le.length>0){h(le);return}const{data:Y,error:re}=await M.from("lessons").select("course_id").eq("id",r).maybeSingle();!re&&(Y!=null&&Y.course_id)?h([Y.course_id]):h([])},E=async()=>{const{data:q,error:de}=await M.from("courses").select(`
        id, 
        title,
        program_courses (
          programs (title)
        )
      `).order("title");if(de){O([]);return}const le=(q||[]).map(Y=>{var re,fe;return{id:Y.id,title:Y.title,program:(fe=(re=Y.program_courses)==null?void 0:re[0])!=null&&fe.programs?{title:Y.program_courses[0].programs.title}:void 0}});O(le)},k=async()=>{if(d.length===0)return;const{data:q}=await M.from("lessons").select(`
        id, 
        title, 
        sort_order,
        lesson_courses!inner (course_id)
      `).in("lesson_courses.course_id",d).neq("id",r).order("sort_order");z(q||[])},F=q=>q.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),H=q=>{a(q),u(F(q))},P=async q=>{if(q.preventDefault(),!s.trim()||!c.trim()){$({title:"Error",description:"Ttulo y slug son obligatorios",variant:"destructive"});return}if(d.length===0){$({title:"Error",description:"Selecciona al menos un curso (no se eliminarn relaciones existentes)",variant:"destructive"});return}B(!0);try{const{error:de}=await M.from("lessons").update({title:s.trim(),description:o.trim()||null,slug:c.trim(),video_url:p.trim()||null,duration_minutes:b?parseInt(b):0,has_assignment:w,assignment_instructions:w&&v.trim()||null,requires_admin_approval:j,prerequisite_lesson_id:_&&_!=="none"?_:null,has_materials:C}).eq("id",r);if(de)throw de;const{error:le}=await M.from("lesson_courses").delete().eq("lesson_id",r);if(le)throw le;if(d.length>0){const Y=d.map(fe=>({lesson_id:r,course_id:fe})),{error:re}=await M.from("lesson_courses").insert(Y);if(re)throw re}$({title:"Leccin actualizada",description:`La leccin "${s}" ha sido actualizada exitosamente`}),t(!1),n()}catch(de){$({title:"Error",description:de.message||"No se pudo actualizar la leccin",variant:"destructive"})}finally{B(!1)}};return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[i.jsxs(kt,{children:[i.jsx(Ct,{children:"Editar Leccin"}),i.jsx(ei,{children:"Edita los campos y previsualiza la descripcin en Markdown."})]}),i.jsxs("form",{onSubmit:P,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Cursos (selecciona uno o varios)"}),i.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto border rounded-md p-2",children:R.map(q=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:`course-${q.id}`,checked:d.includes(q.id),onChange:de=>{de.target.checked?h([...d,q.id]):h(d.filter(le=>le!==q.id))},disabled:I,className:"rounded"}),i.jsxs(X,{htmlFor:`course-${q.id}`,className:"text-sm",children:[q.title,q.program&&i.jsxs("span",{className:"text-muted-foreground",children:[" - ",q.program.title]})]})]},q.id))})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Ttulo de la Leccin"}),i.jsx(ve,{id:"title",value:s,onChange:q=>H(q.target.value),placeholder:"Ej: Los Nmeros Sagrados",disabled:I})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"slug",children:"Slug (URL)"}),i.jsx(ve,{id:"slug",value:c,onChange:q=>u(q.target.value),placeholder:"los-numeros-sagrados",disabled:I})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"description",children:"Descripcin (Markdown)"}),i.jsx(At,{id:"description",value:o,onChange:q=>l(q.target.value),placeholder:"Puedes usar negritas, listas, ttulos, enlaces, etc.",rows:6,disabled:I}),i.jsxs("div",{className:"mt-3 p-3 border rounded-md",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Vista previa"}),i.jsx("div",{className:"prose dark:prose-invert max-w-none text-sm",children:i.jsx(yl,{children:o||"*Sin contenido*"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"videoUrl",children:"URL del Video"}),i.jsx(ve,{id:"videoUrl",value:p,onChange:q=>f(q.target.value),placeholder:"https://vimeo.com/...",disabled:I})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"duration",children:"Duracin (minutos)"}),i.jsx(ve,{id:"duration",type:"number",value:b,onChange:q=>g(q.target.value),placeholder:"30",disabled:I})]})]}),T.length>0&&i.jsxs("div",{children:[i.jsx(X,{htmlFor:"prerequisite",children:"Leccin Prerequisito"}),i.jsxs(ot,{value:_,onValueChange:N,disabled:I,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Sin prerequisito"})}),i.jsxs(rt,{children:[i.jsx(he,{value:"none",children:"Sin prerequisito"}),T.map(q=>i.jsx(he,{value:q.id,children:q.title},q.id))]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(fn,{id:"hasAssignment",checked:w,onCheckedChange:q=>x(q),disabled:I}),i.jsx(X,{htmlFor:"hasAssignment",children:"Tiene tarea/entregable"})]}),w&&i.jsxs("div",{children:[i.jsx(X,{htmlFor:"assignmentInstructions",children:"Instrucciones de la Tarea"}),i.jsx(At,{id:"assignmentInstructions",value:v,onChange:q=>y(q.target.value),placeholder:"Instrucciones para el estudiante...",rows:3,disabled:I})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(fn,{id:"requiresApproval",checked:j,onCheckedChange:q=>S(q),disabled:I}),i.jsx(X,{htmlFor:"requiresApproval",children:"Requiere aprobacin del administrador"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(fn,{id:"hasMaterials",checked:C,onCheckedChange:q=>A(q),disabled:I}),i.jsx(X,{htmlFor:"hasMaterials",children:"Tiene materiales (PDFs, enlaces, etc.)"})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{type:"submit",disabled:I,className:"flex-1",children:I?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}),"Actualizando..."]}):"Actualizar Leccin"}),i.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:I,children:"Cancelar"})]})]})]})})}function d5(){const{profile:e}=it(),{toast:t}=Ve(),[n,r]=m.useState([]),[s,a]=m.useState(!0),[o,l]=m.useState(0),[c,u]=m.useState({});m.useState(!1);const[d,h]=m.useState(!1),[p,f]=m.useState(!1),[b,g]=m.useState(null),w=["teacher","profesor","admin","formador"].includes((e==null?void 0:e.role)||"");m.useEffect(()=>{w&&x()},[w]);const x=async()=>{var _,N,C,A;if(w){a(!0);try{const{data:R,error:O}=await M.from("lessons").select(`
          id,
          title,
          description,
          slug,
          duration_minutes,
          has_assignment,
          requires_admin_approval,
          courses:course_id (
            id,
            title,
            program:programs ( title )
          )
        `).order("sort_order");if(O)throw O;const T=[];for(const I of R||[]){const B=((_=I.courses)==null?void 0:_.id)||"sin-curso",$=((N=I.courses)==null?void 0:N.title)||"Sin curso asignado",L=((A=(C=I.courses)==null?void 0:C.program)==null?void 0:A.title)||"Sin programa",D={id:I.id,title:I.title,description:I.description,slug:I.slug,duration_minutes:I.duration_minutes,has_assignment:I.has_assignment,requires_admin_approval:I.requires_admin_approval,courses:{title:$,programs:{title:L}}};let E=T.find(k=>k.courseId===B);E||(E={courseId:B,courseTitle:$,programTitle:L,lessons:[]},T.push(E)),E.lessons.push(D)}r(T);const z=(R||[]).map(I=>I.id);if(z.length>0){const{count:I}=await M.from("assignments").select("*",{count:"exact",head:!0}).in("lesson_id",z).in("status",["submitted","reviewing"]);l(I||0)}else l(0)}catch(R){t({title:"Error",description:R.message||"No se pudieron cargar las lecciones",variant:"destructive"})}finally{a(!1)}}},v=(_,N)=>{t({title:`Abriendo leccin: ${N}`,description:"El reproductor de video se abrir prximamente"})},y=_=>{g(_),h(!0)},j=_=>{g(_),f(!0)},S=async(_,N)=>{if(confirm(`Ests seguro de que quieres eliminar la leccin "${N}"?`))try{const{error:C}=await M.from("lessons").delete().eq("id",_);if(C)throw C;t({title:"Leccin eliminada",description:`La leccin "${N}" ha sido eliminada exitosamente`}),x()}catch{t({title:"Error",description:"No se pudo eliminar la leccin",variant:"destructive"})}};return s?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):w?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Lecciones"}),i.jsx("p",{className:"text-muted-foreground",children:w?"Gestiona el contenido de las lecciones":"Explora las lecciones disponibles"})]})}),i.jsxs("div",{className:"space-y-6",children:[n.map(_=>i.jsxs(K,{children:[i.jsx(ye,{className:"cursor-pointer",onClick:()=>u(N=>({...N,[_.courseId]:!N[_.courseId]})),children:i.jsxs(we,{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-5 w-5 text-accent"}),i.jsxs("div",{children:[i.jsx("div",{children:_.courseTitle}),i.jsx("div",{className:"text-sm text-muted-foreground font-normal",children:_.programTitle})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[_.lessons.length," leccin(es)"]})]})}),i.jsx(Q,{children:c[_.courseId]&&i.jsx("div",{className:"space-y-4",children:_.lessons.map(N=>i.jsx(K,{children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-accent/20 to-accent/10 flex items-center justify-center",children:N.has_assignment?i.jsx(Un,{className:"h-6 w-6 text-accent"}):i.jsx(ur,{className:"h-6 w-6 text-accent"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-foreground mb-1",children:N.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:N.description||"Leccin de geometra sagrada"}),i.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[i.jsx(Ee,{children:"Publicado"}),N.requires_admin_approval&&i.jsx(Ee,{variant:"secondary",children:"Requiere Aprobacin"}),N.has_assignment&&i.jsx(Ee,{variant:"outline",children:"Con Tarea"}),N.duration_minutes&&i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(Zr,{className:"h-3 w-3"}),i.jsxs("span",{children:[N.duration_minutes," min"]})]})]}),i.jsx("div",{className:"flex gap-2",children:w?i.jsxs(i.Fragment,{children:[i.jsx(V,{size:"sm",variant:"outline",onClick:()=>y(N),children:"Editar"}),i.jsx(V,{size:"sm",variant:"outline",onClick:()=>j(N),children:"Materiales"}),i.jsx(V,{size:"sm",variant:"destructive",onClick:()=>S(N.id,N.title),children:"Eliminar"}),i.jsx(V,{size:"sm",onClick:()=>v(N.slug,N.title),children:"Ver"})]}):i.jsx(V,{size:"sm",onClick:()=>v(N.slug,N.title),children:"Ver Leccin"})})]})]})})},N.id))})})]},_.courseId)),w&&i.jsxs(K,{className:"border-dashed",children:[i.jsx(ye,{children:i.jsx(we,{children:"Crear Leccin"})}),i.jsx(Q,{className:"p-6",children:i.jsx(c5,{inline:!0,onSuccess:x})})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Total"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.reduce((_,N)=>_+N.lessons.length,0)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Lecciones"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Con Tareas"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.reduce((_,N)=>_+N.lessons.filter(C=>C.has_assignment).length,0)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Lecciones"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ei,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Pendientes de aprobacin"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:o}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Entregas"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Cursos"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Con lecciones"})]})})]}),b&&i.jsxs(i.Fragment,{children:[i.jsx(u5,{open:d,onOpenChange:h,onSuccess:x,lessonId:b.id}),i.jsx(Eu,{open:p,onOpenChange:f,lessonId:b.id,lessonTitle:b.title})]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Lecciones"}),i.jsx("p",{className:"text-muted-foreground",children:"Esta seccin es solo para docentes y administradores."})]})}function h5(){const{profile:e}=it(),{toast:t}=Ve(),n=Gn(),r=ig(),[s,a]=m.useState(""),[o,l]=m.useState("todos"),[c,u]=m.useState([]),[d,h]=m.useState(!0),[p,f]=m.useState(1),b=20,[g,w]=m.useState(0),[x,v]=m.useState(null),[y,j]=m.useState(!1),[S,_]=m.useState(""),[N,C]=m.useState("created_at"),[A,R]=m.useState("desc"),O=(e==null?void 0:e.role)==="formador"||(e==null?void 0:e.role)==="admin",T=(e==null?void 0:e.role)==="admin";m.useEffect(()=>{O&&z()},[O,o,s,p,N,A]);const z=async()=>{if(O){h(!0);try{const F=new URLSearchParams,H=o==="formador"?"teacher":o;F.set("role",H),s&&F.set("search",s),F.set("page",String(p)),F.set("pageSize",String(b)),F.set("sortBy",N),F.set("sortDir",A);try{const U=await(await fetch(`undefined/functions/v1/list-users?${F.toString()}`,{headers:{Authorization:"Bearer undefined"}})).json();if(U!=null&&U.success&&(U!=null&&U.data)){const ce=(U.data.users||[]).map(ge=>({id:ge.id,name:ge.full_name&&String(ge.full_name).trim()?ge.full_name:(ge.email||"").split("@")[0]||"Sin nombre",email:ge.email||"Sin email",role:ge.role==="teacher"?"formador":ge.role||"student",status:"active",enrolledPrograms:ge.program_enrollments??0,joinedAt:ge.created_at||new Date().toISOString(),lastSignInAt:ge.last_sign_in_at||null}));u(ce),w(U.data.total||ce.length),v(U.data.counts||null);return}}catch(Z){console.warn("list-users fallback:",Z)}const{data:P,error:q}=await M.rpc("get_users_with_emails");if(q)throw q;const de=Z=>o==="todos"?!0:(Z.role==="teacher"?"formador":Z.role)===o,le=Z=>s?(Z.full_name||"").toLowerCase().includes(s.toLowerCase())||(Z.email||"").toLowerCase().includes(s.toLowerCase()):!0,Y=(P||[]).filter(Z=>de(Z)&&le(Z));w(Y.length);const fe=Y.slice((p-1)*b,p*b).map(Z=>({id:Z.id,name:Z.full_name&&String(Z.full_name).trim()?Z.full_name:(Z.email||"").split("@")[0]||"Sin nombre",email:Z.email||"Sin email",role:Z.role==="teacher"?"formador":Z.role||"student",status:"active",enrolledPrograms:0,joinedAt:Z.created_at||new Date().toISOString(),lastSignInAt:null}));u(fe)}catch(F){console.error("Error fetching users:",F),t({title:"Error",description:"No se pudieron cargar los usuarios: "+(F.message||"Error desconocido"),variant:"destructive"})}finally{h(!1)}}},I=F=>{u(c.map(P=>P.id===F?{...P,status:P.status==="active"?"inactive":"active"}:P));const H=c.find(P=>P.id===F);t({title:`Usuario ${(H==null?void 0:H.status)==="active"?"desactivado":"activado"}`,description:`${H==null?void 0:H.name} ha sido ${(H==null?void 0:H.status)==="active"?"desactivado":"activado"} exitosamente`})},B=(F,H)=>{if(!T){t({title:"Sin permisos",description:"Solo los administradores pueden cambiar roles",variant:"destructive"});return}u(c.map(q=>q.id===F?{...q,role:H}:q));const P=c.find(q=>q.id===F);t({title:"Rol actualizado",description:`${P==null?void 0:P.name} ahora es ${H==="admin"?"administrador":H==="formador"?"formador":H==="voluntario"?"voluntario":"estudiante"}`})},$=c,L=F=>new Date(F).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"}),D=F=>{switch(F){case"formador":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"voluntario":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300";case"admin":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300";default:return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300"}},E=F=>{switch(F){case"formador":return"Formador";case"voluntario":return"Voluntario";case"admin":return"Admin";default:return"Estudiante"}},k=F=>{switch(F){case"formador":return i.jsx(Ir,{className:"h-3 w-3"});case"voluntario":return i.jsx(ko,{className:"h-3 w-3"});case"admin":return i.jsx(ov,{className:"h-3 w-3"});default:return i.jsx(rn,{className:"h-3 w-3"})}};return O?d?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Usuarios"}),i.jsx("p",{className:"text-muted-foreground",children:"Gestiona los usuarios y sus inscripciones"})]}),i.jsxs(V,{className:"gap-2",onClick:()=>n("/inscribir-usuario"),children:[i.jsx(rn,{className:"h-4 w-4"}),"Inscribir Usuario"]})]}),i.jsx(K,{children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Qu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(ve,{placeholder:"Buscar usuarios...",value:s,onChange:F=>a(F.target.value),className:"pl-10"})]}),i.jsxs(ot,{value:o,onValueChange:l,children:[i.jsx(nt,{className:"w-40",children:i.jsx(lt,{})}),i.jsxs(rt,{children:[i.jsx(he,{value:"todos",children:"Todos los roles"}),i.jsx(he,{value:"student",children:"Estudiante"}),i.jsx(he,{value:"formador",children:"Formadores"}),i.jsx(he,{value:"voluntario",children:"Voluntarios"}),i.jsx(he,{value:"admin",children:"Administradores"})]})]}),i.jsxs(ot,{value:N,onValueChange:F=>C(F),children:[i.jsx(nt,{className:"w-40",children:i.jsx(lt,{placeholder:"Ordenar por"})}),i.jsxs(rt,{children:[i.jsx(he,{value:"created_at",children:"Fecha de alta"}),i.jsx(he,{value:"name",children:"Nombre"}),i.jsx(he,{value:"email",children:"Email"})]})]}),i.jsxs(ot,{value:A,onValueChange:F=>R(F),children:[i.jsx(nt,{className:"w-32",children:i.jsx(lt,{placeholder:"Direccin"})}),i.jsxs(rt,{children:[i.jsx(he,{value:"desc",children:"Desc"}),i.jsx(he,{value:"asc",children:"Asc"})]})]}),i.jsx(V,{variant:"outline",onClick:async()=>{try{const F=new URLSearchParams,H=o==="formador"?"teacher":o;F.set("role",H),s&&F.set("search",s),F.set("all","true"),F.set("sortBy",N),F.set("sortDir",A);const q=await(await fetch(`undefined/functions/v1/list-users?${F.toString()}`,{headers:{Authorization:"Bearer undefined"}})).json();if(!(q!=null&&q.success))throw new Error((q==null?void 0:q.error)||"export_failed");const de=(q.data.users||[]).map(ce=>({id:ce.id,nombre:ce.full_name||"",email:ce.email||"",rol:ce.role,creado:ce.created_at||"",ultimo_acceso:ce.last_sign_in_at||"",programas:ce.program_enrollments??0})),le=["id","nombre","email","rol","creado","ultimo_acceso","programas"],Y=[le.join(",")].concat(de.map(ce=>le.map(ge=>`"${String(ce[ge]??"").replace(/"/g,'""')}"`).join(","))),re=new Blob([Y.join(`
`)],{type:"text/csv;charset=utf-8;"}),fe=URL.createObjectURL(re),Z=document.createElement("a"),U=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");Z.href=fe,Z.download=`usuarios-${U}.csv`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(fe)}catch{t({title:"Error",description:"No se pudo exportar CSV",variant:"destructive"})}},children:"Exportar CSV"})]})})}),i.jsxs("div",{className:"space-y-4",children:[$.map(F=>i.jsx(K,{children:i.jsx(Q,{className:"p-6",children:r?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"flex items-start justify-between",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-foreground text-lg",children:F.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:F.email}),F.lastSignInAt&&i.jsxs("p",{className:"text-xs text-muted-foreground",children:["ltimo acceso: ",L(F.lastSignInAt)]})]})}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsx(Ee,{className:D(F.role),children:i.jsxs("div",{className:"flex items-center gap-1",children:[k(F.role),E(F.role)]})}),i.jsx(Ee,{variant:F.status==="active"?"default":"secondary",children:F.status==="active"?"Activo":"Inactivo"}),i.jsxs(Ee,{variant:"secondary",children:["Programas: ",F.enrolledPrograms]}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:["Desde ",L(F.joinedAt)]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs(V,{variant:"outline",size:"sm",onClick:()=>{_(F.id),j(!0)},className:"w-full",children:[i.jsx(cv,{className:"h-4 w-4 mr-1"}),"Ver Perfil"]}),T&&i.jsxs(ot,{value:F.role,onValueChange:H=>B(F.id,H),children:[i.jsx(nt,{className:"w-full",children:i.jsx(lt,{})}),i.jsxs(rt,{children:[i.jsx(he,{value:"student",children:"Estudiante"}),i.jsx(he,{value:"formador",children:"Formador"}),i.jsx(he,{value:"voluntario",children:"Voluntario"}),i.jsx(he,{value:"admin",children:"Admin"})]})]}),i.jsx(V,{variant:F.status==="active"?"destructive":"default",size:"sm",onClick:()=>I(F.id),className:"w-full",children:F.status==="active"?i.jsxs(i.Fragment,{children:[i.jsx(uv,{className:"h-4 w-4 mr-1"}),"Desactivar"]}):i.jsxs(i.Fragment,{children:[i.jsx(ko,{className:"h-4 w-4 mr-1"}),"Activar"]})})]})]}):i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ns,{className:"h-12 w-12",children:i.jsx(rs,{className:"bg-accent text-accent-foreground",children:F.name.split(" ").map(H=>H[0]).join("").toUpperCase()})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-foreground",children:F.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:F.email}),F.lastSignInAt&&i.jsxs("p",{className:"text-xs text-muted-foreground",children:["ltimo acceso: ",L(F.lastSignInAt)]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Ee,{className:D(F.role),children:i.jsxs("div",{className:"flex items-center gap-1",children:[k(F.role),E(F.role)]})}),i.jsx(Ee,{variant:F.status==="active"?"default":"secondary",children:F.status==="active"?"Activo":"Inactivo"}),i.jsxs(Ee,{variant:"secondary",children:["Programas: ",F.enrolledPrograms]}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:["Desde ",L(F.joinedAt)]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(V,{variant:"outline",size:"sm",onClick:()=>{_(F.id),j(!0)},className:"mr-2",children:[i.jsx(cv,{className:"h-4 w-4 mr-1"}),"Ver Perfil"]}),T&&i.jsxs(ot,{value:F.role,onValueChange:H=>B(F.id,H),children:[i.jsx(nt,{className:"w-32",children:i.jsx(lt,{})}),i.jsxs(rt,{children:[i.jsx(he,{value:"student",children:"Estudiante"}),i.jsx(he,{value:"formador",children:"Formador"}),i.jsx(he,{value:"voluntario",children:"Voluntario"}),i.jsx(he,{value:"admin",children:"Admin"})]})]}),i.jsx(V,{variant:F.status==="active"?"destructive":"default",size:"sm",onClick:()=>I(F.id),children:F.status==="active"?i.jsxs(i.Fragment,{children:[i.jsx(uv,{className:"h-4 w-4 mr-1"}),"Desactivar"]}):i.jsxs(i.Fragment,{children:[i.jsx(ko,{className:"h-4 w-4 mr-1"}),"Activar"]})})]})]})})},F.id)),i.jsxs("div",{className:"flex items-center justify-between pt-2",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Pgina ",p," de ",Math.max(1,Math.ceil(g/b))]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(V,{variant:"outline",size:"sm",disabled:p<=1,onClick:()=>f(F=>Math.max(1,F-1)),children:"Anterior"}),i.jsx(V,{variant:"outline",size:"sm",disabled:p>=Math.ceil(g/b),onClick:()=>f(F=>F+1),children:"Siguiente"})]})]})]}),i.jsxs("div",{className:`grid gap-4 ${r?"grid-cols-2":"md:grid-cols-4"}`,children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rn,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Total"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:(x==null?void 0:x.total)??c.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Usuarios"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ko,{className:"h-4 w-4 text-green-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Activos"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:c.filter(F=>F.status==="active").length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Usuarios"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ir,{className:"h-4 w-4 text-blue-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Estudiantes"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:(x==null?void 0:x.student)??c.filter(F=>F.role==="student").length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Registrados"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ov,{className:"h-4 w-4 text-purple-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Staff"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:x?x.teacher+(x.admin??0):c.filter(F=>F.role==="formador"||F.role==="admin").length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Formadores/Admins"})]})})]}),S&&i.jsx(dN,{open:y,onOpenChange:j,userId:S})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(rn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-lg font-semibold text-foreground mb-2",children:"Acceso Restringido"}),i.jsx("p",{className:"text-muted-foreground",children:"No tienes permisos para ver esta seccin"})]})})}function f5(){const{programs:e}=fg(),{profile:t}=it(),[n,r]=m.useState([]);return m.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)){r([]);return}const{data:a}=await M.from("enrollments").select("program_id").eq("user_id",t.id).eq("status","active"),o=(a||[]).map(f=>f.program_id);let l=[];if(o.length>0){const{data:f}=await M.from("program_courses").select("courses (id, title, summary, slug, poster_2x3_url, wide_11x6_url, published_at)").in("program_id",o).order("program_id");l=f||[]}const c=l.map(f=>f.courses).filter(Boolean),{data:u}=await M.from("course_enrollments").select("courses (id, title, summary, slug, poster_2x3_url, wide_11x6_url, published_at)").eq("user_id",t.id).eq("status","active"),d=(u||[]).map(f=>f.courses).filter(Boolean),h=new Set((c||[]).map(f=>f.id)),p=(d||[]).filter(f=>f&&!h.has(f.id));r(p)})()},[t==null?void 0:t.id]),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Mi Formacin"}),i.jsx("p",{className:"text-muted-foreground",children:"Tus programas y cursos individuales"})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.map(s=>i.jsx(K,{className:"cursor-pointer hover:elev-3 hover:-translate-y-1 transition-all duration-300 glow-hover",children:i.jsxs(ar,{to:`/programas/${s.slug}`,children:[i.jsx("div",{className:"aspect-[2/3] bg-gradient-to-br from-accent/20 to-accent/10 rounded-t-lg flex items-center justify-center",children:s.poster_2x3_url?i.jsx("img",{src:s.poster_2x3_url,alt:s.title,className:"w-full h-full object-cover rounded-t-lg",loading:"lazy"}):i.jsx(qe,{className:"h-12 w-12 text-accent"})}),i.jsx(Q,{className:"p-4",children:i.jsx("h3",{className:"font-semibold text-foreground line-clamp-2",children:s.title})})]})},`program-${s.id}`)),n.map(s=>i.jsx(K,{className:"cursor-pointer hover:elev-3 hover:-translate-y-1 transition-all duration-300 glow-hover",children:i.jsxs(ar,{to:`/ver-curso/${s.slug}`,children:[i.jsx("div",{className:"aspect-[2/3] relative overflow-hidden rounded-t-lg",children:s.poster_2x3_url||s.wide_11x6_url?i.jsx("img",{src:s.poster_2x3_url||s.wide_11x6_url,alt:s.title,className:"w-full h-full object-cover",loading:"lazy"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/20 to-accent/10 flex items-center justify-center",children:i.jsx(qe,{className:"h-12 w-12 text-accent"})})}),i.jsx(Q,{className:"p-4",children:i.jsx("h3",{className:"font-semibold text-foreground line-clamp-2",children:s.title})})]})},`course-${s.id}`))]})]})}function m5({open:e,onOpenChange:t,onSuccess:n}){const[r,s]=m.useState(""),[a,o]=m.useState(""),[l,c]=m.useState(""),[u,d]=m.useState(""),[h,p]=m.useState(""),[f,b]=m.useState(""),[g,w]=m.useState("all"),[x,v]=m.useState(""),[y,j]=m.useState(!1),[S,_]=m.useState("campus"),[N,C]=m.useState(""),[A,R]=m.useState(""),[O,T]=m.useState([]),[z,I]=m.useState([]),{toast:B}=Ve(),{profile:$}=it();m.useEffect(()=>{(async()=>{const{data:E}=await M.from("programs").select("id, title").order("title");T(E||[]);const{data:k}=await M.from("courses").select("id, title").order("title");I(k||[])})()},[]);const L=()=>{s(""),o(""),c(""),d(""),p(""),b(""),w("all"),v(""),_("campus"),C(""),R("")},D=async E=>{if(E.preventDefault(),!!($!=null&&$.id)){if(S==="program"&&!N){B({title:"Falta seleccionar programa",description:"Eleg el programa destino",variant:"destructive"});return}if(S==="course"&&!A){B({title:"Falta seleccionar curso",description:"Eleg el curso destino",variant:"destructive"});return}j(!0);try{const k=new Date(`${l}T${u}:00.000Z`),F=new Date(`${h}T${f}:00.000Z`),H={title:r,description:a,start_at:k.toISOString(),end_at:F.toISOString(),visibility:g,meeting_url:x||null,created_by:$.id,target_scope:S,program_id:S==="program"&&N||null,course_id:S==="course"&&A||null},P={title:r,start_at:k.toISOString(),end_at:F.toISOString(),visibility:g,created_by:$.id};let q=!1,de=!1;try{const{error:le}=await M.from("events").insert(H);if(le)throw le;q=!0}catch(le){const Y=(le==null?void 0:le.message)||"";if(/column\s+"?(target_scope|program_id|course_id)"?\s+of relation\s+"?events"?/i.test(Y)){const{error:re}=await M.from("events").insert(P);if(re)throw re;q=!0,de=!0}else throw le}if(!q)throw new Error("unknown_error");B({title:"Evento creado exitosamente",description:`${de?"Guardado como evento de campus (falta migracin de eventos). ":""}Se ha enviado la notificacin a ${g==="all"?"usuarios":g==="students"?"estudiantes":"profesores"} (${S==="campus"?"todo el campus":S==="program"?"programa":"curso"})`}),L(),t(!1),n==null||n()}catch(k){const F=(k==null?void 0:k.message)||"";let H=F;/column\s+"?(target_scope|program_id|course_id|description|meeting_url)"?\s+of relation\s+"?events"?/i.test(F)?H="Hay que aplicar la migracin de eventos (target_scope/program_id/course_id).":/violates foreign key constraint/i.test(F)?H="El programa/curso seleccionado no existe. Actualiz la lista y volv a intentar.":/invalid input syntax for type uuid/i.test(F)&&(H="ID invlido para programa/curso. Eleg una opcin de la lista."),B({title:"Error al crear evento",description:H,variant:"destructive"})}finally{j(!1)}}};return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[500px]",children:[i.jsxs(kt,{children:[i.jsxs(Ct,{className:"flex items-center gap-2",children:[i.jsx(or,{className:"h-5 w-5"}),"Crear Evento"]}),i.jsx(ei,{children:"Crea un nuevo evento que ser notificado automticamente a los miembros del campus"})]}),i.jsxs("form",{onSubmit:D,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Ttulo del Evento"}),i.jsx(ve,{id:"title",value:r,onChange:E=>s(E.target.value),placeholder:"Ej: Clase magistral de Geometra Sagrada",required:!0})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"description",children:"Descripcin (opcional)"}),i.jsx(At,{id:"description",value:a,onChange:E=>o(E.target.value),placeholder:"Describe los detalles del evento...",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"start-date",children:"Fecha de Inicio"}),i.jsx(ve,{id:"start-date",type:"date",value:l,onChange:E=>c(E.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"start-time",children:"Hora de Inicio"}),i.jsx(ve,{id:"start-time",type:"time",value:u,onChange:E=>d(E.target.value),required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"end-date",children:"Fecha de Fin"}),i.jsx(ve,{id:"end-date",type:"date",value:h,onChange:E=>p(E.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"end-time",children:"Hora de Fin"}),i.jsx(ve,{id:"end-time",type:"time",value:f,onChange:E=>b(E.target.value),required:!0})]})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Destino del evento"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[i.jsx(V,{type:"button",variant:S==="campus"?"default":"outline",onClick:()=>_("campus"),children:"Campus"}),i.jsx(V,{type:"button",variant:S==="program"?"default":"outline",onClick:()=>_("program"),children:"Programa"}),i.jsx(V,{type:"button",variant:S==="course"?"default":"outline",onClick:()=>_("course"),children:"Curso"})]}),S==="program"&&i.jsxs("div",{className:"mt-3",children:[i.jsx(X,{children:"Seleccionar programa"}),i.jsxs(ot,{value:N,onValueChange:C,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Eleg un programa"})}),i.jsx(rt,{children:O.map(E=>i.jsx(he,{value:E.id,children:E.title},E.id))})]})]}),S==="course"&&i.jsxs("div",{className:"mt-3",children:[i.jsx(X,{children:"Seleccionar curso"}),i.jsxs(ot,{value:A,onValueChange:R,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Eleg un curso"})}),i.jsx(rt,{children:z.map(E=>i.jsx(he,{value:E.id,children:E.title},E.id))})]})]})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"meeting-url",children:"URL de Reunin (opcional)"}),i.jsx(ve,{id:"meeting-url",type:"url",value:x,onChange:E=>v(E.target.value),placeholder:"https://meet.google.com/xxx-xxxx-xxx"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"URL de la plataforma de videoconferencia (Zoom, Meet, Teams, etc.)"})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"visibility",children:"Visibilidad del Evento"}),i.jsxs(ot,{value:g,onValueChange:E=>w(E),children:[i.jsx(nt,{children:i.jsx(lt,{})}),i.jsxs(rt,{children:[i.jsx(he,{value:"all",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tP,{className:"h-4 w-4"}),"Todo el Campus"]})}),i.jsx(he,{value:"students",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ir,{className:"h-4 w-4"}),"Solo Estudiantes"]})}),i.jsx(he,{value:"teachers",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ko,{className:"h-4 w-4"}),"Solo Profesores"]})})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Las notificaciones se enviarn automticamente al grupo seleccionado"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:y,children:"Cancelar"}),i.jsx(V,{type:"submit",disabled:y,children:y?"Creando...":"Crear Evento"})]})]})]})})}const p5=()=>{const[e,t]=m.useState([]),[n,r]=m.useState(!0),[s,a]=m.useState(0),{user:o}=it(),l=async()=>{if(o){r(!0);try{const{data:d,error:h}=await M.from("event_notifications").select(`
          id,
          event_id,
          notification_type,
          read_at,
          created_at,
          events!inner (
            id,
            title,
            start_at,
            end_at,
            visibility
          )
        `).eq("user_id",o.id).order("created_at",{ascending:!1}).limit(50);if(h)throw h;const p=(d==null?void 0:d.map(f=>({id:f.id,event_id:f.event_id,notification_type:f.notification_type,read_at:f.read_at,created_at:f.created_at,event:Array.isArray(f.events)?f.events[0]:f.events})))||[];t(p),a(p.filter(f=>!f.read_at).length)}catch(d){console.error("Error fetching notifications:",d)}finally{r(!1)}}},c=async d=>{try{const{error:h}=await M.from("event_notifications").update({read_at:new Date().toISOString()}).eq("id",d);if(h)throw h;t(p=>p.map(f=>f.id===d?{...f,read_at:new Date().toISOString()}:f)),a(p=>Math.max(0,p-1))}catch(h){console.error("Error marking notification as read:",h)}},u=async()=>{if(o)try{const{error:d}=await M.from("event_notifications").update({read_at:new Date().toISOString()}).eq("user_id",o.id).is("read_at",null);if(d)throw d;t(h=>h.map(p=>({...p,read_at:p.read_at||new Date().toISOString()}))),a(0)}catch(d){console.error("Error marking all notifications as read:",d)}};return m.useEffect(()=>{l()},[o]),m.useEffect(()=>{if(!o)return;const d=M.channel("event-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"event_notifications",filter:`user_id=eq.${o.id}`},()=>{l()}).subscribe();return()=>{M.removeChannel(d)}},[o]),{notifications:e,loading:n,unreadCount:s,markAsRead:c,markAllAsRead:u,refetch:l}};function g5(){const{profile:e}=it(),{toast:t}=Ve(),[n,r]=m.useState([]),[s,a]=m.useState(!0),[o,l]=m.useState(!1),{notifications:c,unreadCount:u,markAsRead:d}=p5(),[h,p]=m.useState(!1),[f,b]=m.useState(null),g=(e==null?void 0:e.role)==="formador"||(e==null?void 0:e.role)==="admin",w=async()=>{a(!0);try{let N=null,C=null;try{const A=new Date;A.setHours(0,0,0,0);const{data:R,error:O}=await M.from("events").select("*").gte("end_at",A.toISOString()).order("start_at",{ascending:!0});N=R,C=O}catch(A){C=A}if(C){const{data:A}=await M.from("events").select("*");r(A||[])}else r(N||[])}catch{t({title:"Error",description:"No se pudieron cargar los eventos",variant:"destructive"})}finally{a(!1)}};m.useEffect(()=>{w()},[]);const x=()=>{l(!0)},v=N=>new Date(N).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"}),y=N=>new Date(N).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),j=N=>{switch(N){case"students":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";case"teachers":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";default:return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300"}},S=N=>{switch(N){case"students":return"Estudiantes";case"teachers":return"Profesores";default:return"Todos"}},_=N=>{if(!N)return null;const C=N.match(/https?:\/\/[^\s]+/i);return C?C[0]:null};return s?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Calendario"}),i.jsx("p",{className:"text-muted-foreground",children:g?"Gestiona eventos y fechas importantes":"Consulta eventos y fechas importantes"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[u>0&&i.jsxs(V,{variant:"outline",size:"sm",className:"gap-2",children:[i.jsx(X2,{className:"h-4 w-4"}),u," nuevas notificaciones"]}),g&&i.jsxs(V,{className:"gap-2",onClick:x,children:[i.jsx(qn,{className:"h-4 w-4"}),"Nuevo Evento"]})]})]}),c.length>0&&i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(Uf,{className:"h-5 w-5"}),"Notificaciones de Eventos"]})}),i.jsx(Q,{className:"space-y-2",children:c.slice(0,3).map(N=>i.jsx("div",{className:`p-3 rounded-lg border ${N.read_at?"bg-muted/30":"bg-accent/10 border-accent/30"}`,onClick:()=>!N.read_at&&d(N.id),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:N.event.title}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[v(N.event.start_at)," a las ",y(N.event.start_at)]})]}),!N.read_at&&i.jsx("div",{className:"w-2 h-2 bg-accent rounded-full"})]})},N.id))})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Prximos Eventos"})}),i.jsx(Q,{className:"space-y-4",children:n.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(or,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay eventos programados"}),g&&i.jsx("p",{className:"text-sm mt-2",children:'Crea tu primer evento usando el botn "Nuevo Evento"'})]}):n.slice(0,5).map(N=>i.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border bg-surface/50 cursor-pointer",onClick:()=>{b(N),p(!0)},children:[i.jsx("div",{className:"h-10 w-10 rounded-lg bg-accent/20 flex items-center justify-center",children:i.jsx(or,{className:"h-4 w-4 text-accent"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-sm",children:N.title}),N.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:N.description}),i.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[i.jsx(Zr,{className:"h-3 w-3"}),i.jsxs("span",{children:[v(N.start_at)," - ",y(N.start_at)]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Ee,{className:j(N.visibility),children:S(N.visibility)}),N.meeting_url&&i.jsx(V,{size:"sm",className:"h-6 px-2 text-xs",onClick:C=>{C.preventDefault(),C.stopPropagation(),window.open(N.meeting_url,"_blank")},children:"Ingresar"}),!N.meeting_url&&_(N.description)&&i.jsx(V,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs",onClick:C=>{C.preventDefault(),C.stopPropagation();const A=_(N.description);window.open(A,"_blank")},children:"Abrir enlace"})]})]})]},N.id))})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(or,{className:"h-5 w-5 text-accent"}),new Date().toLocaleDateString("es-ES",{month:"long",year:"numeric"})]})}),i.jsxs(Q,{children:[i.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Dom","Lun","Mar","Mi","Jue","Vie","Sb"].map(N=>i.jsx("div",{className:"p-2 text-center text-sm font-medium text-muted-foreground",children:N},N))}),i.jsx("div",{className:"grid grid-cols-7 gap-2",children:(()=>{const N=new Date,C=N.getFullYear(),A=N.getMonth(),O=new Date(C,A,1).getDay(),T=new Date(C,A+1,0).getDate(),z=42,I=[];for(let L=0;L<O;L++)I.push(null);for(let L=1;L<=T;L++)I.push(L);for(;I.length<z;)I.push(null);const B=L=>L===N.getDate(),$=L=>n.some(D=>{const E=new Date(D.start_at);return E.getFullYear()===C&&E.getMonth()===A&&E.getDate()===L});return I.map((L,D)=>{const E=L!==null,k=L?$(L):!1,F=L?B(L):!1;return i.jsxs("div",{className:`
                        p-2 h-10 text-center text-sm rounded-lg
                        ${E?"text-foreground":"text-muted-foreground"}
                        ${E?"hover:bg-muted/40":""}
                        ${F?"ring-1 ring-accent":""}
                        ${k?"bg-red-500/10 ring-1 ring-red-400":""}
                      `,children:[E?L:"",k&&i.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mx-auto mt-1"})]},D)})})()})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(or,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Total"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Eventos"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rn,{className:"h-4 w-4 text-green-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Campus"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.filter(N=>N.visibility==="all").length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Para todos"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rn,{className:"h-4 w-4 text-blue-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Estudiantes"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.filter(N=>N.visibility==="students").length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Solo estudiantes"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uf,{className:"h-4 w-4 text-purple-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Notificaciones"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:u}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Sin leer"})]})})]}),i.jsx(m5,{open:o,onOpenChange:l,onSuccess:w}),i.jsx(St,{open:h,onOpenChange:p,children:i.jsxs(wt,{children:[i.jsx(kt,{children:i.jsx(Ct,{children:f==null?void 0:f.title})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-sm text-muted-foreground",children:[v((f==null?void 0:f.start_at)||"")," ",f&&""," ",y((f==null?void 0:f.start_at)||"")]}),(f==null?void 0:f.description)&&i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:f.description}),((f==null?void 0:f.meeting_url)||_(f==null?void 0:f.description))&&i.jsx("div",{className:"pt-2",children:i.jsx(V,{onClick:()=>window.open((f==null?void 0:f.meeting_url)||_(f==null?void 0:f.description),"_blank"),children:"Abrir enlace"})})]})]})})]})}function Dt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function x5(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const wc=43200,ow=1440;let v5={};function y5(){return v5}function lw(e){const t=Dt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function zc(e,t){const n=Dt(e),r=Dt(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function w5(e){return x5(e,Date.now())}function b5(e,t){const n=Dt(e),r=Dt(t),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}function j5(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function _5(e,t){return+Dt(e)-+Dt(t)}function S5(e){const t=Dt(e);return t.setHours(23,59,59,999),t}function N5(e){const t=Dt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function k5(e){const t=Dt(e);return+S5(t)==+N5(t)}function C5(e,t){const n=Dt(e),r=Dt(t),s=zc(n,r),a=Math.abs(b5(n,r));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);let l=zc(n,r)===-s;k5(Dt(e))&&a===1&&zc(e,r)===1&&(l=!1),o=s*(a-Number(l))}return o===0?0:o}function E5(e,t,n){const r=_5(e,t)/1e3;return j5(n==null?void 0:n.roundingMethod)(r)}const P5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},T5=(e,t,n)=>{let r;const s=P5[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ba(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const R5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},A5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},I5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},O5={date:ba({formats:R5,defaultWidth:"full"}),time:ba({formats:A5,defaultWidth:"full"}),dateTime:ba({formats:I5,defaultWidth:"full"})},L5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},M5=(e,t,n,r)=>L5[e];function Er(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const D5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},F5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},z5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},U5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},B5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},V5=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},q5={ordinalNumber:V5,era:Er({values:D5,defaultWidth:"wide"}),quarter:Er({values:F5,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Er({values:$5,defaultWidth:"wide"}),day:Er({values:z5,defaultWidth:"wide"}),dayPeriod:Er({values:U5,defaultWidth:"wide",formattingValues:B5,defaultFormattingWidth:"wide"})};function Pr(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const o=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?H5(l,h=>h.test(o)):W5(l,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function W5(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function H5(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function vk(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const G5=/^(\d+)(th|st|nd|rd)?/i,K5=/\d+/i,Q5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Y5={any:[/^b/i,/^(a|c)/i]},X5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},J5={any:[/1/i,/2/i,/3/i,/4/i]},Z5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},e6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},t6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},n6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},r6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},s6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},i6={ordinalNumber:vk({matchPattern:G5,parsePattern:K5,valueCallback:e=>parseInt(e,10)}),era:Pr({matchPatterns:Q5,defaultMatchWidth:"wide",parsePatterns:Y5,defaultParseWidth:"any"}),quarter:Pr({matchPatterns:X5,defaultMatchWidth:"wide",parsePatterns:J5,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Pr({matchPatterns:Z5,defaultMatchWidth:"wide",parsePatterns:e6,defaultParseWidth:"any"}),day:Pr({matchPatterns:t6,defaultMatchWidth:"wide",parsePatterns:n6,defaultParseWidth:"any"}),dayPeriod:Pr({matchPatterns:r6,defaultMatchWidth:"any",parsePatterns:s6,defaultParseWidth:"any"})},a6={code:"en-US",formatDistance:T5,formatLong:O5,formatRelative:M5,localize:q5,match:i6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function o6(e,t,n){const r=y5(),s=(n==null?void 0:n.locale)??r.locale??a6,a=2520,o=zc(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let c,u;o>0?(c=Dt(t),u=Dt(e)):(c=Dt(e),u=Dt(t));const d=E5(u,c),h=(lw(u)-lw(c))/1e3,p=Math.round((d-h)/60);let f;if(p<2)return n!=null&&n.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,l):d<10?s.formatDistance("lessThanXSeconds",10,l):d<20?s.formatDistance("lessThanXSeconds",20,l):d<40?s.formatDistance("halfAMinute",0,l):d<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):p===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",p,l);if(p<45)return s.formatDistance("xMinutes",p,l);if(p<90)return s.formatDistance("aboutXHours",1,l);if(p<ow){const b=Math.round(p/60);return s.formatDistance("aboutXHours",b,l)}else{if(p<a)return s.formatDistance("xDays",1,l);if(p<wc){const b=Math.round(p/ow);return s.formatDistance("xDays",b,l)}else if(p<wc*2)return f=Math.round(p/wc),s.formatDistance("aboutXMonths",f,l)}if(f=C5(u,c),f<12){const b=Math.round(p/wc);return s.formatDistance("xMonths",b,l)}else{const b=f%12,g=Math.trunc(f/12);return b<3?s.formatDistance("aboutXYears",g,l):b<9?s.formatDistance("overXYears",g,l):s.formatDistance("almostXYears",g+1,l)}}function l6(e,t){return o6(e,w5(e),t)}const c6={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},u6=(e,t,n)=>{let r;const s=c6[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},d6={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},h6={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},f6={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},m6={date:ba({formats:d6,defaultWidth:"full"}),time:ba({formats:h6,defaultWidth:"full"}),dateTime:ba({formats:f6,defaultWidth:"full"})},p6={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},g6={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},x6=(e,t,n,r)=>t.getHours()!==1?g6[e]:p6[e],v6={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},y6={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},w6={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},b6={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},j6={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},_6={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},S6=(e,t)=>Number(e)+"",N6={ordinalNumber:S6,era:Er({values:v6,defaultWidth:"wide"}),quarter:Er({values:y6,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:Er({values:w6,defaultWidth:"wide"}),day:Er({values:b6,defaultWidth:"wide"}),dayPeriod:Er({values:j6,defaultWidth:"wide",formattingValues:_6,defaultFormattingWidth:"wide"})},k6=/^(\d+)()?/i,C6=/\d+/i,E6={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},P6={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},T6={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},R6={any:[/1/i,/2/i,/3/i,/4/i]},A6={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},I6={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},O6={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},L6={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},M6={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},D6={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},F6={ordinalNumber:vk({matchPattern:k6,parsePattern:C6,valueCallback:function(e){return parseInt(e,10)}}),era:Pr({matchPatterns:E6,defaultMatchWidth:"wide",parsePatterns:P6,defaultParseWidth:"any"}),quarter:Pr({matchPatterns:T6,defaultMatchWidth:"wide",parsePatterns:R6,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Pr({matchPatterns:A6,defaultMatchWidth:"wide",parsePatterns:I6,defaultParseWidth:"any"}),day:Pr({matchPatterns:O6,defaultMatchWidth:"wide",parsePatterns:L6,defaultParseWidth:"any"}),dayPeriod:Pr({matchPatterns:M6,defaultMatchWidth:"any",parsePatterns:D6,defaultParseWidth:"any"})},$6={code:"es",formatDistance:u6,formatLong:m6,formatRelative:x6,localize:N6,match:F6,options:{weekStartsOn:1,firstWeekContainsDate:1}};function z6(){var D;const{user:e,profile:t}=it(),{toast:n}=Ve(),[r,s]=m.useState([]),[a,o]=m.useState([]),[l,c]=m.useState([]),[u,d]=m.useState(!0),[h,p]=m.useState(""),[f,b]=m.useState("todos"),[g,w]=m.useState(null),[x,v]=m.useState(!1),[y,j]=m.useState(!1),[S,_]=m.useState({title:"",content:"",category:"",forum_id:""}),[N,C]=m.useState({name:"",description:"",program_id:""}),A=(t==null?void 0:t.role)==="formador"||(t==null?void 0:t.role)==="admin";m.useEffect(()=>{R(),O(),T()},[]);const R=async()=>{d(!0);try{const{data:E,error:k}=await M.from("forum_posts").select(`
          id,
          title,
          content,
          category,
          pinned,
          created_at,
          author_id,
          forum_id
        `).order("pinned",{ascending:!1}).order("created_at",{ascending:!1});if(k)throw k;s(E||[])}catch{n({title:"Error",description:"No se pudieron cargar las publicaciones",variant:"destructive"})}finally{d(!1)}},O=async()=>{const{data:E}=await M.from("forums").select(`
        id,
        name,
        description,
        program_id,
        programs (title)
      `).order("name");o(E||[])},T=async()=>{const{data:E}=await M.from("programs").select("id, title").not("published_at","is",null).order("title");c(E||[])},z=async()=>{var E;if(console.log("Trying to create post:",S),console.log("User:",e),!S.title.trim()||!S.content.trim()){n({title:"Error",description:"Ttulo y contenido son obligatorios",variant:"destructive"});return}if(!e){n({title:"Error",description:"Debes estar autenticado para crear una publicacin",variant:"destructive"});return}try{const k={title:S.title.trim(),content:S.content.trim(),category:S.category||null,forum_id:S.forum_id==="none"?null:S.forum_id||null,author_id:e.id,pinned:!1};console.log("Inserting post data:",k);const{data:F,error:H}=await M.from("forum_posts").insert([k]).select("*");if(H)throw console.error("Error creating post:",H),H;console.log("Post created successfully:",F);const P=S.forum_id?(E=a.find(q=>q.id===S.forum_id))==null?void 0:E.name:null;n({title:"Publicacin creada",description:P?`Tu publicacin en "${P}" ha sido creada`:"Tu publicacin ha sido creada exitosamente"}),_({title:"",content:"",category:"",forum_id:""}),v(!1),R()}catch(k){console.error("Full error:",k),n({title:"Error",description:`No se pudo crear la publicacin: ${k.message}`,variant:"destructive"})}},I=async()=>{if(!N.name.trim()||!N.program_id){n({title:"Error",description:"Nombre del foro y programa son obligatorios",variant:"destructive"});return}try{const{error:E}=await M.from("forums").insert([{name:N.name.trim(),description:N.description.trim()||null,program_id:N.program_id}]);if(E)throw E;n({title:"Foro creado",description:`El foro "${N.name}" ha sido creado exitosamente`}),C({name:"",description:"",program_id:""}),j(!1),O()}catch(E){n({title:"Error",description:`No se pudo crear el foro: ${E.message}`,variant:"destructive"})}},B=async E=>{if(e)try{const{data:k}=await M.from("forum_post_likes").select("id").eq("post_id",E).eq("user_id",e.id).single();k?await M.from("forum_post_likes").delete().eq("id",k.id):await M.from("forum_post_likes").insert([{post_id:E,user_id:e.id}]),R()}catch{n({title:"Error",description:"No se pudo actualizar el like",variant:"destructive"})}},$=r.filter(E=>{const k=E.title.toLowerCase().includes(h.toLowerCase())||E.content.toLowerCase().includes(h.toLowerCase()),F=f==="todos"||E.category===f,H=!g||E.forum_id===g;return k&&F&&H}),L=E=>l6(new Date(E),{addSuffix:!0,locale:$6});return u?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Comunidad"}),i.jsx("p",{className:"text-muted-foreground",children:"Conecta con otros estudiantes y profesores"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(St,{open:y,onOpenChange:j,children:i.jsxs(wt,{children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Crear Nuevo Foro"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"forumName",children:"Nombre del Foro"}),i.jsx(ve,{id:"forumName",value:N.name,onChange:E=>C({...N,name:E.target.value}),placeholder:"Nombre del foro"})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"forumDescription",children:"Descripcin"}),i.jsx(At,{id:"forumDescription",value:N.description,onChange:E=>C({...N,description:E.target.value}),placeholder:"Descripcin del foro",rows:3})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"forumProgram",children:"Programa"}),i.jsxs(ot,{value:N.program_id,onValueChange:E=>C({...N,program_id:E}),children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Seleccionar programa"})}),i.jsx(rt,{children:l.map(E=>i.jsx(he,{value:E.id,children:E.title},E.id))})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(V,{onClick:I,className:"flex-1",children:"Crear Foro"}),i.jsx(V,{variant:"outline",onClick:()=>j(!1),children:"Cancelar"})]})]})]})}),i.jsxs(St,{open:x,onOpenChange:v,children:[i.jsx(MM,{asChild:!0,children:i.jsxs(V,{className:"gap-2",children:[i.jsx(qn,{className:"h-4 w-4"}),"Nueva Publicacin"]})}),i.jsxs(wt,{className:"sm:max-w-[600px]",children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Crear Nueva Publicacin"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Ttulo"}),i.jsx(ve,{id:"title",value:S.title,onChange:E=>_({...S,title:E.target.value}),placeholder:"Ttulo de tu publicacin"})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"category",children:"Categora"}),i.jsxs(ot,{value:S.category,onValueChange:E=>_({...S,category:E}),children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Seleccionar categora"})}),i.jsxs(rt,{children:[i.jsx(he,{value:"general",children:"General"}),i.jsx(he,{value:"pregunta",children:"Pregunta"}),i.jsx(he,{value:"discusion",children:"Discusin"}),i.jsx(he,{value:"anuncio",children:"Anuncio"})]})]})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"forum",children:"Foro"}),i.jsxs(ot,{value:S.forum_id,onValueChange:E=>_({...S,forum_id:E}),children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"En qu foro quieres publicar?"})}),i.jsxs(rt,{children:[i.jsx(he,{value:"none",children:"General (sin foro especfico)"}),a.map(E=>{var k;return i.jsxs(he,{value:E.id,children:[E.name," - ",(k=E.program)==null?void 0:k.title]},E.id)})]})]})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"content",children:"Contenido"}),i.jsx(At,{id:"content",value:S.content,onChange:E=>_({...S,content:E.target.value}),placeholder:"Comparte tus ideas, preguntas o comentarios...",rows:5})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(V,{onClick:z,className:"flex-1",children:"Publicar"}),i.jsx(V,{variant:"outline",onClick:()=>v(!1),children:"Cancelar"})]})]})]})]})]})]}),A&&i.jsx(K,{className:"border-2 border-dashed border-muted-foreground/25",children:i.jsxs(Q,{className:"p-6 text-center",children:[i.jsx(Pi,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Crear Nuevo Foro"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Crea un espacio de discusin para un programa especfico"}),i.jsxs(V,{onClick:()=>j(!0),className:"gap-2",children:[i.jsx(qn,{className:"h-4 w-4"}),"Crear Foro"]})]})}),a.length>0&&i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Foros Activos"}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(E=>{var F;const k=r.filter(H=>H.forum_id===E.id);return i.jsx(K,{className:`border hover:shadow-md transition-all cursor-pointer ${g===E.id?"border-accent bg-accent/5":""}`,children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h4",{className:"font-semibold text-foreground",children:E.name}),i.jsxs(Ee,{variant:"secondary",className:"text-xs",children:[k.length," posts"]})]}),E.description&&i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:E.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Ee,{variant:"outline",className:"text-xs",children:(F=E.program)==null?void 0:F.title}),i.jsx(V,{size:"sm",variant:g===E.id?"default":"ghost",className:"text-xs",onClick:()=>{g===E.id?(w(null),n({title:"Vista general",description:"Mostrando todas las publicaciones"})):(w(E.id),p(""),b("todos"),n({title:"Foro seleccionado",description:`Mostrando mensajes de: ${E.name}`}))},children:g===E.id?"Ver todas":"Ver mensajes"})]})]})},E.id)})})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Qu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(ve,{placeholder:"Buscar publicaciones...",value:h,onChange:E=>p(E.target.value),className:"pl-10"})]}),i.jsxs(ot,{value:f,onValueChange:b,children:[i.jsx(nt,{className:"w-40",children:i.jsx(lt,{})}),i.jsxs(rt,{children:[i.jsx(he,{value:"todos",children:"Todas"}),i.jsx(he,{value:"general",children:"General"}),i.jsx(he,{value:"pregunta",children:"Preguntas"}),i.jsx(he,{value:"discusion",children:"Discusiones"}),i.jsx(he,{value:"anuncio",children:"Anuncios"})]})]}),g&&i.jsx(V,{variant:"outline",size:"sm",onClick:()=>{w(null),n({title:"Filtro removido",description:"Mostrando todas las publicaciones"})},children:"Mostrar todos"})]}),g&&i.jsx("div",{className:"mt-2",children:i.jsxs(Ee,{variant:"secondary",children:["Mostrando: ",((D=a.find(E=>E.id===g))==null?void 0:D.name)||"Foro seleccionado"]})})]})}),i.jsx("div",{className:"space-y-4",children:$.length===0?i.jsx(K,{children:i.jsxs(Q,{className:"p-8 text-center",children:[i.jsx(Pi,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No hay publicaciones"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:h||f!=="todos"?"No se encontraron publicaciones con los filtros actuales":"S el primero en crear una publicacin en la comunidad"}),!h&&f==="todos"&&i.jsx(V,{onClick:()=>v(!0),children:"Crear Primera Publicacin"})]})}):$.map(E=>i.jsx(K,{className:E.pinned?"border-accent":"",children:i.jsx(Q,{className:"p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx(ns,{className:"h-10 w-10",children:i.jsx(rs,{className:"bg-accent text-accent-foreground",children:"AU"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[E.pinned&&i.jsx(oP,{className:"h-4 w-4 text-accent"}),i.jsx("h3",{className:"font-semibold text-foreground line-clamp-1",children:E.title})]}),i.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground whitespace-nowrap",children:i.jsx("span",{children:L(E.created_at)})})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"por Usuario"}),E.category&&i.jsx(Ee,{variant:"secondary",className:"text-xs",children:E.category})]}),i.jsx("p",{className:"text-foreground mb-4 line-clamp-3",children:E.content}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>B(E.id),className:"gap-1 text-muted-foreground hover:text-foreground",children:[i.jsx(nP,{className:"h-4 w-4"}),i.jsx("span",{children:"0"})]}),i.jsxs(V,{variant:"ghost",size:"sm",className:"gap-1 text-muted-foreground hover:text-foreground",children:[i.jsx(iP,{className:"h-4 w-4"}),i.jsx("span",{children:"0"})]})]})]})]})})},E.id))})]})}const U6="https://app.slack.com/client/T059VRF02L8/C05964WLPMZ",cw="C05964WLPMZ",uw="https://epqalebkqmkddlfomnyf.functions.supabase.co/slack-proxy";function B6(){const{toast:e}=Ve(),[t,n]=m.useState([]),[r,s]=m.useState(!1),[a,o]=m.useState(!1),[l,c]=m.useState(""),[u,d]=m.useState(!0),h=m.useMemo(()=>[...t].sort((g,w)=>parseFloat(g.ts)-parseFloat(w.ts)),[t]),p=()=>{window.open(U6,"_blank","noopener,noreferrer")},f=async()=>{s(!0);try{const g=await fetch(`${uw}?channel=${cw}`);if(!g.ok)throw new Error("edge_unavailable");const w=await g.json();if(!w.success)throw new Error(w.error||"edge_error");n(w.messages||[]),d(!0)}catch{d(!1)}finally{s(!1)}},b=async()=>{if(l.trim()){o(!0);try{const g=await fetch(uw,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel:cw,text:l.trim()})}),w=await g.json();if(!g.ok||!w.success)throw new Error(w.error||"edge_error");c(""),f()}catch{e({title:"No se pudo enviar",description:"Abr Slack para continuar.",variant:"destructive"})}finally{o(!1)}}};return m.useEffect(()=>{f();const g=setInterval(f,15e3);return()=>clearInterval(g)},[]),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Slack"}),i.jsx("p",{className:"text-muted-foreground",children:"Vista del canal del equipo dentro del campus"})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Canal principal"})}),i.jsxs(Q,{className:"space-y-4",children:[!u&&i.jsx("div",{className:"rounded-md border p-3 text-sm text-muted-foreground",children:"Para ver y enviar mensajes ac necesitamos configurar una app de Slack. Por ahora pods abrir el canal directamente."}),i.jsx("div",{className:"h-96 overflow-y-auto rounded-md border p-3 bg-background/50",children:r?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Cargando mensajes..."}):h.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No hay mensajes an"}):i.jsx("div",{className:"space-y-3",children:h.map(g=>i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"opacity-70",children:g.user?`@${g.user}`:"bot"}),i.jsx("div",{children:g.text})]},g.ts))})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ve,{placeholder:"Escribir mensaje para Slack...",value:l,onChange:g=>c(g.target.value),onKeyDown:g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),b())}}),i.jsxs(V,{onClick:b,disabled:a||!l.trim(),className:"gap-2",children:["Enviar",i.jsx(pj,{className:"h-4 w-4"})]})]}),i.jsx("div",{children:i.jsxs(V,{onClick:p,variant:"outline",className:"gap-2",children:["Abrir en Slack",i.jsx(dj,{className:"h-4 w-4"})]})})]})]})]})}var Id="Switch",[V6,SB]=yn(Id),[q6,W6]=V6(Id),yk=m.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[p,f]=m.useState(null),b=Me(t,y=>f(y)),g=m.useRef(!1),w=p?d||!!p.closest("form"):!0,[x,v]=Ar({prop:s,defaultProp:a??!1,onChange:u,caller:Id});return i.jsxs(q6,{scope:n,checked:x,disabled:l,children:[i.jsx(xe.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":_k(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:b,onClick:pe(e.onClick,y=>{v(j=>!j),w&&(g.current=y.isPropagationStopped(),g.current||y.stopPropagation())})}),w&&i.jsx(jk,{control:p,bubbles:!g.current,name:r,value:c,checked:x,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});yk.displayName=Id;var wk="SwitchThumb",bk=m.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=W6(wk,n);return i.jsx(xe.span,{"data-state":_k(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});bk.displayName=wk;var H6="SwitchBubbleInput",jk=m.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const o=m.useRef(null),l=Me(o,a),c=_d(n),u=Zu(t);return m.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&f){const b=new Event("click",{bubbles:r});f.call(d,n),d.dispatchEvent(b)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});jk.displayName=H6;function _k(e){return e?"checked":"unchecked"}var Sk=yk,G6=bk;const Uc=m.forwardRef(({className:e,...t},n)=>i.jsx(Sk,{className:oe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:i.jsx(G6,{className:oe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Uc.displayName=Sk.displayName;function K6(){var h;const{profile:e,user:t}=it(),{theme:n,toggleTheme:r}=Q1(),{toast:s}=Ve(),{stats:a}=J_(),[o,l]=m.useState("");m.useEffect(()=>{l((e==null?void 0:e.full_name)||"")},[e==null?void 0:e.full_name]);const c=p=>(p==null?void 0:p.split(" ").map(f=>f[0]).join("").toUpperCase().slice(0,2))||"U",u=p=>{switch(p){case"admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300";case"teacher":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"student":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";default:return"bg-muted text-muted-foreground"}},d=p=>{switch(p){case"admin":return"Administrador";case"teacher":return"Profesor";case"formador":return"Formador";case"voluntario":return"Voluntario";case"student":return"Estudiante";default:return"Estudiante"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Mi Cuenta"}),i.jsx("p",{className:"text-muted-foreground",children:"Gestiona tu perfil y configuraciones"})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx($p,{className:"h-5 w-5 text-accent"}),"Informacin Personal"]})}),i.jsxs(Q,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ns,{className:"h-20 w-20",children:i.jsx(rs,{className:"bg-accent text-accent-foreground text-lg",children:c((e==null?void 0:e.full_name)||(e==null?void 0:e.email)||"")})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold",children:(e==null?void 0:e.full_name)||(e==null?void 0:e.email)||""}),i.jsx(Ee,{className:u((e==null?void 0:e.role)||"student"),children:d((e==null?void 0:e.role)||"student")})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"name",children:"Nombre Completo"}),i.jsx(ve,{id:"name",value:o,onChange:p=>l(p.target.value),placeholder:"Tu nombre completo"})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"email",children:"Correo Electrnico"}),i.jsx(ve,{id:"email",type:"email",value:(t==null?void 0:t.email)||"",disabled:!0,className:"bg-muted"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"El email no se puede cambiar por seguridad"})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Fecha de Registro"}),i.jsx(ve,{value:new Date((e==null?void 0:e.created_at)||"").toLocaleDateString(),disabled:!0,className:"bg-muted"})]})]}),i.jsx(V,{onClick:async()=>{if(!(e!=null&&e.id))return;const{error:p}=await M.from("profiles").update({full_name:o.trim()||null}).eq("id",e.id);s(p?{title:"Error",description:p.message||"No se pudo actualizar",variant:"destructive"}:{title:"Perfil actualizado",description:"Tu nombre fue guardado."})},children:"Actualizar Perfil"})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(Uf,{className:"h-5 w-5 text-accent"}),"Preferencias"]})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[n==="dark"?i.jsx(hj,{className:"h-4 w-4"}):i.jsx(xj,{className:"h-4 w-4"}),i.jsxs(X,{children:["Tema ",n==="dark"?"Oscuro":"Claro"]})]}),i.jsxs(V,{onClick:r,variant:"outline",size:"sm",children:["Cambiar a ",n==="dark"?"Claro":"Oscuro"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Notificaciones por Email"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Recibir actualizaciones por correo"})]}),i.jsx(Uc,{defaultChecked:!0})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Notificaciones Push"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Notificaciones en tiempo real"})]}),i.jsx(Uc,{defaultChecked:!0})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Recordatorios de Estudio"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Recordatorios diarios para estudiar"})]}),i.jsx(Uc,{})]})]})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(lP,{className:"h-5 w-5 text-accent"}),"Seguridad"]})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Cambiar Contrasea"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Actualiza tu contrasea por seguridad"})]}),i.jsxs(V,{variant:"outline",size:"sm",children:[i.jsx(rP,{className:"h-4 w-4 mr-2"}),"Cambiar"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Autenticacin de Dos Factores"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Aade una capa extra de seguridad"})]}),i.jsx(V,{variant:"outline",size:"sm",children:"Configurar"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Sesiones Activas"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Gestiona tus sesiones abiertas"})]}),i.jsx(V,{variant:"outline",size:"sm",children:"Ver Sesiones"})]})]})]})]})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Mi Progreso"})}),i.jsx(Q,{children:i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-accent",children:a.active_programs}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Programas Inscritos"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-accent",children:a.completed_lessons}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Lecciones Completadas"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-accent",children:[Math.floor((a.total_study_time||0)/60),"h ",(a.total_study_time||0)%60,"m"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Tiempo de Estudio"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-accent",children:typeof((h=a.current_lesson)==null?void 0:h.progress_percent)=="number"?`${a.current_lesson.progress_percent}%`:""}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Leccin actual"})]})]})})]})]})}function Q6(){const[e,t]=m.useState(""),[n,r]=m.useState([]),[s,a]=m.useState([]),[o,l]=m.useState([]),[c,u]=m.useState([]),[d,h]=m.useState([]),[p,f]=m.useState(!1),{toast:b}=Ve(),g=Gn(),[w,x]=m.useState(""),[v,y]=m.useState(""),[j,S]=m.useState(""),[_,N]=m.useState("student");m.useEffect(()=>{C()},[]);const C=async()=>{try{const{data:T,error:z}=await M.from("programs").select("id, title").order("title");if(z)throw z;l(T||[]);const{data:I,error:B}=await M.from("courses").select("id, title, program_id").order("title");if(B)throw B;u(I||[]);const{data:$,error:L}=await M.rpc("get_users_with_emails");if(L)throw L;h($||[])}catch(T){console.error("Error fetching data:",T),b({title:"Error",description:"No se pudieron cargar los datos",variant:"destructive"})}},A=T=>{r(z=>z.includes(T)?z.filter(I=>I!==T):[...z,T])},R=T=>{a(z=>z.includes(T)?z.filter(I=>I!==T):[...z,T])},O=async T=>{if(T.preventDefault(),!e||n.length===0&&s.length===0){b({title:"Error",description:"Debes seleccionar un usuario y al menos un programa o curso",variant:"destructive"});return}f(!0);try{const z=[];for(const $ of n){const{data:L}=await M.from("enrollments").select("id").eq("user_id",e).eq("program_id",$).maybeSingle();L||z.push({user_id:e,program_id:$,status:"active"})}for(const $ of s){const L=c.find(D=>D.id===$);if(L!=null&&L.program_id){const{data:D}=await M.from("enrollments").select("id").eq("user_id",e).eq("program_id",L.program_id).maybeSingle();D||z.push({user_id:e,program_id:L.program_id,status:"active"})}}const I=z.filter(($,L,D)=>L===D.findIndex(E=>E.user_id===$.user_id&&E.program_id===$.program_id));if(I.length>0){const{error:$}=await M.from("enrollments").upsert(I,{onConflict:"user_id,program_id",ignoreDuplicates:!0});if($)throw $}const B=d.find($=>$.id===e);b({title:"Usuario inscrito",description:`${B==null?void 0:B.full_name} ha sido inscrito exitosamente`}),t(""),r([]),a([])}catch(z){b({title:"Error",description:z.message||"No se pudo inscribir al usuario",variant:"destructive"})}finally{f(!1)}};return i.jsx("div",{className:"container mx-auto py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Inscribir Usuario"}),i.jsx(V,{variant:"outline",onClick:()=>g("/usuarios"),children:"Volver"})]}),i.jsxs("form",{onSubmit:O,className:"space-y-8",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Crear usuario nuevo"})}),i.jsxs(Q,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Email"}),i.jsx(ve,{value:w,onChange:T=>x(T.target.value),placeholder:"email@dominio.com"})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Nombre completo"}),i.jsx(ve,{value:v,onChange:T=>y(T.target.value),placeholder:"Nombre y apellido"})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Contrasea"}),i.jsx(ve,{type:"password",value:j,onChange:T=>S(T.target.value),placeholder:"Contrasea temporal"})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Rol"}),i.jsxs(ot,{value:_,onValueChange:T=>N(T),children:[i.jsx(nt,{className:"w-full",children:i.jsx(lt,{})}),i.jsxs(rt,{children:[i.jsx(he,{value:"student",children:"Estudiante"}),i.jsx(he,{value:"formador",children:"Formador"}),i.jsx(he,{value:"voluntario",children:"Voluntario"}),i.jsx(he,{value:"admin",children:"Administrador"})]})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(V,{type:"button",onClick:async()=>{if(!w||!v||!j){b({title:"Completa email, nombre y contrasea",variant:"destructive"});return}try{const T=await fetch("https://epqalebkqmkddlfomnyf.functions.supabase.co/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w,password:j,full_name:v,role:_})}),z=await T.json();if(!T.ok||!z.success)throw new Error(z.error||"No se pudo crear el usuario");const{data:I}=await M.rpc("get_users_with_emails");h(I||[]);const B=(I||[]).find($=>$.email===w);B&&t(B.id),b({title:"Usuario creado",description:w}),x(""),y(""),S(""),N("student")}catch(T){b({title:"Error",description:(T==null?void 0:T.message)||"No se pudo crear",variant:"destructive"})}},children:"Crear y seleccionar"})})]})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Seleccionar Usuario"})}),i.jsx(Q,{children:i.jsxs(ot,{value:e,onValueChange:t,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Seleccionar usuario"})}),i.jsx(rt,{children:d.map(T=>i.jsxs(he,{value:T.id,children:[T.full_name," (",T.email,")"]},T.id))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Programas"})}),i.jsx(Q,{className:"space-y-4",children:o.length===0?i.jsx("p",{className:"text-muted-foreground",children:"No hay programas disponibles"}):o.map(T=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(fn,{id:`program-${T.id}`,checked:n.includes(T.id),onCheckedChange:()=>A(T.id)}),i.jsx(X,{htmlFor:`program-${T.id}`,className:"flex-1",children:T.title})]},T.id))})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Cursos"})}),i.jsx(Q,{className:"space-y-4",children:c.length===0?i.jsx("p",{className:"text-muted-foreground",children:"No hay cursos disponibles"}):c.map(T=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(fn,{id:`course-${T.id}`,checked:s.includes(T.id),onCheckedChange:()=>R(T.id)}),i.jsx(X,{htmlFor:`course-${T.id}`,className:"flex-1",children:T.title})]},T.id))})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(V,{type:"submit",disabled:p,className:"flex-1",children:p?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}),"Inscribiendo..."]}):"Inscribir Usuario"}),i.jsx(V,{type:"button",variant:"outline",onClick:()=>g("/usuarios"),disabled:p,children:"Cancelar"})]})]})]})})}function Y6(){const[e,t]=m.useState(""),[n,r]=m.useState(!1),{toast:s}=Ve(),a=async()=>{if(!e){s({title:"Error",description:"Ingresa un email",variant:"destructive"});return}r(!0);try{const{data:o,error:l}=await M.functions.invoke("reset-user-password",{body:{email:e,newPassword:"mdygg2011"}});if(l)throw l;s({title:"Contrasea actualizada!",description:`La contrasea de ${e} se cambi a "mdygg2011"`}),t("")}catch(o){s({title:"Error",description:o.message||"No se pudo resetear la contrasea",variant:"destructive"})}finally{r(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:i.jsxs(K,{className:"w-full max-w-md",children:[i.jsx(ye,{children:i.jsx(we,{children:"Resetear Contrasea"})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"email",children:"Email del usuario"}),i.jsx(ve,{id:"email",type:"email",value:e,onChange:o=>t(o.target.value),placeholder:"usuario@ejemplo.com"})]}),i.jsx(V,{onClick:a,disabled:n,className:"w-full",children:n?"Reseteando...":'Resetear a "mdygg2011"'}),i.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Emails disponibles: plataformager@gmail.com, germangonzalezmdq@gmail.com, etc."})]})]})})}const X6=()=>{const e=Js();return m.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},J6="https://epqalebkqmkddlfomnyf.functions.supabase.co/email-dispatcher";function Z6(){const{toast:e}=Ve(),[t,n]=m.useState(""),[r,s]=m.useState("Hola desde el Campus"),[a,o]=m.useState("<p>Mensaje de prueba</p>"),[l,c]=m.useState(!1),u=async()=>{c(!0);try{const d=await fetch(J6,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:t,subject:r,html:a})}),h=await d.json();if(!d.ok||!h.success)throw new Error(h.error||"send_error");e({title:"Enviado",description:`ID: ${h.id}`})}catch(d){e({title:"Error",description:d.message||"No se pudo enviar",variant:"destructive"})}finally{c(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Test de Emails"}),i.jsx("p",{className:"text-muted-foreground",children:"Envi un correo de prueba con Resend"})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Enviar correo"})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm",children:"Para"}),i.jsx(ve,{value:t,onChange:d=>n(d.target.value),placeholder:"email@ejemplo.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm",children:"Asunto"}),i.jsx(ve,{value:r,onChange:d=>s(d.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm",children:"HTML"}),i.jsx(At,{value:a,onChange:d=>o(d.target.value),rows:8})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(V,{onClick:u,disabled:l||!t||!r||!a,children:"Enviar"})})]})]})]})}const eB=new bA,tB=()=>i.jsx(_A,{client:eB,children:i.jsx(q4,{children:i.jsxs(i1,{children:[i.jsx(HP,{}),i.jsx(ST,{}),i.jsx(yI,{children:i.jsx(V4,{children:i.jsxs(dI,{children:[i.jsx(Qe,{path:"/",element:i.jsx(WM,{})}),i.jsx(Qe,{path:"/auth",element:i.jsx(KM,{})}),i.jsx(Qe,{path:"/reset-password",element:i.jsx(Y6,{})}),i.jsx(Qe,{path:"/dashboard",element:i.jsx(vt,{children:i.jsx(QM,{})})}),i.jsx(Qe,{path:"/mi-formacion",element:i.jsx(vt,{children:i.jsx(f5,{})})}),i.jsx(Qe,{path:"/profesor",element:i.jsx(vt,{children:i.jsx(mD,{})})}),i.jsx(Qe,{path:"/admin",element:i.jsx(vt,{children:i.jsx(m3,{})})}),i.jsx(Qe,{path:"/programas",element:i.jsx(vt,{children:i.jsx(g3,{})})}),i.jsx(Qe,{path:"/programas/:slug",element:i.jsx(vt,{children:i.jsx(v3,{})})}),i.jsx(Qe,{path:"/cursos",element:i.jsx(vt,{children:i.jsx(y3,{})})}),i.jsx(Qe,{path:"/ver-curso/:courseId",element:i.jsx(vt,{children:i.jsx(aw,{})})}),i.jsx(Qe,{path:"/curso/:courseId",element:i.jsx(vt,{children:i.jsx(aw,{})})}),i.jsx(Qe,{path:"/mis-programas",element:i.jsx(vt,{children:i.jsx(qM,{})})}),i.jsx(Qe,{path:"/leccion/:slug/detalle",element:i.jsx(vt,{children:i.jsx(o5,{})})}),i.jsx(Qe,{path:"/curso/:courseId/edit",element:i.jsx(vt,{children:i.jsx(w3,{})})}),i.jsx(Qe,{path:"/foro/:id",element:i.jsx(vt,{children:i.jsx(l5,{})})}),i.jsx(Qe,{path:"/lecciones",element:i.jsx(vt,{children:i.jsx(d5,{})})}),i.jsx(Qe,{path:"/usuarios",element:i.jsx(vt,{children:i.jsx(h5,{})})}),i.jsx(Qe,{path:"/inscribir-usuario",element:i.jsx(vt,{children:i.jsx(Q6,{})})}),i.jsx(Qe,{path:"/calendario",element:i.jsx(vt,{children:i.jsx(g5,{})})}),i.jsx(Qe,{path:"/comunidad",element:i.jsx(vt,{children:i.jsx(z6,{})})}),i.jsx(Qe,{path:"/slack",element:i.jsx(vt,{children:i.jsx(B6,{})})}),i.jsx(Qe,{path:"/cuenta",element:i.jsx(vt,{children:i.jsx(K6,{})})}),i.jsx(Qe,{path:"/test-email",element:i.jsx(vt,{children:i.jsx(Z6,{})})}),i.jsx(Qe,{path:"*",element:i.jsx(X6,{})})]})})})]})})});Ab(document.getElementById("root")).render(i.jsx(tB,{}));
