var Vg=e=>{throw TypeError(e)};var Od=(e,t,n)=>t.has(e)||Vg("Cannot "+n);var G=(e,t,n)=>(Od(e,t,"read from private field"),n?n.call(e):t.get(e)),Fe=(e,t,n)=>t.has(e)?Vg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ne=(e,t,n,r)=>(Od(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),zt=(e,t,n)=>(Od(e,t,"access private method"),n);var zl=(e,t,n,r)=>({set _(s){Ne(e,t,s,n)},get _(){return G(e,t,r)}});function Rk(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ak(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var bw={exports:{}},Tu={},jw={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jl=Symbol.for("react.element"),Ik=Symbol.for("react.portal"),Ok=Symbol.for("react.fragment"),Lk=Symbol.for("react.strict_mode"),Mk=Symbol.for("react.profiler"),Dk=Symbol.for("react.provider"),Fk=Symbol.for("react.context"),$k=Symbol.for("react.forward_ref"),zk=Symbol.for("react.suspense"),Uk=Symbol.for("react.memo"),Bk=Symbol.for("react.lazy"),qg=Symbol.iterator;function Vk(e){return e===null||typeof e!="object"?null:(e=qg&&e[qg]||e["@@iterator"],typeof e=="function"?e:null)}var _w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sw=Object.assign,Nw={};function Va(e,t,n){this.props=e,this.context=t,this.refs=Nw,this.updater=n||_w}Va.prototype.isReactComponent={};Va.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Va.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kw(){}kw.prototype=Va.prototype;function Fm(e,t,n){this.props=e,this.context=t,this.refs=Nw,this.updater=n||_w}var $m=Fm.prototype=new kw;$m.constructor=Fm;Sw($m,Va.prototype);$m.isPureReactComponent=!0;var Wg=Array.isArray,Cw=Object.prototype.hasOwnProperty,zm={current:null},Ew={key:!0,ref:!0,__self:!0,__source:!0};function Pw(e,t,n){var r,s={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)Cw.call(t,r)&&!Ew.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:jl,type:e,key:a,ref:o,props:s,_owner:zm.current}}function qk(e,t){return{$$typeof:jl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Um(e){return typeof e=="object"&&e!==null&&e.$$typeof===jl}function Wk(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Hg=/\/+/g;function Ld(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Wk(""+e.key):t.toString(36)}function bc(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case jl:case Ik:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Ld(o,0):r,Wg(s)?(n="",e!=null&&(n=e.replace(Hg,"$&/")+"/"),bc(s,t,n,"",function(u){return u})):s!=null&&(Um(s)&&(s=qk(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Hg,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Wg(e))for(var l=0;l<e.length;l++){a=e[l];var c=r+Ld(a,l);o+=bc(a,t,n,c,s)}else if(c=Vk(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=r+Ld(a,l++),o+=bc(a,t,n,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ul(e,t,n){if(e==null)return e;var r=[],s=0;return bc(e,r,"","",function(a){return t.call(n,a,s++)}),r}function Hk(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var an={current:null},jc={transition:null},Gk={ReactCurrentDispatcher:an,ReactCurrentBatchConfig:jc,ReactCurrentOwner:zm};function Tw(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Ul,forEach:function(e,t,n){Ul(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ul(e,function(){t++}),t},toArray:function(e){return Ul(e,function(t){return t})||[]},only:function(e){if(!Um(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ie.Component=Va;Ie.Fragment=Ok;Ie.Profiler=Mk;Ie.PureComponent=Fm;Ie.StrictMode=Lk;Ie.Suspense=zk;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gk;Ie.act=Tw;Ie.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Sw({},e.props),s=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=zm.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Cw.call(t,c)&&!Ew.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:jl,type:e.type,key:s,ref:a,props:r,_owner:o}};Ie.createContext=function(e){return e={$$typeof:Fk,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Dk,_context:e},e.Consumer=e};Ie.createElement=Pw;Ie.createFactory=function(e){var t=Pw.bind(null,e);return t.type=e,t};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(e){return{$$typeof:$k,render:e}};Ie.isValidElement=Um;Ie.lazy=function(e){return{$$typeof:Bk,_payload:{_status:-1,_result:e},_init:Hk}};Ie.memo=function(e,t){return{$$typeof:Uk,type:e,compare:t===void 0?null:t}};Ie.startTransition=function(e){var t=jc.transition;jc.transition={};try{e()}finally{jc.transition=t}};Ie.unstable_act=Tw;Ie.useCallback=function(e,t){return an.current.useCallback(e,t)};Ie.useContext=function(e){return an.current.useContext(e)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(e){return an.current.useDeferredValue(e)};Ie.useEffect=function(e,t){return an.current.useEffect(e,t)};Ie.useId=function(){return an.current.useId()};Ie.useImperativeHandle=function(e,t,n){return an.current.useImperativeHandle(e,t,n)};Ie.useInsertionEffect=function(e,t){return an.current.useInsertionEffect(e,t)};Ie.useLayoutEffect=function(e,t){return an.current.useLayoutEffect(e,t)};Ie.useMemo=function(e,t){return an.current.useMemo(e,t)};Ie.useReducer=function(e,t,n){return an.current.useReducer(e,t,n)};Ie.useRef=function(e){return an.current.useRef(e)};Ie.useState=function(e){return an.current.useState(e)};Ie.useSyncExternalStore=function(e,t,n){return an.current.useSyncExternalStore(e,t,n)};Ie.useTransition=function(){return an.current.useTransition()};Ie.version="18.3.1";jw.exports=Ie;var m=jw.exports;const ie=Pu(m),Bm=Rk({__proto__:null,default:ie},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kk=m,Qk=Symbol.for("react.element"),Yk=Symbol.for("react.fragment"),Xk=Object.prototype.hasOwnProperty,Jk=Kk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zk={key:!0,ref:!0,__self:!0,__source:!0};function Rw(e,t,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Xk.call(t,r)&&!Zk.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Qk,type:e,key:a,ref:o,props:s,_owner:Jk.current}}Tu.Fragment=Yk;Tu.jsx=Rw;Tu.jsxs=Rw;bw.exports=Tu;var i=bw.exports,Aw={exports:{}},In={},Iw={exports:{}},Ow={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,E){var k=M.length;M.push(E);e:for(;0<k;){var F=k-1>>>1,H=M[F];if(0<s(H,E))M[F]=E,M[k]=H,k=F;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var E=M[0],k=M.pop();if(k!==E){M[0]=k;e:for(var F=0,H=M.length,P=H>>>1;F<P;){var q=2*(F+1)-1,de=M[q],le=q+1,Y=M[le];if(0>s(de,k))le<H&&0>s(Y,de)?(M[F]=Y,M[le]=k,F=le):(M[F]=de,M[q]=k,F=q);else if(le<H&&0>s(Y,k))M[F]=Y,M[le]=k,F=le;else break e}}return E}function s(M,E){var k=M.sortIndex-E.sortIndex;return k!==0?k:M.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,p=3,h=!1,b=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(M){for(var E=n(u);E!==null;){if(E.callback===null)r(u);else if(E.startTime<=M)r(u),E.sortIndex=E.expirationTime,t(c,E);else break;E=n(u)}}function j(M){if(g=!1,y(M),!b)if(n(c)!==null)b=!0,$(S);else{var E=n(u);E!==null&&L(j,E.startTime-M)}}function S(M,E){b=!1,g&&(g=!1,x(C),C=-1),h=!0;var k=p;try{for(y(E),f=n(c);f!==null&&(!(f.expirationTime>E)||M&&!O());){var F=f.callback;if(typeof F=="function"){f.callback=null,p=f.priorityLevel;var H=F(f.expirationTime<=E);E=e.unstable_now(),typeof H=="function"?f.callback=H:f===n(c)&&r(c),y(E)}else r(c);f=n(c)}if(f!==null)var P=!0;else{var q=n(u);q!==null&&L(j,q.startTime-E),P=!1}return P}finally{f=null,p=k,h=!1}}var _=!1,N=null,C=-1,A=5,R=-1;function O(){return!(e.unstable_now()-R<A)}function T(){if(N!==null){var M=e.unstable_now();R=M;var E=!0;try{E=N(!0,M)}finally{E?z():(_=!1,N=null)}}else _=!1}var z;if(typeof v=="function")z=function(){v(T)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,B=I.port2;I.port1.onmessage=T,z=function(){B.postMessage(null)}}else z=function(){w(T,0)};function $(M){N=M,_||(_=!0,z())}function L(M,E){C=w(function(){M(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){b||h||(b=!0,$(S))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(M){switch(p){case 1:case 2:case 3:var E=3;break;default:E=p}var k=p;p=E;try{return M()}finally{p=k}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,E){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var k=p;p=M;try{return E()}finally{p=k}},e.unstable_scheduleCallback=function(M,E,k){var F=e.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?F+k:F):k=F,M){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=k+H,M={id:d++,callback:E,priorityLevel:M,startTime:k,expirationTime:H,sortIndex:-1},k>F?(M.sortIndex=k,t(u,M),n(c)===null&&M===n(u)&&(g?(x(C),C=-1):g=!0,L(j,k-F))):(M.sortIndex=H,t(c,M),b||h||(b=!0,$(S))),M},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(M){var E=p;return function(){var k=p;p=E;try{return M.apply(this,arguments)}finally{p=k}}}})(Ow);Iw.exports=Ow;var eC=Iw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tC=m,Rn=eC;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lw=new Set,Go={};function Oi(e,t){Ta(e,t),Ta(e+"Capture",t)}function Ta(e,t){for(Go[e]=t,e=0;e<t.length;e++)Lw.add(t[e])}var Xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wf=Object.prototype.hasOwnProperty,nC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gg={},Kg={};function rC(e){return Wf.call(Kg,e)?!0:Wf.call(Gg,e)?!1:nC.test(e)?Kg[e]=!0:(Gg[e]=!0,!1)}function sC(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function iC(e,t,n,r){if(t===null||typeof t>"u"||sC(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function on(e,t,n,r,s,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$t[e]=new on(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$t[t]=new on(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$t[e]=new on(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$t[e]=new on(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$t[e]=new on(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$t[e]=new on(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$t[e]=new on(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$t[e]=new on(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$t[e]=new on(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vm=/[\-:]([a-z])/g;function qm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vm,qm);$t[t]=new on(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vm,qm);$t[t]=new on(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vm,qm);$t[t]=new on(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$t[e]=new on(e,1,!1,e.toLowerCase(),null,!1,!1)});$t.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$t[e]=new on(e,1,!1,e.toLowerCase(),null,!0,!0)});function Wm(e,t,n,r){var s=$t.hasOwnProperty(t)?$t[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(iC(t,n,s,r)&&(n=null),r||s===null?rC(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var as=tC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bl=Symbol.for("react.element"),Ji=Symbol.for("react.portal"),Zi=Symbol.for("react.fragment"),Hm=Symbol.for("react.strict_mode"),Hf=Symbol.for("react.profiler"),Mw=Symbol.for("react.provider"),Dw=Symbol.for("react.context"),Gm=Symbol.for("react.forward_ref"),Gf=Symbol.for("react.suspense"),Kf=Symbol.for("react.suspense_list"),Km=Symbol.for("react.memo"),bs=Symbol.for("react.lazy"),Fw=Symbol.for("react.offscreen"),Qg=Symbol.iterator;function lo(e){return e===null||typeof e!="object"?null:(e=Qg&&e[Qg]||e["@@iterator"],typeof e=="function"?e:null)}var ht=Object.assign,Md;function jo(e){if(Md===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Md=t&&t[1]||""}return`
`+Md+e}var Dd=!1;function Fd(e,t){if(!e||Dd)return"";Dd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Dd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?jo(e):""}function aC(e){switch(e.tag){case 5:return jo(e.type);case 16:return jo("Lazy");case 13:return jo("Suspense");case 19:return jo("SuspenseList");case 0:case 2:case 15:return e=Fd(e.type,!1),e;case 11:return e=Fd(e.type.render,!1),e;case 1:return e=Fd(e.type,!0),e;default:return""}}function Qf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zi:return"Fragment";case Ji:return"Portal";case Hf:return"Profiler";case Hm:return"StrictMode";case Gf:return"Suspense";case Kf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dw:return(e.displayName||"Context")+".Consumer";case Mw:return(e._context.displayName||"Context")+".Provider";case Gm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Km:return t=e.displayName||null,t!==null?t:Qf(e.type)||"Memo";case bs:t=e._payload,e=e._init;try{return Qf(e(t))}catch{}}return null}function oC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qf(t);case 8:return t===Hm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $w(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lC(e){var t=$w(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vl(e){e._valueTracker||(e._valueTracker=lC(e))}function zw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$w(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Bc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Yf(e,t){var n=t.checked;return ht({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Yg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=qs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Uw(e,t){t=t.checked,t!=null&&Wm(e,"checked",t,!1)}function Xf(e,t){Uw(e,t);var n=qs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Jf(e,t.type,n):t.hasOwnProperty("defaultValue")&&Jf(e,t.type,qs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Jf(e,t,n){(t!=="number"||Bc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var _o=Array.isArray;function ua(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+qs(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Zf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return ht({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(J(92));if(_o(n)){if(1<n.length)throw Error(J(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:qs(n)}}function Bw(e,t){var n=qs(t.value),r=qs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Zg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Vw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Vw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ql,qw=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ql=ql||document.createElement("div"),ql.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ql.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ko(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ro={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cC=["Webkit","ms","Moz","O"];Object.keys(Ro).forEach(function(e){cC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ro[t]=Ro[e]})});function Ww(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ro.hasOwnProperty(e)&&Ro[e]?(""+t).trim():t+"px"}function Hw(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ww(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var uC=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function th(e,t){if(t){if(uC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function nh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rh=null;function Qm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sh=null,da=null,fa=null;function ex(e){if(e=Nl(e)){if(typeof sh!="function")throw Error(J(280));var t=e.stateNode;t&&(t=Lu(t),sh(e.stateNode,e.type,t))}}function Gw(e){da?fa?fa.push(e):fa=[e]:da=e}function Kw(){if(da){var e=da,t=fa;if(fa=da=null,ex(e),t)for(e=0;e<t.length;e++)ex(t[e])}}function Qw(e,t){return e(t)}function Yw(){}var $d=!1;function Xw(e,t,n){if($d)return e(t,n);$d=!0;try{return Qw(e,t,n)}finally{$d=!1,(da!==null||fa!==null)&&(Yw(),Kw())}}function Qo(e,t){var n=e.stateNode;if(n===null)return null;var r=Lu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var ih=!1;if(Xr)try{var co={};Object.defineProperty(co,"passive",{get:function(){ih=!0}}),window.addEventListener("test",co,co),window.removeEventListener("test",co,co)}catch{ih=!1}function dC(e,t,n,r,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Ao=!1,Vc=null,qc=!1,ah=null,fC={onError:function(e){Ao=!0,Vc=e}};function hC(e,t,n,r,s,a,o,l,c){Ao=!1,Vc=null,dC.apply(fC,arguments)}function mC(e,t,n,r,s,a,o,l,c){if(hC.apply(this,arguments),Ao){if(Ao){var u=Vc;Ao=!1,Vc=null}else throw Error(J(198));qc||(qc=!0,ah=u)}}function Li(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Jw(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function tx(e){if(Li(e)!==e)throw Error(J(188))}function pC(e){var t=e.alternate;if(!t){if(t=Li(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return tx(s),e;if(a===r)return tx(s),t;a=a.sibling}throw Error(J(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function Zw(e){return e=pC(e),e!==null?e0(e):null}function e0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=e0(e);if(t!==null)return t;e=e.sibling}return null}var t0=Rn.unstable_scheduleCallback,nx=Rn.unstable_cancelCallback,gC=Rn.unstable_shouldYield,xC=Rn.unstable_requestPaint,yt=Rn.unstable_now,vC=Rn.unstable_getCurrentPriorityLevel,Ym=Rn.unstable_ImmediatePriority,n0=Rn.unstable_UserBlockingPriority,Wc=Rn.unstable_NormalPriority,yC=Rn.unstable_LowPriority,r0=Rn.unstable_IdlePriority,Ru=null,Rr=null;function wC(e){if(Rr&&typeof Rr.onCommitFiberRoot=="function")try{Rr.onCommitFiberRoot(Ru,e,void 0,(e.current.flags&128)===128)}catch{}}var lr=Math.clz32?Math.clz32:_C,bC=Math.log,jC=Math.LN2;function _C(e){return e>>>=0,e===0?32:31-(bC(e)/jC|0)|0}var Wl=64,Hl=4194304;function So(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hc(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=So(l):(a&=o,a!==0&&(r=So(a)))}else o=n&~s,o!==0?r=So(o):a!==0&&(r=So(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-lr(t),s=1<<n,r|=e[n],t&=~s;return r}function SC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NC(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-lr(a),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=SC(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function oh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function s0(){var e=Wl;return Wl<<=1,!(Wl&4194240)&&(Wl=64),e}function zd(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _l(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-lr(t),e[t]=n}function kC(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-lr(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}function Xm(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-lr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var We=0;function i0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var a0,Jm,o0,l0,c0,lh=!1,Gl=[],Os=null,Ls=null,Ms=null,Yo=new Map,Xo=new Map,_s=[],CC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rx(e,t){switch(e){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":Yo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(t.pointerId)}}function uo(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Nl(t),t!==null&&Jm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function EC(e,t,n,r,s){switch(t){case"focusin":return Os=uo(Os,e,t,n,r,s),!0;case"dragenter":return Ls=uo(Ls,e,t,n,r,s),!0;case"mouseover":return Ms=uo(Ms,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Yo.set(a,uo(Yo.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Xo.set(a,uo(Xo.get(a)||null,e,t,n,r,s)),!0}return!1}function u0(e){var t=fi(e.target);if(t!==null){var n=Li(t);if(n!==null){if(t=n.tag,t===13){if(t=Jw(n),t!==null){e.blockedOn=t,c0(e.priority,function(){o0(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _c(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ch(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);rh=r,n.target.dispatchEvent(r),rh=null}else return t=Nl(n),t!==null&&Jm(t),e.blockedOn=n,!1;t.shift()}return!0}function sx(e,t,n){_c(e)&&n.delete(t)}function PC(){lh=!1,Os!==null&&_c(Os)&&(Os=null),Ls!==null&&_c(Ls)&&(Ls=null),Ms!==null&&_c(Ms)&&(Ms=null),Yo.forEach(sx),Xo.forEach(sx)}function fo(e,t){e.blockedOn===t&&(e.blockedOn=null,lh||(lh=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,PC)))}function Jo(e){function t(s){return fo(s,e)}if(0<Gl.length){fo(Gl[0],e);for(var n=1;n<Gl.length;n++){var r=Gl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Os!==null&&fo(Os,e),Ls!==null&&fo(Ls,e),Ms!==null&&fo(Ms,e),Yo.forEach(t),Xo.forEach(t),n=0;n<_s.length;n++)r=_s[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<_s.length&&(n=_s[0],n.blockedOn===null);)u0(n),n.blockedOn===null&&_s.shift()}var ha=as.ReactCurrentBatchConfig,Gc=!0;function TC(e,t,n,r){var s=We,a=ha.transition;ha.transition=null;try{We=1,Zm(e,t,n,r)}finally{We=s,ha.transition=a}}function RC(e,t,n,r){var s=We,a=ha.transition;ha.transition=null;try{We=4,Zm(e,t,n,r)}finally{We=s,ha.transition=a}}function Zm(e,t,n,r){if(Gc){var s=ch(e,t,n,r);if(s===null)Yd(e,t,r,Kc,n),rx(e,r);else if(EC(s,e,t,n,r))r.stopPropagation();else if(rx(e,r),t&4&&-1<CC.indexOf(e)){for(;s!==null;){var a=Nl(s);if(a!==null&&a0(a),a=ch(e,t,n,r),a===null&&Yd(e,t,r,Kc,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Yd(e,t,r,null,n)}}var Kc=null;function ch(e,t,n,r){if(Kc=null,e=Qm(r),e=fi(e),e!==null)if(t=Li(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Jw(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kc=e,null}function d0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vC()){case Ym:return 1;case n0:return 4;case Wc:case yC:return 16;case r0:return 536870912;default:return 16}default:return 16}}var Rs=null,ep=null,Sc=null;function f0(){if(Sc)return Sc;var e,t=ep,n=t.length,r,s="value"in Rs?Rs.value:Rs.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[a-r];r++);return Sc=s.slice(e,1<r?1-r:void 0)}function Nc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Kl(){return!0}function ix(){return!1}function On(e){function t(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Kl:ix,this.isPropagationStopped=ix,this}return ht(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kl)},persist:function(){},isPersistent:Kl}),t}var qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tp=On(qa),Sl=ht({},qa,{view:0,detail:0}),AC=On(Sl),Ud,Bd,ho,Au=ht({},Sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:np,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ho&&(ho&&e.type==="mousemove"?(Ud=e.screenX-ho.screenX,Bd=e.screenY-ho.screenY):Bd=Ud=0,ho=e),Ud)},movementY:function(e){return"movementY"in e?e.movementY:Bd}}),ax=On(Au),IC=ht({},Au,{dataTransfer:0}),OC=On(IC),LC=ht({},Sl,{relatedTarget:0}),Vd=On(LC),MC=ht({},qa,{animationName:0,elapsedTime:0,pseudoElement:0}),DC=On(MC),FC=ht({},qa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$C=On(FC),zC=ht({},qa,{data:0}),ox=On(zC),UC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=VC[e])?!!t[e]:!1}function np(){return qC}var WC=ht({},Sl,{key:function(e){if(e.key){var t=UC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Nc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?BC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:np,charCode:function(e){return e.type==="keypress"?Nc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Nc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),HC=On(WC),GC=ht({},Au,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lx=On(GC),KC=ht({},Sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:np}),QC=On(KC),YC=ht({},qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),XC=On(YC),JC=ht({},Au,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ZC=On(JC),eE=[9,13,27,32],rp=Xr&&"CompositionEvent"in window,Io=null;Xr&&"documentMode"in document&&(Io=document.documentMode);var tE=Xr&&"TextEvent"in window&&!Io,h0=Xr&&(!rp||Io&&8<Io&&11>=Io),cx=" ",ux=!1;function m0(e,t){switch(e){case"keyup":return eE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ea=!1;function nE(e,t){switch(e){case"compositionend":return p0(t);case"keypress":return t.which!==32?null:(ux=!0,cx);case"textInput":return e=t.data,e===cx&&ux?null:e;default:return null}}function rE(e,t){if(ea)return e==="compositionend"||!rp&&m0(e,t)?(e=f0(),Sc=ep=Rs=null,ea=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return h0&&t.locale!=="ko"?null:t.data;default:return null}}var sE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sE[e.type]:t==="textarea"}function g0(e,t,n,r){Gw(r),t=Qc(t,"onChange"),0<t.length&&(n=new tp("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Oo=null,Zo=null;function iE(e){C0(e,0)}function Iu(e){var t=ra(e);if(zw(t))return e}function aE(e,t){if(e==="change")return t}var x0=!1;if(Xr){var qd;if(Xr){var Wd="oninput"in document;if(!Wd){var fx=document.createElement("div");fx.setAttribute("oninput","return;"),Wd=typeof fx.oninput=="function"}qd=Wd}else qd=!1;x0=qd&&(!document.documentMode||9<document.documentMode)}function hx(){Oo&&(Oo.detachEvent("onpropertychange",v0),Zo=Oo=null)}function v0(e){if(e.propertyName==="value"&&Iu(Zo)){var t=[];g0(t,Zo,e,Qm(e)),Xw(iE,t)}}function oE(e,t,n){e==="focusin"?(hx(),Oo=t,Zo=n,Oo.attachEvent("onpropertychange",v0)):e==="focusout"&&hx()}function lE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Iu(Zo)}function cE(e,t){if(e==="click")return Iu(t)}function uE(e,t){if(e==="input"||e==="change")return Iu(t)}function dE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dr=typeof Object.is=="function"?Object.is:dE;function el(e,t){if(dr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Wf.call(t,s)||!dr(e[s],t[s]))return!1}return!0}function mx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function px(e,t){var n=mx(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mx(n)}}function y0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?y0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function w0(){for(var e=window,t=Bc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bc(e.document)}return t}function sp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fE(e){var t=w0(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&y0(n.ownerDocument.documentElement,n)){if(r!==null&&sp(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=px(n,a);var o=px(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hE=Xr&&"documentMode"in document&&11>=document.documentMode,ta=null,uh=null,Lo=null,dh=!1;function gx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dh||ta==null||ta!==Bc(r)||(r=ta,"selectionStart"in r&&sp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Lo&&el(Lo,r)||(Lo=r,r=Qc(uh,"onSelect"),0<r.length&&(t=new tp("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ta)))}function Ql(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var na={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},Hd={},b0={};Xr&&(b0=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);function Ou(e){if(Hd[e])return Hd[e];if(!na[e])return e;var t=na[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in b0)return Hd[e]=t[n];return e}var j0=Ou("animationend"),_0=Ou("animationiteration"),S0=Ou("animationstart"),N0=Ou("transitionend"),k0=new Map,xx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(e,t){k0.set(e,t),Oi(t,[e])}for(var Gd=0;Gd<xx.length;Gd++){var Kd=xx[Gd],mE=Kd.toLowerCase(),pE=Kd[0].toUpperCase()+Kd.slice(1);Qs(mE,"on"+pE)}Qs(j0,"onAnimationEnd");Qs(_0,"onAnimationIteration");Qs(S0,"onAnimationStart");Qs("dblclick","onDoubleClick");Qs("focusin","onFocus");Qs("focusout","onBlur");Qs(N0,"onTransitionEnd");Ta("onMouseEnter",["mouseout","mouseover"]);Ta("onMouseLeave",["mouseout","mouseover"]);Ta("onPointerEnter",["pointerout","pointerover"]);Ta("onPointerLeave",["pointerout","pointerover"]);Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gE=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function vx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,mC(r,t,void 0,e),e.currentTarget=null}function C0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;vx(s,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;vx(s,l,u),a=c}}}if(qc)throw e=ah,qc=!1,ah=null,e}function tt(e,t){var n=t[gh];n===void 0&&(n=t[gh]=new Set);var r=e+"__bubble";n.has(r)||(E0(t,e,2,!1),n.add(r))}function Qd(e,t,n){var r=0;t&&(r|=4),E0(n,e,r,t)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function tl(e){if(!e[Yl]){e[Yl]=!0,Lw.forEach(function(n){n!=="selectionchange"&&(gE.has(n)||Qd(n,!1,e),Qd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yl]||(t[Yl]=!0,Qd("selectionchange",!1,t))}}function E0(e,t,n,r){switch(d0(t)){case 1:var s=TC;break;case 4:s=RC;break;default:s=Zm}n=s.bind(null,t,n,e),s=void 0,!ih||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Yd(e,t,n,r,s){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=fi(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}Xw(function(){var u=a,d=Qm(n),f=[];e:{var p=k0.get(e);if(p!==void 0){var h=tp,b=e;switch(e){case"keypress":if(Nc(n)===0)break e;case"keydown":case"keyup":h=HC;break;case"focusin":b="focus",h=Vd;break;case"focusout":b="blur",h=Vd;break;case"beforeblur":case"afterblur":h=Vd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=ax;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=OC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=QC;break;case j0:case _0:case S0:h=DC;break;case N0:h=XC;break;case"scroll":h=AC;break;case"wheel":h=ZC;break;case"copy":case"cut":case"paste":h=$C;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=lx}var g=(t&4)!==0,w=!g&&e==="scroll",x=g?p!==null?p+"Capture":null:p;g=[];for(var v=u,y;v!==null;){y=v;var j=y.stateNode;if(y.tag===5&&j!==null&&(y=j,x!==null&&(j=Qo(v,x),j!=null&&g.push(nl(v,j,y)))),w)break;v=v.return}0<g.length&&(p=new h(p,b,null,n,d),f.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&n!==rh&&(b=n.relatedTarget||n.fromElement)&&(fi(b)||b[Jr]))break e;if((h||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,h?(b=n.relatedTarget||n.toElement,h=u,b=b?fi(b):null,b!==null&&(w=Li(b),b!==w||b.tag!==5&&b.tag!==6)&&(b=null)):(h=null,b=u),h!==b)){if(g=ax,j="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=lx,j="onPointerLeave",x="onPointerEnter",v="pointer"),w=h==null?p:ra(h),y=b==null?p:ra(b),p=new g(j,v+"leave",h,n,d),p.target=w,p.relatedTarget=y,j=null,fi(d)===u&&(g=new g(x,v+"enter",b,n,d),g.target=y,g.relatedTarget=w,j=g),w=j,h&&b)t:{for(g=h,x=b,v=0,y=g;y;y=zi(y))v++;for(y=0,j=x;j;j=zi(j))y++;for(;0<v-y;)g=zi(g),v--;for(;0<y-v;)x=zi(x),y--;for(;v--;){if(g===x||x!==null&&g===x.alternate)break t;g=zi(g),x=zi(x)}g=null}else g=null;h!==null&&yx(f,p,h,g,!1),b!==null&&w!==null&&yx(f,w,b,g,!0)}}e:{if(p=u?ra(u):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var S=aE;else if(dx(p))if(x0)S=uE;else{S=lE;var _=oE}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=cE);if(S&&(S=S(e,u))){g0(f,S,n,d);break e}_&&_(e,p,u),e==="focusout"&&(_=p._wrapperState)&&_.controlled&&p.type==="number"&&Jf(p,"number",p.value)}switch(_=u?ra(u):window,e){case"focusin":(dx(_)||_.contentEditable==="true")&&(ta=_,uh=u,Lo=null);break;case"focusout":Lo=uh=ta=null;break;case"mousedown":dh=!0;break;case"contextmenu":case"mouseup":case"dragend":dh=!1,gx(f,n,d);break;case"selectionchange":if(hE)break;case"keydown":case"keyup":gx(f,n,d)}var N;if(rp)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ea?m0(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(h0&&n.locale!=="ko"&&(ea||C!=="onCompositionStart"?C==="onCompositionEnd"&&ea&&(N=f0()):(Rs=d,ep="value"in Rs?Rs.value:Rs.textContent,ea=!0)),_=Qc(u,C),0<_.length&&(C=new ox(C,e,null,n,d),f.push({event:C,listeners:_}),N?C.data=N:(N=p0(n),N!==null&&(C.data=N)))),(N=tE?nE(e,n):rE(e,n))&&(u=Qc(u,"onBeforeInput"),0<u.length&&(d=new ox("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=N))}C0(f,t)})}function nl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qc(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Qo(e,n),a!=null&&r.unshift(nl(e,a,s)),a=Qo(e,t),a!=null&&r.push(nl(e,a,s))),e=e.return}return r}function zi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yx(e,t,n,r,s){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Qo(n,a),c!=null&&o.unshift(nl(n,c,l))):s||(c=Qo(n,a),c!=null&&o.push(nl(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var xE=/\r\n?/g,vE=/\u0000|\uFFFD/g;function wx(e){return(typeof e=="string"?e:""+e).replace(xE,`
`).replace(vE,"")}function Xl(e,t,n){if(t=wx(t),wx(e)!==t&&n)throw Error(J(425))}function Yc(){}var fh=null,hh=null;function mh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ph=typeof setTimeout=="function"?setTimeout:void 0,yE=typeof clearTimeout=="function"?clearTimeout:void 0,bx=typeof Promise=="function"?Promise:void 0,wE=typeof queueMicrotask=="function"?queueMicrotask:typeof bx<"u"?function(e){return bx.resolve(null).then(e).catch(bE)}:ph;function bE(e){setTimeout(function(){throw e})}function Xd(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Jo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Jo(t)}function Ds(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function jx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wa=Math.random().toString(36).slice(2),Nr="__reactFiber$"+Wa,rl="__reactProps$"+Wa,Jr="__reactContainer$"+Wa,gh="__reactEvents$"+Wa,jE="__reactListeners$"+Wa,_E="__reactHandles$"+Wa;function fi(e){var t=e[Nr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jr]||n[Nr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=jx(e);e!==null;){if(n=e[Nr])return n;e=jx(e)}return t}e=n,n=e.parentNode}return null}function Nl(e){return e=e[Nr]||e[Jr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ra(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function Lu(e){return e[rl]||null}var xh=[],sa=-1;function Ys(e){return{current:e}}function st(e){0>sa||(e.current=xh[sa],xh[sa]=null,sa--)}function Je(e,t){sa++,xh[sa]=e.current,e.current=t}var Ws={},Ht=Ys(Ws),pn=Ys(!1),_i=Ws;function Ra(e,t){var n=e.type.contextTypes;if(!n)return Ws;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gn(e){return e=e.childContextTypes,e!=null}function Xc(){st(pn),st(Ht)}function _x(e,t,n){if(Ht.current!==Ws)throw Error(J(168));Je(Ht,t),Je(pn,n)}function P0(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(J(108,oC(e)||"Unknown",s));return ht({},n,r)}function Jc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ws,_i=Ht.current,Je(Ht,e),Je(pn,pn.current),!0}function Sx(e,t,n){var r=e.stateNode;if(!r)throw Error(J(169));n?(e=P0(e,t,_i),r.__reactInternalMemoizedMergedChildContext=e,st(pn),st(Ht),Je(Ht,e)):st(pn),Je(pn,n)}var Wr=null,Mu=!1,Jd=!1;function T0(e){Wr===null?Wr=[e]:Wr.push(e)}function SE(e){Mu=!0,T0(e)}function Xs(){if(!Jd&&Wr!==null){Jd=!0;var e=0,t=We;try{var n=Wr;for(We=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Wr=null,Mu=!1}catch(s){throw Wr!==null&&(Wr=Wr.slice(e+1)),t0(Ym,Xs),s}finally{We=t,Jd=!1}}return null}var ia=[],aa=0,Zc=null,eu=0,Fn=[],$n=0,Si=null,Gr=1,Kr="";function oi(e,t){ia[aa++]=eu,ia[aa++]=Zc,Zc=e,eu=t}function R0(e,t,n){Fn[$n++]=Gr,Fn[$n++]=Kr,Fn[$n++]=Si,Si=e;var r=Gr;e=Kr;var s=32-lr(r)-1;r&=~(1<<s),n+=1;var a=32-lr(t)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gr=1<<32-lr(t)+s|n<<s|r,Kr=a+e}else Gr=1<<a|n<<s|r,Kr=e}function ip(e){e.return!==null&&(oi(e,1),R0(e,1,0))}function ap(e){for(;e===Zc;)Zc=ia[--aa],ia[aa]=null,eu=ia[--aa],ia[aa]=null;for(;e===Si;)Si=Fn[--$n],Fn[$n]=null,Kr=Fn[--$n],Fn[$n]=null,Gr=Fn[--$n],Fn[$n]=null}var Pn=null,Cn=null,at=!1,sr=null;function A0(e,t){var n=Bn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Nx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pn=e,Cn=Ds(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pn=e,Cn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Si!==null?{id:Gr,overflow:Kr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Bn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Pn=e,Cn=null,!0):!1;default:return!1}}function vh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yh(e){if(at){var t=Cn;if(t){var n=t;if(!Nx(e,t)){if(vh(e))throw Error(J(418));t=Ds(n.nextSibling);var r=Pn;t&&Nx(e,t)?A0(r,n):(e.flags=e.flags&-4097|2,at=!1,Pn=e)}}else{if(vh(e))throw Error(J(418));e.flags=e.flags&-4097|2,at=!1,Pn=e}}}function kx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pn=e}function Jl(e){if(e!==Pn)return!1;if(!at)return kx(e),at=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!mh(e.type,e.memoizedProps)),t&&(t=Cn)){if(vh(e))throw I0(),Error(J(418));for(;t;)A0(e,t),t=Ds(t.nextSibling)}if(kx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Cn=Ds(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Cn=null}}else Cn=Pn?Ds(e.stateNode.nextSibling):null;return!0}function I0(){for(var e=Cn;e;)e=Ds(e.nextSibling)}function Aa(){Cn=Pn=null,at=!1}function op(e){sr===null?sr=[e]:sr.push(e)}var NE=as.ReactCurrentBatchConfig;function mo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,e));var s=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function Zl(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cx(e){var t=e._init;return t(e._payload)}function O0(e){function t(x,v){if(e){var y=x.deletions;y===null?(x.deletions=[v],x.flags|=16):y.push(v)}}function n(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function r(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=Us(x,v),x.index=0,x.sibling=null,x}function a(x,v,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<v?(x.flags|=2,v):y):(x.flags|=2,v)):(x.flags|=1048576,v)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,v,y,j){return v===null||v.tag!==6?(v=af(y,x.mode,j),v.return=x,v):(v=s(v,y),v.return=x,v)}function c(x,v,y,j){var S=y.type;return S===Zi?d(x,v,y.props.children,j,y.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===bs&&Cx(S)===v.type)?(j=s(v,y.props),j.ref=mo(x,v,y),j.return=x,j):(j=Ac(y.type,y.key,y.props,null,x.mode,j),j.ref=mo(x,v,y),j.return=x,j)}function u(x,v,y,j){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=of(y,x.mode,j),v.return=x,v):(v=s(v,y.children||[]),v.return=x,v)}function d(x,v,y,j,S){return v===null||v.tag!==7?(v=ji(y,x.mode,j,S),v.return=x,v):(v=s(v,y),v.return=x,v)}function f(x,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=af(""+v,x.mode,y),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Bl:return y=Ac(v.type,v.key,v.props,null,x.mode,y),y.ref=mo(x,null,v),y.return=x,y;case Ji:return v=of(v,x.mode,y),v.return=x,v;case bs:var j=v._init;return f(x,j(v._payload),y)}if(_o(v)||lo(v))return v=ji(v,x.mode,y,null),v.return=x,v;Zl(x,v)}return null}function p(x,v,y,j){var S=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:l(x,v,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Bl:return y.key===S?c(x,v,y,j):null;case Ji:return y.key===S?u(x,v,y,j):null;case bs:return S=y._init,p(x,v,S(y._payload),j)}if(_o(y)||lo(y))return S!==null?null:d(x,v,y,j,null);Zl(x,y)}return null}function h(x,v,y,j,S){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(y)||null,l(v,x,""+j,S);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Bl:return x=x.get(j.key===null?y:j.key)||null,c(v,x,j,S);case Ji:return x=x.get(j.key===null?y:j.key)||null,u(v,x,j,S);case bs:var _=j._init;return h(x,v,y,_(j._payload),S)}if(_o(j)||lo(j))return x=x.get(y)||null,d(v,x,j,S,null);Zl(v,j)}return null}function b(x,v,y,j){for(var S=null,_=null,N=v,C=v=0,A=null;N!==null&&C<y.length;C++){N.index>C?(A=N,N=null):A=N.sibling;var R=p(x,N,y[C],j);if(R===null){N===null&&(N=A);break}e&&N&&R.alternate===null&&t(x,N),v=a(R,v,C),_===null?S=R:_.sibling=R,_=R,N=A}if(C===y.length)return n(x,N),at&&oi(x,C),S;if(N===null){for(;C<y.length;C++)N=f(x,y[C],j),N!==null&&(v=a(N,v,C),_===null?S=N:_.sibling=N,_=N);return at&&oi(x,C),S}for(N=r(x,N);C<y.length;C++)A=h(N,x,C,y[C],j),A!==null&&(e&&A.alternate!==null&&N.delete(A.key===null?C:A.key),v=a(A,v,C),_===null?S=A:_.sibling=A,_=A);return e&&N.forEach(function(O){return t(x,O)}),at&&oi(x,C),S}function g(x,v,y,j){var S=lo(y);if(typeof S!="function")throw Error(J(150));if(y=S.call(y),y==null)throw Error(J(151));for(var _=S=null,N=v,C=v=0,A=null,R=y.next();N!==null&&!R.done;C++,R=y.next()){N.index>C?(A=N,N=null):A=N.sibling;var O=p(x,N,R.value,j);if(O===null){N===null&&(N=A);break}e&&N&&O.alternate===null&&t(x,N),v=a(O,v,C),_===null?S=O:_.sibling=O,_=O,N=A}if(R.done)return n(x,N),at&&oi(x,C),S;if(N===null){for(;!R.done;C++,R=y.next())R=f(x,R.value,j),R!==null&&(v=a(R,v,C),_===null?S=R:_.sibling=R,_=R);return at&&oi(x,C),S}for(N=r(x,N);!R.done;C++,R=y.next())R=h(N,x,C,R.value,j),R!==null&&(e&&R.alternate!==null&&N.delete(R.key===null?C:R.key),v=a(R,v,C),_===null?S=R:_.sibling=R,_=R);return e&&N.forEach(function(T){return t(x,T)}),at&&oi(x,C),S}function w(x,v,y,j){if(typeof y=="object"&&y!==null&&y.type===Zi&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Bl:e:{for(var S=y.key,_=v;_!==null;){if(_.key===S){if(S=y.type,S===Zi){if(_.tag===7){n(x,_.sibling),v=s(_,y.props.children),v.return=x,x=v;break e}}else if(_.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===bs&&Cx(S)===_.type){n(x,_.sibling),v=s(_,y.props),v.ref=mo(x,_,y),v.return=x,x=v;break e}n(x,_);break}else t(x,_);_=_.sibling}y.type===Zi?(v=ji(y.props.children,x.mode,j,y.key),v.return=x,x=v):(j=Ac(y.type,y.key,y.props,null,x.mode,j),j.ref=mo(x,v,y),j.return=x,x=j)}return o(x);case Ji:e:{for(_=y.key;v!==null;){if(v.key===_)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){n(x,v.sibling),v=s(v,y.children||[]),v.return=x,x=v;break e}else{n(x,v);break}else t(x,v);v=v.sibling}v=of(y,x.mode,j),v.return=x,x=v}return o(x);case bs:return _=y._init,w(x,v,_(y._payload),j)}if(_o(y))return b(x,v,y,j);if(lo(y))return g(x,v,y,j);Zl(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(n(x,v.sibling),v=s(v,y),v.return=x,x=v):(n(x,v),v=af(y,x.mode,j),v.return=x,x=v),o(x)):n(x,v)}return w}var Ia=O0(!0),L0=O0(!1),tu=Ys(null),nu=null,oa=null,lp=null;function cp(){lp=oa=nu=null}function up(e){var t=tu.current;st(tu),e._currentValue=t}function wh(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ma(e,t){nu=e,lp=oa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mn=!0),e.firstContext=null)}function Wn(e){var t=e._currentValue;if(lp!==e)if(e={context:e,memoizedValue:t,next:null},oa===null){if(nu===null)throw Error(J(308));oa=e,nu.dependencies={lanes:0,firstContext:e}}else oa=oa.next=e;return t}var hi=null;function dp(e){hi===null?hi=[e]:hi.push(e)}function M0(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,dp(t)):(n.next=s.next,s.next=n),t.interleaved=n,Zr(e,r)}function Zr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var js=!1;function fp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Le&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Zr(e,n)}return s=r.interleaved,s===null?(t.next=t,dp(r)):(t.next=s.next,s.next=t),r.interleaved=t,Zr(e,n)}function kc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xm(e,n)}}function Ex(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ru(e,t,n,r){var s=e.updateQueue;js=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=s.baseState;o=0,d=u=c=null,l=a;do{var p=l.lane,h=l.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,g=l;switch(p=t,h=n,g.tag){case 1:if(b=g.payload,typeof b=="function"){f=b.call(h,f,p);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,p=typeof b=="function"?b.call(h,f,p):b,p==null)break e;f=ht({},f,p);break e;case 2:js=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else h={eventTime:h,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=h,c=f):d=d.next=h,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);ki|=o,e.lanes=o,e.memoizedState=f}}function Px(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(J(191,s));s.call(r)}}}var kl={},Ar=Ys(kl),sl=Ys(kl),il=Ys(kl);function mi(e){if(e===kl)throw Error(J(174));return e}function hp(e,t){switch(Je(il,t),Je(sl,e),Je(Ar,kl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:eh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=eh(t,e)}st(Ar),Je(Ar,t)}function Oa(){st(Ar),st(sl),st(il)}function F0(e){mi(il.current);var t=mi(Ar.current),n=eh(t,e.type);t!==n&&(Je(sl,e),Je(Ar,n))}function mp(e){sl.current===e&&(st(Ar),st(sl))}var ut=Ys(0);function su(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zd=[];function pp(){for(var e=0;e<Zd.length;e++)Zd[e]._workInProgressVersionPrimary=null;Zd.length=0}var Cc=as.ReactCurrentDispatcher,ef=as.ReactCurrentBatchConfig,Ni=0,dt=null,Tt=null,Ot=null,iu=!1,Mo=!1,al=0,kE=0;function Ut(){throw Error(J(321))}function gp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!dr(e[n],t[n]))return!1;return!0}function xp(e,t,n,r,s,a){if(Ni=a,dt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Cc.current=e===null||e.memoizedState===null?TE:RE,e=n(r,s),Mo){a=0;do{if(Mo=!1,al=0,25<=a)throw Error(J(301));a+=1,Ot=Tt=null,t.updateQueue=null,Cc.current=AE,e=n(r,s)}while(Mo)}if(Cc.current=au,t=Tt!==null&&Tt.next!==null,Ni=0,Ot=Tt=dt=null,iu=!1,t)throw Error(J(300));return e}function vp(){var e=al!==0;return al=0,e}function yr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?dt.memoizedState=Ot=e:Ot=Ot.next=e,Ot}function Hn(){if(Tt===null){var e=dt.alternate;e=e!==null?e.memoizedState:null}else e=Tt.next;var t=Ot===null?dt.memoizedState:Ot.next;if(t!==null)Ot=t,Tt=e;else{if(e===null)throw Error(J(310));Tt=e,e={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Ot===null?dt.memoizedState=Ot=e:Ot=Ot.next=e}return Ot}function ol(e,t){return typeof t=="function"?t(e):t}function tf(e){var t=Hn(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=Tt,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((Ni&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,dt.lanes|=d,ki|=d}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,dr(r,t.memoizedState)||(mn=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do a=s.lane,dt.lanes|=a,ki|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function nf(e){var t=Hn(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=e(a,o.action),o=o.next;while(o!==s);dr(a,t.memoizedState)||(mn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function $0(){}function z0(e,t){var n=dt,r=Hn(),s=t(),a=!dr(r.memoizedState,s);if(a&&(r.memoizedState=s,mn=!0),r=r.queue,yp(V0.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,ll(9,B0.bind(null,n,r,s,t),void 0,null),Lt===null)throw Error(J(349));Ni&30||U0(n,t,s)}return s}function U0(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=dt.updateQueue,t===null?(t={lastEffect:null,stores:null},dt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function B0(e,t,n,r){t.value=n,t.getSnapshot=r,q0(t)&&W0(e)}function V0(e,t,n){return n(function(){q0(t)&&W0(e)})}function q0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!dr(e,n)}catch{return!0}}function W0(e){var t=Zr(e,1);t!==null&&cr(t,e,1,-1)}function Tx(e){var t=yr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:e},t.queue=e,e=e.dispatch=PE.bind(null,dt,e),[t.memoizedState,e]}function ll(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=dt.updateQueue,t===null?(t={lastEffect:null,stores:null},dt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function H0(){return Hn().memoizedState}function Ec(e,t,n,r){var s=yr();dt.flags|=e,s.memoizedState=ll(1|t,n,void 0,r===void 0?null:r)}function Du(e,t,n,r){var s=Hn();r=r===void 0?null:r;var a=void 0;if(Tt!==null){var o=Tt.memoizedState;if(a=o.destroy,r!==null&&gp(r,o.deps)){s.memoizedState=ll(t,n,a,r);return}}dt.flags|=e,s.memoizedState=ll(1|t,n,a,r)}function Rx(e,t){return Ec(8390656,8,e,t)}function yp(e,t){return Du(2048,8,e,t)}function G0(e,t){return Du(4,2,e,t)}function K0(e,t){return Du(4,4,e,t)}function Q0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Y0(e,t,n){return n=n!=null?n.concat([e]):null,Du(4,4,Q0.bind(null,t,e),n)}function wp(){}function X0(e,t){var n=Hn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&gp(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function J0(e,t){var n=Hn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&gp(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Z0(e,t,n){return Ni&21?(dr(n,t)||(n=s0(),dt.lanes|=n,ki|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mn=!0),e.memoizedState=n)}function CE(e,t){var n=We;We=n!==0&&4>n?n:4,e(!0);var r=ef.transition;ef.transition={};try{e(!1),t()}finally{We=n,ef.transition=r}}function eb(){return Hn().memoizedState}function EE(e,t,n){var r=zs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tb(e))nb(t,n);else if(n=M0(e,t,n,r),n!==null){var s=sn();cr(n,e,r,s),rb(n,t,r)}}function PE(e,t,n){var r=zs(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tb(e))nb(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,dr(l,o)){var c=t.interleaved;c===null?(s.next=s,dp(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=M0(e,t,s,r),n!==null&&(s=sn(),cr(n,e,r,s),rb(n,t,r))}}function tb(e){var t=e.alternate;return e===dt||t!==null&&t===dt}function nb(e,t){Mo=iu=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function rb(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Xm(e,n)}}var au={readContext:Wn,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},TE={readContext:Wn,useCallback:function(e,t){return yr().memoizedState=[e,t===void 0?null:t],e},useContext:Wn,useEffect:Rx,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ec(4194308,4,Q0.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ec(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ec(4,2,e,t)},useMemo:function(e,t){var n=yr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=EE.bind(null,dt,e),[r.memoizedState,e]},useRef:function(e){var t=yr();return e={current:e},t.memoizedState=e},useState:Tx,useDebugValue:wp,useDeferredValue:function(e){return yr().memoizedState=e},useTransition:function(){var e=Tx(!1),t=e[0];return e=CE.bind(null,e[1]),yr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=dt,s=yr();if(at){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),Lt===null)throw Error(J(349));Ni&30||U0(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Rx(V0.bind(null,r,a,e),[e]),r.flags|=2048,ll(9,B0.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=yr(),t=Lt.identifierPrefix;if(at){var n=Kr,r=Gr;n=(r&~(1<<32-lr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=al++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=kE++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},RE={readContext:Wn,useCallback:X0,useContext:Wn,useEffect:yp,useImperativeHandle:Y0,useInsertionEffect:G0,useLayoutEffect:K0,useMemo:J0,useReducer:tf,useRef:H0,useState:function(){return tf(ol)},useDebugValue:wp,useDeferredValue:function(e){var t=Hn();return Z0(t,Tt.memoizedState,e)},useTransition:function(){var e=tf(ol)[0],t=Hn().memoizedState;return[e,t]},useMutableSource:$0,useSyncExternalStore:z0,useId:eb,unstable_isNewReconciler:!1},AE={readContext:Wn,useCallback:X0,useContext:Wn,useEffect:yp,useImperativeHandle:Y0,useInsertionEffect:G0,useLayoutEffect:K0,useMemo:J0,useReducer:nf,useRef:H0,useState:function(){return nf(ol)},useDebugValue:wp,useDeferredValue:function(e){var t=Hn();return Tt===null?t.memoizedState=e:Z0(t,Tt.memoizedState,e)},useTransition:function(){var e=nf(ol)[0],t=Hn().memoizedState;return[e,t]},useMutableSource:$0,useSyncExternalStore:z0,useId:eb,unstable_isNewReconciler:!1};function Jn(e,t){if(e&&e.defaultProps){t=ht({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function bh(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ht({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Fu={isMounted:function(e){return(e=e._reactInternals)?Li(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=sn(),s=zs(e),a=Qr(r,s);a.payload=t,n!=null&&(a.callback=n),t=Fs(e,a,s),t!==null&&(cr(t,e,s,r),kc(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=sn(),s=zs(e),a=Qr(r,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Fs(e,a,s),t!==null&&(cr(t,e,s,r),kc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sn(),r=zs(e),s=Qr(n,r);s.tag=2,t!=null&&(s.callback=t),t=Fs(e,s,r),t!==null&&(cr(t,e,r,n),kc(t,e,r))}};function Ax(e,t,n,r,s,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!el(n,r)||!el(s,a):!0}function sb(e,t,n){var r=!1,s=Ws,a=t.contextType;return typeof a=="object"&&a!==null?a=Wn(a):(s=gn(t)?_i:Ht.current,r=t.contextTypes,a=(r=r!=null)?Ra(e,s):Ws),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ix(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Fu.enqueueReplaceState(t,t.state,null)}function jh(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},fp(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Wn(a):(a=gn(t)?_i:Ht.current,s.context=Ra(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(bh(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Fu.enqueueReplaceState(s,s.state,null),ru(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function La(e,t){try{var n="",r=t;do n+=aC(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function rf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function _h(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var IE=typeof WeakMap=="function"?WeakMap:Map;function ib(e,t,n){n=Qr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){lu||(lu=!0,Ih=r),_h(e,t)},n}function ab(e,t,n){n=Qr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){_h(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){_h(e,t),typeof r!="function"&&($s===null?$s=new Set([this]):$s.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Ox(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new IE;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=GE.bind(null,e,t,n),t.then(e,e))}function Lx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mx(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qr(-1,1),t.tag=2,Fs(n,t,1))),n.lanes|=1),e)}var OE=as.ReactCurrentOwner,mn=!1;function tn(e,t,n,r){t.child=e===null?L0(t,null,n,r):Ia(t,e.child,n,r)}function Dx(e,t,n,r,s){n=n.render;var a=t.ref;return ma(t,s),r=xp(e,t,n,r,a,s),n=vp(),e!==null&&!mn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,es(e,t,s)):(at&&n&&ip(t),t.flags|=1,tn(e,t,r,s),t.child)}function Fx(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!Ep(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,ob(e,t,a,r,s)):(e=Ac(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:el,n(o,r)&&e.ref===t.ref)return es(e,t,s)}return t.flags|=1,e=Us(a,r),e.ref=t.ref,e.return=t,t.child=e}function ob(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(el(a,r)&&e.ref===t.ref)if(mn=!1,t.pendingProps=r=a,(e.lanes&s)!==0)e.flags&131072&&(mn=!0);else return t.lanes=e.lanes,es(e,t,s)}return Sh(e,t,n,r,s)}function lb(e,t,n){var r=t.pendingProps,s=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(ca,Nn),Nn|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Je(ca,Nn),Nn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Je(ca,Nn),Nn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Je(ca,Nn),Nn|=r;return tn(e,t,s,n),t.child}function cb(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sh(e,t,n,r,s){var a=gn(n)?_i:Ht.current;return a=Ra(t,a),ma(t,s),n=xp(e,t,n,r,a,s),r=vp(),e!==null&&!mn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,es(e,t,s)):(at&&r&&ip(t),t.flags|=1,tn(e,t,n,s),t.child)}function $x(e,t,n,r,s){if(gn(n)){var a=!0;Jc(t)}else a=!1;if(ma(t,s),t.stateNode===null)Pc(e,t),sb(t,n,r),jh(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Wn(u):(u=gn(n)?_i:Ht.current,u=Ra(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Ix(t,o,r,u),js=!1;var p=t.memoizedState;o.state=p,ru(t,r,o,s),c=t.memoizedState,l!==r||p!==c||pn.current||js?(typeof d=="function"&&(bh(t,n,d,r),c=t.memoizedState),(l=js||Ax(t,n,l,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,D0(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Jn(t.type,l),o.props=u,f=t.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Wn(c):(c=gn(n)?_i:Ht.current,c=Ra(t,c));var h=n.getDerivedStateFromProps;(d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&Ix(t,o,r,c),js=!1,p=t.memoizedState,o.state=p,ru(t,r,o,s);var b=t.memoizedState;l!==f||p!==b||pn.current||js?(typeof h=="function"&&(bh(t,n,h,r),b=t.memoizedState),(u=js||Ax(t,n,u,r,p,b,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),o.props=r,o.state=b,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Nh(e,t,n,r,a,s)}function Nh(e,t,n,r,s,a){cb(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Sx(t,n,!1),es(e,t,a);r=t.stateNode,OE.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ia(t,e.child,null,a),t.child=Ia(t,null,l,a)):tn(e,t,l,a),t.memoizedState=r.state,s&&Sx(t,n,!0),t.child}function ub(e){var t=e.stateNode;t.pendingContext?_x(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_x(e,t.context,!1),hp(e,t.containerInfo)}function zx(e,t,n,r,s){return Aa(),op(s),t.flags|=256,tn(e,t,n,r),t.child}var kh={dehydrated:null,treeContext:null,retryLane:0};function Ch(e){return{baseLanes:e,cachePool:null,transitions:null}}function db(e,t,n){var r=t.pendingProps,s=ut.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Je(ut,s&1),e===null)return yh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Uu(o,r,0,null),e=ji(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ch(n),t.memoizedState=kh,e):bp(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return LE(e,t,o,r,l,s,n);if(a){a=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Us(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Us(l,a):(a=ji(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?Ch(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=kh,r}return a=e.child,e=a.sibling,r=Us(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function bp(e,t){return t=Uu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ec(e,t,n,r){return r!==null&&op(r),Ia(t,e.child,null,n),e=bp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function LE(e,t,n,r,s,a,o){if(n)return t.flags&256?(t.flags&=-257,r=rf(Error(J(422))),ec(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Uu({mode:"visible",children:r.children},s,0,null),a=ji(a,s,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Ia(t,e.child,null,o),t.child.memoizedState=Ch(o),t.memoizedState=kh,a);if(!(t.mode&1))return ec(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(J(419)),r=rf(a,r,void 0),ec(e,t,o,r)}if(l=(o&e.childLanes)!==0,mn||l){if(r=Lt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Zr(e,s),cr(r,e,s,-1))}return Cp(),r=rf(Error(J(421))),ec(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=KE.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Cn=Ds(s.nextSibling),Pn=t,at=!0,sr=null,e!==null&&(Fn[$n++]=Gr,Fn[$n++]=Kr,Fn[$n++]=Si,Gr=e.id,Kr=e.overflow,Si=t),t=bp(t,r.children),t.flags|=4096,t)}function Ux(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),wh(e.return,t,n)}function sf(e,t,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function fb(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(tn(e,t,r.children,n),r=ut.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ux(e,n,t);else if(e.tag===19)Ux(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Je(ut,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&su(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),sf(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&su(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}sf(t,!0,n,null,a);break;case"together":sf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function es(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ki|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=Us(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Us(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ME(e,t,n){switch(t.tag){case 3:ub(t),Aa();break;case 5:F0(t);break;case 1:gn(t.type)&&Jc(t);break;case 4:hp(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Je(tu,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Je(ut,ut.current&1),t.flags|=128,null):n&t.child.childLanes?db(e,t,n):(Je(ut,ut.current&1),e=es(e,t,n),e!==null?e.sibling:null);Je(ut,ut.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return fb(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Je(ut,ut.current),r)break;return null;case 22:case 23:return t.lanes=0,lb(e,t,n)}return es(e,t,n)}var hb,Eh,mb,pb;hb=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Eh=function(){};mb=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,mi(Ar.current);var a=null;switch(n){case"input":s=Yf(e,s),r=Yf(e,r),a=[];break;case"select":s=ht({},s,{value:void 0}),r=ht({},r,{value:void 0}),a=[];break;case"textarea":s=Zf(e,s),r=Zf(e,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Yc)}th(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Go.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Go.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&tt("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};pb=function(e,t,n,r){n!==r&&(t.flags|=4)};function po(e,t){if(!at)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function DE(e,t,n){var r=t.pendingProps;switch(ap(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return gn(t.type)&&Xc(),Bt(t),null;case 3:return r=t.stateNode,Oa(),st(pn),st(Ht),pp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Jl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,sr!==null&&(Mh(sr),sr=null))),Eh(e,t),Bt(t),null;case 5:mp(t);var s=mi(il.current);if(n=t.type,e!==null&&t.stateNode!=null)mb(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(J(166));return Bt(t),null}if(e=mi(Ar.current),Jl(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Nr]=t,r[rl]=a,e=(t.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(s=0;s<No.length;s++)tt(No[s],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":Yg(r,a),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},tt("invalid",r);break;case"textarea":Jg(r,a),tt("invalid",r)}th(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Xl(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Xl(r.textContent,l,e),s=["children",""+l]):Go.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&tt("scroll",r)}switch(n){case"input":Vl(r),Xg(r,a,!0);break;case"textarea":Vl(r),Zg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Yc)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Vw(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Nr]=t,e[rl]=r,hb(e,t,!1,!1),t.stateNode=e;e:{switch(o=nh(n,r),n){case"dialog":tt("cancel",e),tt("close",e),s=r;break;case"iframe":case"object":case"embed":tt("load",e),s=r;break;case"video":case"audio":for(s=0;s<No.length;s++)tt(No[s],e);s=r;break;case"source":tt("error",e),s=r;break;case"img":case"image":case"link":tt("error",e),tt("load",e),s=r;break;case"details":tt("toggle",e),s=r;break;case"input":Yg(e,r),s=Yf(e,r),tt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ht({},r,{value:void 0}),tt("invalid",e);break;case"textarea":Jg(e,r),s=Zf(e,r),tt("invalid",e);break;default:s=r}th(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Hw(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qw(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ko(e,c):typeof c=="number"&&Ko(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Go.hasOwnProperty(a)?c!=null&&a==="onScroll"&&tt("scroll",e):c!=null&&Wm(e,a,c,o))}switch(n){case"input":Vl(e),Xg(e,r,!1);break;case"textarea":Vl(e),Zg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+qs(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?ua(e,!!r.multiple,a,!1):r.defaultValue!=null&&ua(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Yc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bt(t),null;case 6:if(e&&t.stateNode!=null)pb(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(J(166));if(n=mi(il.current),mi(Ar.current),Jl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Nr]=t,(a=r.nodeValue!==n)&&(e=Pn,e!==null))switch(e.tag){case 3:Xl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xl(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nr]=t,t.stateNode=r}return Bt(t),null;case 13:if(st(ut),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(at&&Cn!==null&&t.mode&1&&!(t.flags&128))I0(),Aa(),t.flags|=98560,a=!1;else if(a=Jl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(J(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(J(317));a[Nr]=t}else Aa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bt(t),a=!1}else sr!==null&&(Mh(sr),sr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ut.current&1?Rt===0&&(Rt=3):Cp())),t.updateQueue!==null&&(t.flags|=4),Bt(t),null);case 4:return Oa(),Eh(e,t),e===null&&tl(t.stateNode.containerInfo),Bt(t),null;case 10:return up(t.type._context),Bt(t),null;case 17:return gn(t.type)&&Xc(),Bt(t),null;case 19:if(st(ut),a=t.memoizedState,a===null)return Bt(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)po(a,!1);else{if(Rt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=su(e),o!==null){for(t.flags|=128,po(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Je(ut,ut.current&1|2),t.child}e=e.sibling}a.tail!==null&&yt()>Ma&&(t.flags|=128,r=!0,po(a,!1),t.lanes=4194304)}else{if(!r)if(e=su(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),po(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!at)return Bt(t),null}else 2*yt()-a.renderingStartTime>Ma&&n!==1073741824&&(t.flags|=128,r=!0,po(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=yt(),t.sibling=null,n=ut.current,Je(ut,r?n&1|2:n&1),t):(Bt(t),null);case 22:case 23:return kp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Nn&1073741824&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function FE(e,t){switch(ap(t),t.tag){case 1:return gn(t.type)&&Xc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Oa(),st(pn),st(Ht),pp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return mp(t),null;case 13:if(st(ut),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));Aa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return st(ut),null;case 4:return Oa(),null;case 10:return up(t.type._context),null;case 22:case 23:return kp(),null;case 24:return null;default:return null}}var tc=!1,qt=!1,$E=typeof WeakSet=="function"?WeakSet:Set,ue=null;function la(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){gt(e,t,r)}else n.current=null}function Ph(e,t,n){try{n()}catch(r){gt(e,t,r)}}var Bx=!1;function zE(e,t){if(fh=Gc,e=w0(),sp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==a||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++u===s&&(l=o),p===a&&++d===r&&(c=o),(h=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=h}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(hh={focusedElem:e,selectionRange:n},Gc=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,w=b.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:Jn(t.type,g),w);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(j){gt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return b=Bx,Bx=!1,b}function Do(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Ph(t,n,a)}s=s.next}while(s!==r)}}function $u(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Th(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function gb(e){var t=e.alternate;t!==null&&(e.alternate=null,gb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Nr],delete t[rl],delete t[gh],delete t[jE],delete t[_E])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xb(e){return e.tag===5||e.tag===3||e.tag===4}function Vx(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Yc));else if(r!==4&&(e=e.child,e!==null))for(Rh(e,t,n),e=e.sibling;e!==null;)Rh(e,t,n),e=e.sibling}function Ah(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ah(e,t,n),e=e.sibling;e!==null;)Ah(e,t,n),e=e.sibling}var Mt=null,nr=!1;function hs(e,t,n){for(n=n.child;n!==null;)vb(e,t,n),n=n.sibling}function vb(e,t,n){if(Rr&&typeof Rr.onCommitFiberUnmount=="function")try{Rr.onCommitFiberUnmount(Ru,n)}catch{}switch(n.tag){case 5:qt||la(n,t);case 6:var r=Mt,s=nr;Mt=null,hs(e,t,n),Mt=r,nr=s,Mt!==null&&(nr?(e=Mt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Mt.removeChild(n.stateNode));break;case 18:Mt!==null&&(nr?(e=Mt,n=n.stateNode,e.nodeType===8?Xd(e.parentNode,n):e.nodeType===1&&Xd(e,n),Jo(e)):Xd(Mt,n.stateNode));break;case 4:r=Mt,s=nr,Mt=n.stateNode.containerInfo,nr=!0,hs(e,t,n),Mt=r,nr=s;break;case 0:case 11:case 14:case 15:if(!qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Ph(n,t,o),s=s.next}while(s!==r)}hs(e,t,n);break;case 1:if(!qt&&(la(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){gt(n,t,l)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:n.mode&1?(qt=(r=qt)||n.memoizedState!==null,hs(e,t,n),qt=r):hs(e,t,n);break;default:hs(e,t,n)}}function qx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new $E),t.forEach(function(r){var s=QE.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Kn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Mt=l.stateNode,nr=!1;break e;case 3:Mt=l.stateNode.containerInfo,nr=!0;break e;case 4:Mt=l.stateNode.containerInfo,nr=!0;break e}l=l.return}if(Mt===null)throw Error(J(160));vb(a,o,s),Mt=null,nr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){gt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)yb(t,e),t=t.sibling}function yb(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Kn(t,e),vr(e),r&4){try{Do(3,e,e.return),$u(3,e)}catch(g){gt(e,e.return,g)}try{Do(5,e,e.return)}catch(g){gt(e,e.return,g)}}break;case 1:Kn(t,e),vr(e),r&512&&n!==null&&la(n,n.return);break;case 5:if(Kn(t,e),vr(e),r&512&&n!==null&&la(n,n.return),e.flags&32){var s=e.stateNode;try{Ko(s,"")}catch(g){gt(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Uw(s,a),nh(l,o);var u=nh(l,a);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?Hw(s,f):d==="dangerouslySetInnerHTML"?qw(s,f):d==="children"?Ko(s,f):Wm(s,d,f,u)}switch(l){case"input":Xf(s,a);break;case"textarea":Bw(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?ua(s,!!a.multiple,h,!1):p!==!!a.multiple&&(a.defaultValue!=null?ua(s,!!a.multiple,a.defaultValue,!0):ua(s,!!a.multiple,a.multiple?[]:"",!1))}s[rl]=a}catch(g){gt(e,e.return,g)}}break;case 6:if(Kn(t,e),vr(e),r&4){if(e.stateNode===null)throw Error(J(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){gt(e,e.return,g)}}break;case 3:if(Kn(t,e),vr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jo(t.containerInfo)}catch(g){gt(e,e.return,g)}break;case 4:Kn(t,e),vr(e);break;case 13:Kn(t,e),vr(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Sp=yt())),r&4&&qx(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(qt=(u=qt)||d,Kn(t,e),qt=u):Kn(t,e),vr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ue=e,d=e.child;d!==null;){for(f=ue=d;ue!==null;){switch(p=ue,h=p.child,p.tag){case 0:case 11:case 14:case 15:Do(4,p,p.return);break;case 1:la(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){gt(r,n,g)}}break;case 5:la(p,p.return);break;case 22:if(p.memoizedState!==null){Hx(f);continue}}h!==null?(h.return=p,ue=h):Hx(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ww("display",o))}catch(g){gt(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){gt(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Kn(t,e),vr(e),r&4&&qx(e);break;case 21:break;default:Kn(t,e),vr(e)}}function vr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(xb(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ko(s,""),r.flags&=-33);var a=Vx(e);Ah(e,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Vx(e);Rh(e,l,o);break;default:throw Error(J(161))}}catch(c){gt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function UE(e,t,n){ue=e,wb(e)}function wb(e,t,n){for(var r=(e.mode&1)!==0;ue!==null;){var s=ue,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||tc;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||qt;l=tc;var u=qt;if(tc=o,(qt=c)&&!u)for(ue=s;ue!==null;)o=ue,c=o.child,o.tag===22&&o.memoizedState!==null?Gx(s):c!==null?(c.return=o,ue=c):Gx(s);for(;a!==null;)ue=a,wb(a),a=a.sibling;ue=s,tc=l,qt=u}Wx(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ue=a):Wx(e)}}function Wx(e){for(;ue!==null;){var t=ue;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qt||$u(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!qt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Jn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Px(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Px(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Jo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}qt||t.flags&512&&Th(t)}catch(p){gt(t,t.return,p)}}if(t===e){ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Hx(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Gx(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$u(4,t)}catch(c){gt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){gt(t,s,c)}}var a=t.return;try{Th(t)}catch(c){gt(t,a,c)}break;case 5:var o=t.return;try{Th(t)}catch(c){gt(t,o,c)}}}catch(c){gt(t,t.return,c)}if(t===e){ue=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ue=l;break}ue=t.return}}var BE=Math.ceil,ou=as.ReactCurrentDispatcher,jp=as.ReactCurrentOwner,Vn=as.ReactCurrentBatchConfig,Le=0,Lt=null,_t=null,Ft=0,Nn=0,ca=Ys(0),Rt=0,cl=null,ki=0,zu=0,_p=0,Fo=null,dn=null,Sp=0,Ma=1/0,Vr=null,lu=!1,Ih=null,$s=null,nc=!1,As=null,cu=0,$o=0,Oh=null,Tc=-1,Rc=0;function sn(){return Le&6?yt():Tc!==-1?Tc:Tc=yt()}function zs(e){return e.mode&1?Le&2&&Ft!==0?Ft&-Ft:NE.transition!==null?(Rc===0&&(Rc=s0()),Rc):(e=We,e!==0||(e=window.event,e=e===void 0?16:d0(e.type)),e):1}function cr(e,t,n,r){if(50<$o)throw $o=0,Oh=null,Error(J(185));_l(e,n,r),(!(Le&2)||e!==Lt)&&(e===Lt&&(!(Le&2)&&(zu|=n),Rt===4&&Ss(e,Ft)),xn(e,r),n===1&&Le===0&&!(t.mode&1)&&(Ma=yt()+500,Mu&&Xs()))}function xn(e,t){var n=e.callbackNode;NC(e,t);var r=Hc(e,e===Lt?Ft:0);if(r===0)n!==null&&nx(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&nx(n),t===1)e.tag===0?SE(Kx.bind(null,e)):T0(Kx.bind(null,e)),wE(function(){!(Le&6)&&Xs()}),n=null;else{switch(i0(r)){case 1:n=Ym;break;case 4:n=n0;break;case 16:n=Wc;break;case 536870912:n=r0;break;default:n=Wc}n=Eb(n,bb.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function bb(e,t){if(Tc=-1,Rc=0,Le&6)throw Error(J(327));var n=e.callbackNode;if(pa()&&e.callbackNode!==n)return null;var r=Hc(e,e===Lt?Ft:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=uu(e,r);else{t=r;var s=Le;Le|=2;var a=_b();(Lt!==e||Ft!==t)&&(Vr=null,Ma=yt()+500,bi(e,t));do try{WE();break}catch(l){jb(e,l)}while(!0);cp(),ou.current=a,Le=s,_t!==null?t=0:(Lt=null,Ft=0,t=Rt)}if(t!==0){if(t===2&&(s=oh(e),s!==0&&(r=s,t=Lh(e,s))),t===1)throw n=cl,bi(e,0),Ss(e,r),xn(e,yt()),n;if(t===6)Ss(e,r);else{if(s=e.current.alternate,!(r&30)&&!VE(s)&&(t=uu(e,r),t===2&&(a=oh(e),a!==0&&(r=a,t=Lh(e,a))),t===1))throw n=cl,bi(e,0),Ss(e,r),xn(e,yt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(J(345));case 2:li(e,dn,Vr);break;case 3:if(Ss(e,r),(r&130023424)===r&&(t=Sp+500-yt(),10<t)){if(Hc(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){sn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ph(li.bind(null,e,dn,Vr),t);break}li(e,dn,Vr);break;case 4:if(Ss(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-lr(r);a=1<<o,o=t[o],o>s&&(s=o),r&=~a}if(r=s,r=yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BE(r/1960))-r,10<r){e.timeoutHandle=ph(li.bind(null,e,dn,Vr),r);break}li(e,dn,Vr);break;case 5:li(e,dn,Vr);break;default:throw Error(J(329))}}}return xn(e,yt()),e.callbackNode===n?bb.bind(null,e):null}function Lh(e,t){var n=Fo;return e.current.memoizedState.isDehydrated&&(bi(e,t).flags|=256),e=uu(e,t),e!==2&&(t=dn,dn=n,t!==null&&Mh(t)),e}function Mh(e){dn===null?dn=e:dn.push.apply(dn,e)}function VE(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!dr(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ss(e,t){for(t&=~_p,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-lr(t),r=1<<n;e[n]=-1,t&=~r}}function Kx(e){if(Le&6)throw Error(J(327));pa();var t=Hc(e,0);if(!(t&1))return xn(e,yt()),null;var n=uu(e,t);if(e.tag!==0&&n===2){var r=oh(e);r!==0&&(t=r,n=Lh(e,r))}if(n===1)throw n=cl,bi(e,0),Ss(e,t),xn(e,yt()),n;if(n===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,li(e,dn,Vr),xn(e,yt()),null}function Np(e,t){var n=Le;Le|=1;try{return e(t)}finally{Le=n,Le===0&&(Ma=yt()+500,Mu&&Xs())}}function Ci(e){As!==null&&As.tag===0&&!(Le&6)&&pa();var t=Le;Le|=1;var n=Vn.transition,r=We;try{if(Vn.transition=null,We=1,e)return e()}finally{We=r,Vn.transition=n,Le=t,!(Le&6)&&Xs()}}function kp(){Nn=ca.current,st(ca)}function bi(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,yE(n)),_t!==null)for(n=_t.return;n!==null;){var r=n;switch(ap(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xc();break;case 3:Oa(),st(pn),st(Ht),pp();break;case 5:mp(r);break;case 4:Oa();break;case 13:st(ut);break;case 19:st(ut);break;case 10:up(r.type._context);break;case 22:case 23:kp()}n=n.return}if(Lt=e,_t=e=Us(e.current,null),Ft=Nn=t,Rt=0,cl=null,_p=zu=ki=0,dn=Fo=null,hi!==null){for(t=0;t<hi.length;t++)if(n=hi[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}hi=null}return e}function jb(e,t){do{var n=_t;try{if(cp(),Cc.current=au,iu){for(var r=dt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}iu=!1}if(Ni=0,Ot=Tt=dt=null,Mo=!1,al=0,jp.current=null,n===null||n.return===null){Rt=1,cl=t,_t=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Ft,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=Lx(o);if(h!==null){h.flags&=-257,Mx(h,o,l,a,t),h.mode&1&&Ox(a,u,t),t=h,c=u;var b=t.updateQueue;if(b===null){var g=new Set;g.add(c),t.updateQueue=g}else b.add(c);break e}else{if(!(t&1)){Ox(a,u,t),Cp();break e}c=Error(J(426))}}else if(at&&l.mode&1){var w=Lx(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Mx(w,o,l,a,t),op(La(c,l));break e}}a=c=La(c,l),Rt!==4&&(Rt=2),Fo===null?Fo=[a]:Fo.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=ib(a,c,t);Ex(a,x);break e;case 1:l=c;var v=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&($s===null||!$s.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=ab(a,l,t);Ex(a,j);break e}}a=a.return}while(a!==null)}Nb(n)}catch(S){t=S,_t===n&&n!==null&&(_t=n=n.return);continue}break}while(!0)}function _b(){var e=ou.current;return ou.current=au,e===null?au:e}function Cp(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Lt===null||!(ki&268435455)&&!(zu&268435455)||Ss(Lt,Ft)}function uu(e,t){var n=Le;Le|=2;var r=_b();(Lt!==e||Ft!==t)&&(Vr=null,bi(e,t));do try{qE();break}catch(s){jb(e,s)}while(!0);if(cp(),Le=n,ou.current=r,_t!==null)throw Error(J(261));return Lt=null,Ft=0,Rt}function qE(){for(;_t!==null;)Sb(_t)}function WE(){for(;_t!==null&&!gC();)Sb(_t)}function Sb(e){var t=Cb(e.alternate,e,Nn);e.memoizedProps=e.pendingProps,t===null?Nb(e):_t=t,jp.current=null}function Nb(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=FE(n,t),n!==null){n.flags&=32767,_t=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Rt=6,_t=null;return}}else if(n=DE(n,t,Nn),n!==null){_t=n;return}if(t=t.sibling,t!==null){_t=t;return}_t=t=e}while(t!==null);Rt===0&&(Rt=5)}function li(e,t,n){var r=We,s=Vn.transition;try{Vn.transition=null,We=1,HE(e,t,n,r)}finally{Vn.transition=s,We=r}return null}function HE(e,t,n,r){do pa();while(As!==null);if(Le&6)throw Error(J(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(kC(e,a),e===Lt&&(_t=Lt=null,Ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nc||(nc=!0,Eb(Wc,function(){return pa(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Vn.transition,Vn.transition=null;var o=We;We=1;var l=Le;Le|=4,jp.current=null,zE(e,n),yb(n,e),fE(hh),Gc=!!fh,hh=fh=null,e.current=n,UE(n),xC(),Le=l,We=o,Vn.transition=a}else e.current=n;if(nc&&(nc=!1,As=e,cu=s),a=e.pendingLanes,a===0&&($s=null),wC(n.stateNode),xn(e,yt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(lu)throw lu=!1,e=Ih,Ih=null,e;return cu&1&&e.tag!==0&&pa(),a=e.pendingLanes,a&1?e===Oh?$o++:($o=0,Oh=e):$o=0,Xs(),null}function pa(){if(As!==null){var e=i0(cu),t=Vn.transition,n=We;try{if(Vn.transition=null,We=16>e?16:e,As===null)var r=!1;else{if(e=As,As=null,cu=0,Le&6)throw Error(J(331));var s=Le;for(Le|=4,ue=e.current;ue!==null;){var a=ue,o=a.child;if(ue.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ue=u;ue!==null;){var d=ue;switch(d.tag){case 0:case 11:case 15:Do(8,d,a)}var f=d.child;if(f!==null)f.return=d,ue=f;else for(;ue!==null;){d=ue;var p=d.sibling,h=d.return;if(gb(d),d===u){ue=null;break}if(p!==null){p.return=h,ue=p;break}ue=h}}}var b=a.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}ue=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ue=o;else e:for(;ue!==null;){if(a=ue,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Do(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,ue=x;break e}ue=a.return}}var v=e.current;for(ue=v;ue!==null;){o=ue;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,ue=y;else e:for(o=v;ue!==null;){if(l=ue,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$u(9,l)}}catch(S){gt(l,l.return,S)}if(l===o){ue=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,ue=j;break e}ue=l.return}}if(Le=s,Xs(),Rr&&typeof Rr.onPostCommitFiberRoot=="function")try{Rr.onPostCommitFiberRoot(Ru,e)}catch{}r=!0}return r}finally{We=n,Vn.transition=t}}return!1}function Qx(e,t,n){t=La(n,t),t=ib(e,t,1),e=Fs(e,t,1),t=sn(),e!==null&&(_l(e,1,t),xn(e,t))}function gt(e,t,n){if(e.tag===3)Qx(e,e,n);else for(;t!==null;){if(t.tag===3){Qx(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($s===null||!$s.has(r))){e=La(n,e),e=ab(t,e,1),t=Fs(t,e,1),e=sn(),t!==null&&(_l(t,1,e),xn(t,e));break}}t=t.return}}function GE(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=sn(),e.pingedLanes|=e.suspendedLanes&n,Lt===e&&(Ft&n)===n&&(Rt===4||Rt===3&&(Ft&130023424)===Ft&&500>yt()-Sp?bi(e,0):_p|=n),xn(e,t)}function kb(e,t){t===0&&(e.mode&1?(t=Hl,Hl<<=1,!(Hl&130023424)&&(Hl=4194304)):t=1);var n=sn();e=Zr(e,t),e!==null&&(_l(e,t,n),xn(e,n))}function KE(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),kb(e,n)}function QE(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(t),kb(e,n)}var Cb;Cb=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||pn.current)mn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return mn=!1,ME(e,t,n);mn=!!(e.flags&131072)}else mn=!1,at&&t.flags&1048576&&R0(t,eu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Pc(e,t),e=t.pendingProps;var s=Ra(t,Ht.current);ma(t,n),s=xp(null,t,r,e,s,n);var a=vp();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gn(r)?(a=!0,Jc(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,fp(t),s.updater=Fu,t.stateNode=s,s._reactInternals=t,jh(t,r,e,n),t=Nh(null,t,r,!0,a,n)):(t.tag=0,at&&a&&ip(t),tn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Pc(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=XE(r),e=Jn(r,e),s){case 0:t=Sh(null,t,r,e,n);break e;case 1:t=$x(null,t,r,e,n);break e;case 11:t=Dx(null,t,r,e,n);break e;case 14:t=Fx(null,t,r,Jn(r.type,e),n);break e}throw Error(J(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Jn(r,s),Sh(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Jn(r,s),$x(e,t,r,s,n);case 3:e:{if(ub(t),e===null)throw Error(J(387));r=t.pendingProps,a=t.memoizedState,s=a.element,D0(e,t),ru(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=La(Error(J(423)),t),t=zx(e,t,r,n,s);break e}else if(r!==s){s=La(Error(J(424)),t),t=zx(e,t,r,n,s);break e}else for(Cn=Ds(t.stateNode.containerInfo.firstChild),Pn=t,at=!0,sr=null,n=L0(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Aa(),r===s){t=es(e,t,n);break e}tn(e,t,r,n)}t=t.child}return t;case 5:return F0(t),e===null&&yh(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,o=s.children,mh(r,s)?o=null:a!==null&&mh(r,a)&&(t.flags|=32),cb(e,t),tn(e,t,o,n),t.child;case 6:return e===null&&yh(t),null;case 13:return db(e,t,n);case 4:return hp(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ia(t,null,r,n):tn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Jn(r,s),Dx(e,t,r,s,n);case 7:return tn(e,t,t.pendingProps,n),t.child;case 8:return tn(e,t,t.pendingProps.children,n),t.child;case 12:return tn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Je(tu,r._currentValue),r._currentValue=o,a!==null)if(dr(a.value,o)){if(a.children===s.children&&!pn.current){t=es(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Qr(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),wh(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(J(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),wh(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}tn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,ma(t,n),s=Wn(s),r=r(s),t.flags|=1,tn(e,t,r,n),t.child;case 14:return r=t.type,s=Jn(r,t.pendingProps),s=Jn(r.type,s),Fx(e,t,r,s,n);case 15:return ob(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Jn(r,s),Pc(e,t),t.tag=1,gn(r)?(e=!0,Jc(t)):e=!1,ma(t,n),sb(t,r,s),jh(t,r,s,n),Nh(null,t,r,!0,e,n);case 19:return fb(e,t,n);case 22:return lb(e,t,n)}throw Error(J(156,t.tag))};function Eb(e,t){return t0(e,t)}function YE(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(e,t,n,r){return new YE(e,t,n,r)}function Ep(e){return e=e.prototype,!(!e||!e.isReactComponent)}function XE(e){if(typeof e=="function")return Ep(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Gm)return 11;if(e===Km)return 14}return 2}function Us(e,t){var n=e.alternate;return n===null?(n=Bn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ac(e,t,n,r,s,a){var o=2;if(r=e,typeof e=="function")Ep(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Zi:return ji(n.children,s,a,t);case Hm:o=8,s|=8;break;case Hf:return e=Bn(12,n,t,s|2),e.elementType=Hf,e.lanes=a,e;case Gf:return e=Bn(13,n,t,s),e.elementType=Gf,e.lanes=a,e;case Kf:return e=Bn(19,n,t,s),e.elementType=Kf,e.lanes=a,e;case Fw:return Uu(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Mw:o=10;break e;case Dw:o=9;break e;case Gm:o=11;break e;case Km:o=14;break e;case bs:o=16,r=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=Bn(o,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function ji(e,t,n,r){return e=Bn(7,e,r,t),e.lanes=n,e}function Uu(e,t,n,r){return e=Bn(22,e,r,t),e.elementType=Fw,e.lanes=n,e.stateNode={isHidden:!1},e}function af(e,t,n){return e=Bn(6,e,null,t),e.lanes=n,e}function of(e,t,n){return t=Bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function JE(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zd(0),this.expirationTimes=zd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Pp(e,t,n,r,s,a,o,l,c){return e=new JE(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Bn(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fp(a),e}function ZE(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ji,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Pb(e){if(!e)return Ws;e=e._reactInternals;e:{if(Li(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var n=e.type;if(gn(n))return P0(e,n,t)}return t}function Tb(e,t,n,r,s,a,o,l,c){return e=Pp(n,r,!0,e,s,a,o,l,c),e.context=Pb(null),n=e.current,r=sn(),s=zs(n),a=Qr(r,s),a.callback=t??null,Fs(n,a,s),e.current.lanes=s,_l(e,s,r),xn(e,r),e}function Bu(e,t,n,r){var s=t.current,a=sn(),o=zs(s);return n=Pb(n),t.context===null?t.context=n:t.pendingContext=n,t=Qr(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Fs(s,t,o),e!==null&&(cr(e,s,o,a),kc(e,s,o)),o}function du(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Yx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Tp(e,t){Yx(e,t),(e=e.alternate)&&Yx(e,t)}function e2(){return null}var Rb=typeof reportError=="function"?reportError:function(e){console.error(e)};function Rp(e){this._internalRoot=e}Vu.prototype.render=Rp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));Bu(e,t,null,null)};Vu.prototype.unmount=Rp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ci(function(){Bu(null,e,null,null)}),t[Jr]=null}};function Vu(e){this._internalRoot=e}Vu.prototype.unstable_scheduleHydration=function(e){if(e){var t=l0();e={blockedOn:null,target:e,priority:t};for(var n=0;n<_s.length&&t!==0&&t<_s[n].priority;n++);_s.splice(n,0,e),n===0&&u0(e)}};function Ap(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xx(){}function t2(e,t,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=du(o);a.call(u)}}var o=Tb(t,r,e,0,null,!1,!1,"",Xx);return e._reactRootContainer=o,e[Jr]=o.current,tl(e.nodeType===8?e.parentNode:e),Ci(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=du(c);l.call(u)}}var c=Pp(e,0,!1,null,null,!1,!1,"",Xx);return e._reactRootContainer=c,e[Jr]=c.current,tl(e.nodeType===8?e.parentNode:e),Ci(function(){Bu(t,c,n,r)}),c}function Wu(e,t,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=du(o);l.call(c)}}Bu(t,o,e,s)}else o=t2(n,t,e,s,r);return du(o)}a0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=So(t.pendingLanes);n!==0&&(Xm(t,n|1),xn(t,yt()),!(Le&6)&&(Ma=yt()+500,Xs()))}break;case 13:Ci(function(){var r=Zr(e,1);if(r!==null){var s=sn();cr(r,e,1,s)}}),Tp(e,1)}};Jm=function(e){if(e.tag===13){var t=Zr(e,134217728);if(t!==null){var n=sn();cr(t,e,134217728,n)}Tp(e,134217728)}};o0=function(e){if(e.tag===13){var t=zs(e),n=Zr(e,t);if(n!==null){var r=sn();cr(n,e,t,r)}Tp(e,t)}};l0=function(){return We};c0=function(e,t){var n=We;try{return We=e,t()}finally{We=n}};sh=function(e,t,n){switch(t){case"input":if(Xf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Lu(r);if(!s)throw Error(J(90));zw(r),Xf(r,s)}}}break;case"textarea":Bw(e,n);break;case"select":t=n.value,t!=null&&ua(e,!!n.multiple,t,!1)}};Qw=Np;Yw=Ci;var n2={usingClientEntryPoint:!1,Events:[Nl,ra,Lu,Gw,Kw,Np]},go={findFiberByHostInstance:fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},r2={bundleType:go.bundleType,version:go.version,rendererPackageName:go.rendererPackageName,rendererConfig:go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:as.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zw(e),e===null?null:e.stateNode},findFiberByHostInstance:go.findFiberByHostInstance||e2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{Ru=rc.inject(r2),Rr=rc}catch{}}In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n2;In.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ap(t))throw Error(J(200));return ZE(e,t,null,n)};In.createRoot=function(e,t){if(!Ap(e))throw Error(J(299));var n=!1,r="",s=Rb;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Pp(e,1,!1,null,null,n,!1,r,s),e[Jr]=t.current,tl(e.nodeType===8?e.parentNode:e),new Rp(t)};In.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=Zw(t),e=e===null?null:e.stateNode,e};In.flushSync=function(e){return Ci(e)};In.hydrate=function(e,t,n){if(!qu(t))throw Error(J(200));return Wu(null,e,t,!0,n)};In.hydrateRoot=function(e,t,n){if(!Ap(e))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=Rb;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Tb(t,null,e,1,n??null,s,!1,a,o),e[Jr]=t.current,tl(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Vu(t)};In.render=function(e,t,n){if(!qu(t))throw Error(J(200));return Wu(null,e,t,!1,n)};In.unmountComponentAtNode=function(e){if(!qu(e))throw Error(J(40));return e._reactRootContainer?(Ci(function(){Wu(null,null,e,!1,function(){e._reactRootContainer=null,e[Jr]=null})}),!0):!1};In.unstable_batchedUpdates=Np;In.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qu(n))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return Wu(e,t,n,!1,r)};In.version="18.3.1-next-f1338f8080-20240426";function Ab(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ab)}catch(e){console.error(e)}}Ab(),Aw.exports=In;var Mi=Aw.exports;const Ib=Pu(Mi);var Ob,Jx=Mi;Ob=Jx.createRoot,Jx.hydrateRoot;const s2=1,i2=1e6;let lf=0;function a2(){return lf=(lf+1)%Number.MAX_SAFE_INTEGER,lf.toString()}const cf=new Map,Zx=e=>{if(cf.has(e))return;const t=setTimeout(()=>{cf.delete(e),zo({type:"REMOVE_TOAST",toastId:e})},i2);cf.set(e,t)},o2=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,s2)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Zx(n):e.toasts.forEach(r=>{Zx(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Ic=[];let Oc={toasts:[]};function zo(e){Oc=o2(Oc,e),Ic.forEach(t=>{t(Oc)})}function l2({...e}){const t=a2(),n=s=>zo({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>zo({type:"DISMISS_TOAST",toastId:t});return zo({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function Ve(){const[e,t]=m.useState(Oc);return m.useEffect(()=>(Ic.push(t),()=>{const n=Ic.indexOf(t);n>-1&&Ic.splice(n,1)}),[e]),{...e,toast:l2,dismiss:n=>zo({type:"DISMISS_TOAST",toastId:n})}}function pe(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function ev(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Lb(...e){return t=>{let n=!1;const r=e.map(s=>{const a=ev(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():ev(e[s],null)}}}}function Me(...e){return m.useCallback(Lb(...e),e)}function c2(e,t){const n=m.createContext(t),r=a=>{const{children:o,...l}=a,c=m.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function s(a){const o=m.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function yn(e,t=[]){let n=[];function r(a,o){const l=m.createContext(o),c=n.length;n=[...n,o];const u=f=>{var x;const{scope:p,children:h,...b}=f,g=((x=p==null?void 0:p[e])==null?void 0:x[c])||l,w=m.useMemo(()=>b,Object.values(b));return i.jsx(g.Provider,{value:w,children:h})};u.displayName=a+"Provider";function d(f,p){var g;const h=((g=p==null?void 0:p[e])==null?void 0:g[c])||l,b=m.useContext(h);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=n.map(o=>m.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,u2(s,...t)]}function u2(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Da(e){const t=d2(e),n=m.forwardRef((r,s)=>{const{children:a,...o}=r,l=m.Children.toArray(a),c=l.find(h2);if(c){const u=c.props.children,d=l.map(f=>f===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:f);return i.jsx(t,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,d):null})}return i.jsx(t,{...o,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}var Ha=Da("Slot");function d2(e){const t=m.forwardRef((n,r)=>{const{children:s,...a}=n;if(m.isValidElement(s)){const o=p2(s),l=m2(a,s.props);return s.type!==m.Fragment&&(l.ref=r?Lb(r,o):o),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Mb=Symbol("radix.slottable");function f2(e){const t=({children:n})=>i.jsx(i.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Mb,t}function h2(e){return m.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Mb}function m2(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function p2(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Ip(e){const t=e+"CollectionProvider",[n,r]=yn(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:w,children:x}=g,v=ie.useRef(null),y=ie.useRef(new Map).current;return i.jsx(s,{scope:w,itemMap:y,collectionRef:v,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=Da(l),u=ie.forwardRef((g,w)=>{const{scope:x,children:v}=g,y=a(l,x),j=Me(w,y.collectionRef);return i.jsx(c,{ref:j,children:v})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",p=Da(d),h=ie.forwardRef((g,w)=>{const{scope:x,children:v,...y}=g,j=ie.useRef(null),S=Me(w,j),_=a(d,x);return ie.useEffect(()=>(_.itemMap.set(j,{ref:j,...y}),()=>void _.itemMap.delete(j))),i.jsx(p,{[f]:"",ref:S,children:v})});h.displayName=d;function b(g){const w=a(e+"CollectionConsumer",g);return ie.useCallback(()=>{const v=w.collectionRef.current;if(!v)return[];const y=Array.from(v.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((_,N)=>y.indexOf(_.ref.current)-y.indexOf(N.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:u,ItemSlot:h},b,r]}var g2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xe=g2.reduce((e,t)=>{const n=Da(`Primitive.${t}`),r=m.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Db(e,t){e&&Mi.flushSync(()=>e.dispatchEvent(t))}function An(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function x2(e,t=globalThis==null?void 0:globalThis.document){const n=An(e);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var v2="DismissableLayer",Dh="dismissableLayer.update",y2="dismissableLayer.pointerDownOutside",w2="dismissableLayer.focusOutside",tv,Fb=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Cl=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,u=m.useContext(Fb),[d,f]=m.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=m.useState({}),b=Me(t,N=>f(N)),g=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(w),v=d?g.indexOf(d):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,j=v>=x,S=j2(N=>{const C=N.target,A=[...u.branches].some(R=>R.contains(C));!j||A||(s==null||s(N),o==null||o(N),N.defaultPrevented||l==null||l())},p),_=_2(N=>{const C=N.target;[...u.branches].some(R=>R.contains(C))||(a==null||a(N),o==null||o(N),N.defaultPrevented||l==null||l())},p);return x2(N=>{v===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),m.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(tv=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),nv(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=tv)}},[d,p,n,u]),m.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),nv())},[d,u]),m.useEffect(()=>{const N=()=>h({});return document.addEventListener(Dh,N),()=>document.removeEventListener(Dh,N)},[]),i.jsx(xe.div,{...c,ref:b,style:{pointerEvents:y?j?"auto":"none":void 0,...e.style},onFocusCapture:pe(e.onFocusCapture,_.onFocusCapture),onBlurCapture:pe(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:pe(e.onPointerDownCapture,S.onPointerDownCapture)})});Cl.displayName=v2;var b2="DismissableLayerBranch",$b=m.forwardRef((e,t)=>{const n=m.useContext(Fb),r=m.useRef(null),s=Me(t,r);return m.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(xe.div,{...e,ref:s})});$b.displayName=b2;function j2(e,t=globalThis==null?void 0:globalThis.document){const n=An(e),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){zb(y2,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function _2(e,t=globalThis==null?void 0:globalThis.document){const n=An(e),r=m.useRef(!1);return m.useEffect(()=>{const s=a=>{a.target&&!r.current&&zb(w2,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function nv(){const e=new CustomEvent(Dh);document.dispatchEvent(e)}function zb(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Db(s,a):s.dispatchEvent(a)}var S2=Cl,N2=$b,Nt=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},k2="Portal",Hu=m.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,a]=m.useState(!1);Nt(()=>a(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Ib.createPortal(i.jsx(xe.div,{...r,ref:t}),o):null});Hu.displayName=k2;function C2(e,t){return m.useReducer((n,r)=>t[n][r]??n,e)}var os=e=>{const{present:t,children:n}=e,r=E2(t),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),a=Me(r.ref,P2(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:a}):null};os.displayName="Presence";function E2(e){const[t,n]=m.useState(),r=m.useRef(null),s=m.useRef(e),a=m.useRef("none"),o=e?"mounted":"unmounted",[l,c]=C2(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=sc(r.current);a.current=l==="mounted"?u:"none"},[l]),Nt(()=>{const u=r.current,d=s.current;if(d!==e){const p=a.current,h=sc(u);e?c("MOUNT"):h==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&p!==h?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Nt(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=h=>{const g=sc(r.current).includes(h.animationName);if(h.target===t&&g&&(c("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},p=h=>{h.target===t&&(a.current=sc(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function sc(e){return(e==null?void 0:e.animationName)||"none"}function P2(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var T2=Bm[" useInsertionEffect ".trim().toString()]||Nt;function Or({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,o]=R2({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const d=m.useRef(e!==void 0);m.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=m.useCallback(d=>{var f;if(l){const p=A2(d)?d(e):d;p!==e&&((f=o.current)==null||f.call(o,p))}else a(d)},[l,e,a,o]);return[c,u]}function R2({defaultProp:e,onChange:t}){const[n,r]=m.useState(e),s=m.useRef(n),a=m.useRef(t);return T2(()=>{a.current=t},[t]),m.useEffect(()=>{var o;s.current!==n&&((o=a.current)==null||o.call(a,n),s.current=n)},[n,s]),[n,r,a]}function A2(e){return typeof e=="function"}var Ub=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),I2="VisuallyHidden",Gu=m.forwardRef((e,t)=>i.jsx(xe.span,{...e,ref:t,style:{...Ub,...e.style}}));Gu.displayName=I2;var O2=Gu,Op="ToastProvider",[Lp,L2,M2]=Ip("Toast"),[Bb,wB]=yn("Toast",[M2]),[D2,Ku]=Bb(Op),Vb=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=e,[l,c]=m.useState(null),[u,d]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Op}\`. Expected non-empty \`string\`.`),i.jsx(Lp.Provider,{scope:t,children:i.jsx(D2,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>d(h=>h+1),[]),onToastRemove:m.useCallback(()=>d(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};Vb.displayName=Op;var qb="ToastViewport",F2=["F8"],Fh="toast.viewportPause",$h="toast.viewportResume",Wb=m.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=F2,label:s="Notifications ({hotkey})",...a}=e,o=Ku(qb,n),l=L2(n),c=m.useRef(null),u=m.useRef(null),d=m.useRef(null),f=m.useRef(null),p=Me(t,f,o.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;m.useEffect(()=>{const w=x=>{var y;r.length!==0&&r.every(j=>x[j]||x.code===j)&&((y=f.current)==null||y.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),m.useEffect(()=>{const w=c.current,x=f.current;if(b&&w&&x){const v=()=>{if(!o.isClosePausedRef.current){const _=new CustomEvent(Fh);x.dispatchEvent(_),o.isClosePausedRef.current=!0}},y=()=>{if(o.isClosePausedRef.current){const _=new CustomEvent($h);x.dispatchEvent(_),o.isClosePausedRef.current=!1}},j=_=>{!w.contains(_.relatedTarget)&&y()},S=()=>{w.contains(document.activeElement)||y()};return w.addEventListener("focusin",v),w.addEventListener("focusout",j),w.addEventListener("pointermove",v),w.addEventListener("pointerleave",S),window.addEventListener("blur",v),window.addEventListener("focus",y),()=>{w.removeEventListener("focusin",v),w.removeEventListener("focusout",j),w.removeEventListener("pointermove",v),w.removeEventListener("pointerleave",S),window.removeEventListener("blur",v),window.removeEventListener("focus",y)}}},[b,o.isClosePausedRef]);const g=m.useCallback(({tabbingDirection:w})=>{const v=l().map(y=>{const j=y.ref.current,S=[j,...X2(j)];return w==="forwards"?S:S.reverse()});return(w==="forwards"?v.reverse():v).flat()},[l]);return m.useEffect(()=>{const w=f.current;if(w){const x=v=>{var S,_,N;const y=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!y){const C=document.activeElement,A=v.shiftKey;if(v.target===w&&A){(S=u.current)==null||S.focus();return}const T=g({tabbingDirection:A?"backwards":"forwards"}),z=T.findIndex(I=>I===C);uf(T.slice(z+1))?v.preventDefault():A?(_=u.current)==null||_.focus():(N=d.current)==null||N.focus()}};return w.addEventListener("keydown",x),()=>w.removeEventListener("keydown",x)}},[l,g]),i.jsxs(N2,{ref:c,role:"region","aria-label":s.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&i.jsx(zh,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});uf(w)}}),i.jsx(Lp.Slot,{scope:n,children:i.jsx(xe.ol,{tabIndex:-1,...a,ref:p})}),b&&i.jsx(zh,{ref:d,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});uf(w)}})]})});Wb.displayName=qb;var Hb="ToastFocusProxy",zh=m.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,a=Ku(Hb,n);return i.jsx(Gu,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&r()}})});zh.displayName=Hb;var El="Toast",$2="toast.swipeStart",z2="toast.swipeMove",U2="toast.swipeCancel",B2="toast.swipeEnd",Gb=m.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...o}=e,[l,c]=Or({prop:r,defaultProp:s??!0,onChange:a,caller:El});return i.jsx(os,{present:n||l,children:i.jsx(W2,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:An(e.onPause),onResume:An(e.onResume),onSwipeStart:pe(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:pe(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});Gb.displayName=El;var[V2,q2]=Bb(El,{onClose(){}}),W2=m.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:h,...b}=e,g=Ku(El,n),[w,x]=m.useState(null),v=Me(t,I=>x(I)),y=m.useRef(null),j=m.useRef(null),S=s||g.duration,_=m.useRef(0),N=m.useRef(S),C=m.useRef(0),{onToastAdd:A,onToastRemove:R}=g,O=An(()=>{var B;(w==null?void 0:w.contains(document.activeElement))&&((B=g.viewport)==null||B.focus()),o()}),T=m.useCallback(I=>{!I||I===1/0||(window.clearTimeout(C.current),_.current=new Date().getTime(),C.current=window.setTimeout(O,I))},[O]);m.useEffect(()=>{const I=g.viewport;if(I){const B=()=>{T(N.current),u==null||u()},$=()=>{const L=new Date().getTime()-_.current;N.current=N.current-L,window.clearTimeout(C.current),c==null||c()};return I.addEventListener(Fh,$),I.addEventListener($h,B),()=>{I.removeEventListener(Fh,$),I.removeEventListener($h,B)}}},[g.viewport,S,c,u,T]),m.useEffect(()=>{a&&!g.isClosePausedRef.current&&T(S)},[a,S,g.isClosePausedRef,T]),m.useEffect(()=>(A(),()=>R()),[A,R]);const z=m.useMemo(()=>w?ej(w):null,[w]);return g.viewport?i.jsxs(i.Fragment,{children:[z&&i.jsx(H2,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),i.jsx(V2,{scope:n,onClose:O,children:Mi.createPortal(i.jsx(Lp.ItemSlot,{scope:n,children:i.jsx(S2,{asChild:!0,onEscapeKeyDown:pe(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||O(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(xe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...b,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:pe(e.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:pe(e.onPointerDown,I=>{I.button===0&&(y.current={x:I.clientX,y:I.clientY})}),onPointerMove:pe(e.onPointerMove,I=>{if(!y.current)return;const B=I.clientX-y.current.x,$=I.clientY-y.current.y,L=!!j.current,M=["left","right"].includes(g.swipeDirection),E=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,k=M?E(0,B):0,F=M?0:E(0,$),H=I.pointerType==="touch"?10:2,P={x:k,y:F},q={originalEvent:I,delta:P};L?(j.current=P,ic(z2,f,q,{discrete:!1})):rv(P,g.swipeDirection,H)?(j.current=P,ic($2,d,q,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(B)>H||Math.abs($)>H)&&(y.current=null)}),onPointerUp:pe(e.onPointerUp,I=>{const B=j.current,$=I.target;if($.hasPointerCapture(I.pointerId)&&$.releasePointerCapture(I.pointerId),j.current=null,y.current=null,B){const L=I.currentTarget,M={originalEvent:I,delta:B};rv(B,g.swipeDirection,g.swipeThreshold)?ic(B2,h,M,{discrete:!0}):ic(U2,p,M,{discrete:!0}),L.addEventListener("click",E=>E.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),H2=e=>{const{__scopeToast:t,children:n,...r}=e,s=Ku(El,t),[a,o]=m.useState(!1),[l,c]=m.useState(!1);return Q2(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(Hu,{asChild:!0,children:i.jsx(Gu,{...r,children:a&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},G2="ToastTitle",Kb=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(xe.div,{...r,ref:t})});Kb.displayName=G2;var K2="ToastDescription",Qb=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(xe.div,{...r,ref:t})});Qb.displayName=K2;var Yb="ToastAction",Xb=m.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?i.jsx(Zb,{altText:n,asChild:!0,children:i.jsx(Mp,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Yb}\`. Expected non-empty \`string\`.`),null)});Xb.displayName=Yb;var Jb="ToastClose",Mp=m.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=q2(Jb,n);return i.jsx(Zb,{asChild:!0,children:i.jsx(xe.button,{type:"button",...r,ref:t,onClick:pe(e.onClick,s.onClose)})})});Mp.displayName=Jb;var Zb=m.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return i.jsx(xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function ej(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),Y2(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...ej(r))}}),t}function ic(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Db(s,a):s.dispatchEvent(a)}var rv=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),a=r>s;return t==="left"||t==="right"?a&&r>n:!a&&s>n};function Q2(e=()=>{}){const t=An(e);Nt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function Y2(e){return e.nodeType===e.ELEMENT_NODE}function X2(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function uf(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var J2=Vb,tj=Wb,nj=Gb,rj=Kb,sj=Qb,ij=Xb,aj=Mp;function oj(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=oj(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function lj(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=oj(e))&&(r&&(r+=" "),r+=t);return r}const sv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,iv=lj,Di=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return iv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=t,o=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],f=a==null?void 0:a[u];if(d===null)return null;const p=sv(d)||sv(f);return s[u][p]}),l=n&&Object.entries(n).reduce((u,d)=>{let[f,p]=d;return p===void 0||(u[f]=p),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:p,...h}=d;return Object.entries(h).every(b=>{let[g,w]=b;return Array.isArray(w)?w.includes({...a,...l}[g]):{...a,...l}[g]===w})?[...u,f,p]:u},[]);return iv(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cj=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},c)=>m.createElement("svg",{ref:c,...eP,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:cj("lucide",s),...l},[...o.map(([u,d])=>m.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(e,t)=>{const n=m.forwardRef(({className:r,...s},a)=>m.createElement(tP,{ref:a,iconNode:t,className:cj(`lucide-${Z2(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=be("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=be("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=be("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=be("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=be("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=be("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=be("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=be("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=be("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=be("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=be("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=be("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=be("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=be("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=be("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=be("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=be("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=be("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=be("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=be("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=be("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=be("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=be("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=be("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=be("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=be("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=be("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=be("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=be("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=be("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$p="-",gP=e=>{const t=vP(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split($p);return l[0]===""&&l.length!==1&&l.shift(),bj(l,t)||xP(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},bj=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?bj(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join($p);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},dv=/^\[(.+)\]$/,xP=e=>{if(dv.test(e)){const t=dv.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},vP=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return wP(Object.entries(e.classGroups),n).forEach(([a,o])=>{Bh(o,r,a,t)}),r},Bh=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:fv(t,s);a.classGroupId=n;return}if(typeof s=="function"){if(yP(s)){Bh(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{Bh(o,fv(t,a),n,r)})})},fv=(e,t)=>{let n=e;return t.split($p).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},yP=e=>e.isThemeGetter,wP=(e,t)=>t?e.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[n,s]}):e,bP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},jj="!",jP=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],a=t.length,o=l=>{const c=[];let u=0,d=0,f;for(let w=0;w<l.length;w++){let x=l[w];if(u===0){if(x===s&&(r||l.slice(w,w+a)===t)){c.push(l.slice(d,w)),d=w+a;continue}if(x==="/"){f=w;continue}}x==="["?u++:x==="]"&&u--}const p=c.length===0?l:l.substring(d),h=p.startsWith(jj),b=h?p.substring(1):p,g=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:h,baseClassName:b,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},_P=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},SP=e=>({cache:bP(e.cacheSize),parseClassName:jP(e),...gP(e)}),NP=/\s+/,kP=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,a=[],o=e.trim().split(NP);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:h}=n(u);let b=!!h,g=r(b?p.substring(0,h):p);if(!g){if(!b){l=u+(l.length>0?" "+l:l);continue}if(g=r(p),!g){l=u+(l.length>0?" "+l:l);continue}b=!1}const w=_P(d).join(":"),x=f?w+jj:w,v=x+g;if(a.includes(v))continue;a.push(v);const y=s(g,b);for(let j=0;j<y.length;++j){const S=y[j];a.push(x+S)}l=u+(l.length>0?" "+l:l)}return l};function CP(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=_j(t))&&(r&&(r+=" "),r+=n);return r}const _j=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=_j(e[r]))&&(n&&(n+=" "),n+=t);return n};function EP(e,...t){let n,r,s,a=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return n=SP(u),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=kP(c,n);return s(c,d),d}return function(){return a(CP.apply(null,arguments))}}const et=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Sj=/^\[(?:([a-z-]+):)?(.+)\]$/i,PP=/^\d+\/\d+$/,TP=new Set(["px","full","screen"]),RP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,AP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,IP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,OP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,LP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zr=e=>ga(e)||TP.has(e)||PP.test(e),ms=e=>Ka(e,"length",VP),ga=e=>!!e&&!Number.isNaN(Number(e)),df=e=>Ka(e,"number",ga),xo=e=>!!e&&Number.isInteger(Number(e)),MP=e=>e.endsWith("%")&&ga(e.slice(0,-1)),Pe=e=>Sj.test(e),ps=e=>RP.test(e),DP=new Set(["length","size","percentage"]),FP=e=>Ka(e,DP,Nj),$P=e=>Ka(e,"position",Nj),zP=new Set(["image","url"]),UP=e=>Ka(e,zP,WP),BP=e=>Ka(e,"",qP),vo=()=>!0,Ka=(e,t,n)=>{const r=Sj.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},VP=e=>AP.test(e)&&!IP.test(e),Nj=()=>!1,qP=e=>OP.test(e),WP=e=>LP.test(e),HP=()=>{const e=et("colors"),t=et("spacing"),n=et("blur"),r=et("brightness"),s=et("borderColor"),a=et("borderRadius"),o=et("borderSpacing"),l=et("borderWidth"),c=et("contrast"),u=et("grayscale"),d=et("hueRotate"),f=et("invert"),p=et("gap"),h=et("gradientColorStops"),b=et("gradientColorStopPositions"),g=et("inset"),w=et("margin"),x=et("opacity"),v=et("padding"),y=et("saturate"),j=et("scale"),S=et("sepia"),_=et("skew"),N=et("space"),C=et("translate"),A=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",Pe,t],T=()=>[Pe,t],z=()=>["",zr,ms],I=()=>["auto",ga,Pe],B=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],E=()=>["","0",Pe],k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[ga,Pe];return{cacheSize:500,separator:":",theme:{colors:[vo],spacing:[zr,ms],blur:["none","",ps,Pe],brightness:F(),borderColor:[e],borderRadius:["none","","full",ps,Pe],borderSpacing:T(),borderWidth:z(),contrast:F(),grayscale:E(),hueRotate:F(),invert:E(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[MP,ms],inset:O(),margin:O(),opacity:F(),padding:T(),saturate:F(),scale:F(),sepia:E(),skew:F(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",Pe]}],container:["container"],columns:[{columns:[ps]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...B(),Pe]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",xo,Pe]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pe]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",xo,Pe]}],"grid-cols":[{"grid-cols":[vo]}],"col-start-end":[{col:["auto",{span:["full",xo,Pe]},Pe]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[vo]}],"row-start-end":[{row:["auto",{span:[xo,Pe]},Pe]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pe,t]}],"min-w":[{"min-w":[Pe,t,"min","max","fit"]}],"max-w":[{"max-w":[Pe,t,"none","full","min","max","fit","prose",{screen:[ps]},ps]}],h:[{h:[Pe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ps,ms]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",df]}],"font-family":[{font:[vo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pe]}],"line-clamp":[{"line-clamp":["none",ga,df]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",zr,Pe]}],"list-image":[{"list-image":["none",Pe]}],"list-style-type":[{list:["none","disc","decimal",Pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",zr,ms]}],"underline-offset":[{"underline-offset":["auto",zr,Pe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...B(),$P]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",FP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},UP]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:$()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[zr,Pe]}],"outline-w":[{outline:[zr,ms]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[zr,ms]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ps,BP]}],"shadow-color":[{shadow:[vo]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ps,Pe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[y]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pe]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",Pe]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[xo,Pe]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[zr,ms,df]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},GP=EP(HP);function oe(...e){return GP(lj(e))}const KP=J2,kj=m.forwardRef(({className:e,...t},n)=>i.jsx(tj,{ref:n,className:oe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));kj.displayName=tj.displayName;const QP=Di("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Cj=m.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(nj,{ref:r,className:oe(QP({variant:t}),e),...n}));Cj.displayName=nj.displayName;const YP=m.forwardRef(({className:e,...t},n)=>i.jsx(ij,{ref:n,className:oe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));YP.displayName=ij.displayName;const Ej=m.forwardRef(({className:e,...t},n)=>i.jsx(aj,{ref:n,className:oe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(Ga,{className:"h-4 w-4"})}));Ej.displayName=aj.displayName;const Pj=m.forwardRef(({className:e,...t},n)=>i.jsx(rj,{ref:n,className:oe("text-sm font-semibold",e),...t}));Pj.displayName=rj.displayName;const Tj=m.forwardRef(({className:e,...t},n)=>i.jsx(sj,{ref:n,className:oe("text-sm opacity-90",e),...t}));Tj.displayName=sj.displayName;function XP(){const{toasts:e}=Ve();return i.jsxs(KP,{children:[e.map(function({id:t,title:n,description:r,action:s,...a}){return i.jsxs(Cj,{...a,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(Pj,{children:n}),r&&i.jsx(Tj,{children:r})]}),s,i.jsx(Ej,{})]},t)}),i.jsx(kj,{})]})}var hv=["light","dark"],JP="(prefers-color-scheme: dark)",ZP=m.createContext(void 0),eT={setTheme:e=>{},themes:[]},tT=()=>{var e;return(e=m.useContext(ZP))!=null?e:eT};m.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=s?hv.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(b,g=!1,w=!0)=>{let x=o?o[b]:b,v=g?b+"|| ''":`'${x}'`,y="";return s&&w&&!g&&hv.includes(b)&&(y+=`d.style.colorScheme = '${b}';`),n==="class"?g||x?y+=`c.add(${v})`:y+="null":x&&(y+=`d[s](n,${v})`),y},h=e?`!function(){${d}${p(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${JP}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${u?"":"else{"+p(a,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(a,!1,!1)};}${f}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:h}})});var nT=e=>{switch(e){case"success":return iT;case"info":return oT;case"warning":return aT;case"error":return lT;default:return null}},rT=Array(12).fill(0),sT=({visible:e,className:t})=>ie.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},ie.createElement("div",{className:"sonner-spinner"},rT.map((n,r)=>ie.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),iT=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),aT=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),oT=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),lT=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),cT=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ie.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ie.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),uT=()=>{let[e,t]=ie.useState(document.hidden);return ie.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Vh=1,dT=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Vh++,a=this.toasts.find(l=>l.id===s),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:n}),{...l,...e,id:s,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0,a,o=r.then(async c=>{if(a=["resolve",c],ie.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(hT(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(a=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Vh++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},un=new dT,fT=(e,t)=>{let n=(t==null?void 0:t.id)||Vh++;return un.addToast({title:e,...t,id:n}),n},hT=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",mT=fT,pT=()=>un.toasts,gT=()=>un.getActiveToasts();Object.assign(mT,{success:un.success,info:un.info,warning:un.warning,error:un.error,custom:un.custom,message:un.message,promise:un.promise,dismiss:un.dismiss,loading:un.loading},{getHistory:pT,getToasts:gT});function xT(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}xT(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function ac(e){return e.label!==void 0}var vT=3,yT="32px",wT="16px",mv=4e3,bT=356,jT=14,_T=20,ST=200;function Qn(...e){return e.filter(Boolean).join(" ")}function NT(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var kT=e=>{var t,n,r,s,a,o,l,c,u,d,f;let{invert:p,toast:h,unstyled:b,interacting:g,setHeights:w,visibleToasts:x,heights:v,index:y,toasts:j,expanded:S,removeToast:_,defaultRichColors:N,closeButton:C,style:A,cancelButtonStyle:R,actionButtonStyle:O,className:T="",descriptionClassName:z="",duration:I,position:B,gap:$,loadingIcon:L,expandByDefault:M,classNames:E,icons:k,closeButtonAriaLabel:F="Close toast",pauseWhenPageIsHidden:H}=e,[P,q]=ie.useState(null),[de,le]=ie.useState(null),[Y,re]=ie.useState(!1),[he,Z]=ie.useState(!1),[U,ce]=ie.useState(!1),[ge,ne]=ie.useState(!1),[me,He]=ie.useState(!1),[Re,ct]=ie.useState(0),[Ge,xt]=ie.useState(0),bt=ie.useRef(h.duration||I||mv),Ue=ie.useRef(null),It=ie.useRef(null),pr=y===0,Ln=y+1<=x,W=h.type,ee=h.dismissible!==!1,se=h.className||"",ae=h.descriptionClassName||"",Se=ie.useMemo(()=>v.findIndex(je=>je.toastId===h.id)||0,[v,h.id]),$e=ie.useMemo(()=>{var je;return(je=h.closeButton)!=null?je:C},[h.closeButton,C]),Kt=ie.useMemo(()=>h.duration||I||mv,[h.duration,I]),Qt=ie.useRef(0),ln=ie.useRef(0),Mn=ie.useRef(0),mt=ie.useRef(null),[Yt,Xt]=B.split("-"),io=ie.useMemo(()=>v.reduce((je,De,Ke)=>Ke>=Se?je:je+De.height,0),[v,Se]),ao=uT(),Fl=h.invert||p,oo=W==="loading";ln.current=ie.useMemo(()=>Se*$+io,[Se,io]),ie.useEffect(()=>{bt.current=Kt},[Kt]),ie.useEffect(()=>{re(!0)},[]),ie.useEffect(()=>{let je=It.current;if(je){let De=je.getBoundingClientRect().height;return xt(De),w(Ke=>[{toastId:h.id,height:De,position:h.position},...Ke]),()=>w(Ke=>Ke.filter(bn=>bn.toastId!==h.id))}},[w,h.id]),ie.useLayoutEffect(()=>{if(!Y)return;let je=It.current,De=je.style.height;je.style.height="auto";let Ke=je.getBoundingClientRect().height;je.style.height=De,xt(Ke),w(bn=>bn.find(Jt=>Jt.toastId===h.id)?bn.map(Jt=>Jt.toastId===h.id?{...Jt,height:Ke}:Jt):[{toastId:h.id,height:Ke,position:h.position},...bn])},[Y,h.title,h.description,w,h.id]);let gr=ie.useCallback(()=>{Z(!0),ct(ln.current),w(je=>je.filter(De=>De.toastId!==h.id)),setTimeout(()=>{_(h)},ST)},[h,_,w,ln]);ie.useEffect(()=>{if(h.promise&&W==="loading"||h.duration===1/0||h.type==="loading")return;let je;return S||g||H&&ao?(()=>{if(Mn.current<Qt.current){let De=new Date().getTime()-Qt.current;bt.current=bt.current-De}Mn.current=new Date().getTime()})():bt.current!==1/0&&(Qt.current=new Date().getTime(),je=setTimeout(()=>{var De;(De=h.onAutoClose)==null||De.call(h,h),gr()},bt.current)),()=>clearTimeout(je)},[S,g,h,W,H,ao,gr]),ie.useEffect(()=>{h.delete&&gr()},[gr,h.delete]);function us(){var je,De,Ke;return k!=null&&k.loading?ie.createElement("div",{className:Qn(E==null?void 0:E.loader,(je=h==null?void 0:h.classNames)==null?void 0:je.loader,"sonner-loader"),"data-visible":W==="loading"},k.loading):L?ie.createElement("div",{className:Qn(E==null?void 0:E.loader,(De=h==null?void 0:h.classNames)==null?void 0:De.loader,"sonner-loader"),"data-visible":W==="loading"},L):ie.createElement(sT,{className:Qn(E==null?void 0:E.loader,(Ke=h==null?void 0:h.classNames)==null?void 0:Ke.loader),visible:W==="loading"})}return ie.createElement("li",{tabIndex:0,ref:It,className:Qn(T,se,E==null?void 0:E.toast,(t=h==null?void 0:h.classNames)==null?void 0:t.toast,E==null?void 0:E.default,E==null?void 0:E[W],(n=h==null?void 0:h.classNames)==null?void 0:n[W]),"data-sonner-toast":"","data-rich-colors":(r=h.richColors)!=null?r:N,"data-styled":!(h.jsx||h.unstyled||b),"data-mounted":Y,"data-promise":!!h.promise,"data-swiped":me,"data-removed":he,"data-visible":Ln,"data-y-position":Yt,"data-x-position":Xt,"data-index":y,"data-front":pr,"data-swiping":U,"data-dismissible":ee,"data-type":W,"data-invert":Fl,"data-swipe-out":ge,"data-swipe-direction":de,"data-expanded":!!(S||M&&Y),style:{"--index":y,"--toasts-before":y,"--z-index":j.length-y,"--offset":`${he?Re:ln.current}px`,"--initial-height":M?"auto":`${Ge}px`,...A,...h.style},onDragEnd:()=>{ce(!1),q(null),mt.current=null},onPointerDown:je=>{oo||!ee||(Ue.current=new Date,ct(ln.current),je.target.setPointerCapture(je.pointerId),je.target.tagName!=="BUTTON"&&(ce(!0),mt.current={x:je.clientX,y:je.clientY}))},onPointerUp:()=>{var je,De,Ke,bn;if(ge||!ee)return;mt.current=null;let Jt=Number(((je=It.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),jn=Number(((De=It.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),$r=new Date().getTime()-((Ke=Ue.current)==null?void 0:Ke.getTime()),_n=P==="x"?Jt:jn,xr=Math.abs(_n)/$r;if(Math.abs(_n)>=_T||xr>.11){ct(ln.current),(bn=h.onDismiss)==null||bn.call(h,h),le(P==="x"?Jt>0?"right":"left":jn>0?"down":"up"),gr(),ne(!0),He(!1);return}ce(!1),q(null)},onPointerMove:je=>{var De,Ke,bn,Jt;if(!mt.current||!ee||((De=window.getSelection())==null?void 0:De.toString().length)>0)return;let jn=je.clientY-mt.current.y,$r=je.clientX-mt.current.x,_n=(Ke=e.swipeDirections)!=null?Ke:NT(B);!P&&(Math.abs($r)>1||Math.abs(jn)>1)&&q(Math.abs($r)>Math.abs(jn)?"x":"y");let xr={x:0,y:0};P==="y"?(_n.includes("top")||_n.includes("bottom"))&&(_n.includes("top")&&jn<0||_n.includes("bottom")&&jn>0)&&(xr.y=jn):P==="x"&&(_n.includes("left")||_n.includes("right"))&&(_n.includes("left")&&$r<0||_n.includes("right")&&$r>0)&&(xr.x=$r),(Math.abs(xr.x)>0||Math.abs(xr.y)>0)&&He(!0),(bn=It.current)==null||bn.style.setProperty("--swipe-amount-x",`${xr.x}px`),(Jt=It.current)==null||Jt.style.setProperty("--swipe-amount-y",`${xr.y}px`)}},$e&&!h.jsx?ie.createElement("button",{"aria-label":F,"data-disabled":oo,"data-close-button":!0,onClick:oo||!ee?()=>{}:()=>{var je;gr(),(je=h.onDismiss)==null||je.call(h,h)},className:Qn(E==null?void 0:E.closeButton,(s=h==null?void 0:h.classNames)==null?void 0:s.closeButton)},(a=k==null?void 0:k.close)!=null?a:cT):null,h.jsx||m.isValidElement(h.title)?h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title:ie.createElement(ie.Fragment,null,W||h.icon||h.promise?ie.createElement("div",{"data-icon":"",className:Qn(E==null?void 0:E.icon,(o=h==null?void 0:h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||us():null,h.type!=="loading"?h.icon||(k==null?void 0:k[W])||nT(W):null):null,ie.createElement("div",{"data-content":"",className:Qn(E==null?void 0:E.content,(l=h==null?void 0:h.classNames)==null?void 0:l.content)},ie.createElement("div",{"data-title":"",className:Qn(E==null?void 0:E.title,(c=h==null?void 0:h.classNames)==null?void 0:c.title)},typeof h.title=="function"?h.title():h.title),h.description?ie.createElement("div",{"data-description":"",className:Qn(z,ae,E==null?void 0:E.description,(u=h==null?void 0:h.classNames)==null?void 0:u.description)},typeof h.description=="function"?h.description():h.description):null),m.isValidElement(h.cancel)?h.cancel:h.cancel&&ac(h.cancel)?ie.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||R,onClick:je=>{var De,Ke;ac(h.cancel)&&ee&&((Ke=(De=h.cancel).onClick)==null||Ke.call(De,je),gr())},className:Qn(E==null?void 0:E.cancelButton,(d=h==null?void 0:h.classNames)==null?void 0:d.cancelButton)},h.cancel.label):null,m.isValidElement(h.action)?h.action:h.action&&ac(h.action)?ie.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||O,onClick:je=>{var De,Ke;ac(h.action)&&((Ke=(De=h.action).onClick)==null||Ke.call(De,je),!je.defaultPrevented&&gr())},className:Qn(E==null?void 0:E.actionButton,(f=h==null?void 0:h.classNames)==null?void 0:f.actionButton)},h.action.label):null))};function pv(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function CT(e,t){let n={};return[e,t].forEach((r,s)=>{let a=s===1,o=a?"--mobile-offset":"--offset",l=a?wT:yT;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var ET=m.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:f,duration:p,style:h,visibleToasts:b=vT,toastOptions:g,dir:w=pv(),gap:x=jT,loadingIcon:v,icons:y,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:S}=e,[_,N]=ie.useState([]),C=ie.useMemo(()=>Array.from(new Set([r].concat(_.filter(H=>H.position).map(H=>H.position)))),[_,r]),[A,R]=ie.useState([]),[O,T]=ie.useState(!1),[z,I]=ie.useState(!1),[B,$]=ie.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=ie.useRef(null),M=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=ie.useRef(null),k=ie.useRef(!1),F=ie.useCallback(H=>{N(P=>{var q;return(q=P.find(de=>de.id===H.id))!=null&&q.delete||un.dismiss(H.id),P.filter(({id:de})=>de!==H.id)})},[]);return ie.useEffect(()=>un.subscribe(H=>{if(H.dismiss){N(P=>P.map(q=>q.id===H.id?{...q,delete:!0}:q));return}setTimeout(()=>{Ib.flushSync(()=>{N(P=>{let q=P.findIndex(de=>de.id===H.id);return q!==-1?[...P.slice(0,q),{...P[q],...H},...P.slice(q+1)]:[H,...P]})})})}),[]),ie.useEffect(()=>{if(d!=="system"){$(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:P})=>{$(P?"dark":"light")})}catch{H.addListener(({matches:q})=>{try{$(q?"dark":"light")}catch(de){console.error(de)}})}},[d]),ie.useEffect(()=>{_.length<=1&&T(!1)},[_]),ie.useEffect(()=>{let H=P=>{var q,de;s.every(le=>P[le]||P.code===le)&&(T(!0),(q=L.current)==null||q.focus()),P.code==="Escape"&&(document.activeElement===L.current||(de=L.current)!=null&&de.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[s]),ie.useEffect(()=>{if(L.current)return()=>{E.current&&(E.current.focus({preventScroll:!0}),E.current=null,k.current=!1)}},[L.current]),ie.createElement("section",{ref:t,"aria-label":`${j} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((H,P)=>{var q;let[de,le]=H.split("-");return _.length?ie.createElement("ol",{key:H,dir:w==="auto"?pv():w,tabIndex:-1,ref:L,className:l,"data-sonner-toaster":!0,"data-theme":B,"data-y-position":de,"data-lifted":O&&_.length>1&&!a,"data-x-position":le,style:{"--front-toast-height":`${((q=A[0])==null?void 0:q.height)||0}px`,"--width":`${bT}px`,"--gap":`${x}px`,...h,...CT(c,u)},onBlur:Y=>{k.current&&!Y.currentTarget.contains(Y.relatedTarget)&&(k.current=!1,E.current&&(E.current.focus({preventScroll:!0}),E.current=null))},onFocus:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||k.current||(k.current=!0,E.current=Y.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{z||T(!1)},onDragEnd:()=>T(!1),onPointerDown:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},_.filter(Y=>!Y.position&&P===0||Y.position===H).map((Y,re)=>{var he,Z;return ie.createElement(kT,{key:Y.id,icons:y,index:re,toast:Y,defaultRichColors:f,duration:(he=g==null?void 0:g.duration)!=null?he:p,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:b,closeButton:(Z=g==null?void 0:g.closeButton)!=null?Z:o,interacting:z,position:H,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:F,toasts:_.filter(U=>U.position==Y.position),heights:A.filter(U=>U.position==Y.position),setHeights:R,expandByDefault:a,gap:x,loadingIcon:v,expanded:O,pauseWhenPageIsHidden:S,swipeDirections:e.swipeDirections})})):null}))});const PT=({...e})=>{const{theme:t="system"}=tT();return i.jsx(ET,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var TT=Bm[" useId ".trim().toString()]||(()=>{}),RT=0;function Yr(e){const[t,n]=m.useState(TT());return Nt(()=>{e||n(r=>r??String(RT++))},[e]),e||(t?`radix-${t}`:"")}const AT=["top","right","bottom","left"],Hs=Math.min,kn=Math.max,fu=Math.round,oc=Math.floor,Ir=e=>({x:e,y:e}),IT={left:"right",right:"left",bottom:"top",top:"bottom"},OT={start:"end",end:"start"};function qh(e,t,n){return kn(e,Hs(t,n))}function ns(e,t){return typeof e=="function"?e(t):e}function rs(e){return e.split("-")[0]}function Qa(e){return e.split("-")[1]}function zp(e){return e==="x"?"y":"x"}function Up(e){return e==="y"?"height":"width"}const LT=new Set(["top","bottom"]);function Tr(e){return LT.has(rs(e))?"y":"x"}function Bp(e){return zp(Tr(e))}function MT(e,t,n){n===void 0&&(n=!1);const r=Qa(e),s=Bp(e),a=Up(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=hu(o)),[o,hu(o)]}function DT(e){const t=hu(e);return[Wh(e),t,Wh(t)]}function Wh(e){return e.replace(/start|end/g,t=>OT[t])}const gv=["left","right"],xv=["right","left"],FT=["top","bottom"],$T=["bottom","top"];function zT(e,t,n){switch(e){case"top":case"bottom":return n?t?xv:gv:t?gv:xv;case"left":case"right":return t?FT:$T;default:return[]}}function UT(e,t,n,r){const s=Qa(e);let a=zT(rs(e),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),t&&(a=a.concat(a.map(Wh)))),a}function hu(e){return e.replace(/left|right|bottom|top/g,t=>IT[t])}function BT(e){return{top:0,right:0,bottom:0,left:0,...e}}function Rj(e){return typeof e!="number"?BT(e):{top:e,right:e,bottom:e,left:e}}function mu(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function vv(e,t,n){let{reference:r,floating:s}=e;const a=Tr(t),o=Bp(t),l=Up(o),c=rs(t),u=a==="y",d=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let h;switch(c){case"top":h={x:d,y:r.y-s.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-s.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Qa(t)){case"start":h[o]-=p*(n&&u?-1:1);break;case"end":h[o]+=p*(n&&u?-1:1);break}return h}const VT=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:f}=vv(u,r,c),p=r,h={},b=0;for(let g=0;g<l.length;g++){const{name:w,fn:x}=l[g],{x:v,y,data:j,reset:S}=await x({x:d,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:h,rects:u,platform:o,elements:{reference:e,floating:t}});d=v??d,f=y??f,h={...h,[w]:{...h[w],...j}},S&&b<=50&&(b++,typeof S=="object"&&(S.placement&&(p=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:d,y:f}=vv(u,p,c)),g=-1)}return{x:d,y:f,placement:p,strategy:s,middlewareData:h}};async function ul(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:h=0}=ns(t,e),b=Rj(h),w=l[p?f==="floating"?"reference":"floating":f],x=mu(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(w)))==null||n?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),v=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,y=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),j=await(a.isElement==null?void 0:a.isElement(y))?await(a.getScale==null?void 0:a.getScale(y))||{x:1,y:1}:{x:1,y:1},S=mu(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:y,strategy:c}):v);return{top:(x.top-S.top+b.top)/j.y,bottom:(S.bottom-x.bottom+b.bottom)/j.y,left:(x.left-S.left+b.left)/j.x,right:(S.right-x.right+b.right)/j.x}}const qT=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=ns(e,t)||{};if(u==null)return{};const f=Rj(d),p={x:n,y:r},h=Bp(s),b=Up(h),g=await o.getDimensions(u),w=h==="y",x=w?"top":"left",v=w?"bottom":"right",y=w?"clientHeight":"clientWidth",j=a.reference[b]+a.reference[h]-p[h]-a.floating[b],S=p[h]-a.reference[h],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=_?_[y]:0;(!N||!await(o.isElement==null?void 0:o.isElement(_)))&&(N=l.floating[y]||a.floating[b]);const C=j/2-S/2,A=N/2-g[b]/2-1,R=Hs(f[x],A),O=Hs(f[v],A),T=R,z=N-g[b]-O,I=N/2-g[b]/2+C,B=qh(T,I,z),$=!c.arrow&&Qa(s)!=null&&I!==B&&a.reference[b]/2-(I<T?R:O)-g[b]/2<0,L=$?I<T?I-T:I-z:0;return{[h]:p[h]+L,data:{[h]:B,centerOffset:I-B-L,...$&&{alignmentOffset:L}},reset:$}}}),WT=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:g=!0,...w}=ns(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const x=rs(s),v=Tr(l),y=rs(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=p||(y||!g?[hu(l)]:DT(l)),_=b!=="none";!p&&_&&S.push(...UT(l,g,b,j));const N=[l,...S],C=await ul(t,w),A=[];let R=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&A.push(C[x]),f){const I=MT(s,o,j);A.push(C[I[0]],C[I[1]])}if(R=[...R,{placement:s,overflows:A}],!A.every(I=>I<=0)){var O,T;const I=(((O=a.flip)==null?void 0:O.index)||0)+1,B=N[I];if(B&&(!(f==="alignment"?v!==Tr(B):!1)||R.every(M=>M.overflows[0]>0&&Tr(M.placement)===v)))return{data:{index:I,overflows:R},reset:{placement:B}};let $=(T=R.filter(L=>L.overflows[0]<=0).sort((L,M)=>L.overflows[1]-M.overflows[1])[0])==null?void 0:T.placement;if(!$)switch(h){case"bestFit":{var z;const L=(z=R.filter(M=>{if(_){const E=Tr(M.placement);return E===v||E==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(E=>E>0).reduce((E,k)=>E+k,0)]).sort((M,E)=>M[1]-E[1])[0])==null?void 0:z[0];L&&($=L);break}case"initialPlacement":$=l;break}if(s!==$)return{reset:{placement:$}}}return{}}}};function yv(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function wv(e){return AT.some(t=>e[t]>=0)}const HT=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=ns(e,t);switch(r){case"referenceHidden":{const a=await ul(t,{...s,elementContext:"reference"}),o=yv(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:wv(o)}}}case"escaped":{const a=await ul(t,{...s,altBoundary:!0}),o=yv(a,n.floating);return{data:{escapedOffsets:o,escaped:wv(o)}}}default:return{}}}}},Aj=new Set(["left","top"]);async function GT(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=rs(n),l=Qa(n),c=Tr(n)==="y",u=Aj.has(o)?-1:1,d=a&&c?-1:1,f=ns(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof b=="number"&&(h=l==="end"?b*-1:b),c?{x:h*d,y:p*u}:{x:p*u,y:h*d}}const KT=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=t,c=await GT(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},QT=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x,y:v}=w;return{x,y:v}}},...c}=ns(e,t),u={x:n,y:r},d=await ul(t,c),f=Tr(rs(s)),p=zp(f);let h=u[p],b=u[f];if(a){const w=p==="y"?"top":"left",x=p==="y"?"bottom":"right",v=h+d[w],y=h-d[x];h=qh(v,h,y)}if(o){const w=f==="y"?"top":"left",x=f==="y"?"bottom":"right",v=b+d[w],y=b-d[x];b=qh(v,b,y)}const g=l.fn({...t,[p]:h,[f]:b});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[p]:a,[f]:o}}}}}},YT=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ns(e,t),d={x:n,y:r},f=Tr(s),p=zp(f);let h=d[p],b=d[f];const g=ns(l,t),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const y=p==="y"?"height":"width",j=a.reference[p]-a.floating[y]+w.mainAxis,S=a.reference[p]+a.reference[y]-w.mainAxis;h<j?h=j:h>S&&(h=S)}if(u){var x,v;const y=p==="y"?"width":"height",j=Aj.has(rs(s)),S=a.reference[f]-a.floating[y]+(j&&((x=o.offset)==null?void 0:x[f])||0)+(j?0:w.crossAxis),_=a.reference[f]+a.reference[y]+(j?0:((v=o.offset)==null?void 0:v[f])||0)-(j?w.crossAxis:0);b<S?b=S:b>_&&(b=_)}return{[p]:h,[f]:b}}}},XT=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...u}=ns(e,t),d=await ul(t,u),f=rs(s),p=Qa(s),h=Tr(s)==="y",{width:b,height:g}=a.floating;let w,x;f==="top"||f==="bottom"?(w=f,x=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=f,w=p==="end"?"top":"bottom");const v=g-d.top-d.bottom,y=b-d.left-d.right,j=Hs(g-d[w],v),S=Hs(b-d[x],y),_=!t.middlewareData.shift;let N=j,C=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=y),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=v),_&&!p){const R=kn(d.left,0),O=kn(d.right,0),T=kn(d.top,0),z=kn(d.bottom,0);h?C=b-2*(R!==0||O!==0?R+O:kn(d.left,d.right)):N=g-2*(T!==0||z!==0?T+z:kn(d.top,d.bottom))}await c({...t,availableWidth:C,availableHeight:N});const A=await o.getDimensions(l.floating);return b!==A.width||g!==A.height?{reset:{rects:!0}}:{}}}};function Yu(){return typeof window<"u"}function Ya(e){return Ij(e)?(e.nodeName||"").toLowerCase():"#document"}function Tn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Fr(e){var t;return(t=(Ij(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ij(e){return Yu()?e instanceof Node||e instanceof Tn(e).Node:!1}function fr(e){return Yu()?e instanceof Element||e instanceof Tn(e).Element:!1}function Mr(e){return Yu()?e instanceof HTMLElement||e instanceof Tn(e).HTMLElement:!1}function bv(e){return!Yu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Tn(e).ShadowRoot}const JT=new Set(["inline","contents"]);function Tl(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=hr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!JT.has(s)}const ZT=new Set(["table","td","th"]);function eR(e){return ZT.has(Ya(e))}const tR=[":popover-open",":modal"];function Xu(e){return tR.some(t=>{try{return e.matches(t)}catch{return!1}})}const nR=["transform","translate","scale","rotate","perspective"],rR=["transform","translate","scale","rotate","perspective","filter"],sR=["paint","layout","strict","content"];function Vp(e){const t=qp(),n=fr(e)?hr(e):e;return nR.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||rR.some(r=>(n.willChange||"").includes(r))||sR.some(r=>(n.contain||"").includes(r))}function iR(e){let t=Gs(e);for(;Mr(t)&&!Fa(t);){if(Vp(t))return t;if(Xu(t))return null;t=Gs(t)}return null}function qp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const aR=new Set(["html","body","#document"]);function Fa(e){return aR.has(Ya(e))}function hr(e){return Tn(e).getComputedStyle(e)}function Ju(e){return fr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Gs(e){if(Ya(e)==="html")return e;const t=e.assignedSlot||e.parentNode||bv(e)&&e.host||Fr(e);return bv(t)?t.host:t}function Oj(e){const t=Gs(e);return Fa(t)?e.ownerDocument?e.ownerDocument.body:e.body:Mr(t)&&Tl(t)?t:Oj(t)}function dl(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=Oj(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),o=Tn(s);if(a){const l=Hh(o);return t.concat(o,o.visualViewport||[],Tl(s)?s:[],l&&n?dl(l):[])}return t.concat(s,dl(s,[],n))}function Hh(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Lj(e){const t=hr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Mr(e),a=s?e.offsetWidth:n,o=s?e.offsetHeight:r,l=fu(n)!==a||fu(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function Wp(e){return fr(e)?e:e.contextElement}function xa(e){const t=Wp(e);if(!Mr(t))return Ir(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=Lj(t);let o=(a?fu(n.width):n.width)/r,l=(a?fu(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const oR=Ir(0);function Mj(e){const t=Tn(e);return!qp()||!t.visualViewport?oR:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function lR(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Tn(e)?!1:t}function Ti(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=Wp(e);let o=Ir(1);t&&(r?fr(r)&&(o=xa(r)):o=xa(e));const l=lR(a,n,r)?Mj(a):Ir(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,f=s.height/o.y;if(a){const p=Tn(a),h=r&&fr(r)?Tn(r):r;let b=p,g=Hh(b);for(;g&&r&&h!==b;){const w=xa(g),x=g.getBoundingClientRect(),v=hr(g),y=x.left+(g.clientLeft+parseFloat(v.paddingLeft))*w.x,j=x.top+(g.clientTop+parseFloat(v.paddingTop))*w.y;c*=w.x,u*=w.y,d*=w.x,f*=w.y,c+=y,u+=j,b=Tn(g),g=Hh(b)}}return mu({width:d,height:f,x:c,y:u})}function Hp(e,t){const n=Ju(e).scrollLeft;return t?t.left+n:Ti(Fr(e)).left+n}function Dj(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:Hp(e,r)),a=r.top+t.scrollTop;return{x:s,y:a}}function cR(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",o=Fr(r),l=t?Xu(t.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=Ir(1);const d=Ir(0),f=Mr(r);if((f||!f&&!a)&&((Ya(r)!=="body"||Tl(o))&&(c=Ju(r)),Mr(r))){const h=Ti(r);u=xa(r),d.x=h.x+r.clientLeft,d.y=h.y+r.clientTop}const p=o&&!f&&!a?Dj(o,c,!0):Ir(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-c.scrollTop*u.y+d.y+p.y}}function uR(e){return Array.from(e.getClientRects())}function dR(e){const t=Fr(e),n=Ju(e),r=e.ownerDocument.body,s=kn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=kn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Hp(e);const l=-n.scrollTop;return hr(r).direction==="rtl"&&(o+=kn(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}function fR(e,t){const n=Tn(e),r=Fr(e),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const u=qp();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}const hR=new Set(["absolute","fixed"]);function mR(e,t){const n=Ti(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=Mr(e)?xa(e):Ir(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:o,height:l,x:c,y:u}}function jv(e,t,n){let r;if(t==="viewport")r=fR(e,n);else if(t==="document")r=dR(Fr(e));else if(fr(t))r=mR(t,n);else{const s=Mj(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return mu(r)}function Fj(e,t){const n=Gs(e);return n===t||!fr(n)||Fa(n)?!1:hr(n).position==="fixed"||Fj(n,t)}function pR(e,t){const n=t.get(e);if(n)return n;let r=dl(e,[],!1).filter(l=>fr(l)&&Ya(l)!=="body"),s=null;const a=hr(e).position==="fixed";let o=a?Gs(e):e;for(;fr(o)&&!Fa(o);){const l=hr(o),c=Vp(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&hR.has(s.position)||Tl(o)&&!c&&Fj(e,o))?r=r.filter(d=>d!==o):s=l,o=Gs(o)}return t.set(e,r),r}function gR(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const o=[...n==="clippingAncestors"?Xu(t)?[]:pR(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const f=jv(t,d,s);return u.top=kn(f.top,u.top),u.right=Hs(f.right,u.right),u.bottom=Hs(f.bottom,u.bottom),u.left=kn(f.left,u.left),u},jv(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function xR(e){const{width:t,height:n}=Lj(e);return{width:t,height:n}}function vR(e,t,n){const r=Mr(t),s=Fr(t),a=n==="fixed",o=Ti(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Ir(0);function u(){c.x=Hp(s)}if(r||!r&&!a)if((Ya(t)!=="body"||Tl(s))&&(l=Ju(t)),r){const h=Ti(t,!0,a,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else s&&u();a&&!r&&s&&u();const d=s&&!r&&!a?Dj(s,l):Ir(0),f=o.left+l.scrollLeft-c.x-d.x,p=o.top+l.scrollTop-c.y-d.y;return{x:f,y:p,width:o.width,height:o.height}}function ff(e){return hr(e).position==="static"}function _v(e,t){if(!Mr(e)||hr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Fr(e)===n&&(n=n.ownerDocument.body),n}function $j(e,t){const n=Tn(e);if(Xu(e))return n;if(!Mr(e)){let s=Gs(e);for(;s&&!Fa(s);){if(fr(s)&&!ff(s))return s;s=Gs(s)}return n}let r=_v(e,t);for(;r&&eR(r)&&ff(r);)r=_v(r,t);return r&&Fa(r)&&ff(r)&&!Vp(r)?n:r||iR(e)||n}const yR=async function(e){const t=this.getOffsetParent||$j,n=this.getDimensions,r=await n(e.floating);return{reference:vR(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function wR(e){return hr(e).direction==="rtl"}const bR={convertOffsetParentRelativeRectToViewportRelativeRect:cR,getDocumentElement:Fr,getClippingRect:gR,getOffsetParent:$j,getElementRects:yR,getClientRects:uR,getDimensions:xR,getScale:xa,isElement:fr,isRTL:wR};function zj(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function jR(e,t){let n=null,r;const s=Fr(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:d,top:f,width:p,height:h}=u;if(l||t(),!p||!h)return;const b=oc(f),g=oc(s.clientWidth-(d+p)),w=oc(s.clientHeight-(f+h)),x=oc(d),y={rootMargin:-b+"px "+-g+"px "+-w+"px "+-x+"px",threshold:kn(0,Hs(1,c))||1};let j=!0;function S(_){const N=_[0].intersectionRatio;if(N!==c){if(!j)return o();N?o(!1,N):r=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!zj(u,e.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(S,{...y,root:s.ownerDocument})}catch{n=new IntersectionObserver(S,y)}n.observe(e)}return o(!0),a}function _R(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Wp(e),d=s||a?[...u?dl(u):[],...dl(t)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),a&&x.addEventListener("resize",n)});const f=u&&l?jR(u,n):null;let p=-1,h=null;o&&(h=new ResizeObserver(x=>{let[v]=x;v&&v.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var y;(y=h)==null||y.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let b,g=c?Ti(e):null;c&&w();function w(){const x=Ti(e);g&&!zj(g,x)&&n(),g=x,b=requestAnimationFrame(w)}return n(),()=>{var x;d.forEach(v=>{s&&v.removeEventListener("scroll",n),a&&v.removeEventListener("resize",n)}),f==null||f(),(x=h)==null||x.disconnect(),h=null,c&&cancelAnimationFrame(b)}}const SR=KT,NR=QT,kR=WT,CR=XT,ER=HT,Sv=qT,PR=YT,TR=(e,t,n)=>{const r=new Map,s={platform:bR,...n},a={...s.platform,_c:r};return VT(e,t,{...s,platform:a})};var RR=typeof document<"u",AR=function(){},Lc=RR?m.useLayoutEffect:AR;function pu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!pu(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!pu(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Uj(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Nv(e,t){const n=Uj(e);return Math.round(t*n)/n}function hf(e){const t=m.useRef(e);return Lc(()=>{t.current=e}),t}function IR(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=m.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=m.useState(r);pu(p,r)||h(r);const[b,g]=m.useState(null),[w,x]=m.useState(null),v=m.useCallback(M=>{M!==_.current&&(_.current=M,g(M))},[]),y=m.useCallback(M=>{M!==N.current&&(N.current=M,x(M))},[]),j=a||b,S=o||w,_=m.useRef(null),N=m.useRef(null),C=m.useRef(d),A=c!=null,R=hf(c),O=hf(s),T=hf(u),z=m.useCallback(()=>{if(!_.current||!N.current)return;const M={placement:t,strategy:n,middleware:p};O.current&&(M.platform=O.current),TR(_.current,N.current,M).then(E=>{const k={...E,isPositioned:T.current!==!1};I.current&&!pu(C.current,k)&&(C.current=k,Mi.flushSync(()=>{f(k)}))})},[p,t,n,O,T]);Lc(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[u]);const I=m.useRef(!1);Lc(()=>(I.current=!0,()=>{I.current=!1}),[]),Lc(()=>{if(j&&(_.current=j),S&&(N.current=S),j&&S){if(R.current)return R.current(j,S,z);z()}},[j,S,z,R,A]);const B=m.useMemo(()=>({reference:_,floating:N,setReference:v,setFloating:y}),[v,y]),$=m.useMemo(()=>({reference:j,floating:S}),[j,S]),L=m.useMemo(()=>{const M={position:n,left:0,top:0};if(!$.floating)return M;const E=Nv($.floating,d.x),k=Nv($.floating,d.y);return l?{...M,transform:"translate("+E+"px, "+k+"px)",...Uj($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:E,top:k}},[n,l,$.floating,d.x,d.y]);return m.useMemo(()=>({...d,update:z,refs:B,elements:$,floatingStyles:L}),[d,z,B,$,L])}const OR=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Sv({element:r.current,padding:s}).fn(n):{}:r?Sv({element:r,padding:s}).fn(n):{}}}},LR=(e,t)=>({...SR(e),options:[e,t]}),MR=(e,t)=>({...NR(e),options:[e,t]}),DR=(e,t)=>({...PR(e),options:[e,t]}),FR=(e,t)=>({...kR(e),options:[e,t]}),$R=(e,t)=>({...CR(e),options:[e,t]}),zR=(e,t)=>({...ER(e),options:[e,t]}),UR=(e,t)=>({...OR(e),options:[e,t]});var BR="Arrow",Bj=m.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return i.jsx(xe.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Bj.displayName=BR;var VR=Bj;function Zu(e){const[t,n]=m.useState(void 0);return Nt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Gp="Popper",[Vj,ed]=yn(Gp),[qR,qj]=Vj(Gp),Wj=e=>{const{__scopePopper:t,children:n}=e,[r,s]=m.useState(null);return i.jsx(qR,{scope:t,anchor:r,onAnchorChange:s,children:n})};Wj.displayName=Gp;var Hj="PopperAnchor",Gj=m.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=qj(Hj,n),o=m.useRef(null),l=Me(t,o);return m.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(xe.div,{...s,ref:l})});Gj.displayName=Hj;var Kp="PopperContent",[WR,HR]=Vj(Kp),Kj=m.forwardRef((e,t)=>{var Y,re,he,Z,U,ce;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:h="optimized",onPlaced:b,...g}=e,w=qj(Kp,n),[x,v]=m.useState(null),y=Me(t,ge=>v(ge)),[j,S]=m.useState(null),_=Zu(j),N=(_==null?void 0:_.width)??0,C=(_==null?void 0:_.height)??0,A=r+(a!=="center"?"-"+a:""),R=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(u)?u:[u],T=O.length>0,z={padding:R,boundary:O.filter(KR),altBoundary:T},{refs:I,floatingStyles:B,placement:$,isPositioned:L,middlewareData:M}=IR({strategy:"fixed",placement:A,whileElementsMounted:(...ge)=>_R(...ge,{animationFrame:h==="always"}),elements:{reference:w.anchor},middleware:[LR({mainAxis:s+C,alignmentAxis:o}),c&&MR({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?DR():void 0,...z}),c&&FR({...z}),$R({...z,apply:({elements:ge,rects:ne,availableWidth:me,availableHeight:He})=>{const{width:Re,height:ct}=ne.reference,Ge=ge.floating.style;Ge.setProperty("--radix-popper-available-width",`${me}px`),Ge.setProperty("--radix-popper-available-height",`${He}px`),Ge.setProperty("--radix-popper-anchor-width",`${Re}px`),Ge.setProperty("--radix-popper-anchor-height",`${ct}px`)}}),j&&UR({element:j,padding:l}),QR({arrowWidth:N,arrowHeight:C}),p&&zR({strategy:"referenceHidden",...z})]}),[E,k]=Xj($),F=An(b);Nt(()=>{L&&(F==null||F())},[L,F]);const H=(Y=M.arrow)==null?void 0:Y.x,P=(re=M.arrow)==null?void 0:re.y,q=((he=M.arrow)==null?void 0:he.centerOffset)!==0,[de,le]=m.useState();return Nt(()=>{x&&le(window.getComputedStyle(x).zIndex)},[x]),i.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:L?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[(Z=M.transformOrigin)==null?void 0:Z.x,(U=M.transformOrigin)==null?void 0:U.y].join(" "),...((ce=M.hide)==null?void 0:ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(WR,{scope:n,placedSide:E,onArrowChange:S,arrowX:H,arrowY:P,shouldHideArrow:q,children:i.jsx(xe.div,{"data-side":E,"data-align":k,...g,ref:y,style:{...g.style,animation:L?void 0:"none"}})})})});Kj.displayName=Kp;var Qj="PopperArrow",GR={top:"bottom",right:"left",bottom:"top",left:"right"},Yj=m.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,a=HR(Qj,r),o=GR[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(VR,{...s,ref:n,style:{...s.style,display:"block"}})})});Yj.displayName=Qj;function KR(e){return e!==null}var QR=e=>({name:"transformOrigin",options:e,fn(t){var w,x,v;const{placement:n,rects:r,middlewareData:s}=t,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=Xj(n),f={start:"0%",center:"50%",end:"100%"}[d],p=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,h=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let b="",g="";return u==="bottom"?(b=o?f:`${p}px`,g=`${-c}px`):u==="top"?(b=o?f:`${p}px`,g=`${r.floating.height+c}px`):u==="right"?(b=`${-c}px`,g=o?f:`${h}px`):u==="left"&&(b=`${r.floating.width+c}px`,g=o?f:`${h}px`),{data:{x:b,y:g}}}});function Xj(e){const[t,n="center"]=e.split("-");return[t,n]}var Jj=Wj,Zj=Gj,e1=Kj,t1=Yj,[td,bB]=yn("Tooltip",[ed]),nd=ed(),n1="TooltipProvider",YR=700,Gh="tooltip.open",[XR,Qp]=td(n1),r1=e=>{const{__scopeTooltip:t,delayDuration:n=YR,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,o=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(XR,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};r1.displayName=n1;var fl="Tooltip",[JR,rd]=td(fl),s1=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,c=Qp(fl,e.__scopeTooltip),u=nd(t),[d,f]=m.useState(null),p=Yr(),h=m.useRef(0),b=o??c.disableHoverableContent,g=l??c.delayDuration,w=m.useRef(!1),[x,v]=Or({prop:r,defaultProp:s??!1,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(Gh))):c.onClose(),a==null||a(N)},caller:fl}),y=m.useMemo(()=>x?w.current?"delayed-open":"instant-open":"closed",[x]),j=m.useCallback(()=>{window.clearTimeout(h.current),h.current=0,w.current=!1,v(!0)},[v]),S=m.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v(!1)},[v]),_=m.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{w.current=!0,v(!0),h.current=0},g)},[g,v]);return m.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),i.jsx(Jj,{...u,children:i.jsx(JR,{scope:t,contentId:p,open:x,stateAttribute:y,trigger:d,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayedRef.current?_():j()},[c.isOpenDelayedRef,_,j]),onTriggerLeave:m.useCallback(()=>{b?S():(window.clearTimeout(h.current),h.current=0)},[S,b]),onOpen:j,onClose:S,disableHoverableContent:b,children:n})})};s1.displayName=fl;var Kh="TooltipTrigger",i1=m.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=rd(Kh,n),a=Qp(Kh,n),o=nd(n),l=m.useRef(null),c=Me(t,l,s.onTriggerChange),u=m.useRef(!1),d=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),i.jsx(Zj,{asChild:!0,...o,children:i.jsx(xe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:pe(e.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:pe(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:pe(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:pe(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:pe(e.onBlur,s.onClose),onClick:pe(e.onClick,s.onClose)})})});i1.displayName=Kh;var ZR="TooltipPortal",[jB,eA]=td(ZR,{forceMount:void 0}),$a="TooltipContent",a1=m.forwardRef((e,t)=>{const n=eA($a,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,o=rd($a,e.__scopeTooltip);return i.jsx(os,{present:r||o.open,children:o.disableHoverableContent?i.jsx(o1,{side:s,...a,ref:t}):i.jsx(tA,{side:s,...a,ref:t})})}),tA=m.forwardRef((e,t)=>{const n=rd($a,e.__scopeTooltip),r=Qp($a,e.__scopeTooltip),s=m.useRef(null),a=Me(t,s),[o,l]=m.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:f}=r,p=m.useCallback(()=>{l(null),f(!1)},[f]),h=m.useCallback((b,g)=>{const w=b.currentTarget,x={x:b.clientX,y:b.clientY},v=aA(x,w.getBoundingClientRect()),y=oA(x,v),j=lA(g.getBoundingClientRect()),S=uA([...y,...j]);l(S),f(!0)},[f]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&d){const b=w=>h(w,d),g=w=>h(w,c);return c.addEventListener("pointerleave",b),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",b),d.removeEventListener("pointerleave",g)}}},[c,d,h,p]),m.useEffect(()=>{if(o){const b=g=>{const w=g.target,x={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(w))||(d==null?void 0:d.contains(w)),y=!cA(x,o);v?p():y&&(p(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,d,o,u,p]),i.jsx(o1,{...e,ref:a})}),[nA,rA]=td(fl,{isInside:!1}),sA=f2("TooltipContent"),o1=m.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=rd($a,n),u=nd(n),{onClose:d}=c;return m.useEffect(()=>(document.addEventListener(Gh,d),()=>document.removeEventListener(Gh,d)),[d]),m.useEffect(()=>{if(c.trigger){const f=p=>{const h=p.target;h!=null&&h.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),i.jsx(Cl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:i.jsxs(e1,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(sA,{children:r}),i.jsx(nA,{scope:n,isInside:!0,children:i.jsx(O2,{id:c.contentId,role:"tooltip",children:s||r})})]})})});a1.displayName=$a;var l1="TooltipArrow",iA=m.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=nd(n);return rA(l1,n).isInside?null:i.jsx(t1,{...s,...r,ref:t})});iA.displayName=l1;function aA(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function oA(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function lA(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function cA(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a],c=t[o],u=l.x,d=l.y,f=c.x,p=c.y;d>r!=p>r&&n<(f-u)*(r-d)/(p-d)+u&&(s=!s)}return s}function uA(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),dA(t)}function dA(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var fA=r1,hA=s1,mA=i1,c1=a1;const u1=fA,pA=hA,gA=mA,d1=m.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(c1,{ref:r,sideOffset:t,className:oe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));d1.displayName=c1.displayName;var sd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},id=typeof window>"u"||"Deno"in globalThis;function Zn(){}function xA(e,t){return typeof e=="function"?e(t):e}function vA(e){return typeof e=="number"&&e>=0&&e!==1/0}function yA(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Qh(e,t){return typeof e=="function"?e(t):e}function wA(e,t){return typeof e=="function"?e(t):e}function kv(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==Yp(o,t.options))return!1}else if(!ml(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function Cv(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(hl(t.options.mutationKey)!==hl(a))return!1}else if(!ml(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Yp(e,t){return((t==null?void 0:t.queryKeyHashFn)||hl)(e)}function hl(e){return JSON.stringify(e,(t,n)=>Yh(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ml(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>ml(e[n],t[n])):!1}function f1(e,t){if(e===t)return e;const n=Ev(e)&&Ev(t);if(n||Yh(e)&&Yh(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const f=n?d:a[d];(!n&&c.has(f)||n)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,u++):(l[f]=f1(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&u++)}return s===o&&u===s?e:l}return t}function Ev(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Yh(e){if(!Pv(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Pv(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Pv(e){return Object.prototype.toString.call(e)==="[object Object]"}function bA(e){return new Promise(t=>{setTimeout(t,e)})}function jA(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?f1(e,t):t}function _A(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function SA(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Xp=Symbol();function h1(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Xp?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var pi,ks,ja,hw,NA=(hw=class extends sd{constructor(){super();Fe(this,pi);Fe(this,ks);Fe(this,ja);Ne(this,ja,t=>{if(!id&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){G(this,ks)||this.setEventListener(G(this,ja))}onUnsubscribe(){var t;this.hasListeners()||((t=G(this,ks))==null||t.call(this),Ne(this,ks,void 0))}setEventListener(t){var n;Ne(this,ja,t),(n=G(this,ks))==null||n.call(this),Ne(this,ks,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){G(this,pi)!==t&&(Ne(this,pi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof G(this,pi)=="boolean"?G(this,pi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},pi=new WeakMap,ks=new WeakMap,ja=new WeakMap,hw),m1=new NA,_a,Cs,Sa,mw,kA=(mw=class extends sd{constructor(){super();Fe(this,_a,!0);Fe(this,Cs);Fe(this,Sa);Ne(this,Sa,t=>{if(!id&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){G(this,Cs)||this.setEventListener(G(this,Sa))}onUnsubscribe(){var t;this.hasListeners()||((t=G(this,Cs))==null||t.call(this),Ne(this,Cs,void 0))}setEventListener(t){var n;Ne(this,Sa,t),(n=G(this,Cs))==null||n.call(this),Ne(this,Cs,t(this.setOnline.bind(this)))}setOnline(t){G(this,_a)!==t&&(Ne(this,_a,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return G(this,_a)}},_a=new WeakMap,Cs=new WeakMap,Sa=new WeakMap,mw),gu=new kA;function CA(){let e,t;const n=new Promise((s,a)=>{e=s,t=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function EA(e){return Math.min(1e3*2**e,3e4)}function p1(e){return(e??"online")==="online"?gu.isOnline():!0}var g1=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function mf(e){return e instanceof g1}function x1(e){let t=!1,n=0,r=!1,s;const a=CA(),o=g=>{var w;r||(p(new g1(g)),(w=e.abort)==null||w.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>m1.isFocused()&&(e.networkMode==="always"||gu.isOnline())&&e.canRun(),d=()=>p1(e.networkMode)&&e.canRun(),f=g=>{var w;r||(r=!0,(w=e.onSuccess)==null||w.call(e,g),s==null||s(),a.resolve(g))},p=g=>{var w;r||(r=!0,(w=e.onError)==null||w.call(e,g),s==null||s(),a.reject(g))},h=()=>new Promise(g=>{var w;s=x=>{(r||u())&&g(x)},(w=e.onPause)==null||w.call(e)}).then(()=>{var g;s=void 0,r||(g=e.onContinue)==null||g.call(e)}),b=()=>{if(r)return;let g;const w=n===0?e.initialPromise:void 0;try{g=w??e.fn()}catch(x){g=Promise.reject(x)}Promise.resolve(g).then(f).catch(x=>{var _;if(r)return;const v=e.retry??(id?0:3),y=e.retryDelay??EA,j=typeof y=="function"?y(n,x):y,S=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,x);if(t||!S){p(x);return}n++,(_=e.onFail)==null||_.call(e,n,x),bA(j).then(()=>u()?void 0:h()).then(()=>{t?p(x):b()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?b():h().then(b),a)}}var PA=e=>setTimeout(e,0);function TA(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=PA;const a=l=>{t?e.push(l):s(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var nn=TA(),gi,pw,v1=(pw=class{constructor(){Fe(this,gi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vA(this.gcTime)&&Ne(this,gi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(id?1/0:5*60*1e3))}clearGcTimeout(){G(this,gi)&&(clearTimeout(G(this,gi)),Ne(this,gi,void 0))}},gi=new WeakMap,pw),Na,xi,Dn,vi,Vt,wl,yi,er,Ur,gw,RA=(gw=class extends v1{constructor(t){super();Fe(this,er);Fe(this,Na);Fe(this,xi);Fe(this,Dn);Fe(this,vi);Fe(this,Vt);Fe(this,wl);Fe(this,yi);Ne(this,yi,!1),Ne(this,wl,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ne(this,vi,t.client),Ne(this,Dn,G(this,vi).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ne(this,Na,IA(this.options)),this.state=t.state??G(this,Na),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=G(this,Vt))==null?void 0:t.promise}setOptions(t){this.options={...G(this,wl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,Dn).remove(this)}setData(t,n){const r=jA(this.state.data,t,this.options);return zt(this,er,Ur).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){zt(this,er,Ur).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=G(this,Vt))==null?void 0:r.promise;return(s=G(this,Vt))==null||s.cancel(t),n?n.then(Zn).catch(Zn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,Na))}isActive(){return this.observers.some(t=>wA(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Xp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Qh(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!yA(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=G(this,Vt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=G(this,Vt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),G(this,Dn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(G(this,Vt)&&(G(this,yi)?G(this,Vt).cancel({revert:!0}):G(this,Vt).cancelRetry()),this.scheduleGc()),G(this,Dn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||zt(this,er,Ur).call(this,{type:"invalidate"})}fetch(t,n){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(G(this,Vt))return G(this,Vt).continueRetry(),G(this,Vt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const p=this.observers.find(h=>h.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,s=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Ne(this,yi,!0),r.signal)})},a=()=>{const p=h1(this.options,n),b=(()=>{const g={client:G(this,vi),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return Ne(this,yi,!1),this.options.persister?this.options.persister(p,b,this):p(b)},l=(()=>{const p={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:G(this,vi),state:this.state,fetchFn:a};return s(p),p})();(u=this.options.behavior)==null||u.onFetch(l,this),Ne(this,xi,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&zt(this,er,Ur).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=p=>{var h,b,g,w;mf(p)&&p.silent||zt(this,er,Ur).call(this,{type:"error",error:p}),mf(p)||((b=(h=G(this,Dn).config).onError)==null||b.call(h,p,this),(w=(g=G(this,Dn).config).onSettled)==null||w.call(g,this.state.data,p,this)),this.scheduleGc()};return Ne(this,Vt,x1({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var h,b,g,w;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(x){c(x);return}(b=(h=G(this,Dn).config).onSuccess)==null||b.call(h,p,this),(w=(g=G(this,Dn).config).onSettled)==null||w.call(g,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,h)=>{zt(this,er,Ur).call(this,{type:"failed",failureCount:p,error:h})},onPause:()=>{zt(this,er,Ur).call(this,{type:"pause"})},onContinue:()=>{zt(this,er,Ur).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),G(this,Vt).start()}},Na=new WeakMap,xi=new WeakMap,Dn=new WeakMap,vi=new WeakMap,Vt=new WeakMap,wl=new WeakMap,yi=new WeakMap,er=new WeakSet,Ur=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...AA(r.data,this.options),fetchMeta:t.meta??null};case"success":return Ne(this,xi,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return mf(s)&&s.revert&&G(this,xi)?{...G(this,xi),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),nn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),G(this,Dn).notify({query:this,type:"updated",action:t})})},gw);function AA(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:p1(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function IA(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var jr,xw,OA=(xw=class extends sd{constructor(t={}){super();Fe(this,jr);this.config=t,Ne(this,jr,new Map)}build(t,n,r){const s=n.queryKey,a=n.queryHash??Yp(s,n);let o=this.get(a);return o||(o=new RA({client:t,queryKey:s,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){G(this,jr).has(t.queryHash)||(G(this,jr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=G(this,jr).get(t.queryHash);n&&(t.destroy(),n===t&&G(this,jr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){nn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return G(this,jr).get(t)}getAll(){return[...G(this,jr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>kv(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>kv(t,r)):n}notify(t){nn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){nn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){nn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},jr=new WeakMap,xw),_r,en,wi,Sr,vs,vw,LA=(vw=class extends v1{constructor(t){super();Fe(this,Sr);Fe(this,_r);Fe(this,en);Fe(this,wi);this.mutationId=t.mutationId,Ne(this,en,t.mutationCache),Ne(this,_r,[]),this.state=t.state||MA(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){G(this,_r).includes(t)||(G(this,_r).push(t),this.clearGcTimeout(),G(this,en).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ne(this,_r,G(this,_r).filter(n=>n!==t)),this.scheduleGc(),G(this,en).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){G(this,_r).length||(this.state.status==="pending"?this.scheduleGc():G(this,en).remove(this))}continue(){var t;return((t=G(this,wi))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,o,l,c,u,d,f,p,h,b,g,w,x,v,y,j,S,_,N,C;const n=()=>{zt(this,Sr,vs).call(this,{type:"continue"})};Ne(this,wi,x1({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(A,R)=>{zt(this,Sr,vs).call(this,{type:"failed",failureCount:A,error:R})},onPause:()=>{zt(this,Sr,vs).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,en).canRun(this)}));const r=this.state.status==="pending",s=!G(this,wi).canStart();try{if(r)n();else{zt(this,Sr,vs).call(this,{type:"pending",variables:t,isPaused:s}),await((o=(a=G(this,en).config).onMutate)==null?void 0:o.call(a,t,this));const R=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));R!==this.state.context&&zt(this,Sr,vs).call(this,{type:"pending",context:R,variables:t,isPaused:s})}const A=await G(this,wi).start();return await((d=(u=G(this,en).config).onSuccess)==null?void 0:d.call(u,A,t,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,A,t,this.state.context)),await((b=(h=G(this,en).config).onSettled)==null?void 0:b.call(h,A,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,A,null,t,this.state.context)),zt(this,Sr,vs).call(this,{type:"success",data:A}),A}catch(A){try{throw await((v=(x=G(this,en).config).onError)==null?void 0:v.call(x,A,t,this.state.context,this)),await((j=(y=this.options).onError)==null?void 0:j.call(y,A,t,this.state.context)),await((_=(S=G(this,en).config).onSettled)==null?void 0:_.call(S,void 0,A,this.state.variables,this.state.context,this)),await((C=(N=this.options).onSettled)==null?void 0:C.call(N,void 0,A,t,this.state.context)),A}finally{zt(this,Sr,vs).call(this,{type:"error",error:A})}}finally{G(this,en).runNext(this)}}},_r=new WeakMap,en=new WeakMap,wi=new WeakMap,Sr=new WeakSet,vs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),nn.batch(()=>{G(this,_r).forEach(r=>{r.onMutationUpdate(t)}),G(this,en).notify({mutation:this,type:"updated",action:t})})},vw);function MA(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Hr,tr,bl,yw,DA=(yw=class extends sd{constructor(t={}){super();Fe(this,Hr);Fe(this,tr);Fe(this,bl);this.config=t,Ne(this,Hr,new Set),Ne(this,tr,new Map),Ne(this,bl,0)}build(t,n,r){const s=new LA({mutationCache:this,mutationId:++zl(this,bl)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){G(this,Hr).add(t);const n=lc(t);if(typeof n=="string"){const r=G(this,tr).get(n);r?r.push(t):G(this,tr).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(G(this,Hr).delete(t)){const n=lc(t);if(typeof n=="string"){const r=G(this,tr).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&G(this,tr).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=lc(t);if(typeof n=="string"){const r=G(this,tr).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=lc(t);if(typeof n=="string"){const s=(r=G(this,tr).get(n))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){nn.batch(()=>{G(this,Hr).forEach(t=>{this.notify({type:"removed",mutation:t})}),G(this,Hr).clear(),G(this,tr).clear()})}getAll(){return Array.from(G(this,Hr))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Cv(n,r))}findAll(t={}){return this.getAll().filter(n=>Cv(t,n))}notify(t){nn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return nn.batch(()=>Promise.all(t.map(n=>n.continue().catch(Zn))))}},Hr=new WeakMap,tr=new WeakMap,bl=new WeakMap,yw);function lc(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Tv(e){return{onFetch:(t,n)=>{var d,f,p,h,b;const r=t.options,s=(p=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,a=((h=t.state.data)==null?void 0:h.pages)||[],o=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const w=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},x=h1(t.options,t.fetchOptions),v=async(y,j,S)=>{if(g)return Promise.reject();if(j==null&&y.pages.length)return Promise.resolve(y);const N=(()=>{const O={client:t.client,queryKey:t.queryKey,pageParam:j,direction:S?"backward":"forward",meta:t.options.meta};return w(O),O})(),C=await x(N),{maxPages:A}=t.options,R=S?SA:_A;return{pages:R(y.pages,C,A),pageParams:R(y.pageParams,j,A)}};if(s&&a.length){const y=s==="backward",j=y?FA:Rv,S={pages:a,pageParams:o},_=j(r,S);l=await v(S,_,y)}else{const y=e??a.length;do{const j=c===0?o[0]??r.initialPageParam:Rv(r,l);if(c>0&&j==null)break;l=await v(l,j),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>{var g,w;return(w=(g=t.options).persister)==null?void 0:w.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function Rv(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function FA(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var pt,Es,Ps,ka,Ca,Ts,Ea,Pa,ww,$A=(ww=class{constructor(e={}){Fe(this,pt);Fe(this,Es);Fe(this,Ps);Fe(this,ka);Fe(this,Ca);Fe(this,Ts);Fe(this,Ea);Fe(this,Pa);Ne(this,pt,e.queryCache||new OA),Ne(this,Es,e.mutationCache||new DA),Ne(this,Ps,e.defaultOptions||{}),Ne(this,ka,new Map),Ne(this,Ca,new Map),Ne(this,Ts,0)}mount(){zl(this,Ts)._++,G(this,Ts)===1&&(Ne(this,Ea,m1.subscribe(async e=>{e&&(await this.resumePausedMutations(),G(this,pt).onFocus())})),Ne(this,Pa,gu.subscribe(async e=>{e&&(await this.resumePausedMutations(),G(this,pt).onOnline())})))}unmount(){var e,t;zl(this,Ts)._--,G(this,Ts)===0&&((e=G(this,Ea))==null||e.call(this),Ne(this,Ea,void 0),(t=G(this,Pa))==null||t.call(this),Ne(this,Pa,void 0))}isFetching(e){return G(this,pt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return G(this,Es).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=G(this,pt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=G(this,pt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Qh(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return G(this,pt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=G(this,pt).get(r.queryHash),a=s==null?void 0:s.state.data,o=xA(t,a);if(o!==void 0)return G(this,pt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return nn.batch(()=>G(this,pt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=G(this,pt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=G(this,pt);nn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=G(this,pt);return nn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=nn.batch(()=>G(this,pt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(Zn).catch(Zn)}invalidateQueries(e,t={}){return nn.batch(()=>(G(this,pt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=nn.batch(()=>G(this,pt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(Zn)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(Zn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=G(this,pt).build(this,t);return n.isStaleByTime(Qh(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Zn).catch(Zn)}fetchInfiniteQuery(e){return e.behavior=Tv(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Zn).catch(Zn)}ensureInfiniteQueryData(e){return e.behavior=Tv(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return gu.isOnline()?G(this,Es).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,pt)}getMutationCache(){return G(this,Es)}getDefaultOptions(){return G(this,Ps)}setDefaultOptions(e){Ne(this,Ps,e)}setQueryDefaults(e,t){G(this,ka).set(hl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...G(this,ka).values()],n={};return t.forEach(r=>{ml(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){G(this,Ca).set(hl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...G(this,Ca).values()],n={};return t.forEach(r=>{ml(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...G(this,Ps).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Yp(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Xp&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...G(this,Ps).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){G(this,pt).clear(),G(this,Es).clear()}},pt=new WeakMap,Es=new WeakMap,Ps=new WeakMap,ka=new WeakMap,Ca=new WeakMap,Ts=new WeakMap,Ea=new WeakMap,Pa=new WeakMap,ww),zA=m.createContext(void 0),UA=({client:e,children:t})=>(m.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(zA.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pl(){return pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pl.apply(this,arguments)}var Is;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Is||(Is={}));const Av="popstate";function BA(e){e===void 0&&(e={});function t(r,s){let{pathname:a,search:o,hash:l}=r.location;return Xh("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:xu(s)}return qA(t,n,null,e)}function ft(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function y1(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function VA(){return Math.random().toString(36).substr(2,8)}function Iv(e,t){return{usr:e.state,key:e.key,idx:t}}function Xh(e,t,n,r){return n===void 0&&(n=null),pl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Xa(t):t,{state:n,key:t&&t.key||r||VA()})}function xu(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Xa(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function qA(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=Is.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(pl({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=Is.Pop;let w=d(),x=w==null?null:w-u;u=w,c&&c({action:l,location:g.location,delta:x})}function p(w,x){l=Is.Push;let v=Xh(g.location,w,x);u=d()+1;let y=Iv(v,u),j=g.createHref(v);try{o.pushState(y,"",j)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(j)}a&&c&&c({action:l,location:g.location,delta:1})}function h(w,x){l=Is.Replace;let v=Xh(g.location,w,x);u=d();let y=Iv(v,u),j=g.createHref(v);o.replaceState(y,"",j),a&&c&&c({action:l,location:g.location,delta:0})}function b(w){let x=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof w=="string"?w:xu(w);return v=v.replace(/ $/,"%20"),ft(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let g={get action(){return l},get location(){return e(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Av,f),c=w,()=>{s.removeEventListener(Av,f),c=null}},createHref(w){return t(s,w)},createURL:b,encodeLocation(w){let x=b(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:h,go(w){return o.go(w)}};return g}var Ov;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ov||(Ov={}));function WA(e,t,n){return n===void 0&&(n="/"),HA(e,t,n,!1)}function HA(e,t,n,r){let s=typeof t=="string"?Xa(t):t,a=za(s.pathname||"/",n);if(a==null)return null;let o=w1(e);GA(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=sI(a);l=nI(o[c],u,r)}return l}function w1(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(ft(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Bs([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(ft(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),w1(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:eI(u,a.index),routesMeta:d})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of b1(a.path))s(a,o,c)}),t}function b1(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=b1(r.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function GA(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:tI(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const KA=/^:[\w-]+$/,QA=3,YA=2,XA=1,JA=10,ZA=-2,Lv=e=>e==="*";function eI(e,t){let n=e.split("/"),r=n.length;return n.some(Lv)&&(r+=ZA),t&&(r+=YA),n.filter(s=>!Lv(s)).reduce((s,a)=>s+(KA.test(a)?QA:a===""?XA:JA),r)}function tI(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function nI(e,t,n){let{routesMeta:r}=e,s={},a="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=vu({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=vu({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Bs([a,f.pathname]),pathnameBase:lI(Bs([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=Bs([a,f.pathnameBase]))}return o}function vu(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=rI(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:p,isOptional:h}=d;if(p==="*"){let g=l[f]||"";o=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const b=l[f];return h&&!b?u[p]=void 0:u[p]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:e}}function rI(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),y1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function sI(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return y1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function za(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function iI(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Xa(e):e;return{pathname:n?n.startsWith("/")?n:aI(n,t):t,search:cI(r),hash:uI(s)}}function aI(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function pf(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oI(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Jp(e,t){let n=oI(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Zp(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Xa(e):(s=pl({},e),ft(!s.pathname||!s.pathname.includes("?"),pf("?","pathname","search",s)),ft(!s.pathname||!s.pathname.includes("#"),pf("#","pathname","hash",s)),ft(!s.search||!s.search.includes("#"),pf("#","search","hash",s)));let a=e===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?t[f]:"/"}let c=iI(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Bs=e=>e.join("/").replace(/\/\/+/g,"/"),lI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),cI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,uI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function dI(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const j1=["post","put","patch","delete"];new Set(j1);const fI=["get",...j1];new Set(fI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gl(){return gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gl.apply(this,arguments)}const ad=m.createContext(null),_1=m.createContext(null),ls=m.createContext(null),od=m.createContext(null),cs=m.createContext({outlet:null,matches:[],isDataRoute:!1}),S1=m.createContext(null);function hI(e,t){let{relative:n}=t===void 0?{}:t;Ja()||ft(!1);let{basename:r,navigator:s}=m.useContext(ls),{hash:a,pathname:o,search:l}=ld(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Bs([r,o])),s.createHref({pathname:c,search:l,hash:a})}function Ja(){return m.useContext(od)!=null}function Js(){return Ja()||ft(!1),m.useContext(od).location}function N1(e){m.useContext(ls).static||m.useLayoutEffect(e)}function Gn(){let{isDataRoute:e}=m.useContext(cs);return e?kI():mI()}function mI(){Ja()||ft(!1);let e=m.useContext(ad),{basename:t,future:n,navigator:r}=m.useContext(ls),{matches:s}=m.useContext(cs),{pathname:a}=Js(),o=JSON.stringify(Jp(s,n.v7_relativeSplatPath)),l=m.useRef(!1);return N1(()=>{l.current=!0}),m.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=Zp(u,JSON.parse(o),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Bs([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,o,a,e])}function Rl(){let{matches:e}=m.useContext(cs),t=e[e.length-1];return t?t.params:{}}function ld(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=m.useContext(ls),{matches:s}=m.useContext(cs),{pathname:a}=Js(),o=JSON.stringify(Jp(s,r.v7_relativeSplatPath));return m.useMemo(()=>Zp(e,JSON.parse(o),a,n==="path"),[e,o,a,n])}function pI(e,t){return gI(e,t)}function gI(e,t,n,r){Ja()||ft(!1);let{navigator:s}=m.useContext(ls),{matches:a}=m.useContext(cs),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Js(),d;if(t){var f;let w=typeof t=="string"?Xa(t):t;c==="/"||(f=w.pathname)!=null&&f.startsWith(c)||ft(!1),d=w}else d=u;let p=d.pathname||"/",h=p;if(c!=="/"){let w=c.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=WA(e,{pathname:h}),g=bI(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Bs([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Bs([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,n,r);return t&&g?m.createElement(od.Provider,{value:{location:gl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Is.Pop}},g):g}function xI(){let e=NI(),t=dI(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),n?m.createElement("pre",{style:s},n):null,null)}const vI=m.createElement(xI,null);class yI extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?m.createElement(cs.Provider,{value:this.props.routeContext},m.createElement(S1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wI(e){let{routeContext:t,match:n,children:r}=e,s=m.useContext(ad);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(cs.Provider,{value:t},r)}function bI(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||ft(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:p,errors:h}=n,b=f.route.loader&&p[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,p)=>{let h,b=!1,g=null,w=null;n&&(h=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||vI,c&&(u<0&&p===0?(b=!0,w=null):u===p&&(b=!0,w=f.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,p+1)),v=()=>{let y;return h?y=g:b?y=w:f.route.Component?y=m.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=d,m.createElement(wI,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:y})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?m.createElement(yI,{location:n.location,revalidation:n.revalidation,component:g,error:h,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var k1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(k1||{}),yu=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yu||{});function jI(e){let t=m.useContext(ad);return t||ft(!1),t}function _I(e){let t=m.useContext(_1);return t||ft(!1),t}function SI(e){let t=m.useContext(cs);return t||ft(!1),t}function C1(e){let t=SI(),n=t.matches[t.matches.length-1];return n.route.id||ft(!1),n.route.id}function NI(){var e;let t=m.useContext(S1),n=_I(yu.UseRouteError),r=C1(yu.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function kI(){let{router:e}=jI(k1.UseNavigateStable),t=C1(yu.UseNavigateStable),n=m.useRef(!1);return N1(()=>{n.current=!0}),m.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,gl({fromRouteId:t},a)))},[e,t])}function CI(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ir(e){let{to:t,replace:n,state:r,relative:s}=e;Ja()||ft(!1);let{future:a,static:o}=m.useContext(ls),{matches:l}=m.useContext(cs),{pathname:c}=Js(),u=Gn(),d=Zp(t,Jp(l,a.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return m.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function Qe(e){ft(!1)}function EI(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Is.Pop,navigator:a,static:o=!1,future:l}=e;Ja()&&ft(!1);let c=t.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:a,static:o,future:gl({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof r=="string"&&(r=Xa(r));let{pathname:d="/",search:f="",hash:p="",state:h=null,key:b="default"}=r,g=m.useMemo(()=>{let w=za(d,c);return w==null?null:{location:{pathname:w,search:f,hash:p,state:h,key:b},navigationType:s}},[c,d,f,p,h,b,s]);return g==null?null:m.createElement(ls.Provider,{value:u},m.createElement(od.Provider,{children:n,value:g}))}function PI(e){let{children:t,location:n}=e;return pI(Jh(t),n)}new Promise(()=>{});function Jh(e,t){t===void 0&&(t=[]);let n=[];return m.Children.forEach(e,(r,s)=>{if(!m.isValidElement(r))return;let a=[...t,s];if(r.type===m.Fragment){n.push.apply(n,Jh(r.props.children,a));return}r.type!==Qe&&ft(!1),!r.props.index||!r.props.children||ft(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Jh(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wu(){return wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wu.apply(this,arguments)}function E1(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function TI(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function RI(e,t){return e.button===0&&(!t||t==="_self")&&!TI(e)}const AI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],II=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],OI="6";try{window.__reactRouterVersion=OI}catch{}const LI=m.createContext({isTransitioning:!1}),MI="startTransition",Mv=Bm[MI];function DI(e){let{basename:t,children:n,future:r,window:s}=e,a=m.useRef();a.current==null&&(a.current=BA({window:s,v5Compat:!0}));let o=a.current,[l,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=m.useCallback(f=>{u&&Mv?Mv(()=>c(f)):c(f)},[c,u]);return m.useLayoutEffect(()=>o.listen(d),[o,d]),m.useEffect(()=>CI(r),[r]),m.createElement(EI,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const FI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$I=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ar=m.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,p=E1(t,AI),{basename:h}=m.useContext(ls),b,g=!1;if(typeof u=="string"&&$I.test(u)&&(b=u,FI))try{let y=new URL(window.location.href),j=u.startsWith("//")?new URL(y.protocol+u):new URL(u),S=za(j.pathname,h);j.origin===y.origin&&S!=null?u=S+j.search+j.hash:g=!0}catch{}let w=hI(u,{relative:s}),x=UI(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function v(y){r&&r(y),y.defaultPrevented||x(y)}return m.createElement("a",wu({},p,{href:b||w,onClick:g||a?r:v,ref:n,target:c}))}),Dv=m.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,f=E1(t,II),p=ld(c,{relative:f.relative}),h=Js(),b=m.useContext(_1),{navigator:g,basename:w}=m.useContext(ls),x=b!=null&&BI(p)&&u===!0,v=g.encodeLocation?g.encodeLocation(p).pathname:p.pathname,y=h.pathname,j=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(y=y.toLowerCase(),j=j?j.toLowerCase():null,v=v.toLowerCase()),j&&w&&(j=za(j,w)||j);const S=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let _=y===v||!o&&y.startsWith(v)&&y.charAt(S)==="/",N=j!=null&&(j===v||!o&&j.startsWith(v)&&j.charAt(v.length)==="/"),C={isActive:_,isPending:N,isTransitioning:x},A=_?r:void 0,R;typeof a=="function"?R=a(C):R=[a,_?"active":null,N?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(C):l;return m.createElement(ar,wu({},f,{"aria-current":A,className:R,ref:n,style:O,to:c,viewTransition:u}),typeof d=="function"?d(C):d)});var Zh;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Zh||(Zh={}));var Fv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Fv||(Fv={}));function zI(e){let t=m.useContext(ad);return t||ft(!1),t}function UI(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=t===void 0?{}:t,c=Gn(),u=Js(),d=ld(e,{relative:o});return m.useCallback(f=>{if(RI(f,n)){f.preventDefault();let p=r!==void 0?r:xu(u)===xu(d);c(e,{replace:p,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,r,s,n,e,a,o,l])}function BI(e,t){t===void 0&&(t={});let n=m.useContext(LI);n==null&&ft(!1);let{basename:r}=zI(Zh.useViewTransitionState),s=ld(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=za(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=za(n.nextLocation.pathname,r)||n.nextLocation.pathname;return vu(s.pathname,o)!=null||vu(s.pathname,a)!=null}const VI="modulepreload",qI=function(e){return"/"+e},$v={},Za=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=qI(c),c in $v)return;$v[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":VI,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,h)=>{f.addEventListener("load",p),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},WI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Za(async()=>{const{default:r}=await Promise.resolve().then(()=>eo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class eg extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class HI extends eg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class zv extends eg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Uv extends eg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var em;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(em||(em={}));var GI=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class KI{constructor(t,{headers:n={},customFetch:r,region:s=em.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=WI(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return GI(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(g=>{throw new HI(g)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new zv(f);if(!f.ok)throw new Uv(f);let h=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return h==="application/json"?b=yield f.json():h==="application/octet-stream"?b=yield f.blob():h==="text/event-stream"?b=f:h==="multipart/form-data"?b=yield f.formData():b=yield f.text(),{data:b,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof Uv||s instanceof zv?s.context:void 0}}})}}var fn={},tg={},cd={},Al={},ud={},dd={},QI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ua=QI();const YI=Ua.fetch,P1=Ua.fetch.bind(Ua),T1=Ua.Headers,XI=Ua.Request,JI=Ua.Response,eo=Object.freeze(Object.defineProperty({__proto__:null,Headers:T1,Request:XI,Response:JI,default:P1,fetch:YI},Symbol.toStringTag,{value:"Module"})),ZI=Ak(eo);var fd={};Object.defineProperty(fd,"__esModule",{value:!0});let e4=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};fd.default=e4;var R1=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dd,"__esModule",{value:!0});const t4=R1(ZI),n4=R1(fd);let r4=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=t4.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c,u;let d=null,f=null,p=null,h=a.status,b=a.statusText;if(a.ok){if(this.method!=="HEAD"){const v=await a.text();v===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=v:f=JSON.parse(v))}const w=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=a.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&x&&x.length>1&&(p=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,h=406,b="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const w=await a.text();try{d=JSON.parse(w),Array.isArray(d)&&a.status===404&&(f=[],d=null,h=200,b="OK")}catch{a.status===404&&w===""?(h=204,b="No Content"):d={message:w}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,h=200,b="OK"),d&&this.shouldThrowOnError)throw new n4.default(d)}return{error:d,data:f,count:p,status:h,statusText:b}});return this.shouldThrowOnError||(s=s.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};dd.default=r4;var s4=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ud,"__esModule",{value:!0});const i4=s4(dd);let a4=class extends i4.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};ud.default=a4;var o4=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Al,"__esModule",{value:!0});const l4=o4(ud);let c4=class extends l4.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${a}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Al.default=c4;var u4=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cd,"__esModule",{value:!0});const yo=u4(Al);let d4=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new yo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var s;const a="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new yo.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new yo.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new yo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new yo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};cd.default=d4;var A1=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tg,"__esModule",{value:!0});const f4=A1(cd),h4=A1(Al);let m4=class I1{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new f4.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new I1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:a}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{c.searchParams.append(f,p)})):(l="POST",u=n);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new h4.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};tg.default=m4;var to=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fn,"__esModule",{value:!0});fn.PostgrestError=fn.PostgrestBuilder=fn.PostgrestTransformBuilder=fn.PostgrestFilterBuilder=fn.PostgrestQueryBuilder=fn.PostgrestClient=void 0;const O1=to(tg);fn.PostgrestClient=O1.default;const L1=to(cd);fn.PostgrestQueryBuilder=L1.default;const M1=to(Al);fn.PostgrestFilterBuilder=M1.default;const D1=to(ud);fn.PostgrestTransformBuilder=D1.default;const F1=to(dd);fn.PostgrestBuilder=F1.default;const $1=to(fd);fn.PostgrestError=$1.default;var p4=fn.default={PostgrestClient:O1.default,PostgrestQueryBuilder:L1.default,PostgrestFilterBuilder:M1.default,PostgrestTransformBuilder:D1.default,PostgrestBuilder:F1.default,PostgrestError:$1.default};const{PostgrestClient:g4,PostgrestQueryBuilder:EB,PostgrestFilterBuilder:PB,PostgrestTransformBuilder:TB,PostgrestBuilder:RB,PostgrestError:AB}=p4;class x4{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const v4="2.15.4",y4=`realtime-js/${v4}`,w4="1.0.0",tm=1e4,b4=1e3,j4=100;var Uo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Uo||(Uo={}));var Et;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Et||(Et={}));var rr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(rr||(rr={}));var nm;(function(e){e.websocket="websocket"})(nm||(nm={}));var ui;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ui||(ui={}));class _4{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),a=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+s));o=o+s;const c=r.decode(t.slice(o,o+a));o=o+a;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class z1{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ye;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ye||(Ye={}));const Bv=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((a,o)=>(a[o]=S4(o,e,t,s),a),{})},S4=(e,t,n,r)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,o=n[e];return a&&!r.includes(a)?U1(a,o):rm(o)},U1=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return E4(t,n)}switch(e){case Ye.bool:return N4(t);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return k4(t);case Ye.json:case Ye.jsonb:return C4(t);case Ye.timestamp:return P4(t);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return rm(t);default:return rm(t)}},rm=e=>e,N4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},k4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},C4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},E4=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const o=e.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>U1(t,l))}return e},P4=e=>typeof e=="string"?e.replace(" ","T"):e,B1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class gf{constructor(t,n,r={},s=tm){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Vv;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Vv||(Vv={}));class Bo{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bo.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=Bo.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Bo.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const a=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=a[u];if(f){const p=d.map(w=>w.presence_ref),h=f.map(w=>w.presence_ref),b=d.filter(w=>h.indexOf(w.presence_ref)<0),g=f.filter(w=>p.indexOf(w.presence_ref)<0);b.length>0&&(l[u]=b),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(h=>h.presence_ref),p=d.filter(h=>f.indexOf(h.presence_ref)<0);t[l].unshift(...p)}r(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var qv;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(qv||(qv={}));var Vo;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Vo||(Vo={}));var qr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(qr||(qr={}));class ng{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new gf(this,rr.join,this.params,this.timeout),this.rejoinTimer=new z1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Et.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rr.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Bo(this),this.broadcastEndpointURL=B1(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Et.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Vo.PRESENCE]&&this.bindings[Vo.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,f={},p={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(qr.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(qr.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var b;if(this.socket.setAuth(),h===void 0){t==null||t(qr.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(b=g==null?void 0:g.length)!==null&&b!==void 0?b:0,x=[];for(let v=0;v<w;v++){const y=g[v],{filter:{event:j,schema:S,table:_,filter:N}}=y,C=h&&h[v];if(C&&C.event===j&&C.schema===S&&C.table===_&&C.filter===N)x.push(Object.assign(Object.assign({},y),{id:C.id}));else{this.unsubscribe(),this.state=Et.errored,t==null||t(qr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(qr.SUBSCRIBED);return}}).receive("error",h=>{this.state=Et.errored,t==null||t(qr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(qr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Et.joined&&t===Vo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Et.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new gf(this,rr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Et.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new gf(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>j4){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=rr;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(h=>{var b,g,w;return((b=h.filter)===null||b===void 0?void 0:b.event)==="*"||((w=(g=h.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(h=>h.callback(p,r)):(a=this.bindings[o])===null||a===void 0||a.filter(h=>{var b,g,w,x,v,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const j=h.id,S=(b=h.filter)===null||b===void 0?void 0:b.event;return j&&((g=n.ids)===null||g===void 0?void 0:g.includes(j))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const j=(v=(x=h==null?void 0:h.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return j==="*"||j===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof p=="object"&&"ids"in p){const b=p.data,{schema:g,table:w,commit_timestamp:x,type:v,errors:y}=b;p=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:x,eventType:v,new:{},old:{},errors:y}),this._getPayloadRecords(b))}h.callback(p,r)})}_isClosed(){return this.state===Et.closed}_isJoined(){return this.state===Et.joined}_isJoining(){return this.state===Et.joining}_isLeaving(){return this.state===Et.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&ng.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(rr.close,{},t)}_onError(t){this._on(rr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Et.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Bv(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Bv(t.columns,t.old_record)),n}}const xf=()=>{},cc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},T4=[1e3,2e3,5e3,1e4],R4=1e4,A4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class I4{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=tm,this.transport=null,this.heartbeatIntervalMs=cc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xf,this.ref=0,this.reconnectTimer=null,this.logger=xf,this.conn=null,this.sendBuffer=[],this.serializer=new _4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>Za(async()=>{const{default:l}=await Promise.resolve().then(()=>eo);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${nm.websocket}`,this.httpEndpoint=B1(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=x4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:w4}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Uo.connecting:return ui.Connecting;case Uo.open:return ui.Open;case Uo.closing:return ui.Closing;default:return ui.Closed}}isConnected(){return this.connectionState()===ui.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new ng(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:s,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(b4,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},cc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:a,ref:o}=n,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(rr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([A4],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:y4};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(rr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new z1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},cc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,a,o,l,c,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:tm,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:cc.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:xf,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:f=>T4[f-1]||R4,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(f,p)=>p(JSON.stringify(f)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class rg extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Pt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class O4 extends rg{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class sm extends rg{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var L4=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const V1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Za(async()=>{const{default:r}=await Promise.resolve().then(()=>eo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},M4=()=>L4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Za(()=>Promise.resolve().then(()=>eo),void 0)).Response:Response}),im=e=>{if(Array.isArray(e))return e.map(n=>im(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=im(r)}),t},D4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Fi=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const vf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),F4=(e,t,n)=>Fi(void 0,void 0,void 0,function*(){const r=yield M4();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const a=e.status||500,o=(s==null?void 0:s.statusCode)||a+"";t(new O4(vf(s),a,o))}).catch(s=>{t(new sm(vf(s),s))}):t(new sm(vf(e),e))}),$4=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(D4(r)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),n))};function Il(e,t,n,r,s,a){return Fi(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,$4(t,r,s,a)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>F4(c,l,r))})})}function bu(e,t,n,r){return Fi(this,void 0,void 0,function*(){return Il(e,"GET",t,n,r)})}function wr(e,t,n,r,s){return Fi(this,void 0,void 0,function*(){return Il(e,"POST",t,r,s,n)})}function am(e,t,n,r,s){return Fi(this,void 0,void 0,function*(){return Il(e,"PUT",t,r,s,n)})}function z4(e,t,n,r){return Fi(this,void 0,void 0,function*(){return Il(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function q1(e,t,n,r,s){return Fi(this,void 0,void 0,function*(){return Il(e,"DELETE",t,r,s,n)})}var Zt=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const U4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class B4{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=V1(s)}uploadOrUpdate(t,n,r,s){return Zt(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Wv),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),f=yield(t=="PUT"?am:wr)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(Pt(a))return{data:null,error:a};throw a}})}upload(t,n,r){return Zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Zt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:Wv.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield am(this.fetch,l.toString(),c,{headers:d});return{data:{path:a,fullPath:f.Key},error:null}}catch(c){if(Pt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Zt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield wr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new rg("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(Pt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Zt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Zt(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Pt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Zt(this,void 0,void 0,function*(){try{return{data:{path:(yield wr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Pt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Zt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield wr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(Pt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Zt(this,void 0,void 0,function*(){try{const s=yield wr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(Pt(s))return{data:null,error:s};throw s}})}download(t,n){return Zt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield bu(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Pt(l))return{data:null,error:l};throw l}})}info(t){return Zt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield bu(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:im(r),error:null}}catch(r){if(Pt(r))return{data:null,error:r};throw r}})}exists(t){return Zt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield z4(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Pt(r)&&r instanceof sm){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Zt(this,void 0,void 0,function*(){try{return{data:yield q1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Pt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Zt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},U4),n),{prefix:t||""});return{data:yield wr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Pt(s))return{data:null,error:s};throw s}})}listV2(t,n){return Zt(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield wr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Pt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const V4="2.11.0",q4={"X-Client-Info":`storage-js/${V4}`};var Ui=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class W4{constructor(t,n={},r,s){const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},q4),n),this.fetch=V1(r)}listBuckets(){return Ui(this,void 0,void 0,function*(){try{return{data:yield bu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Pt(t))return{data:null,error:t};throw t}})}getBucket(t){return Ui(this,void 0,void 0,function*(){try{return{data:yield bu(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Pt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Ui(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Pt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Ui(this,void 0,void 0,function*(){try{return{data:yield am(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Pt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Ui(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Pt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ui(this,void 0,void 0,function*(){try{return{data:yield q1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Pt(n))return{data:null,error:n};throw n}})}}class H4 extends W4{constructor(t,n={},r,s){super(t,n,r,s)}from(t){return new B4(this.url,this.headers,t,this.fetch)}}const G4="2.57.0";let Co="";typeof Deno<"u"?Co="deno":typeof document<"u"?Co="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Co="react-native":Co="node";const K4={"X-Client-Info":`supabase-js-${Co}/${G4}`},Q4={headers:K4},Y4={schema:"public"},X4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},J4={};var Z4=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const eO=e=>{let t;return e?t=e:typeof fetch>"u"?t=P1:t=fetch,(...n)=>t(...n)},tO=()=>typeof Headers>"u"?T1:Headers,nO=(e,t,n)=>{const r=eO(n),s=tO();return(a,o)=>Z4(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(a,Object.assign(Object.assign({},o),{headers:u}))})};var rO=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function sO(e){return e.endsWith("/")?e:e+"/"}function iO(e,t){var n,r;const{db:s,auth:a,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,p={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>rO(this,void 0,void 0,function*(){return""})};return e.accessToken?p.accessToken=e.accessToken:delete p.accessToken,p}const W1="2.71.1",Yi=30*1e3,om=3,yf=om*Yi,aO="http://localhost:9999",oO="supabase.auth.token",lO={"X-Client-Info":`gotrue-js/${W1}`},lm="X-Supabase-Api-Version",H1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uO=10*60*1e3;class sg extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ce(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class dO extends sg{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function fO(e){return Ce(e)&&e.name==="AuthApiError"}class G1 extends sg{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Zs extends sg{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class ys extends Zs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hO(e){return Ce(e)&&e.name==="AuthSessionMissingError"}class uc extends Zs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class dc extends Zs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class fc extends Zs{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function mO(e){return Ce(e)&&e.name==="AuthImplicitGrantRedirectError"}class Hv extends Zs{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cm extends Zs{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function wf(e){return Ce(e)&&e.name==="AuthRetryableFetchError"}class Gv extends Zs{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class um extends Zs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ju="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Kv=` 	
\r=`.split(""),pO=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Kv.length;t+=1)e[Kv[t].charCodeAt(0)]=-2;for(let t=0;t<ju.length;t+=1)e[ju[t].charCodeAt(0)]=t;return e})();function Qv(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ju[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ju[r]),t.queuedBits-=6}}function K1(e,t,n){const r=pO[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Yv(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{vO(o,r,n)};for(let o=0;o<e.length;o+=1)K1(e.charCodeAt(o),s,a);return t.join("")}function gO(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function xO(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}gO(r,t)}}function vO(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function yO(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)K1(e.charCodeAt(s),n,r);return new Uint8Array(t)}function wO(e){const t=[];return xO(e,n=>t.push(n)),new Uint8Array(t)}function bO(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Qv(s,n,r)),Qv(null,n,r),t.join("")}function jO(e){return Math.round(Date.now()/1e3)+e}function _O(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Yn=()=>typeof window<"u"&&typeof document<"u",ii={tested:!1,writable:!1},Q1=()=>{if(!Yn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ii.tested)return ii.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ii.tested=!0,ii.writable=!0}catch{ii.tested=!0,ii.writable=!1}return ii.writable};function SO(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Y1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Za(async()=>{const{default:r}=await Promise.resolve().then(()=>eo);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},NO=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Xi=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ai=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},gs=async(e,t)=>{await e.removeItem(t)};class hd{constructor(){this.promise=new hd.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}hd.promiseConstructor=Promise;function bf(e){const t=e.split(".");if(t.length!==3)throw new um("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!cO.test(t[r]))throw new um("JWT not in base64url format");return{header:JSON.parse(Yv(t[0])),payload:JSON.parse(Yv(t[1])),signature:yO(t[2]),raw:{header:t[0],payload:t[1]}}}async function kO(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function CO(e,t){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){r(o);return}}catch(o){if(!t(a,o)){s(o);return}}})()})}function EO(e){return("0"+e.toString(16)).substr(-2)}function PO(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,EO).join("")}async function TO(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function RO(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await TO(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bi(e,t,n=!1){const r=PO();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Xi(e,`${t}-code-verifier`,s);const a=await RO(r);return[a,r===a?"plain":"s256"]}const AO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function IO(e){const t=e.headers.get(lm);if(!t||!t.match(AO))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function OO(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function LO(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const MO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vi(e){if(!MO.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jf(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Xv(e){return JSON.parse(JSON.stringify(e))}var DO=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const ci=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),FO=[502,503,504];async function Jv(e){var t;if(!NO(e))throw new cm(ci(e),0);if(FO.includes(e.status))throw new cm(ci(e),e.status);let n;try{n=await e.json()}catch(a){throw new G1(ci(a),a)}let r;const s=IO(e);if(s&&s.getTime()>=H1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Gv(ci(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new ys}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Gv(ci(n),e.status,n.weak_password.reasons);throw new dO(ci(n),e.status||500,r)}const $O=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ae(e,t,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[lm]||(a[lm]=H1["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await zO(e,t,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function zO(e,t,n,r,s,a){const o=$O(t,r,s,a);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new cm(ci(c),0)}if(l.ok||await Jv(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Jv(c)}}function Br(e){var t;let n=null;qO(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=jO(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Zv(e){const t=Br(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ns(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function UO(e){return{data:e,error:null}}function BO(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,o=DO(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function VO(e){return e}function qO(e){return e.access_token&&e.refresh_token&&e.expires_in}const _f=["global","local","others"];var WO=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class HO{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Y1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=_f[0]){if(_f.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_f.join(", ")}`);try{return await Ae(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ns})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=WO(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:BO,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ce(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ae(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ns})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:VO});if(d.error)throw d.error;const f=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return h.length>0&&(h.forEach(b=>{const g=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(b.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ce(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Vi(t);try{return await Ae(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ns})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Vi(t);try{return await Ae(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ns})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Vi(t);try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ns})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Vi(t.userId);try{const{data:n,error:r}=await Ae(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Vi(t.userId),Vi(t.id);try{return{data:await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}}function ey(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function GO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qi={debug:!!(globalThis&&Q1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class X1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class KO extends X1{}async function QO(e,t,n){qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),qi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw qi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new KO(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(qi.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}GO();const YO={url:aO,storageKey:oO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ty(e,t,n){return await n()}const Wi={};class xl{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xl.nextInstanceID,xl.nextInstanceID+=1,this.instanceID>0&&Yn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},YO),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new HO({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Y1(s.fetch),this.lock=s.lock||ty,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Yn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=QO:this.lock=ty,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Q1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ey(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=ey(this.memoryStorage)),Yn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Wi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Wi[this.storageKey]=Object.assign(Object.assign({},Wi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Wi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Wi[this.storageKey]=Object.assign(Object.assign({},Wi[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${W1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=SO(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Yn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),mO(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ce(n)?{error:n}:{error:new G1("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const a=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Br}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Ce(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var n,r,s;try{let a;if("email"in t){const{email:d,password:f,options:p}=t;let h=null,b=null;this.flowType==="pkce"&&([h,b]=await Bi(this.storage,this.storageKey)),a=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:h,code_challenge_method:b},xform:Br})}else if("phone"in t){const{phone:d,password:f,options:p}=t;a=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Br})}else throw new dc("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Ce(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:o,options:l}=t;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Zv})}else if("phone"in t){const{phone:a,password:o,options:l}=t;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Zv})}else throw new dc("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new uc}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,a,o,l,c,u,d,f,p,h;let b,g;if("message"in t)b=t.message,g=t.signature;else{const{chain:w,wallet:x,statement:v,options:y}=t;let j;if(Yn())if(typeof x=="object")j=x;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))j=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const S=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const _=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),v?{statement:v}:null));let N;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")N=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)N=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)b=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${S.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((f=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...y.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const _=await j.signMessage(new TextEncoder().encode(b),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=_}}try{const{data:w,error:x}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:bO(g)},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Br});if(x)throw x;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new uc}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:x})}catch(w){if(Ce(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const n=await ai(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:o}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Br});if(await gs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new uc}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(Ce(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:a,nonce:o}=t,l=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Br}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new uc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,a,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Bi(this.storage,this.storageKey));const{error:f}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new dc("You must provide either an email or phone number.")}catch(l){if(Ce(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,a;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Br});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Bi(this.storage,this.storageKey)),await Ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:UO})}catch(a){if(Ce(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new ys;const{error:s}=await Ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:a}=t,{error:o}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:a}=t,{data:o,error:l}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new dc("You must provide either an email or phone number and a type")}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ai(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<yf:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await ai(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=jf()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ns}):await this._useSession(async n=>{var r,s,a;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ys}:await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Ns})})}catch(n){if(Ce(n))return hO(n)&&(await this._removeSession(),await gs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new ys;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Bi(this.storage,this.storageKey));const{data:u,error:d}=await Ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ns});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new ys;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:o}=bf(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(Ce(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new ys;const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Yn())throw new fc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new fc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Hv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Hv("No code detected.");const{data:v,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!o||!u)throw new fc("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let p=d+f;c&&(p=parseInt(c));const h=p-d;h*1e3<=Yi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${f}s`);const b=p-f;d-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,p,d):d-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,p,d);const{data:g,error:w}=await this._getUser(a);if(w)throw w;const x={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:p,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(r){if(Ce(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ai(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{error:a};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(fO(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await gs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=_O(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Bi(this.storage,this.storageKey,!0));try{return await Ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Ce(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var o,l,c,u,d;const{data:f,error:p}=a;if(p)throw p;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ae(this.fetch,"GET",h,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Yn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ce(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)throw o;return await Ae(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await CO(async s=>(s>0&&await kO(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Br})),(s,a)=>{const o=200*Math.pow(2,s);return a&&wf(a)&&Date.now()+o-r<Yi})}catch(r){if(this._debug(n,"error",r),Ce(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Yn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await ai(this.storage,this.storageKey);if(s&&this.userStorage){let o=await ai(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Xi(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:jf()}else if(s&&!s.user&&!s.user){const o=await ai(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await gs(this.storage,this.storageKey+"-user"),await Xi(this.storage,this.storageKey,s)):s.user=jf()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<yf;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${yf}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),wf(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new ys;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new hd;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new ys;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),Ce(a)){const o={session:null,error:a};return wf(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Xi(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=Xv(s);await Xi(this.storage,this.storageKey,a)}else{const s=Xv(n);await Xi(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await gs(this.storage,this.storageKey),await gs(this.storage,this.storageKey+"-code-verifier"),await gs(this.storage,this.storageKey+"-user"),this.userStorage&&await gs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Yn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Yi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/Yi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Yi}ms, refresh threshold is ${om} ticks`),s<=om&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof X1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Yn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await Bi(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ae(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await Ae(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const{data:o,error:l}=await Ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:a}=t;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=bf(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+uO>s)return r;const{data:a,error:o}=await Ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:h,error:b}=await this.getSession();if(b||!h.session)return{data:null,error:b};r=h.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:c}}=bf(r);n!=null&&n.allowExpired||OO(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:h}=await this.getUser(r);if(h)throw h;return{data:{claims:a,header:s,signature:o},error:null}}const d=LO(s.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,wO(`${l}.${c}`)))throw new um("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}}xl.nextInstanceID=0;const XO=xl;class JO extends XO{constructor(t){super(t)}}var ZO=function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class eL{constructor(t,n,r){var s,a,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=sO(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Y4,realtime:J4,auth:Object.assign(Object.assign({},X4),{storageKey:u}),global:Q4},f=iO(r??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=nO(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new g4(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new H4(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new KI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return ZO(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:o,flowType:l,lock:c,debug:u},d,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new JO({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,flowType:l,lock:c,debug:u,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new I4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const tL=(e,t,n)=>new eL(e,t,n);function nL(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}nL()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const rL="https://epqalebkqmkddlfomnyf.supabase.co",sL="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVwcWFsZWJrcW1rZGRsZm9tbnlmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY5ODY2NzksImV4cCI6MjA3MjU2MjY3OX0.ER4376BoXZfLvFu4ERbPmNs1O16mhyqjj9E06ZBvTg0",D=tL(rL,sL,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),iL=Object.freeze(Object.defineProperty({__proto__:null,supabase:D},Symbol.toStringTag,{value:"Module"})),J1=m.createContext(void 0);function aL({children:e}){const[t,n]=m.useState(null),[r,s]=m.useState(null),[a,o]=m.useState(null),[l,c]=m.useState(!0),{toast:u}=Ve(),d=Gn();m.useEffect(()=>{const{data:{subscription:g}}=D.auth.onAuthStateChange(async(w,x)=>{o(x),n((x==null?void 0:x.user)??null),x!=null&&x.user?setTimeout(async()=>{const{data:v,error:y}=await D.from("profiles").select("*").eq("id",x.user.id).single();if(y)console.error("Error fetching profile:",y),s(null);else{const j=_=>_==="teacher"||_==="profesor"?"formador":_==="administrador"?"admin":_==="estudiante"?"student":_==="voluntariuo"?"voluntario":_,S=v?{...v,email:x.user.email,role:j(v.role)}:null;s(S)}},0):s(null),c(!1)});return D.auth.getSession().then(({data:{session:w}})=>{o(w),n((w==null?void 0:w.user)??null),w!=null&&w.user?D.from("profiles").select("*").eq("id",w.user.id).single().then(({data:x,error:v})=>{if(!v&&x){const y=S=>S==="teacher"||S==="profesor"?"formador":S==="administrador"?"admin":S==="estudiante"?"student":S==="voluntariuo"?"voluntario":S,j={...x,email:w.user.email,role:y(x.role)};s(j)}c(!1)}):c(!1)}),()=>g.unsubscribe()},[]);const b={user:t,profile:r,session:a,loading:l,signIn:async(g,w)=>{try{const{error:x}=await D.auth.signInWithPassword({email:g,password:w});return x?{error:x.message}:{}}catch{return{error:"Error inesperado al iniciar sesión"}}},signUp:async(g,w,x)=>{try{const v=`${window.location.origin}/`,{error:y}=await D.auth.signUp({email:g,password:w,options:{emailRedirectTo:v,data:{full_name:x}}});return y?{error:y.message}:{}}catch{return{error:"Error inesperado al crear cuenta"}}},signOut:async()=>{try{await D.auth.signOut(),d("/")}catch{u({title:"Error",description:"Error al cerrar sesión",variant:"destructive"})}}};return i.jsx(J1.Provider,{value:b,children:e})}function it(){const e=m.useContext(J1);if(e===void 0)throw new Error("useAuth debe ser usado dentro de AuthProvider");return e}const Z1=m.createContext(void 0);function oL({children:e}){const[t,n]=m.useState(()=>localStorage.getItem("theme")||"dark");m.useEffect(()=>{const o=window.document.documentElement;o.classList.remove("light","dark"),o.classList.add(t),localStorage.setItem("theme",t)},[t]);const a={theme:t,setTheme:o=>{n(o)},toggleTheme:()=>{n(t==="dark"?"light":"dark")}};return i.jsx(Z1.Provider,{value:a,children:e})}function e_(){const e=m.useContext(Z1);if(e===void 0)throw new Error("useTheme debe ser usado dentro de ThemeProvider");return e}const Sf=768;function ig(){const[e,t]=m.useState(void 0);return m.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Sf-1}px)`),r=()=>{t(window.innerWidth<Sf)};return n.addEventListener("change",r),t(window.innerWidth<Sf),()=>n.removeEventListener("change",r)},[]),!!e}const lL=Di("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 will-change-transform focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 elev-1 hover:elev-2 hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 elev-1 hover:elev-2 hover:-translate-y-0.5",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground elev-1 hover:elev-2 hover:-translate-y-0.5",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 elev-1 hover:elev-2 hover:-translate-y-0.5",ghost:"hover:bg-accent hover:text-accent-foreground hover:-translate-y-0.5",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),V=m.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},a)=>{const o=r?Ha:"button";return i.jsx(o,{className:oe(lL({variant:t,size:n,className:e})),ref:a,...s})});V.displayName="Button";const ve=m.forwardRef(({className:e,type:t,...n},r)=>i.jsx("input",{type:t,className:oe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));ve.displayName="Input";var cL="Separator",ny="horizontal",uL=["horizontal","vertical"],t_=m.forwardRef((e,t)=>{const{decorative:n,orientation:r=ny,...s}=e,a=dL(r)?r:ny,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(xe.div,{"data-orientation":a,...l,...s,ref:t})});t_.displayName=cL;function dL(e){return uL.includes(e)}var n_=t_;const ag=m.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},s)=>i.jsx(n_,{ref:s,decorative:n,orientation:t,className:oe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));ag.displayName=n_.displayName;var Nf="focusScope.autoFocusOnMount",kf="focusScope.autoFocusOnUnmount",ry={bubbles:!1,cancelable:!0},fL="FocusScope",og=m.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=e,[l,c]=m.useState(null),u=An(s),d=An(a),f=m.useRef(null),p=Me(t,g=>c(g)),h=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let g=function(y){if(h.paused||!l)return;const j=y.target;l.contains(j)?f.current=j:ws(f.current,{select:!0})},w=function(y){if(h.paused||!l)return;const j=y.relatedTarget;j!==null&&(l.contains(j)||ws(f.current,{select:!0}))},x=function(y){if(document.activeElement===document.body)for(const S of y)S.removedNodes.length>0&&ws(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const v=new MutationObserver(x);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),v.disconnect()}}},[r,l,h.paused]),m.useEffect(()=>{if(l){iy.add(h);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(Nf,ry);l.addEventListener(Nf,u),l.dispatchEvent(x),x.defaultPrevented||(hL(vL(r_(l)),{select:!0}),document.activeElement===g&&ws(l))}return()=>{l.removeEventListener(Nf,u),setTimeout(()=>{const x=new CustomEvent(kf,ry);l.addEventListener(kf,d),l.dispatchEvent(x),x.defaultPrevented||ws(g??document.body,{select:!0}),l.removeEventListener(kf,d),iy.remove(h)},0)}}},[l,u,d,h]);const b=m.useCallback(g=>{if(!n&&!r||h.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(w&&x){const v=g.currentTarget,[y,j]=mL(v);y&&j?!g.shiftKey&&x===j?(g.preventDefault(),n&&ws(y,{select:!0})):g.shiftKey&&x===y&&(g.preventDefault(),n&&ws(j,{select:!0})):x===v&&g.preventDefault()}},[n,r,h.paused]);return i.jsx(xe.div,{tabIndex:-1,...o,ref:p,onKeyDown:b})});og.displayName=fL;function hL(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ws(r,{select:t}),document.activeElement!==n)return}function mL(e){const t=r_(e),n=sy(t,e),r=sy(t.reverse(),e);return[n,r]}function r_(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function sy(e,t){for(const n of e)if(!pL(n,{upTo:t}))return n}function pL(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function gL(e){return e instanceof HTMLInputElement&&"select"in e}function ws(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&gL(e)&&t&&e.select()}}var iy=xL();function xL(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=ay(e,t),e.unshift(t)},remove(t){var n;e=ay(e,t),(n=e[0])==null||n.resume()}}}function ay(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function vL(e){return e.filter(t=>t.tagName!=="A")}var Cf=0;function s_(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??oy()),document.body.insertAdjacentElement("beforeend",e[1]??oy()),Cf++,()=>{Cf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Cf--}},[])}function oy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var kr=function(){return kr=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},kr.apply(this,arguments)};function i_(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function yL(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var Mc="right-scroll-bar-position",Dc="width-before-scroll-bar",wL="with-scroll-bars-hidden",bL="--removed-body-scroll-bar-size";function Ef(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function jL(e,t){var n=m.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var _L=typeof window<"u"?m.useLayoutEffect:m.useEffect,ly=new WeakMap;function SL(e,t){var n=jL(null,function(r){return e.forEach(function(s){return Ef(s,r)})});return _L(function(){var r=ly.get(n);if(r){var s=new Set(r),a=new Set(e),o=n.current;s.forEach(function(l){a.has(l)||Ef(l,null)}),a.forEach(function(l){s.has(l)||Ef(l,o)})}ly.set(n,e)},[e]),n}function NL(e){return e}function kL(e,t){t===void 0&&(t=NL);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=t(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var d=o;o=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return s}function CL(e){e===void 0&&(e={});var t=kL(null);return t.options=kr({async:!0,ssr:!1},e),t}var a_=function(e){var t=e.sideCar,n=i_(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,kr({},n))};a_.isSideCarExport=!0;function EL(e,t){return e.useMedium(t),a_}var o_=CL(),Pf=function(){},md=m.forwardRef(function(e,t){var n=m.useRef(null),r=m.useState({onScrollCapture:Pf,onWheelCapture:Pf,onTouchMoveCapture:Pf}),s=r[0],a=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,p=e.sideCar,h=e.noRelative,b=e.noIsolation,g=e.inert,w=e.allowPinchZoom,x=e.as,v=x===void 0?"div":x,y=e.gapMode,j=i_(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=p,_=SL([n,t]),N=kr(kr({},j),s);return m.createElement(m.Fragment,null,d&&m.createElement(S,{sideCar:o_,removeScrollBar:u,shards:f,noRelative:h,noIsolation:b,inert:g,setCallbacks:a,allowPinchZoom:!!w,lockRef:n,gapMode:y}),o?m.cloneElement(m.Children.only(l),kr(kr({},N),{ref:_})):m.createElement(v,kr({},N,{className:c,ref:_}),l))});md.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};md.classNames={fullWidth:Dc,zeroRight:Mc};var PL=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function TL(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=PL();return t&&e.setAttribute("nonce",t),e}function RL(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function AL(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var IL=function(){var e=0,t=null;return{add:function(n){e==0&&(t=TL())&&(RL(t,n),AL(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},OL=function(){var e=IL();return function(t,n){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},l_=function(){var e=OL(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},LL={left:0,top:0,right:0,gap:0},Tf=function(e){return parseInt(e||"",10)||0},ML=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Tf(n),Tf(r),Tf(s)]},DL=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return LL;var t=ML(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},FL=l_(),va="data-scroll-locked",$L=function(e,t,n,r){var s=e.left,a=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(wL,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(va,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Mc,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Dc,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Mc," .").concat(Mc,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Dc," .").concat(Dc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(va,`] {
    `).concat(bL,": ").concat(l,`px;
  }
`)},cy=function(){var e=parseInt(document.body.getAttribute(va)||"0",10);return isFinite(e)?e:0},zL=function(){m.useEffect(function(){return document.body.setAttribute(va,(cy()+1).toString()),function(){var e=cy()-1;e<=0?document.body.removeAttribute(va):document.body.setAttribute(va,e.toString())}},[])},UL=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;zL();var a=m.useMemo(function(){return DL(s)},[s]);return m.createElement(FL,{styles:$L(a,!t,s,n?"":"!important")})},dm=!1;if(typeof window<"u")try{var hc=Object.defineProperty({},"passive",{get:function(){return dm=!0,!0}});window.addEventListener("test",hc,hc),window.removeEventListener("test",hc,hc)}catch{dm=!1}var Hi=dm?{passive:!1}:!1,BL=function(e){return e.tagName==="TEXTAREA"},c_=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!BL(e)&&n[t]==="visible")},VL=function(e){return c_(e,"overflowY")},qL=function(e){return c_(e,"overflowX")},uy=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=u_(e,r);if(s){var a=d_(e,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},WL=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},HL=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},u_=function(e,t){return e==="v"?VL(t):qL(t)},d_=function(e,t){return e==="v"?WL(t):HL(t)},GL=function(e,t){return e==="h"&&t==="rtl"?-1:1},KL=function(e,t,n,r,s){var a=GL(e,window.getComputedStyle(t).direction),o=a*r,l=n.target,c=t.contains(l),u=!1,d=o>0,f=0,p=0;do{if(!l)break;var h=d_(e,l),b=h[0],g=h[1],w=h[2],x=g-w-a*b;(b||x)&&u_(e,l)&&(f+=x,p+=b);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(f)<1||!s)||!d&&(Math.abs(p)<1||!s))&&(u=!0),u},mc=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},dy=function(e){return[e.deltaX,e.deltaY]},fy=function(e){return e&&"current"in e?e.current:e},QL=function(e,t){return e[0]===t[0]&&e[1]===t[1]},YL=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},XL=0,Gi=[];function JL(e){var t=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(XL++)[0],a=m.useState(l_)[0],o=m.useRef(e);m.useEffect(function(){o.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=yL([e.lockRef.current],(e.shards||[]).map(fy),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=m.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var x=mc(g),v=n.current,y="deltaX"in g?g.deltaX:v[0]-x[0],j="deltaY"in g?g.deltaY:v[1]-x[1],S,_=g.target,N=Math.abs(y)>Math.abs(j)?"h":"v";if("touches"in g&&N==="h"&&_.type==="range")return!1;var C=uy(N,_);if(!C)return!0;if(C?S=N:(S=N==="v"?"h":"v",C=uy(N,_)),!C)return!1;if(!r.current&&"changedTouches"in g&&(y||j)&&(r.current=S),!S)return!0;var A=r.current||S;return KL(A,w,g,A==="h"?y:j,!0)},[]),c=m.useCallback(function(g){var w=g;if(!(!Gi.length||Gi[Gi.length-1]!==a)){var x="deltaY"in w?dy(w):mc(w),v=t.current.filter(function(S){return S.name===w.type&&(S.target===w.target||w.target===S.shadowParent)&&QL(S.delta,x)})[0];if(v&&v.should){w.cancelable&&w.preventDefault();return}if(!v){var y=(o.current.shards||[]).map(fy).filter(Boolean).filter(function(S){return S.contains(w.target)}),j=y.length>0?l(w,y[0]):!o.current.noIsolation;j&&w.cancelable&&w.preventDefault()}}},[]),u=m.useCallback(function(g,w,x,v){var y={name:g,delta:w,target:x,should:v,shadowParent:ZL(x)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(j){return j!==y})},1)},[]),d=m.useCallback(function(g){n.current=mc(g),r.current=void 0},[]),f=m.useCallback(function(g){u(g.type,dy(g),g.target,l(g,e.lockRef.current))},[]),p=m.useCallback(function(g){u(g.type,mc(g),g.target,l(g,e.lockRef.current))},[]);m.useEffect(function(){return Gi.push(a),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Hi),document.addEventListener("touchmove",c,Hi),document.addEventListener("touchstart",d,Hi),function(){Gi=Gi.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,Hi),document.removeEventListener("touchmove",c,Hi),document.removeEventListener("touchstart",d,Hi)}},[]);var h=e.removeScrollBar,b=e.inert;return m.createElement(m.Fragment,null,b?m.createElement(a,{styles:YL(s)}):null,h?m.createElement(UL,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function ZL(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const eM=EL(o_,JL);var lg=m.forwardRef(function(e,t){return m.createElement(md,kr({},e,{ref:t,sideCar:eM}))});lg.classNames=md.classNames;var tM=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ki=new WeakMap,pc=new WeakMap,gc={},Rf=0,f_=function(e){return e&&(e.host||f_(e.parentNode))},nM=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=f_(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},rM=function(e,t,n,r){var s=nM(t,Array.isArray(e)?e:[e]);gc[n]||(gc[n]=new WeakMap);var a=gc[n],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))d(p);else try{var h=p.getAttribute(r),b=h!==null&&h!=="false",g=(Ki.get(p)||0)+1,w=(a.get(p)||0)+1;Ki.set(p,g),a.set(p,w),o.push(p),g===1&&b&&pc.set(p,!0),w===1&&p.setAttribute(n,"true"),b||p.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return d(t),l.clear(),Rf++,function(){o.forEach(function(f){var p=Ki.get(f)-1,h=a.get(f)-1;Ki.set(f,p),a.set(f,h),p||(pc.has(f)||f.removeAttribute(r),pc.delete(f)),h||f.removeAttribute(n)}),Rf--,Rf||(Ki=new WeakMap,Ki=new WeakMap,pc=new WeakMap,gc={})}},h_=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=tM(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),rM(r,s,n,"aria-hidden")):function(){return null}},pd="Dialog",[m_,IB]=yn(pd),[sM,mr]=m_(pd),p_=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,l=m.useRef(null),c=m.useRef(null),[u,d]=Or({prop:r,defaultProp:s??!1,onChange:a,caller:pd});return i.jsx(sM,{scope:t,triggerRef:l,contentRef:c,contentId:Yr(),titleId:Yr(),descriptionId:Yr(),open:u,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(f=>!f),[d]),modal:o,children:n})};p_.displayName=pd;var g_="DialogTrigger",x_=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=mr(g_,n),a=Me(t,s.triggerRef);return i.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":dg(s.open),...r,ref:a,onClick:pe(e.onClick,s.onOpenToggle)})});x_.displayName=g_;var cg="DialogPortal",[iM,v_]=m_(cg,{forceMount:void 0}),y_=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=mr(cg,t);return i.jsx(iM,{scope:t,forceMount:n,children:m.Children.map(r,o=>i.jsx(os,{present:n||a.open,children:i.jsx(Hu,{asChild:!0,container:s,children:o})}))})};y_.displayName=cg;var _u="DialogOverlay",w_=m.forwardRef((e,t)=>{const n=v_(_u,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=mr(_u,e.__scopeDialog);return a.modal?i.jsx(os,{present:r||a.open,children:i.jsx(oM,{...s,ref:t})}):null});w_.displayName=_u;var aM=Da("DialogOverlay.RemoveScroll"),oM=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=mr(_u,n);return i.jsx(lg,{as:aM,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(xe.div,{"data-state":dg(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ri="DialogContent",b_=m.forwardRef((e,t)=>{const n=v_(Ri,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=mr(Ri,e.__scopeDialog);return i.jsx(os,{present:r||a.open,children:a.modal?i.jsx(lM,{...s,ref:t}):i.jsx(cM,{...s,ref:t})})});b_.displayName=Ri;var lM=m.forwardRef((e,t)=>{const n=mr(Ri,e.__scopeDialog),r=m.useRef(null),s=Me(t,n.contentRef,r);return m.useEffect(()=>{const a=r.current;if(a)return h_(a)},[]),i.jsx(j_,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pe(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:pe(e.onFocusOutside,a=>a.preventDefault())})}),cM=m.forwardRef((e,t)=>{const n=mr(Ri,e.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return i.jsx(j_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),j_=m.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=e,l=mr(Ri,n),c=m.useRef(null),u=Me(t,c);return s_(),i.jsxs(i.Fragment,{children:[i.jsx(og,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(Cl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":dg(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(uM,{titleId:l.titleId}),i.jsx(fM,{contentRef:c,descriptionId:l.descriptionId})]})]})}),ug="DialogTitle",__=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=mr(ug,n);return i.jsx(xe.h2,{id:s.titleId,...r,ref:t})});__.displayName=ug;var S_="DialogDescription",N_=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=mr(S_,n);return i.jsx(xe.p,{id:s.descriptionId,...r,ref:t})});N_.displayName=S_;var k_="DialogClose",C_=m.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=mr(k_,n);return i.jsx(xe.button,{type:"button",...r,ref:t,onClick:pe(e.onClick,()=>s.onOpenChange(!1))})});C_.displayName=k_;function dg(e){return e?"open":"closed"}var E_="DialogTitleWarning",[OB,P_]=c2(E_,{contentName:Ri,titleName:ug,docsSlug:"dialog"}),uM=({titleId:e})=>{const t=P_(E_),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},dM="DialogDescriptionWarning",fM=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${P_(dM).contentName}}.`;return m.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},T_=p_,hM=x_,R_=y_,gd=w_,xd=b_,vd=__,yd=N_,A_=C_;const mM=T_,pM=R_,I_=m.forwardRef(({className:e,...t},n)=>i.jsx(gd,{className:oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));I_.displayName=gd.displayName;const gM=Di("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),O_=m.forwardRef(({side:e="right",className:t,children:n,...r},s)=>i.jsxs(pM,{children:[i.jsx(I_,{}),i.jsxs(xd,{ref:s,className:oe(gM({side:e}),t),...r,children:[n,i.jsxs(A_,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[i.jsx(Ga,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));O_.displayName=xd.displayName;const xM=m.forwardRef(({className:e,...t},n)=>i.jsx(vd,{ref:n,className:oe("text-lg font-semibold text-foreground",e),...t}));xM.displayName=vd.displayName;const vM=m.forwardRef(({className:e,...t},n)=>i.jsx(yd,{ref:n,className:oe("text-sm text-muted-foreground",e),...t}));vM.displayName=yd.displayName;function hy({className:e,...t}){return i.jsx("div",{className:oe("animate-pulse rounded-md bg-muted",e),...t})}const yM="sidebar:state",wM=60*60*24*7,bM="16rem",jM="18rem",_M="3rem",SM="b",L_=m.createContext(null);function Ol(){const e=m.useContext(L_);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}const M_=m.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:s,children:a,...o},l)=>{const c=ig(),[u,d]=m.useState(!1),[f,p]=m.useState(e),h=t??f,b=m.useCallback(v=>{const y=typeof v=="function"?v(h):v;n?n(y):p(y),document.cookie=`${yM}=${y}; path=/; max-age=${wM}`},[n,h]),g=m.useCallback(()=>c?d(v=>!v):b(v=>!v),[c,b,d]);m.useEffect(()=>{const v=y=>{y.key===SM&&(y.metaKey||y.ctrlKey)&&(y.preventDefault(),g())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[g]);const w=h?"expanded":"collapsed",x=m.useMemo(()=>({state:w,open:h,setOpen:b,isMobile:c,openMobile:u,setOpenMobile:d,toggleSidebar:g}),[w,h,b,c,u,d,g]);return i.jsx(L_.Provider,{value:x,children:i.jsx(u1,{delayDuration:0,children:i.jsx("div",{style:{"--sidebar-width":bM,"--sidebar-width-icon":_M,...s},className:oe("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:l,...o,children:a})})})});M_.displayName="SidebarProvider";const D_=m.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:s,...a},o)=>{const{isMobile:l,state:c,openMobile:u,setOpenMobile:d}=Ol();return n==="none"?i.jsx("div",{className:oe("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:o,...a,children:s}):l?i.jsx(mM,{open:u,onOpenChange:d,...a,children:i.jsx(O_,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":jM},side:e,children:i.jsx("div",{className:"flex h-full w-full flex-col",children:s})})}):i.jsxs("div",{ref:o,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":c==="collapsed"?n:"","data-variant":t,"data-side":e,children:[i.jsx("div",{className:oe("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),i.jsx("div",{className:oe("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...a,children:i.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:s})})]})});D_.displayName="Sidebar";const F_=m.forwardRef(({className:e,onClick:t,...n},r)=>{const{toggleSidebar:s}=Ol();return i.jsxs(V,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:oe("h-7 w-7",e),onClick:a=>{t==null||t(a),s()},...n,children:[i.jsx(dP,{}),i.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});F_.displayName="SidebarTrigger";const NM=m.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:r}=Ol();return i.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:oe("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});NM.displayName="SidebarRail";const kM=m.forwardRef(({className:e,...t},n)=>i.jsx("main",{ref:n,className:oe("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));kM.displayName="SidebarInset";const CM=m.forwardRef(({className:e,...t},n)=>i.jsx(ve,{ref:n,"data-sidebar":"input",className:oe("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));CM.displayName="SidebarInput";const $_=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,"data-sidebar":"header",className:oe("flex flex-col gap-2 p-2",e),...t}));$_.displayName="SidebarHeader";const z_=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,"data-sidebar":"footer",className:oe("flex flex-col gap-2 p-2",e),...t}));z_.displayName="SidebarFooter";const EM=m.forwardRef(({className:e,...t},n)=>i.jsx(ag,{ref:n,"data-sidebar":"separator",className:oe("mx-2 w-auto bg-sidebar-border",e),...t}));EM.displayName="SidebarSeparator";const U_=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,"data-sidebar":"content",className:oe("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));U_.displayName="SidebarContent";const fm=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,"data-sidebar":"group",className:oe("relative flex w-full min-w-0 flex-col p-2",e),...t}));fm.displayName="SidebarGroup";const hm=m.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const s=t?Ha:"div";return i.jsx(s,{ref:r,"data-sidebar":"group-label",className:oe("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});hm.displayName="SidebarGroupLabel";const PM=m.forwardRef(({className:e,asChild:t=!1,...n},r)=>{const s=t?Ha:"button";return i.jsx(s,{ref:r,"data-sidebar":"group-action",className:oe("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});PM.displayName="SidebarGroupAction";const mm=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,"data-sidebar":"group-content",className:oe("w-full text-sm",e),...t}));mm.displayName="SidebarGroupContent";const pm=m.forwardRef(({className:e,...t},n)=>i.jsx("ul",{ref:n,"data-sidebar":"menu",className:oe("flex w-full min-w-0 flex-col gap-1",e),...t}));pm.displayName="SidebarMenu";const Eo=m.forwardRef(({className:e,...t},n)=>i.jsx("li",{ref:n,"data-sidebar":"menu-item",className:oe("group/menu-item relative",e),...t}));Eo.displayName="SidebarMenuItem";const TM=Di("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Po=m.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:s,className:a,...o},l)=>{const c=e?Ha:"button",{isMobile:u,state:d}=Ol(),f=i.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:oe(TM({variant:n,size:r}),a),...o});return s?(typeof s=="string"&&(s={children:s}),i.jsxs(pA,{children:[i.jsx(gA,{asChild:!0,children:f}),i.jsx(d1,{side:"right",align:"center",hidden:d!=="collapsed"||u,...s})]})):f});Po.displayName="SidebarMenuButton";const RM=m.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...r},s)=>{const a=t?Ha:"button";return i.jsx(a,{ref:s,"data-sidebar":"menu-action",className:oe("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});RM.displayName="SidebarMenuAction";const AM=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:oe("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));AM.displayName="SidebarMenuBadge";const IM=m.forwardRef(({className:e,showIcon:t=!1,...n},r)=>{const s=m.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return i.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:oe("rounded-md h-8 flex gap-2 px-2 items-center",e),...n,children:[t&&i.jsx(hy,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),i.jsx(hy,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":s}})]})});IM.displayName="SidebarMenuSkeleton";const OM=m.forwardRef(({className:e,...t},n)=>i.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:oe("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));OM.displayName="SidebarMenuSub";const LM=m.forwardRef(({...e},t)=>i.jsx("li",{ref:t,...e}));LM.displayName="SidebarMenuSubItem";const MM=m.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:r,...s},a)=>{const o=e?Ha:"a";return i.jsx(o,{ref:a,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:oe("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...s})});MM.displayName="SidebarMenuSubButton";var B_={exports:{}},V_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=m;function DM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var FM=typeof Object.is=="function"?Object.is:DM,$M=Ba.useState,zM=Ba.useEffect,UM=Ba.useLayoutEffect,BM=Ba.useDebugValue;function VM(e,t){var n=t(),r=$M({inst:{value:n,getSnapshot:t}}),s=r[0].inst,a=r[1];return UM(function(){s.value=n,s.getSnapshot=t,Af(s)&&a({inst:s})},[e,n,t]),zM(function(){return Af(s)&&a({inst:s}),e(function(){Af(s)&&a({inst:s})})},[e]),BM(n),n}function Af(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!FM(e,n)}catch{return!0}}function qM(e,t){return t()}var WM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qM:VM;V_.useSyncExternalStore=Ba.useSyncExternalStore!==void 0?Ba.useSyncExternalStore:WM;B_.exports=V_;var HM=B_.exports;function GM(){return HM.useSyncExternalStore(KM,()=>!0,()=>!1)}function KM(){return()=>{}}var fg="Avatar",[QM,LB]=yn(fg),[YM,q_]=QM(fg),W_=m.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,a]=m.useState("idle");return i.jsx(YM,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(xe.span,{...r,ref:t})})});W_.displayName=fg;var H_="AvatarImage",G_=m.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=e,o=q_(H_,n),l=XM(r,a),c=An(u=>{s(u),o.onImageLoadingStatusChange(u)});return Nt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(xe.img,{...a,ref:t,src:r}):null});G_.displayName=H_;var K_="AvatarFallback",Q_=m.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,a=q_(K_,n),[o,l]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(xe.span,{...s,ref:t}):null});Q_.displayName=K_;function my(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function XM(e,{referrerPolicy:t,crossOrigin:n}){const r=GM(),s=m.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=m.useState(()=>my(a,e));return Nt(()=>{l(my(a,e))},[a,e]),Nt(()=>{const c=f=>()=>{l(f)};if(!a)return;const u=c("loaded"),d=c("error");return a.addEventListener("load",u),a.addEventListener("error",d),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",u),a.removeEventListener("error",d)}},[a,n,t]),o}var Y_=W_,X_=G_,J_=Q_;const ss=m.forwardRef(({className:e,...t},n)=>i.jsx(Y_,{ref:n,className:oe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ss.displayName=Y_.displayName;const JM=m.forwardRef(({className:e,...t},n)=>i.jsx(X_,{ref:n,className:oe("aspect-square h-full w-full",e),...t}));JM.displayName=X_.displayName;const is=m.forwardRef(({className:e,...t},n)=>i.jsx(J_,{ref:n,className:oe("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));is.displayName=J_.displayName;const St=T_,ZM=hM,eD=R_,Z_=m.forwardRef(({className:e,...t},n)=>i.jsx(gd,{ref:n,className:oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Z_.displayName=gd.displayName;const wt=m.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(eD,{children:[i.jsx(Z_,{}),i.jsxs(xd,{ref:r,className:oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,i.jsxs(A_,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Ga,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wt.displayName=xd.displayName;const kt=({className:e,...t})=>i.jsx("div",{className:oe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});kt.displayName="DialogHeader";const Ct=m.forwardRef(({className:e,...t},n)=>i.jsx(vd,{ref:n,className:oe("text-lg font-semibold leading-none tracking-tight",e),...t}));Ct.displayName=vd.displayName;const ei=m.forwardRef(({className:e,...t},n)=>i.jsx(yd,{ref:n,className:oe("text-sm text-muted-foreground",e),...t}));ei.displayName=yd.displayName;var tD="Label",eS=m.forwardRef((e,t)=>i.jsx(xe.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));eS.displayName=tD;var tS=eS;const nD=Di("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),X=m.forwardRef(({className:e,...t},n)=>i.jsx(tS,{ref:n,className:oe(nD(),e),...t}));X.displayName=tS.displayName;const At=m.forwardRef(({className:e,...t},n)=>i.jsx("textarea",{className:oe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));At.displayName="Textarea";const rD=e=>{const t=[];return(e==="admin"||e==="formador"||e==="teacher"||e==="profesor")&&(t.push({title:"Actividad",url:"/admin",icon:uj}),t.push({title:"Usuarios",url:"/usuarios",icon:rn})),e==="student"?t.push({title:"Mi Formación",url:"/mi-formacion",icon:Lr}):t.push({title:"Programas",url:"/programas",icon:qe},{title:"Cursos",url:"/cursos",icon:Lr}),(e==="admin"||e==="formador"||e==="teacher"||e==="profesor")&&(t.push({title:"Lecciones",url:"/lecciones",icon:ur}),t.push({title:"Trabajos Prácticos",url:"/profesor",icon:wj})),t.push({title:"Calendario",url:"/calendario",icon:or},{title:"Comunidad",url:"/comunidad",icon:Pi}),e!=="student"&&t.push({title:"Slack",url:"/slack",icon:Pi}),t};function sD(){const{state:e}=Ol(),{profile:t,signOut:n}=it(),{theme:r,toggleTheme:s}=e_();Js().pathname;const o=rD((t==null?void 0:t.role)||"student"),l=({isActive:v})=>v?"bg-sidebar-accent text-sidebar-accent-foreground font-medium":"text-sidebar-foreground hover:bg-sidebar-accent/50 hover:text-sidebar-accent-foreground",c=v=>v.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2),u=e==="collapsed",[d,f]=m.useState(!1),[p,h]=m.useState(""),[b,g]=m.useState(""),w=v=>{switch((v||"").toLowerCase()){case"admin":case"administrador":return"Administrador";case"teacher":case"formador":return"Formador";case"voluntario":return"Voluntario";case"student":case"estudiante":default:return"Estudiante"}},x=v=>{v.preventDefault();const y=`mailto:soporte@espaciodegemotriasagrada.com?subject=${encodeURIComponent("Consulta de soporte")}&body=${encodeURIComponent(`De: ${p}

${b}`)}`;window.location.href=y,f(!1)};return i.jsxs(D_,{className:u?"w-14 overflow-hidden":"w-60 overflow-hidden",collapsible:"icon",style:{background:"hsl(var(--surface) / 0.9)",backdropFilter:"blur(12px)",boxShadow:"var(--shadow-elev-1)"},children:[i.jsxs($_,{className:"border-b border-sidebar-border p-4",children:[!u&&i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("img",{src:"/Logo-email.png",alt:"Logo",className:"h-8 w-auto object-contain max-w-[160px]"})}),u&&i.jsx("img",{src:"/Logo-email.png",alt:"GS",className:"h-8 w-auto object-contain mx-auto"})]}),i.jsxs(U_,{className:"overflow-hidden scrollbar-hide",children:[i.jsxs(fm,{children:[i.jsx(hm,{children:!u&&"Navegación"}),i.jsx(mm,{children:i.jsx(pm,{children:o.map(v=>i.jsx(Eo,{children:i.jsx(Po,{asChild:!0,children:i.jsxs(Dv,{to:v.url,className:l,children:[i.jsx(v.icon,{className:"h-4 w-4"}),!u&&i.jsx("span",{children:v.title})]})})},v.title))})})]}),i.jsx(ag,{className:"mx-4"}),i.jsxs(fm,{children:[i.jsx(hm,{children:!u&&"Configuración"}),i.jsx(mm,{children:i.jsxs(pm,{children:[i.jsx(Eo,{children:i.jsx(Po,{asChild:!0,children:i.jsxs(Dv,{to:"/cuenta",className:l,children:[i.jsx(Fp,{className:"h-4 w-4"}),!u&&i.jsx("span",{children:"Mi Cuenta"})]})})}),i.jsx(Eo,{children:i.jsxs(Po,{onClick:s,children:[r==="dark"?i.jsx(yj,{className:"h-4 w-4"}):i.jsx(mj,{className:"h-4 w-4"}),!u&&i.jsx("span",{children:r==="dark"?"Modo Claro":"Modo Oscuro"})]})}),(t==null?void 0:t.role)==="student"&&i.jsx(Eo,{children:i.jsxs(Po,{onClick:()=>f(!0),children:[i.jsx(Pi,{className:"h-4 w-4"}),!u&&i.jsx("span",{children:"Soporte"})]})})]})})]})]}),i.jsxs(z_,{className:"border-t border-sidebar-border p-4",children:[!u&&t&&i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx(ss,{className:"h-8 w-8",children:i.jsx(is,{className:"bg-accent text-accent-foreground text-xs",children:c(t.full_name)})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium truncate",children:t.full_name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:w(t.role)})]})]}),i.jsxs(V,{onClick:n,variant:"ghost",size:u?"icon":"sm",className:"w-full justify-start text-muted-foreground hover:text-foreground",children:[i.jsx(cP,{className:"h-4 w-4"}),!u&&i.jsx("span",{className:"ml-2",children:"Salir"})]}),i.jsx(St,{open:d,onOpenChange:f,children:i.jsxs(wt,{children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Enviar consulta"})}),i.jsxs("form",{onSubmit:x,className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Tu email"}),i.jsx(ve,{type:"email",value:p,onChange:v=>h(v.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Mensaje"}),i.jsx(At,{value:b,onChange:v=>g(v.target.value),rows:4,required:!0})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(V,{type:"submit",children:"Enviar"})})]})]})})]})]})}function vt({children:e}){const{user:t,loading:n}=it();return n?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):t?i.jsx(M_,{children:i.jsxs("div",{className:"min-h-screen flex w-full bg-gradient-to-br from-background via-background to-surface/30",children:[i.jsx(sD,{}),i.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[i.jsxs("header",{className:"h-14 border-b border-border bg-surface/80 backdrop-blur-md flex items-center px-4 sticky top-0 z-40 elev-1",children:[i.jsx(F_,{className:"mr-2"}),i.jsx("div",{className:"flex-1"})]}),i.jsx("main",{className:"flex-1 p-6 overflow-auto",children:e})]})]})}):i.jsx(ir,{to:"/",replace:!0})}const K=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:oe("rounded-lg border bg-card text-card-foreground elev-2 hover:elev-3 hover:-translate-y-0.5 transition-all duration-300 will-change-transform",e),...t}));K.displayName="Card";const ye=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:oe("flex flex-col space-y-1.5 p-6",e),...t}));ye.displayName="CardHeader";const we=m.forwardRef(({className:e,...t},n)=>i.jsx("h3",{ref:n,className:oe("text-2xl font-semibold leading-none tracking-tight",e),...t}));we.displayName="CardTitle";const nS=m.forwardRef(({className:e,...t},n)=>i.jsx("p",{ref:n,className:oe("text-sm text-muted-foreground",e),...t}));nS.displayName="CardDescription";const Q=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:oe("p-6 pt-0",e),...t}));Q.displayName="CardContent";const iD=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:oe("flex items-center p-6 pt-0",e),...t}));iD.displayName="CardFooter";const aD=Di("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ee({className:e,variant:t,...n}){return i.jsx("div",{className:oe(aD({variant:t}),e),...n})}function oD(){const{user:e}=it(),[t,n]=m.useState([]),[r,s]=m.useState([]),[a,o]=m.useState(!0);m.useEffect(()=>{e&&l()},[e]);const l=async()=>{if(e)try{o(!0);const{data:u,error:d}=await D.from("enrollments").select(`
          status,
          created_at,
          programs (
            id,
            title,
            summary,
            slug,
            poster_2x3_url,
            wide_11x6_url
          )
        `).eq("user_id",e.id).eq("status","active");if(d)throw d;const f=await Promise.all((u||[]).map(async y=>{const j=y.programs;if(!j)return null;const{data:S,error:_}=await D.from("program_courses").select(`
              courses (
                id,
                title,
                summary,
                slug,
                sort_order
              )
            `).eq("program_id",j.id).order("sort_order");if(_)throw _;const N=(S==null?void 0:S.map(C=>C.courses).filter(Boolean))||[];if(N.length>0){const C=await Promise.all(N.map(async A=>{const{count:R}=await D.from("lessons").select("*",{count:"exact",head:!0}).eq("course_id",A.id),{data:O}=await D.from("lessons").select("id").eq("course_id",A.id),T=(O==null?void 0:O.map(B=>B.id))||[];let z=0;if(T.length>0){const{count:B}=await D.from("lesson_progress").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("completed",!0).in("lesson_id",T);z=B||0}const I=R&&R>0?Math.round(z/R*100):0;return{...A,lessons_count:R||0,progress_percent:I}}));return{...j,enrollment_status:y.status,enrolled_at:y.created_at,courses:C}}return{...j,enrollment_status:y.status,enrolled_at:y.created_at,courses:[]}})),{data:p,error:h}=await D.from("course_enrollments").select(`
          status,
          created_at,
          courses (
            id,
            title,
            summary,
            slug,
            poster_2x3_url,
            wide_11x6_url
          )
        `).eq("user_id",e.id).eq("status","active");if(h)throw h;const b=await Promise.all((p||[]).map(async y=>{const j=y.courses;if(!j)return null;const{count:S}=await D.from("lessons").select("*",{count:"exact",head:!0}).eq("course_id",j.id),{data:_}=await D.from("lessons").select("id").eq("course_id",j.id),N=(_==null?void 0:_.map(O=>O.id))||[];let C=0;if(N.length>0){const{count:O}=await D.from("lesson_progress").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("completed",!0).in("lesson_id",N);C=O||0}const A=S&&S>0?Math.round(C/S*100):0;return{...j,enrollment_status:y.status,enrolled_at:y.created_at,lessons_count:S||0,progress_percent:A,type:"individual"}})),{data:g}=await D.from("enrollments").select("program_id").eq("user_id",e.id).eq("status","active"),w=(g||[]).map(y=>y.program_id).filter(Boolean);let x=new Set;if(w.length>0){const{data:y}=await D.from("program_courses").select("course_id").in("program_id",w);(y||[]).forEach(j=>{j.course_id&&x.add(j.course_id)})}const v=(b||[]).filter(y=>y&&!x.has(y.id));n(f.filter(Boolean)),s(v.filter(Boolean))}catch(u){console.error("Error fetching enrolled data:",u)}finally{o(!1)}},c=u=>new Date(u).toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"});return a?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Mis Programas"}),i.jsx("p",{className:"text-muted-foreground",children:"Programas en los que estás inscrito y tu progreso"})]}),t.length===0&&r.length===0?i.jsx(K,{children:i.jsxs(Q,{className:"p-8 text-center",children:[i.jsx(qe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No tienes programas asignados"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Contacta con tu instructor para que te asigne programas de estudio"}),i.jsx(V,{asChild:!0,children:i.jsx(ar,{to:"/programas",children:"Explorar Programas"})})]})}):i.jsxs("div",{className:"space-y-6",children:[t.length>0&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Programas"}),i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.map(u=>{var h,b,g;const d=((h=u.courses)==null?void 0:h.reduce((w,x)=>w+(x.progress_percent||0),0))/(((b=u.courses)==null?void 0:b.length)||1)||0,f=d>0,p=((g=u.courses)==null?void 0:g.length)||0;return i.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-shadow group",children:i.jsxs(ar,{to:`/programas/${u.slug}`,children:[i.jsxs("div",{className:"aspect-[2/3] relative overflow-hidden rounded-t-lg",children:[u.poster_2x3_url||u.wide_11x6_url?i.jsx("img",{src:u.poster_2x3_url||u.wide_11x6_url,alt:u.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/20 to-accent/10 flex items-center justify-center",children:i.jsx(qe,{className:"h-16 w-16 text-accent"})}),f&&i.jsx("div",{className:"absolute top-3 left-3",children:i.jsxs(Ee,{className:"bg-accent text-white",children:[Math.round(d),"% completo"]})})]}),i.jsxs(Q,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:u.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-3",children:u.summary||"Descubre los secretos de la geometría sagrada"}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(qe,{className:"h-3 w-3"}),i.jsxs("span",{children:[p," cursos"]})]}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(or,{className:"h-3 w-3"}),i.jsxs("span",{children:["Desde ",c(u.enrolled_at)]})]})]}),u.courses&&u.courses.length>0&&i.jsxs("div",{className:"mb-3",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Progreso por curso:"}),i.jsxs("div",{className:"space-y-1",children:[u.courses.slice(0,3).map(w=>i.jsxs("div",{className:"text-xs text-foreground flex items-center justify-between",children:[i.jsx("span",{className:"truncate",children:w.title}),i.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground ml-2",children:[i.jsxs("span",{children:[w.progress_percent||0,"%"]}),i.jsx("div",{className:"w-8 bg-border rounded-full h-1",children:i.jsx("div",{className:"bg-accent h-1 rounded-full",style:{width:`${w.progress_percent||0}%`}})})]})]},w.id)),u.courses.length>3&&i.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",u.courses.length-3," cursos más"]})]})]}),i.jsxs(V,{size:"sm",className:"w-full",children:[i.jsx(ur,{className:"h-4 w-4 mr-1"}),f?"Continuar":"Comenzar"]}),f&&i.jsx("div",{className:"w-full bg-border rounded-full h-1.5 mt-2",children:i.jsx("div",{className:"bg-accent h-1.5 rounded-full transition-all duration-300",style:{width:`${d}%`}})})]})]})},u.id)})})]}),r.length>0&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Cursos Individuales"}),i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(u=>i.jsx(K,{className:"cursor-pointer hover:shadow-lg transition-shadow group",children:i.jsxs(ar,{to:`/ver-curso/${u.slug}`,children:[i.jsxs("div",{className:"aspect-[2/3] relative overflow-hidden rounded-t-lg",children:[u.poster_2x3_url||u.wide_11x6_url?i.jsx("img",{src:u.poster_2x3_url||u.wide_11x6_url,alt:u.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center",children:i.jsx(qe,{className:"h-16 w-16 text-primary"})}),u.progress_percent&&u.progress_percent>0&&i.jsx("div",{className:"absolute top-3 left-3",children:i.jsxs(Ee,{className:"bg-primary text-white",children:[u.progress_percent,"% completo"]})})]}),i.jsxs(Q,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:u.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-3",children:u.summary||"Curso individual"}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(qe,{className:"h-3 w-3"}),i.jsxs("span",{children:[u.lessons_count||0," lecciones"]})]}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(or,{className:"h-3 w-3"}),i.jsxs("span",{children:["Desde ",c(u.enrolled_at)]})]})]}),i.jsxs(V,{size:"sm",className:"w-full",children:[i.jsx(ur,{className:"h-4 w-4 mr-1"}),u.progress_percent&&u.progress_percent>0?"Continuar":"Comenzar"]}),u.progress_percent&&u.progress_percent>0&&i.jsx("div",{className:"w-full bg-border rounded-full h-1.5 mt-2",children:i.jsx("div",{className:"bg-primary h-1.5 rounded-full transition-all duration-300",style:{width:`${u.progress_percent}%`}})})]})]})},u.id))})]})]}),(t.length>0||r.length>0)&&i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Programas"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:t.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Inscritos"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Cursos"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:t.reduce((u,d)=>{var f;return u+(((f=d.courses)==null?void 0:f.length)||0)},0)+r.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Disponibles"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ts,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Progreso"})]}),i.jsxs("p",{className:"text-2xl font-bold mt-2",children:[Math.round(t.reduce((u,d)=>{var p,h;const f=((p=d.courses)==null?void 0:p.reduce((b,g)=>b+(g.progress_percent||0),0))/(((h=d.courses)==null?void 0:h.length)||1)||0;return u+f},0)/(t.length||1)),"%"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Promedio"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(or,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Activos"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:t.filter(u=>u.enrollment_status==="active").length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"En progreso"})]})})]})]})}const lD=()=>{const{user:e,profile:t,loading:n}=it();if(n)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(e&&t)switch(t.role){case"admin":return i.jsx(ir,{to:"/admin",replace:!0});case"formador":return i.jsx(ir,{to:"/profesor",replace:!0});case"student":return i.jsx(ir,{to:"/mi-formacion",replace:!0});default:return i.jsx(ir,{to:"/mi-formacion",replace:!0})}return i.jsx(ir,{to:"/auth",replace:!0})},cD=Di("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),gm=m.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:oe(cD({variant:t}),e),...n}));gm.displayName="Alert";const uD=m.forwardRef(({className:e,...t},n)=>i.jsx("h5",{ref:n,className:oe("mb-1 font-medium leading-none tracking-tight",e),...t}));uD.displayName="AlertTitle";const xm=m.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:oe("text-sm [&_p]:leading-relaxed",e),...t}));xm.displayName="AlertDescription";function dD(){const[e,t]=m.useState(""),[n,r]=m.useState(""),[s,a]=m.useState(!1),[o,l]=m.useState(""),[c,u]=m.useState(!1),{user:d,profile:f,loading:p,signIn:h}=it(),{toast:b}=Ve();if(m.useEffect(()=>{document.documentElement.classList.add("dark")},[]),p)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(d&&f)switch(f.role){case"admin":return i.jsx(ir,{to:"/admin",replace:!0});case"teacher":return i.jsx(ir,{to:"/profesor",replace:!0});case"student":return i.jsx(ir,{to:"/mi-formacion",replace:!0});default:return i.jsx(ir,{to:"/mi-formacion",replace:!0})}const g=async x=>{x.preventDefault(),a(!0),l("");try{const{error:v}=await h(e,n);v&&l("Credenciales incorrectas. Verifica tu email y contraseña.")}catch{l("Ocurrió un error al iniciar sesión.")}finally{a(!1)}},w=async()=>{if(!e){l("Ingresa tu email para recibir el link mágico");return}a(!0),l("");try{const{supabase:x}=await Za(async()=>{const{supabase:y}=await Promise.resolve().then(()=>iL);return{supabase:y}},void 0),{error:v}=await x.auth.signInWithOtp({email:e,options:{emailRedirectTo:`${window.location.origin}/`}});v?l("No se pudo enviar el link mágico. Verifica tu email."):(u(!0),b({title:"Link mágico enviado",description:"Revisa tu email y haz clic en el link para acceder"}))}catch{l("Ocurrió un error al enviar el link mágico.")}finally{a(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:i.jsxs("div",{className:"w-full max-w-[calc(42rem-10px)]",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("img",{src:"/Logo-email.png",alt:"Geometría Sagrada",className:"h-20 w-auto object-contain mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Accede a tu cuenta para continuar"})]}),i.jsxs(K,{children:[i.jsxs(ye,{children:[i.jsx(we,{children:"Iniciar Sesión"}),i.jsx(nS,{children:"Ingresa tus credenciales para acceder a la plataforma"})]}),i.jsx(Q,{children:c?i.jsxs("div",{className:"text-center space-y-4",children:[i.jsxs(gm,{children:[i.jsx(av,{className:"h-4 w-4"}),i.jsx(xm,{children:"Se ha enviado un link mágico a tu email. Revisa tu bandeja de entrada y haz clic en el link para acceder."})]}),i.jsx(V,{variant:"outline",onClick:()=>u(!1),className:"w-full",children:"Volver al login"})]}):i.jsxs("form",{onSubmit:g,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"email",children:"Email"}),i.jsx(ve,{id:"email",type:"email",value:e,onChange:x=>t(x.target.value),placeholder:"tu@email.com",required:!0,disabled:s})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"password",children:"Contraseña"}),i.jsx(ve,{id:"password",type:"password",value:n,onChange:x=>r(x.target.value),placeholder:"Tu contraseña",required:!0,disabled:s})]})]}),o&&i.jsxs(gm,{variant:"destructive",children:[i.jsx(av,{className:"h-4 w-4"}),i.jsx(xm,{children:o})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(V,{type:"submit",disabled:s,className:"w-full btn-modern",children:s?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"mr-2 h-4 w-4 animate-spin"}),"Iniciando sesión..."]}):"Iniciar Sesión"}),i.jsx(V,{type:"button",variant:"outline",onClick:w,disabled:s,className:"w-full btn-modern",children:"Enviar Link Mágico"})]})]})})]}),i.jsxs("div",{className:"mt-4 text-center text-xs text-muted-foreground space-y-1",children:[i.jsx("div",{children:'¿Olvidaste tu contraseña? Haz click en enviar "Link Mágico"'}),i.jsx("div",{children:"¿No tienes cuenta? Contacta a info@espaciodegeometriasagrada.com"})]})]})})}function hg(){const[e,t]=m.useState([]),[n,r]=m.useState(!0),[s,a]=m.useState(null),{user:o}=it();m.useEffect(()=>{l()},[o]);const l=async()=>{var c;try{r(!0),a(null);const{data:u}=await D.from("profiles").select("role").eq("id",(o==null?void 0:o.id)||"").single(),d=((c=u==null?void 0:u.role)==null?void 0:c.toString())||"";if(d==="teacher"||d==="formador"||d==="admin"){const{data:b,error:g}=await D.from("programs").select(`
            id,
            title,
            summary,
            slug,
            poster_2x3_url,
            wide_11x6_url,
            published_at,
            program_courses (
              sort_order,
              courses (
                id,
                title,
                summary,
                slug,
                sort_order,
                published_at
              )
            )
          `).order("sort_order");if(g)throw g;const w=(b||[]).map(x=>({...x,courses:(x.program_courses||[]).map(v=>v.courses).filter(Boolean)}));t(w);return}if(o){const{data:b,error:g}=await D.from("enrollments").select("program_id").eq("user_id",o.id).eq("status","active");if(g)throw g;const w=(b==null?void 0:b.map(S=>S.program_id))||[];if(w.length===0){t([]);return}const{data:x,error:v}=await D.from("programs").select(`
            id,
            title,
            summary,
            slug,
            poster_2x3_url,
            wide_11x6_url,
            published_at,
            program_courses (
              sort_order,
              courses (
                id,
                title,
                summary,
                slug,
                sort_order,
                published_at
              )
            )
          `).in("id",w).order("sort_order");if(v)throw v;const y=(x||[]).map(S=>({...S,courses:(S.program_courses||[]).map(_=>_.courses).filter(Boolean)})),j=await Promise.all(y.map(async S=>{var _;if((_=S.courses)!=null&&_.length){const N=await Promise.all(S.courses.map(async C=>{const{count:A}=await D.from("lessons").select("*",{count:"exact",head:!0}).eq("course_id",C.id),{data:R}=await D.from("lessons").select("id").eq("course_id",C.id),O=(R==null?void 0:R.map(I=>I.id))||[];let T=0;if(O.length>0){const{count:I}=await D.from("lesson_progress").select("*",{count:"exact",head:!0}).eq("user_id",o.id).eq("completed",!0).in("lesson_id",O);T=I||0}const z=A&&A>0?Math.round(T/A*100):0;return{...C,lessons_count:A||0,progress_percent:z}}));return{...S,courses:N}}return S}));t(j);return}const{data:p,error:h}=await D.from("programs").select(`
          id,
          title,
          summary,
          slug,
          poster_2x3_url,
          wide_11x6_url,
          published_at
        `).not("published_at","is",null).order("sort_order");if(h)throw h;t(p||[])}catch(u){console.error("Error fetching programs:",u),a(u instanceof Error?u.message:"Error desconocido")}finally{r(!1)}};return{programs:e,loading:n,error:s,refetch:l}}function rS(){const[e,t]=m.useState({total_programs:0,active_programs:0,completed_lessons:0,total_study_time:0,certificates:0}),[n,r]=m.useState(!0),[s,a]=m.useState(null),{user:o}=it();m.useEffect(()=>{o&&l()},[o]);const l=async()=>{var c,u,d;if(o)try{r(!0),a(null);const{data:f,error:p}=await D.from("lesson_progress").select(`
          completed,
          watched_seconds,
          lesson:lessons (
            id,
            title,
            duration_minutes,
            lesson_courses (
              courses (
                id,
                title,
                program_courses (
                  programs (
                    id,
                    title
                  )
                )
              )
            )
          )
        `).eq("user_id",o.id);if(p)throw p;const h=(f==null?void 0:f.filter(y=>y.completed))||[],b=(f==null?void 0:f.reduce((y,j)=>y+Math.floor((j.watched_seconds||0)/60),0))||0,g=new Set,w=new Set;f==null||f.forEach(y=>{var _,N,C,A,R;const j=(C=(N=(_=y.lesson)==null?void 0:_.lesson_courses)==null?void 0:N[0])==null?void 0:C.courses,S=(R=(A=j==null?void 0:j.program_courses)==null?void 0:A[0])==null?void 0:R.programs;S&&(g.add(S.id),(y.completed||y.watched_seconds&&y.watched_seconds>0)&&w.add(S.id))});const x=f==null?void 0:f.find(y=>!y.completed&&y.watched_seconds&&y.watched_seconds>0);let v;if(x&&x.lesson){const y=Math.floor((x.watched_seconds||0)/60),j=x.lesson.duration_minutes||0,S=j>0?Math.round(y/j*100):0,_=(d=(u=(c=x.lesson)==null?void 0:c.lesson_courses)==null?void 0:u[0])==null?void 0:d.courses;v={id:x.lesson.id,title:x.lesson.title,course_title:(_==null?void 0:_.title)||"",progress_percent:S,remaining_minutes:Math.max(0,j-y)}}t({total_programs:g.size,active_programs:w.size,completed_lessons:h.length,total_study_time:b,certificates:0,current_lesson:v})}catch(f){console.error("Error fetching user stats:",f),a(f instanceof Error?f.message:"Error desconocido")}finally{r(!1)}};return{stats:e,loading:n,error:s,refetch:l}}function fD(){const{programs:e,loading:t}=hg(),{stats:n,loading:r}=rS(),{profile:s}=it(),[a,o]=m.useState([]),[l,c]=m.useState([]);m.useEffect(()=>{(async()=>{if(s)try{const{data:f}=await D.from("enrollments").select("program_id").eq("user_id",s.id).eq("status","active"),p=(f||[]).map(x=>x.program_id),{data:h}=await D.from("course_enrollments").select("course_id").eq("user_id",s.id).eq("status","active"),b=(h||[]).map(x=>x.course_id);let g=null,w=null;try{const{data:x,error:v}=await D.from("events").select("*").gte("start_at",new Date().toISOString()).or(["target_scope.eq.campus",p.length?`and(target_scope.eq.program,program_id.in.(${p.join(",")}))`:"",b.length?`and(target_scope.eq.course,course_id.in.(${b.join(",")}))`:""].filter(Boolean).join(",")).order("start_at",{ascending:!0}).limit(5);g=x,w=v}catch(x){w=x}if(w){const{data:x}=await D.from("events").select("*").gte("start_at",new Date().toISOString()).order("start_at",{ascending:!0}).limit(5);o(x||[])}else o(g||[])}catch(f){console.error("Error fetching events:",f)}})()},[s]),m.useEffect(()=>{(async()=>{if(!(s!=null&&s.id)){c([]);return}try{const{data:f}=await D.from("enrollments").select("program_id").eq("user_id",s.id).eq("status","active"),p=(f||[]).map(j=>j.program_id);let h=[];if(p.length>0){const{data:j}=await D.from("program_courses").select("courses (id, title, summary, slug, poster_2x3_url, wide_11x6_url)").in("program_id",p).order("program_id");h=j||[]}const b=h.map(j=>j.courses).filter(Boolean),{data:g}=await D.from("enrollments").select("program_id").eq("user_id",s.id).eq("status","active"),w=(g||[]).map(j=>j.program_id).filter(Boolean);let x=new Set;if(w.length>0){const{data:j}=await D.from("program_courses").select("course_id").in("program_id",w);(j||[]).forEach(S=>{S.course_id&&x.add(S.course_id)})}const{data:v}=await D.from("course_enrollments").select("courses (id, title, summary, slug, poster_2x3_url, wide_11x6_url)").eq("user_id",s.id).eq("status","active"),y=(v||[]).map(j=>j.courses).filter(Boolean).filter(j=>!x.has(j.id));c(y)}catch(f){console.error("Error fetching my courses:",f),c([])}})()},[s==null?void 0:s.id]);const u=d=>new Date(d).toLocaleDateString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"});return t||r?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold text-foreground",children:["¡Bienvenido, ",(s==null?void 0:s.full_name)||(s==null?void 0:s.email)||"Estudiante","!"]}),i.jsx("p",{className:"text-muted-foreground",children:"Continúa tu viaje en la geometría sagrada"})]}),n.current_lesson&&i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-5 w-5 text-accent"}),"Continuar Aprendiendo"]})}),i.jsx(Q,{children:i.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg border bg-surface/50",children:[i.jsx("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-accent to-accent/80 flex items-center justify-center",children:i.jsx(ur,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-foreground",children:n.current_lesson.course_title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:n.current_lesson.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(ts,{className:"h-3 w-3 text-muted-foreground"}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.current_lesson.remaining_minutes," min restantes"]})]}),i.jsx("div",{className:"w-full bg-border rounded-full h-1.5 mt-2",children:i.jsx("div",{className:"bg-accent h-1.5 rounded-full",style:{width:`${n.current_lesson.progress_percent}%`}})})]}),i.jsx(V,{asChild:!0,className:"btn-modern",children:i.jsx(ar,{to:`/lecciones/${n.current_lesson.id}`,children:"Continuar"})})]})})]}),a.length>0&&i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(or,{className:"h-5 w-5 text-accent"}),"Próximos Eventos"]})}),i.jsx(Q,{className:"space-y-3",children:a.map(d=>{const f=d.description?d.description.match(/https?:\/\/[^\s]+/i):null,p=f?f[0]:null,h=d.meeting_url||p;return i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-lg bg-accent/20 flex items-center justify-center",children:i.jsx(or,{className:"h-4 w-4 text-accent"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-sm",children:d.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:u(d.start_at)})]})]}),h&&i.jsxs(V,{size:"sm",onClick:()=>window.open(h,"_blank"),className:"gap-1 btn-modern",children:["Abrir",i.jsx(hj,{className:"h-3 w-3"})]})]},d.id)})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Mis Programas"}),i.jsx(V,{variant:"outline",asChild:!0,children:i.jsx(ar,{to:"/mis-programas",children:"Ver todos"})})]}),i.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.slice(0,6).map(d=>{var h,b;const f=((h=d.courses)==null?void 0:h.reduce((g,w)=>g+(w.progress_percent||0),0))/(((b=d.courses)==null?void 0:b.length)||1)||0,p=f>0;return i.jsx(K,{className:"cursor-pointer hover:elev-3 hover:-translate-y-1 transition-all duration-300 glow-hover",children:i.jsxs(ar,{to:`/programas/${d.slug}`,children:[i.jsx("div",{className:"aspect-[2/3] bg-gradient-to-br from-accent/20 to-accent/10 rounded-t-lg flex items-center justify-center",children:d.poster_2x3_url?i.jsx("img",{src:d.poster_2x3_url,alt:d.title,className:"w-full h-full object-cover rounded-t-lg",loading:"lazy"}):i.jsx(qe,{className:"h-12 w-12 text-accent"})}),i.jsxs(Q,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:d.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:d.summary||"Explora los misterios de la geometría sagrada"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Ee,{variant:p?"secondary":"outline",children:p?"En progreso":"No iniciado"}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(f),"% completo"]})]}),p&&i.jsx("div",{className:"w-full bg-border rounded-full h-1.5 mt-2",children:i.jsx("div",{className:"bg-accent h-1.5 rounded-full",style:{width:`${f}%`}})})]})]})},d.id)})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Mis Cursos"}),i.jsx(V,{variant:"outline",asChild:!0,children:i.jsx(ar,{to:"/cursos",children:"Ver todos"})})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[l.slice(0,6).map(d=>i.jsx(K,{className:"cursor-pointer hover:elev-3 hover:-translate-y-1 transition-all duration-300 glow-hover",children:i.jsxs(ar,{to:`/ver-curso/${d.slug}`,children:[i.jsx("div",{className:"aspect-[2/3] relative overflow-hidden rounded-t-lg",children:d.poster_2x3_url||d.wide_11x6_url?i.jsx("img",{src:d.poster_2x3_url||d.wide_11x6_url,alt:d.title,className:"w-full h-full object-cover",loading:"lazy"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/20 to-accent/10 flex items-center justify-center",children:i.jsx(qe,{className:"h-12 w-12 text-accent"})})}),i.jsxs(Q,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:d.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:d.summary||"Curso"})]})]})},d.id)),l.length===0&&i.jsx("div",{className:"text-sm text-muted-foreground",children:"Aún no tienes cursos asignados."})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Programas"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.active_programs}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"En progreso"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Lecciones"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.completed_lessons}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Completadas"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ts,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Tiempo"})]}),i.jsxs("p",{className:"text-2xl font-bold mt-2",children:[Math.floor(n.total_study_time/60),"h ",n.total_study_time%60,"m"]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Total estudiado"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ei,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Certificados"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.certificates}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Obtenidos"})]})})]})]})}var hD=m.createContext(void 0);function wd(e){const t=m.useContext(hD);return e||t||"ltr"}var If="rovingFocusGroup.onEntryFocus",mD={bubbles:!1,cancelable:!0},Ll="RovingFocusGroup",[vm,sS,pD]=Ip(Ll),[gD,bd]=yn(Ll,[pD]),[xD,vD]=gD(Ll),iS=m.forwardRef((e,t)=>i.jsx(vm.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(vm.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(yD,{...e,ref:t})})}));iS.displayName=Ll;var yD=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,p=m.useRef(null),h=Me(t,p),b=wd(a),[g,w]=Or({prop:o,defaultProp:l??null,onChange:c,caller:Ll}),[x,v]=m.useState(!1),y=An(u),j=sS(n),S=m.useRef(!1),[_,N]=m.useState(0);return m.useEffect(()=>{const C=p.current;if(C)return C.addEventListener(If,y),()=>C.removeEventListener(If,y)},[y]),i.jsx(xD,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:g,onItemFocus:m.useCallback(C=>w(C),[w]),onItemShiftTab:m.useCallback(()=>v(!0),[]),onFocusableItemAdd:m.useCallback(()=>N(C=>C+1),[]),onFocusableItemRemove:m.useCallback(()=>N(C=>C-1),[]),children:i.jsx(xe.div,{tabIndex:x||_===0?-1:0,"data-orientation":r,...f,ref:h,style:{outline:"none",...e.style},onMouseDown:pe(e.onMouseDown,()=>{S.current=!0}),onFocus:pe(e.onFocus,C=>{const A=!S.current;if(C.target===C.currentTarget&&A&&!x){const R=new CustomEvent(If,mD);if(C.currentTarget.dispatchEvent(R),!R.defaultPrevented){const O=j().filter($=>$.focusable),T=O.find($=>$.active),z=O.find($=>$.id===g),B=[T,z,...O].filter(Boolean).map($=>$.ref.current);lS(B,d)}}S.current=!1}),onBlur:pe(e.onBlur,()=>v(!1))})})}),aS="RovingFocusGroupItem",oS=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:o,...l}=e,c=Yr(),u=a||c,d=vD(aS,n),f=d.currentTabStopId===u,p=sS(n),{onFocusableItemAdd:h,onFocusableItemRemove:b,currentTabStopId:g}=d;return m.useEffect(()=>{if(r)return h(),()=>b()},[r,h,b]),i.jsx(vm.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:i.jsx(xe.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:pe(e.onMouseDown,w=>{r?d.onItemFocus(u):w.preventDefault()}),onFocus:pe(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:pe(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=jD(w,d.orientation,d.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let y=p().filter(j=>j.focusable).map(j=>j.ref.current);if(x==="last")y.reverse();else if(x==="prev"||x==="next"){x==="prev"&&y.reverse();const j=y.indexOf(w.currentTarget);y=d.loop?_D(y,j+1):y.slice(j+1)}setTimeout(()=>lS(y))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:g!=null}):o})})});oS.displayName=aS;var wD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function bD(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function jD(e,t,n){const r=bD(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return wD[r]}function lS(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function _D(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var cS=iS,uS=oS,jd="Tabs",[SD,MB]=yn(jd,[bd]),dS=bd(),[ND,mg]=SD(jd),fS=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=wd(l),[f,p]=Or({prop:r,onChange:s,defaultProp:a??"",caller:jd});return i.jsx(ND,{scope:n,baseId:Yr(),value:f,onValueChange:p,orientation:o,dir:d,activationMode:c,children:i.jsx(xe.div,{dir:d,"data-orientation":o,...u,ref:t})})});fS.displayName=jd;var hS="TabsList",mS=m.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,a=mg(hS,n),o=dS(n);return i.jsx(cS,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(xe.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});mS.displayName=hS;var pS="TabsTrigger",gS=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=e,o=mg(pS,n),l=dS(n),c=yS(o.baseId,r),u=wS(o.baseId,r),d=r===o.value;return i.jsx(uS,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(xe.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:t,onMouseDown:pe(e.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:pe(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:pe(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!s&&f&&o.onValueChange(r)})})})});gS.displayName=pS;var xS="TabsContent",vS=m.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=e,l=mg(xS,n),c=yS(l.baseId,r),u=wS(l.baseId,r),d=r===l.value,f=m.useRef(d);return m.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),i.jsx(os,{present:s||d,children:({present:p})=>i.jsx(xe.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:p&&a})})});vS.displayName=xS;function yS(e,t){return`${e}-trigger-${t}`}function wS(e,t){return`${e}-content-${t}`}var kD=fS,bS=mS,jS=gS,_S=vS;const CD=kD,SS=m.forwardRef(({className:e,...t},n)=>i.jsx(bS,{ref:n,className:oe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));SS.displayName=bS.displayName;const ym=m.forwardRef(({className:e,...t},n)=>i.jsx(jS,{ref:n,className:oe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));ym.displayName=jS.displayName;const wm=m.forwardRef(({className:e,...t},n)=>i.jsx(_S,{ref:n,className:oe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));wm.displayName=_S.displayName;const ED="https://epqalebkqmkddlfomnyf.functions.supabase.co/email-dispatcher";async function pg(e){const t=await fetch(ED,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)try{const n=await t.json();throw new Error((n==null?void 0:n.error)||"send_error")}catch{throw new Error("send_error")}return{success:!0}}function gg({title:e,body:t,ctaLabel:n,ctaUrl:r,logoUrl:s}){return`
  <div style="font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background:#0b0b0b; color:#e5e5e5; padding:24px;">
    <div style="max-width:640px;margin:0 auto;background:#111213;border:1px solid #232323;border-radius:12px;overflow:hidden;">
      <div style="padding:20px 24px;border-bottom:1px solid #232323;display:flex;align-items:center;gap:12px;">
        ${s?`<img src="${s}" alt="Logo" style="height:28px;width:28px;border-radius:8px;object-fit:cover;" />`:""}
        <h1 style="margin:0;font-size:18px;">${e}</h1>
      </div>
      <div style="padding:24px;line-height:1.6;">
        ${t}
        ${n&&r?`
        <div style="margin-top:20px;">
          <a href="${r}" style="display:inline-block;padding:10px 14px;border-radius:8px;background:#1f2937;color:white;text-decoration:none;">${n}</a>
        </div>`:""}
      </div>
      <div style="padding:16px 24px;border-top:1px solid #232323;font-size:12px;color:#9ca3af;">
        Enviado por el Campus · No responder a este correo.
      </div>
    </div>
  </div>`}async function NS(e){const t=`Felicitaciones, completaste el modulo ${e.modulo}`,n=`
    <p>¡Gran trabajo! 🎉</p>
    <p>Lo que sigue: ${e.proximo||"Continuá con el siguiente módulo cuando quieras."}</p>
  `,r=typeof window<"u"?`${window.location.origin}/Logo-email.png`:void 0,s=gg({title:t,body:n,ctaLabel:"Ver siguiente módulo",ctaUrl:e.ctaUrl,logoUrl:r});return pg({to:e.to,subject:t,html:s})}async function PD(e){const t=`Increíble, ${e.nombre||""}. Finalizaste el curso ${e.curso}`.trim(),n=`
    <p>¡Felicitaciones por completar el curso!</p>
    <p>Descarga tu certificado personalizado.</p>
  `,r=typeof window<"u"?`${window.location.origin}/Logo-email.png`:void 0,s=gg({title:t,body:n,ctaLabel:"Descargar certificado",ctaUrl:e.ctaUrl,logoUrl:r});return pg({to:e.to,subject:t,html:s})}async function TD(e){const t=`Ya completaste ${e.curso}`,n=`
    <p>Te recomendamos continuar con <strong>${e.siguiente_programa}</strong>.</p>
  `,r=typeof window<"u"?`${window.location.origin}/Logo-email.png`:void 0,s=gg({title:t,body:n,ctaLabel:"Ver siguiente programa",ctaUrl:e.ctaUrl,logoUrl:r});return pg({to:e.to,subject:t,html:s})}function RD(){const{profile:e}=it(),{toast:t}=Ve(),[n,r]=m.useState([]),[s,a]=m.useState([]),[o,l]=m.useState([]),[c,u]=m.useState(!0),[d,f]=m.useState(null),[p,h]=m.useState(""),[b,g]=m.useState(""),[w,x]=m.useState(!1);m.useEffect(()=>{((e==null?void 0:e.role)==="formador"||(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="profesor"||(e==null?void 0:e.role)==="teacher")&&v()},[e]);const v=async()=>{try{u(!0);const{data:_,error:N}=await D.from("assignments").select(`
          *,
          lesson:lessons(
            title,
            course:courses(title)
          )
        `).order("updated_at",{ascending:!1}).order("created_at",{ascending:!1}).limit(200);if(N)throw N;const C=await Promise.all((_||[]).map(async L=>{const[{data:M},E]=await Promise.all([D.from("profiles").select("full_name").eq("id",L.user_id).single(),L.lesson?Promise.resolve({data:L.lesson}):D.from("lessons").select("title, course:courses(title)").eq("id",L.lesson_id).single()]);return{...L,lesson:(E==null?void 0:E.data)||L.lesson,user_profile:{full_name:(M==null?void 0:M.full_name)||"Usuario desconocido"}}}));r(C);const{data:A,error:R}=await D.from("programs").select(`
          id,
          title,
          courses(id)
        `);if(R)throw R;const O=(A==null?void 0:A.map(async L=>{var E;const{count:M}=await D.from("enrollments").select("*",{count:"exact",head:!0}).eq("program_id",L.id);return{program_id:L.id,program_title:L.title,enrolled_count:M||0,courses_count:((E=L.courses)==null?void 0:E.length)||0}}))||[],T=await Promise.all(O);a(T);const{data:z,error:I}=await D.from("courses").select(`
          id,
          title,
          program_id,
          program:programs(title),
          lessons(id)
        `);if(I)throw I;const B=(z==null?void 0:z.map(async L=>{var E,k;const{count:M}=await D.from("enrollments").select("*",{count:"exact",head:!0}).eq("program_id",L.program_id);return{course_id:L.id,course_title:L.title,program_title:((E=L.program)==null?void 0:E.title)||"Sin programa",enrolled_count:M||0,lessons_count:((k=L.lessons)==null?void 0:k.length)||0}}))||[],$=await Promise.all(B);l($)}catch(_){console.error("Error fetching data:",_),t({title:"Error",description:"No se pudieron cargar los datos",variant:"destructive"})}finally{u(!1)}},y=async(_,N)=>{if(!p.trim()&&N==="rejected"){t({title:"Error",description:"El feedback es requerido para rechazar una entrega",variant:"destructive"});return}const C=b!==""?parseInt(b):null;if(N==="approved"&&C!==null&&C<0){t({title:"Error",description:"La calificación debe ser un número positivo",variant:"destructive"});return}x(!0);try{const A=n.find(O=>O.id===_);if(!A)return;const{error:R}=await D.from("assignments").update({status:N,grade:C,feedback:p.trim(),reviewed_by:e==null?void 0:e.id,reviewed_at:new Date().toISOString()}).eq("id",_);if(R)throw R;if(N==="approved"){const{data:O}=await D.from("profiles").select("email, full_name").eq("id",A.user_id).single();if(O!=null&&O.email)try{await NS({to:O.email,modulo:A.lesson.title,proximo:void 0,ctaUrl:`${window.location.origin}/curso/${A.lesson_id}`})}catch{}}t({title:"Éxito",description:`Entrega ${N==="approved"?"aprobada":"rechazada"} y notificación enviada`}),f(null),h(""),g(""),v()}catch(A){console.error("Error processing assignment:",A),t({title:"Error",description:"No se pudo procesar la entrega",variant:"destructive"})}finally{x(!1)}},j=_=>new Date(_).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});if((e==null?void 0:e.role)!=="formador"&&(e==null?void 0:e.role)!=="admin"&&(e==null?void 0:e.role)!=="profesor"&&(e==null?void 0:e.role)!=="teacher")return i.jsxs("div",{className:"text-center py-12",children:[i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Acceso Denegado"}),i.jsx("p",{className:"text-muted-foreground",children:"No tienes permisos para acceder a esta sección."})]});if(c)return i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})});const S=n;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard del Profesor"}),i.jsx("p",{className:"text-muted-foreground",children:"Gestiona entregas y supervisa el progreso de los estudiantes"})]}),i.jsxs(CD,{defaultValue:"assignments",className:"space-y-6",children:[i.jsxs(SS,{children:[i.jsxs(ym,{value:"assignments",children:["Entregas (",S.length,")"]}),i.jsx(ym,{value:"stats",children:"Estadísticas"})]}),i.jsx(wm,{value:"assignments",className:"space-y-6",children:S.length===0?i.jsx(K,{children:i.jsxs(Q,{className:"p-12 text-center",children:[i.jsx(Lr,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No hay entregas pendientes"}),i.jsx("p",{className:"text-muted-foreground",children:"Todas las entregas han sido revisadas"})]})}):i.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Entregas por Revisar"}),S.map(_=>{var N,C,A;return i.jsxs(K,{className:"transition-all hover:shadow-md",children:[i.jsx(ye,{className:"pb-2",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx(we,{className:"text-lg",children:((N=_.lesson)==null?void 0:N.title)||"Lección"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:((A=(C=_.lesson)==null?void 0:C.course)==null?void 0:A.title)||"Curso"})]}),i.jsx(Ee,{variant:"secondary",children:_.status==="approved"?"Aprobada":_.status==="rejected"?"Rechazada":"Pendiente"})]})}),i.jsxs(Q,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rn,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm",children:_.user_profile.full_name})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ts,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:j(_.created_at)})]})]}),(_.file_url||_.text_answer)&&i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx(Un,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-xs text-muted-foreground",children:_.file_url?"Archivo adjunto":"Respuesta de texto"}),_.file_url&&i.jsxs(V,{size:"sm",variant:"outline",onClick:()=>window.open(_.file_url,"_blank"),children:[i.jsx(lv,{className:"h-3 w-3 mr-1"})," Abrir"]})]}),i.jsx("div",{className:"flex gap-2 mt-3",children:_.status!=="approved"&&i.jsxs(V,{size:"sm",className:"flex-1",onClick:()=>y(_.id,"approved"),disabled:w,children:[i.jsx(Ei,{className:"h-4 w-4 mr-1"})," Aprobar"]})})]})]},_.id)})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Revisar Entrega"}),d?i.jsxs(K,{children:[i.jsxs(ye,{children:[i.jsx(we,{children:d.lesson.title}),i.jsxs("p",{className:"text-muted-foreground",children:["Estudiante: ",d.user_profile.full_name]})]}),i.jsxs(Q,{className:"space-y-4",children:[d.file_url&&i.jsxs("div",{children:[i.jsx(X,{children:"Archivo Adjunto"}),i.jsxs(V,{variant:"outline",className:"w-full mt-2",onClick:()=>window.open(d.file_url,"_blank"),children:[i.jsx(lv,{className:"h-4 w-4 mr-2"}),"Descargar Archivo"]})]}),d.text_answer&&i.jsxs("div",{children:[i.jsx(X,{children:"Respuesta del Estudiante"}),i.jsx("div",{className:"p-3 border rounded-lg mt-2 bg-muted/50",children:i.jsx("p",{className:"text-sm",children:d.text_answer})})]}),i.jsxs("div",{children:[i.jsxs(X,{htmlFor:"grade",children:["Calificación (0-",d.max_grade,")"]}),i.jsx(ve,{id:"grade",type:"number",min:"0",max:d.max_grade,value:b,onChange:_=>g(_.target.value),placeholder:"Ingresa la calificación"})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"feedback",children:"Comentarios"}),i.jsx(At,{id:"feedback",value:p,onChange:_=>h(_.target.value),placeholder:"Escribe tus comentarios sobre la entrega...",className:"mt-2",rows:4})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsxs(V,{onClick:()=>y(d.id,"approved"),disabled:w,className:"flex-1",children:[i.jsx(Ei,{className:"h-4 w-4 mr-2"}),"Aprobar"]}),i.jsxs(V,{variant:"destructive",onClick:()=>y(d.id,"rejected"),disabled:w,className:"flex-1",children:[i.jsx(sP,{className:"h-4 w-4 mr-2"}),"Rechazar"]})]})]})]}):i.jsx(K,{children:i.jsxs(Q,{className:"p-12 text-center",children:[i.jsx(Pi,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Selecciona una entrega"}),i.jsx("p",{className:"text-muted-foreground",children:"Haz clic en una entrega de la lista para revisarla"})]})})]})]})}),i.jsx(wm,{value:"stats",className:"space-y-6",children:i.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-5 w-5"}),"Estadísticas de Programas"]})}),i.jsxs(Q,{className:"space-y-3",children:[s.map(_=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:_.program_title}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[_.courses_count," curso(s)"]})]}),i.jsx("div",{className:"text-right",children:i.jsxs(Ee,{variant:"secondary",children:[i.jsx(rn,{className:"h-3 w-3 mr-1"}),_.enrolled_count," estudiante(s)"]})})]},_.program_id)),s.length===0&&i.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No hay programas disponibles"})]})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(Lr,{className:"h-5 w-5"}),"Estadísticas de Cursos"]})}),i.jsxs(Q,{className:"space-y-3",children:[o.map(_=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:_.course_title}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[_.program_title," • ",_.lessons_count," lección(es)"]})]}),i.jsx("div",{className:"text-right",children:i.jsxs(Ee,{variant:"secondary",children:[i.jsx(rn,{className:"h-3 w-3 mr-1"}),_.enrolled_count," estudiante(s)"]})})]},_.course_id)),o.length===0&&i.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No hay cursos disponibles"})]})]})]})})]})]})}function py(e,[t,n]){return Math.min(n,Math.max(t,e))}function _d(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var AD=[" ","Enter","ArrowUp","ArrowDown"],ID=[" ","Enter"],Ai="Select",[Sd,Nd,OD]=Ip(Ai),[no,DB]=yn(Ai,[OD,ed]),kd=ed(),[LD,ti]=no(Ai),[MD,DD]=no(Ai),kS=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:p,required:h,form:b}=e,g=kd(t),[w,x]=m.useState(null),[v,y]=m.useState(null),[j,S]=m.useState(!1),_=wd(u),[N,C]=Or({prop:r,defaultProp:s??!1,onChange:a,caller:Ai}),[A,R]=Or({prop:o,defaultProp:l,onChange:c,caller:Ai}),O=m.useRef(null),T=w?b||!!w.closest("form"):!0,[z,I]=m.useState(new Set),B=Array.from(z).map($=>$.props.value).join(";");return i.jsx(Jj,{...g,children:i.jsxs(LD,{required:h,scope:t,trigger:w,onTriggerChange:x,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:j,onValueNodeHasChildrenChange:S,contentId:Yr(),value:A,onValueChange:R,open:N,onOpenChange:C,dir:_,triggerPointerDownPosRef:O,disabled:p,children:[i.jsx(Sd.Provider,{scope:t,children:i.jsx(MD,{scope:e.__scopeSelect,onNativeOptionAdd:m.useCallback($=>{I(L=>new Set(L).add($))},[]),onNativeOptionRemove:m.useCallback($=>{I(L=>{const M=new Set(L);return M.delete($),M})},[]),children:n})}),T?i.jsxs(YS,{"aria-hidden":!0,required:h,tabIndex:-1,name:d,autoComplete:f,value:A,onChange:$=>R($.target.value),disabled:p,form:b,children:[A===void 0?i.jsx("option",{value:""}):null,Array.from(z)]},B):null]})})};kS.displayName=Ai;var CS="SelectTrigger",ES=m.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,a=kd(n),o=ti(CS,n),l=o.disabled||r,c=Me(t,o.onTriggerChange),u=Nd(n),d=m.useRef("touch"),[f,p,h]=JS(g=>{const w=u().filter(y=>!y.disabled),x=w.find(y=>y.value===o.value),v=ZS(w,g,x);v!==void 0&&o.onValueChange(v.value)}),b=g=>{l||(o.onOpenChange(!0),h()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return i.jsx(Zj,{asChild:!0,...a,children:i.jsx(xe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":XS(o.value)?"":void 0,...s,ref:c,onClick:pe(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&b(g)}),onPointerDown:pe(s.onPointerDown,g=>{d.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(b(g),g.preventDefault())}),onKeyDown:pe(s.onKeyDown,g=>{const w=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(w&&g.key===" ")&&AD.includes(g.key)&&(b(),g.preventDefault())})})})});ES.displayName=CS;var PS="SelectValue",TS=m.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:o="",...l}=e,c=ti(PS,n),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,f=Me(t,c.onValueNodeChange);return Nt(()=>{u(d)},[u,d]),i.jsx(xe.span,{...l,ref:f,style:{pointerEvents:"none"},children:XS(c.value)?i.jsx(i.Fragment,{children:o}):a})});TS.displayName=PS;var FD="SelectIcon",RS=m.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return i.jsx(xe.span,{"aria-hidden":!0,...s,ref:t,children:r||"▼"})});RS.displayName=FD;var $D="SelectPortal",AS=e=>i.jsx(Hu,{asChild:!0,...e});AS.displayName=$D;var Ii="SelectContent",IS=m.forwardRef((e,t)=>{const n=ti(Ii,e.__scopeSelect),[r,s]=m.useState();if(Nt(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?Mi.createPortal(i.jsx(OS,{scope:e.__scopeSelect,children:i.jsx(Sd.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),a):null}return i.jsx(LS,{...e,ref:t})});IS.displayName=Ii;var Xn=10,[OS,ni]=no(Ii),zD="SelectContentImpl",UD=Da("SelectContent.RemoveScroll"),LS=m.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:h,sticky:b,hideWhenDetached:g,avoidCollisions:w,...x}=e,v=ti(Ii,n),[y,j]=m.useState(null),[S,_]=m.useState(null),N=Me(t,Y=>j(Y)),[C,A]=m.useState(null),[R,O]=m.useState(null),T=Nd(n),[z,I]=m.useState(!1),B=m.useRef(!1);m.useEffect(()=>{if(y)return h_(y)},[y]),s_();const $=m.useCallback(Y=>{const[re,...he]=T().map(ce=>ce.ref.current),[Z]=he.slice(-1),U=document.activeElement;for(const ce of Y)if(ce===U||(ce==null||ce.scrollIntoView({block:"nearest"}),ce===re&&S&&(S.scrollTop=0),ce===Z&&S&&(S.scrollTop=S.scrollHeight),ce==null||ce.focus(),document.activeElement!==U))return},[T,S]),L=m.useCallback(()=>$([C,y]),[$,C,y]);m.useEffect(()=>{z&&L()},[z,L]);const{onOpenChange:M,triggerPointerDownPosRef:E}=v;m.useEffect(()=>{if(y){let Y={x:0,y:0};const re=Z=>{var U,ce;Y={x:Math.abs(Math.round(Z.pageX)-(((U=E.current)==null?void 0:U.x)??0)),y:Math.abs(Math.round(Z.pageY)-(((ce=E.current)==null?void 0:ce.y)??0))}},he=Z=>{Y.x<=10&&Y.y<=10?Z.preventDefault():y.contains(Z.target)||M(!1),document.removeEventListener("pointermove",re),E.current=null};return E.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",he,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",he,{capture:!0})}}},[y,M,E]),m.useEffect(()=>{const Y=()=>M(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[M]);const[k,F]=JS(Y=>{const re=T().filter(U=>!U.disabled),he=re.find(U=>U.ref.current===document.activeElement),Z=ZS(re,Y,he);Z&&setTimeout(()=>Z.ref.current.focus())}),H=m.useCallback((Y,re,he)=>{const Z=!B.current&&!he;(v.value!==void 0&&v.value===re||Z)&&(A(Y),Z&&(B.current=!0))},[v.value]),P=m.useCallback(()=>y==null?void 0:y.focus(),[y]),q=m.useCallback((Y,re,he)=>{const Z=!B.current&&!he;(v.value!==void 0&&v.value===re||Z)&&O(Y)},[v.value]),de=r==="popper"?bm:MS,le=de===bm?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:h,sticky:b,hideWhenDetached:g,avoidCollisions:w}:{};return i.jsx(OS,{scope:n,content:y,viewport:S,onViewportChange:_,itemRefCallback:H,selectedItem:C,onItemLeave:P,itemTextRefCallback:q,focusSelectedItem:L,selectedItemText:R,position:r,isPositioned:z,searchRef:k,children:i.jsx(lg,{as:UD,allowPinchZoom:!0,children:i.jsx(og,{asChild:!0,trapped:v.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:pe(s,Y=>{var re;(re=v.trigger)==null||re.focus({preventScroll:!0}),Y.preventDefault()}),children:i.jsx(Cl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:i.jsx(de,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:Y=>Y.preventDefault(),...x,...le,onPlaced:()=>I(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:pe(x.onKeyDown,Y=>{const re=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!re&&Y.key.length===1&&F(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let Z=T().filter(U=>!U.disabled).map(U=>U.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(Z=Z.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const U=Y.target,ce=Z.indexOf(U);Z=Z.slice(ce+1)}setTimeout(()=>$(Z)),Y.preventDefault()}})})})})})})});LS.displayName=zD;var BD="SelectItemAlignedPosition",MS=m.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,a=ti(Ii,n),o=ni(Ii,n),[l,c]=m.useState(null),[u,d]=m.useState(null),f=Me(t,N=>d(N)),p=Nd(n),h=m.useRef(!1),b=m.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:x,focusSelectedItem:v}=o,y=m.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&g&&w&&x){const N=a.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),A=a.valueNode.getBoundingClientRect(),R=x.getBoundingClientRect();if(a.dir!=="rtl"){const U=R.left-C.left,ce=A.left-U,ge=N.left-ce,ne=N.width+ge,me=Math.max(ne,C.width),He=window.innerWidth-Xn,Re=py(ce,[Xn,Math.max(Xn,He-me)]);l.style.minWidth=ne+"px",l.style.left=Re+"px"}else{const U=C.right-R.right,ce=window.innerWidth-A.right-U,ge=window.innerWidth-N.right-ce,ne=N.width+ge,me=Math.max(ne,C.width),He=window.innerWidth-Xn,Re=py(ce,[Xn,Math.max(Xn,He-me)]);l.style.minWidth=ne+"px",l.style.right=Re+"px"}const O=p(),T=window.innerHeight-Xn*2,z=g.scrollHeight,I=window.getComputedStyle(u),B=parseInt(I.borderTopWidth,10),$=parseInt(I.paddingTop,10),L=parseInt(I.borderBottomWidth,10),M=parseInt(I.paddingBottom,10),E=B+$+z+M+L,k=Math.min(w.offsetHeight*5,E),F=window.getComputedStyle(g),H=parseInt(F.paddingTop,10),P=parseInt(F.paddingBottom,10),q=N.top+N.height/2-Xn,de=T-q,le=w.offsetHeight/2,Y=w.offsetTop+le,re=B+$+Y,he=E-re;if(re<=q){const U=O.length>0&&w===O[O.length-1].ref.current;l.style.bottom="0px";const ce=u.clientHeight-g.offsetTop-g.offsetHeight,ge=Math.max(de,le+(U?P:0)+ce+L),ne=re+ge;l.style.height=ne+"px"}else{const U=O.length>0&&w===O[0].ref.current;l.style.top="0px";const ge=Math.max(q,B+g.offsetTop+(U?H:0)+le)+he;l.style.height=ge+"px",g.scrollTop=re-q+g.offsetTop}l.style.margin=`${Xn}px 0`,l.style.minHeight=k+"px",l.style.maxHeight=T+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[p,a.trigger,a.valueNode,l,u,g,w,x,a.dir,r]);Nt(()=>y(),[y]);const[j,S]=m.useState();Nt(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const _=m.useCallback(N=>{N&&b.current===!0&&(y(),v==null||v(),b.current=!1)},[y,v]);return i.jsx(qD,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:h,onScrollButtonChange:_,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:i.jsx(xe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});MS.displayName=BD;var VD="SelectPopperPosition",bm=m.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Xn,...a}=e,o=kd(n);return i.jsx(e1,{...o,...a,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});bm.displayName=VD;var[qD,xg]=no(Ii,{}),jm="SelectViewport",DS=m.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,a=ni(jm,n),o=xg(jm,n),l=Me(t,a.onViewportChange),c=m.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(Sd.Slot,{scope:n,children:i.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:pe(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const h=Math.abs(c.current-d.scrollTop);if(h>0){const b=window.innerHeight-Xn*2,g=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),x=Math.max(g,w);if(x<b){const v=x+h,y=Math.min(b,v),j=v-y;f.style.height=y+"px",f.style.bottom==="0px"&&(d.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});DS.displayName=jm;var FS="SelectGroup",[WD,HD]=no(FS),GD=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Yr();return i.jsx(WD,{scope:n,id:s,children:i.jsx(xe.div,{role:"group","aria-labelledby":s,...r,ref:t})})});GD.displayName=FS;var $S="SelectLabel",zS=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=HD($S,n);return i.jsx(xe.div,{id:s.id,...r,ref:t})});zS.displayName=$S;var Su="SelectItem",[KD,US]=no(Su),BS=m.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...o}=e,l=ti(Su,n),c=ni(Su,n),u=l.value===r,[d,f]=m.useState(a??""),[p,h]=m.useState(!1),b=Me(t,v=>{var y;return(y=c.itemRefCallback)==null?void 0:y.call(c,v,r,s)}),g=Yr(),w=m.useRef("touch"),x=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(KD,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:m.useCallback(v=>{f(y=>y||((v==null?void 0:v.textContent)??"").trim())},[]),children:i.jsx(Sd.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:i.jsx(xe.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:pe(o.onFocus,()=>h(!0)),onBlur:pe(o.onBlur,()=>h(!1)),onClick:pe(o.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:pe(o.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:pe(o.onPointerDown,v=>{w.current=v.pointerType}),onPointerMove:pe(o.onPointerMove,v=>{var y;w.current=v.pointerType,s?(y=c.onItemLeave)==null||y.call(c):w.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(o.onPointerLeave,v=>{var y;v.currentTarget===document.activeElement&&((y=c.onItemLeave)==null||y.call(c))}),onKeyDown:pe(o.onKeyDown,v=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&v.key===" "||(ID.includes(v.key)&&x(),v.key===" "&&v.preventDefault())})})})})});BS.displayName=Su;var To="SelectItemText",VS=m.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...a}=e,o=ti(To,n),l=ni(To,n),c=US(To,n),u=DD(To,n),[d,f]=m.useState(null),p=Me(t,x=>f(x),c.onItemTextChange,x=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,x,c.value,c.disabled)}),h=d==null?void 0:d.textContent,b=m.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:h},c.value),[c.disabled,c.value,h]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=u;return Nt(()=>(g(b),()=>w(b)),[g,w,b]),i.jsxs(i.Fragment,{children:[i.jsx(xe.span,{id:c.textId,...a,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Mi.createPortal(a.children,o.valueNode):null]})});VS.displayName=To;var qS="SelectItemIndicator",WS=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return US(qS,n).isSelected?i.jsx(xe.span,{"aria-hidden":!0,...r,ref:t}):null});WS.displayName=qS;var _m="SelectScrollUpButton",HS=m.forwardRef((e,t)=>{const n=ni(_m,e.__scopeSelect),r=xg(_m,e.__scopeSelect),[s,a]=m.useState(!1),o=Me(t,r.onScrollButtonChange);return Nt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(KS,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});HS.displayName=_m;var Sm="SelectScrollDownButton",GS=m.forwardRef((e,t)=>{const n=ni(Sm,e.__scopeSelect),r=xg(Sm,e.__scopeSelect),[s,a]=m.useState(!1),o=Me(t,r.onScrollButtonChange);return Nt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(KS,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});GS.displayName=Sm;var KS=m.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,a=ni("SelectScrollButton",n),o=m.useRef(null),l=Nd(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),Nt(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(xe.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:pe(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:pe(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:pe(s.onPointerLeave,()=>{c()})})}),QD="SelectSeparator",QS=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return i.jsx(xe.div,{"aria-hidden":!0,...r,ref:t})});QS.displayName=QD;var Nm="SelectArrow",YD=m.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=kd(n),a=ti(Nm,n),o=ni(Nm,n);return a.open&&o.position==="popper"?i.jsx(t1,{...s,...r,ref:t}):null});YD.displayName=Nm;var XD="SelectBubbleInput",YS=m.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=m.useRef(null),a=Me(r,s),o=_d(t);return m.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),i.jsx(xe.select,{...n,style:{...Ub,...n.style},ref:a,defaultValue:t})});YS.displayName=XD;function XS(e){return e===""||e===void 0}function JS(e){const t=An(e),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function ZS(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=JD(e,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function JD(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var ZD=kS,eN=ES,e3=TS,t3=RS,n3=AS,tN=IS,r3=DS,nN=zS,rN=BS,s3=VS,i3=WS,sN=HS,iN=GS,aN=QS;const ot=ZD,lt=e3,nt=m.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(eN,{ref:r,className:oe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(t3,{asChild:!0,children:i.jsx(fj,{className:"h-4 w-4 opacity-50"})})]}));nt.displayName=eN.displayName;const oN=m.forwardRef(({className:e,...t},n)=>i.jsx(sN,{ref:n,className:oe("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(rP,{className:"h-4 w-4"})}));oN.displayName=sN.displayName;const lN=m.forwardRef(({className:e,...t},n)=>i.jsx(iN,{ref:n,className:oe("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(fj,{className:"h-4 w-4"})}));lN.displayName=iN.displayName;const rt=m.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>i.jsx(n3,{children:i.jsxs(tN,{ref:s,className:oe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(oN,{}),i.jsx(r3,{className:oe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(lN,{})]})}));rt.displayName=tN.displayName;const a3=m.forwardRef(({className:e,...t},n)=>i.jsx(nN,{ref:n,className:oe("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));a3.displayName=nN.displayName;const fe=m.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(rN,{ref:r,className:oe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(i3,{children:i.jsx(dj,{className:"h-4 w-4"})})}),i.jsx(s3,{children:t})]}));fe.displayName=rN.displayName;const o3=m.forwardRef(({className:e,...t},n)=>i.jsx(aN,{ref:n,className:oe("-mx-1 my-1 h-px bg-muted",e),...t}));o3.displayName=aN.displayName;function Ks({label:e,value:t,onChange:n,aspectRatio:r="16/9",disabled:s}){const[a,o]=m.useState(!1),l=m.useRef(null),{toast:c}=Ve(),u=async f=>{var h;const p=(h=f.target.files)==null?void 0:h[0];if(p){if(!p.type.startsWith("image/")){c({title:"Error",description:"Por favor selecciona un archivo de imagen",variant:"destructive"});return}if(p.size>5*1024*1024){c({title:"Error",description:"La imagen debe ser menor a 5MB",variant:"destructive"});return}o(!0);try{const b=p.name.split(".").pop(),w=`images/${`${Date.now()}-${Math.random().toString(36).substr(2,9)}.${b}`}`,{error:x}=await D.storage.from("program-images").upload(w,p);if(x)throw x;const{data:v}=D.storage.from("program-images").getPublicUrl(w);n(v.publicUrl),c({title:"Imagen subida",description:"La imagen se ha subido exitosamente"})}catch(b){c({title:"Error al subir imagen",description:b.message||"No se pudo subir la imagen",variant:"destructive"})}finally{o(!1)}}},d=()=>{n(""),l.current&&(l.current.value="")};return i.jsxs("div",{className:"space-y-2",children:[i.jsx(X,{children:e}),t?i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-border bg-muted",style:{aspectRatio:r},children:[i.jsx("img",{src:t,alt:"Preview",className:"w-full h-full object-cover"}),i.jsx(V,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:d,disabled:s,children:i.jsx(Ga,{className:"h-4 w-4"})})]})}):i.jsx("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center hover:border-accent cursor-pointer transition-colors",style:{aspectRatio:r},onClick:()=>{var f;return(f=l.current)==null?void 0:f.click()},children:i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a?i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"}):i.jsx(wj,{className:"h-8 w-8 text-muted-foreground"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:a?"Subiendo imagen...":"Haz clic para subir una imagen"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, WEBP hasta 5MB"})]})}),i.jsx(ve,{ref:l,type:"file",accept:"image/*",onChange:u,className:"hidden",disabled:s||a})]})}function cN({open:e,onOpenChange:t,onSuccess:n}){const[r,s]=m.useState(""),[a,o]=m.useState(""),[l,c]=m.useState(""),[u,d]=m.useState(""),[f,p]=m.useState(""),[h,b]=m.useState(!1),{toast:g}=Ve(),w=y=>y.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),x=y=>{s(y),c(w(y))},v=async y=>{if(y.preventDefault(),!r.trim()||!l.trim()){g({title:"Error",description:"El título es obligatorio",variant:"destructive"});return}b(!0);try{const{error:j}=await D.from("programs").insert([{title:r.trim(),summary:a.trim()||null,slug:l.trim(),poster_2x3_url:u.trim()||null,wide_11x6_url:f.trim()||null,sort_order:0}]);if(j)throw j;g({title:"Programa creado",description:`El programa "${r}" ha sido creado exitosamente`}),s(""),o(""),c(""),d(""),p(""),t(!1),n()}catch(j){g({title:"Error",description:j.message||"No se pudo crear el programa",variant:"destructive"})}finally{b(!1)}};return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Crear Nuevo Programa"})}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Título del Programa"}),i.jsx(ve,{id:"title",value:r,onChange:y=>x(y.target.value),placeholder:"Ej: Geometría Sagrada Avanzada",disabled:h})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"slug",children:"Slug (URL)"}),i.jsx(ve,{id:"slug",value:l,onChange:y=>c(y.target.value),placeholder:"geometria-sagrada-avanzada",disabled:h})]})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"summary",children:"Resumen"}),i.jsx(At,{id:"summary",value:a,onChange:y=>o(y.target.value),placeholder:"Describe brevemente el programa...",rows:3,disabled:h})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Ks,{label:"Imagen Poster (2x3)",value:u,onChange:d,aspectRatio:"2/3",disabled:h}),i.jsx(Ks,{label:"Imagen Wide (11x6)",value:f,onChange:p,aspectRatio:"11/6",disabled:h})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{type:"submit",disabled:h,className:"flex-1",children:h?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}),"Creando..."]}):"Crear Programa"}),i.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:h,children:"Cancelar"})]})]})]})})}function uN({open:e,onOpenChange:t,onSuccess:n}){const[r,s]=m.useState(""),[a,o]=m.useState(""),[l,c]=m.useState(""),[u,d]=m.useState(""),[f,p]=m.useState(""),[h,b]=m.useState(!1),{toast:g}=Ve(),w=j=>j.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),x=async j=>{const S=j||"curso",{data:_}=await D.from("courses").select("slug").ilike("slug",`${S}%`),N=new Set((_||[]).map(A=>A.slug));if(!N.has(S))return S;let C=2;for(;N.has(`${S}-${C}`);)C++;return`${S}-${C}`},v=j=>{s(j),c(w(j))},y=async j=>{if(j.preventDefault(),!r.trim()){g({title:"Error",description:"Título es obligatorio",variant:"destructive"});return}b(!0);try{const S=w(r.trim()),_=await x(S),{error:N}=await D.from("courses").insert([{title:r.trim(),summary:a.trim()||null,slug:_,poster_2x3_url:u.trim()||null,wide_11x6_url:f.trim()||null,sort_order:0}]);if(N)throw N;g({title:"Curso creado",description:`El curso "${r}" ha sido creado exitosamente`}),s(""),o(""),c(""),d(""),p(""),t(!1),n()}catch(S){g({title:"Error",description:S.message||"No se pudo crear el curso",variant:"destructive"})}finally{b(!1)}};return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-2xl max-h-[85vh] overflow-y-auto",children:[i.jsxs(kt,{children:[i.jsx(Ct,{children:"Crear Nuevo Curso"}),i.jsx(ei,{children:"Completa los campos para crear un curso. Opcionalmente asígnalo a un programa."})]}),i.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Título del Curso"}),i.jsx(ve,{id:"title",value:r,onChange:j=>v(j.target.value),placeholder:"Ej: Introducción a los Patrones",disabled:h})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"summary",children:"Resumen"}),i.jsx(At,{id:"summary",value:a,onChange:j=>o(j.target.value),placeholder:"Describe brevemente el curso...",rows:3,disabled:h})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Ks,{label:"Imagen Poster (2x3)",value:u,onChange:d,aspectRatio:"2/3",disabled:h}),i.jsx(Ks,{label:"Imagen Wide (11x6)",value:f,onChange:p,aspectRatio:"11/6",disabled:h})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{type:"submit",disabled:h,className:"flex-1",children:h?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}),"Creando..."]}):"Crear Curso"}),i.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:h,children:"Cancelar"})]})]})]})})}var vg="Progress",yg=100,[l3,FB]=yn(vg),[c3,u3]=l3(vg),dN=m.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=d3,...o}=e;(s||s===0)&&!gy(s)&&console.error(f3(`${s}`,"Progress"));const l=gy(s)?s:yg;r!==null&&!xy(r,l)&&console.error(h3(`${r}`,"Progress"));const c=xy(r,l)?r:null,u=Nu(c)?a(c,l):void 0;return i.jsx(c3,{scope:n,value:c,max:l,children:i.jsx(xe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Nu(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":mN(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});dN.displayName=vg;var fN="ProgressIndicator",hN=m.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=u3(fN,n);return i.jsx(xe.div,{"data-state":mN(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});hN.displayName=fN;function d3(e,t){return`${Math.round(e/t*100)}%`}function mN(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Nu(e){return typeof e=="number"}function gy(e){return Nu(e)&&!isNaN(e)&&e>0}function xy(e,t){return Nu(e)&&!isNaN(e)&&e<=t&&e>=0}function f3(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${yg}\`.`}function h3(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${yg} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var pN=dN,m3=hN;const km=m.forwardRef(({className:e,value:t,...n},r)=>i.jsx(pN,{ref:r,className:oe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:i.jsx(m3,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));km.displayName=pN.displayName;function gN({open:e,onOpenChange:t,userId:n}){const[r,s]=m.useState(null),[a,o]=m.useState([]),[l,c]=m.useState([]),[u,d]=m.useState(null),[f,p]=m.useState(!0),[h,b]=m.useState(!1),[g,w]=m.useState(!1),[x,v]=m.useState([]),[y,j]=m.useState([]),[S,_]=m.useState(""),[N,C]=m.useState("");m.useEffect(()=>{e&&n&&A()},[e,n]);const A=async()=>{p(!0);try{let L=[],M=[],E=null;try{const{data:re}=await D.rpc("get_users_with_emails").eq("id",n).single();E=re||null}catch{}if(!E){const{data:re}=await D.from("profiles").select("id, full_name, role, created_at").eq("id",n).maybeSingle();re&&(E={...re,email:"—"})}E&&s({id:E.id,full_name:E.full_name,email:E.email||"—",role:E.role,created_at:E.created_at,last_sign_in_at:E.last_sign_in_at||E.last_signin_at||null});const{data:k}=await D.from("enrollments").select(`
          program_id,
          created_at,
          programs!inner (
            id,
            title,
            id
          )
        `).eq("user_id",n).eq("status","active");let F={};const H=new Set;if(k&&k.length>0){const re=k.map(he=>he.program_id).filter(Boolean);if(re.length>0){const{data:he}=await D.from("program_courses").select("program_id, courses (id, title)").in("program_id",re).order("sort_order");(he||[]).forEach(Z=>{const U=Z.courses;U&&(F[Z.program_id]||(F[Z.program_id]=[]),F[Z.program_id].push({id:U.id,title:U.title}),H.add(U.id))})}}const{data:P}=await D.from("course_enrollments").select("course_id, created_at").eq("user_id",n).eq("status","active");if(P&&P.length>0){const re=Array.from(new Set(P.map(Z=>Z.course_id).filter(Boolean)));let he={};if(re.length>0){const{data:Z}=await D.from("courses").select("id, title").in("id",re);(Z||[]).forEach(U=>{he[U.id]={id:U.id,title:U.title}}),re.forEach(U=>H.add(U))}M=(P||[]).map(Z=>{const U=he[Z.course_id];return U?{id:U.id,title:U.title,progress_percent:0,enrolled_at:Z.created_at}:null}).filter(Boolean)}else M=[];const q=Array.from(H);let de={},le={};if(q.length>0){const{data:re}=await D.from("lessons").select("id, course_id").in("course_id",q);(re||[]).forEach(U=>{le[U.id]=U.course_id,de[U.course_id]=(de[U.course_id]||0)+1});const he=Object.keys(le);let Z={};if(he.length>0){const{data:U}=await D.from("lesson_progress").select("lesson_id, completed").eq("user_id",n).in("lesson_id",he);(U||[]).forEach(ge=>{if(ge.completed){const ne=le[ge.lesson_id];ne&&(Z[ne]=(Z[ne]||0)+1)}});const ce={};if(Object.keys(de).forEach(ge=>{const ne=de[ge]||0,me=Z[ge]||0;ce[ge]=ne>0?Math.round(me/ne*100):0}),k){const ge=k.map(ne=>{const me=ne.programs,He=F[ne.program_id]||[],Re=He.length;let ct=0,Ge=0;He.forEach(bt=>{const Ue=ce[bt.id]||0;ct+=Ue,Ue===100&&(Ge+=1)});const xt=Re>0?Math.round(ct/Re):0;return{id:me.id,title:me.title,progress_percent:xt,enrolled_at:ne.created_at,courses_count:Re,completed_courses:Ge}});L=ge,o(ge)}M=M.map(ge=>({...ge,progress_percent:ce[ge.id]||0})),c(M)}else{if(k){const U=k.map(ce=>({id:ce.programs.id,title:ce.programs.title,progress_percent:0,enrolled_at:ce.created_at,courses_count:(F[ce.program_id]||[]).length,completed_courses:0}));L=U,o(U)}c(M)}}else L=[],o([]),c([]);const{data:Y}=await D.from("lesson_progress").select(`
          completed,
          watched_seconds,
          lessons!inner (
            title,
            duration_minutes,
            courses!inner (title)
          )
        `).eq("user_id",n);if(Y){const re=Y.filter(U=>U.completed).length,he=Y.reduce((U,ce)=>U+(ce.watched_seconds||0),0),Z=Y.find(U=>!U.completed);d({total_programs:L.length,active_programs:L.filter(U=>U.progress_percent<100).length,completed_lessons:re,total_study_time:Math.round(he/60),total_individual_courses:M.length,current_lesson:Z?{title:Z.lessons.title,course_title:Z.lessons.courses.title}:void 0})}}catch(L){console.error("Error fetching user data:",L)}finally{p(!1)}},R=async()=>{if(n){w(!0);try{const L={},{data:M}=await D.from("enrollments").select("program_id, programs!inner(id)").eq("user_id",n).eq("status","active"),E=(M||[]).map(H=>H.program_id).filter(Boolean);if(E.length>0){const{data:H}=await D.from("program_courses").select("courses (id, title), program_id").in("program_id",E);(H||[]).forEach(P=>{P.courses&&(L[P.courses.id]={id:P.courses.id,title:P.courses.title})})}const{data:k}=await D.from("course_enrollments").select("courses (id, title)").eq("user_id",n).eq("status","active");(k||[]).forEach(H=>{H.courses&&(L[H.courses.id]={id:H.courses.id,title:H.courses.title})});const F=Object.values(L).sort((H,P)=>H.title.localeCompare(P.title));v(F),j([]),_(""),C("")}finally{w(!1)}}},O=async L=>{if(_(L),C(""),!L){j([]);return}const{data:M}=await D.from("lessons").select("id, title").eq("course_id",L).order("sort_order");j((M||[]).map(E=>({id:E.id,title:E.title})))},T=async()=>{if(!(!n||!N)){w(!0);try{await fetch("https://epqalebkqmkddlfomnyf.functions.supabase.co/assign-progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n,action:"mark_lesson",lesson_id:N})}),await A(),b(!1)}finally{w(!1)}}},z=async()=>{if(!(!n||!S)){w(!0);try{await fetch("https://epqalebkqmkddlfomnyf.functions.supabase.co/assign-progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n,action:"mark_course",course_id:S})}),await A(),b(!1)}finally{w(!1)}}},I=async()=>{if(!(!n||!S)){w(!0);try{await fetch("https://epqalebkqmkddlfomnyf.functions.supabase.co/assign-progress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:n,action:"reset_course",course_id:S})}),await A()}finally{w(!1)}}},B=L=>new Date(L).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"}),$=L=>{switch(L){case"formador":return"Formador";case"voluntario":return"Voluntario";case"admin":return"Administrador";default:return"Estudiante"}};return f?i.jsx(St,{open:e,onOpenChange:t,children:i.jsx(wt,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})})})}):i.jsxs(i.Fragment,{children:[i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[i.jsxs(kt,{children:[i.jsxs(Ct,{className:"flex items-center gap-2",children:[i.jsx(Fp,{className:"h-5 w-5"}),"Perfil de Usuario"]}),i.jsx(ei,{children:"Información completa del estudiante seleccion ado."})]}),i.jsx("div",{className:"flex justify-end mb-2",children:i.jsx(V,{variant:"outline",size:"sm",onClick:()=>{b(!0),R()},children:"Asignar progreso"})}),r&&i.jsxs("div",{className:"space-y-6",children:[i.jsx(K,{children:i.jsx(Q,{className:"p-6",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ss,{className:"h-16 w-16",children:i.jsx(is,{className:"bg-accent text-accent-foreground text-lg",children:r.full_name.split(" ").map(L=>L[0]).join("").toUpperCase()})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-xl font-semibold text-foreground",children:r.full_name}),i.jsx("p",{className:"text-muted-foreground",children:r.email}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx(Ee,{variant:"secondary",children:$(r.role)}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:["Miembro desde ",B(r.created_at)]}),r.last_sign_in_at&&i.jsxs("span",{className:"text-sm text-muted-foreground",children:["• Último acceso ",B(r.last_sign_in_at)]})]})]})]})})}),u&&i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-4 w-4 text-blue-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Programas"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:u.total_programs}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Inscritos"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ei,{className:"h-4 w-4 text-green-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Lecciones"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:u.completed_lessons}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Completadas"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ts,{className:"h-4 w-4 text-orange-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Tiempo"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:u.total_study_time}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Minutos"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lr,{className:"h-4 w-4 text-purple-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Activos"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:u.active_programs}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Programas"})]})})]}),(u==null?void 0:u.current_lesson)&&i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{className:"text-sm",children:"Lección Actual"})}),i.jsxs(Q,{children:[i.jsx("p",{className:"font-medium",children:u.current_lesson.title}),i.jsx("p",{className:"text-sm text-muted-foreground",children:u.current_lesson.course_title})]})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Programas Inscritos"})}),i.jsx(Q,{children:a.length===0?i.jsx("p",{className:"text-muted-foreground",children:"No está inscrito en ningún programa"}):i.jsx("div",{className:"space-y-4",children:a.map(L=>i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium",children:L.title}),i.jsxs(Ee,{variant:"outline",children:[L.completed_courses,"/",L.courses_count," cursos"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{children:"Progreso"}),i.jsxs("span",{children:[L.progress_percent,"%"]})]}),i.jsx(km,{value:L.progress_percent,className:"h-2"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Inscrito el ",B(L.enrolled_at)]})]})]},L.id))})})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Cursos Individuales"})}),i.jsx(Q,{children:l.length===0?i.jsx("p",{className:"text-muted-foreground",children:"No está inscrito en cursos individuales"}):i.jsx("div",{className:"space-y-3",children:l.map(L=>i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium",children:L.title}),i.jsxs(Ee,{variant:"outline",children:[L.progress_percent,"%"]})]}),i.jsx(km,{value:L.progress_percent,className:"h-2"}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Inscrito el ",B(L.enrolled_at)]})]},L.id))})})]})]})]})}),i.jsx(St,{open:h,onOpenChange:b,children:i.jsxs(wt,{className:"sm:max-w-[600px]",children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Asignar progreso manual"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-muted-foreground",children:"Curso"}),i.jsxs(ot,{value:S,onValueChange:O,children:[i.jsx(nt,{className:"w-full mt-1",children:i.jsx(lt,{placeholder:"Elegir curso"})}),i.jsx(rt,{children:x.map(L=>i.jsx(fe,{value:L.id,children:L.title},L.id))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-muted-foreground",children:"Lección (opcional)"}),i.jsxs(ot,{value:N,onValueChange:C,children:[i.jsx(nt,{className:"w-full mt-1",children:i.jsx(lt,{placeholder:"Elegir lección"})}),i.jsx(rt,{children:y.map(L=>i.jsx(fe,{value:L.id,children:L.title},L.id))})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(V,{disabled:!S||g,onClick:z,className:"flex-1",children:"Marcar curso completado"}),i.jsx(V,{disabled:!N||g,variant:"secondary",onClick:T,className:"flex-1",children:"Marcar lección"}),i.jsx(V,{disabled:!S||g,variant:"destructive",onClick:I,children:"Reset curso"})]})]})]})})]})}var Cd="Checkbox",[p3,$B]=yn(Cd),[g3,wg]=p3(Cd);function x3(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:a,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=e,[p,h]=Or({prop:n,defaultProp:s??!1,onChange:c,caller:Cd}),[b,g]=m.useState(null),[w,x]=m.useState(null),v=m.useRef(!1),y=b?!!o||!!b.closest("form"):!0,j={checked:p,disabled:a,setChecked:h,control:b,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:v,required:u,defaultChecked:Vs(s)?!1:s,isFormControl:y,bubbleInput:w,setBubbleInput:x};return i.jsx(g3,{scope:t,...j,children:v3(f)?f(j):r})}var xN="CheckboxTrigger",vN=m.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:a,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:p,isFormControl:h,bubbleInput:b}=wg(xN,e),g=Me(s,d),w=m.useRef(c);return m.useEffect(()=>{const x=a==null?void 0:a.form;if(x){const v=()=>f(w.current);return x.addEventListener("reset",v),()=>x.removeEventListener("reset",v)}},[a,f]),i.jsx(xe.button,{type:"button",role:"checkbox","aria-checked":Vs(c)?"mixed":c,"aria-required":u,"data-state":_N(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:g,onKeyDown:pe(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:pe(n,x=>{f(v=>Vs(v)?!0:!v),b&&h&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})})});vN.displayName=xN;var bg=m.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...f}=e;return i.jsx(x3,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:p})=>i.jsxs(i.Fragment,{children:[i.jsx(vN,{...f,ref:t,__scopeCheckbox:n}),p&&i.jsx(jN,{__scopeCheckbox:n})]})})});bg.displayName=Cd;var yN="CheckboxIndicator",wN=m.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=wg(yN,n);return i.jsx(os,{present:r||Vs(a.checked)||a.checked===!0,children:i.jsx(xe.span,{"data-state":_N(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});wN.displayName=yN;var bN="CheckboxBubbleInput",jN=m.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:p,setBubbleInput:h}=wg(bN,e),b=Me(n,h),g=_d(a),w=Zu(r);m.useEffect(()=>{const v=p;if(!v)return;const y=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(y,"checked").set,_=!s.current;if(g!==a&&S){const N=new Event("click",{bubbles:_});v.indeterminate=Vs(a),S.call(v,Vs(a)?!1:a),v.dispatchEvent(N)}},[p,g,a,s]);const x=m.useRef(Vs(a)?!1:a);return i.jsx(xe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:l,disabled:c,name:u,value:d,form:f,...t,tabIndex:-1,ref:b,style:{...t.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});jN.displayName=bN;function v3(e){return typeof e=="function"}function Vs(e){return e==="indeterminate"}function _N(e){return Vs(e)?"indeterminate":e?"checked":"unchecked"}const hn=m.forwardRef(({className:e,...t},n)=>i.jsx(bg,{ref:n,className:oe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(wN,{className:oe("flex items-center justify-center text-current"),children:i.jsx(dj,{className:"h-4 w-4"})})}));hn.displayName=bg.displayName;function SN({open:e,onOpenChange:t,programId:n,onSuccess:r}){const[s,a]=m.useState([]),[o,l]=m.useState([]),[c,u]=m.useState(""),[d,f]=m.useState(!1),{toast:p}=Ve();m.useEffect(()=>{e&&h()},[e,n]);const h=async()=>{try{const{data:x}=await D.from("program_courses").select("course_id").eq("program_id",n),v=(x==null?void 0:x.map(S=>S.course_id))||[],{data:y,error:j}=await D.from("courses").select("id, title, summary, published_at").not("id","in",`(${v.join(",")||"NULL"})`).order("title");if(j)throw j;a(y||[])}catch{p({title:"Error",description:"No se pudieron cargar los cursos disponibles",variant:"destructive"})}},b=x=>{l(v=>v.includes(x)?v.filter(y=>y!==x):[...v,x])},g=async()=>{var x;if(o.length===0){p({title:"Error",description:"Selecciona al menos un curso",variant:"destructive"});return}f(!0);try{const{data:v}=await D.from("program_courses").select("sort_order").eq("program_id",n).order("sort_order",{ascending:!1}).limit(1),y=(((x=v==null?void 0:v[0])==null?void 0:x.sort_order)||0)+1,j=o.map((_,N)=>({program_id:n,course_id:_,sort_order:y+N})),{error:S}=await D.from("program_courses").insert(j);if(S)throw S;p({title:"Cursos agregados",description:`Se agregaron ${o.length} curso(s) al programa`}),l([]),t(!1),r()}catch{p({title:"Error",description:"No se pudieron agregar los cursos al programa",variant:"destructive"})}finally{f(!1)}},w=s.filter(x=>x.title.toLowerCase().includes(c.toLowerCase())||x.summary&&x.summary.toLowerCase().includes(c.toLowerCase()));return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[700px] max-h-[80vh] overflow-hidden flex flex-col",children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Agregar Cursos al Programa"})}),i.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Buscar cursos"}),i.jsxs("div",{className:"relative",children:[i.jsx(Qu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(ve,{placeholder:"Buscar por título o descripción...",value:c,onChange:x=>u(x.target.value),className:"pl-10"})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-3",children:w.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(qe,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay cursos disponibles para agregar"}),i.jsx("p",{className:"text-sm mt-2",children:c?"Prueba con otros términos de búsqueda":"Todos los cursos ya están en este programa"})]}):w.map(x=>i.jsx(K,{className:"cursor-pointer hover:bg-muted/50",children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(hn,{checked:o.includes(x.id),onCheckedChange:()=>b(x.id)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("h4",{className:"font-medium text-foreground",children:x.title}),i.jsx(Ee,{variant:x.published_at?"default":"secondary",children:x.published_at?"Publicado":"Borrador"})]}),x.summary&&i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:x.summary})]})]})})},x.id))})]}),i.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[i.jsx(V,{onClick:g,disabled:d||o.length===0,className:"flex-1",children:d?"Agregando...":`Agregar ${o.length} curso(s)`}),i.jsx(V,{variant:"outline",onClick:()=>t(!1),disabled:d,children:"Cancelar"})]})]})})}var jg="Radio",[y3,NN]=yn(jg),[w3,b3]=y3(jg),kN=m.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:a,disabled:o,value:l="on",onCheck:c,form:u,...d}=e,[f,p]=m.useState(null),h=Me(t,w=>p(w)),b=m.useRef(!1),g=f?u||!!f.closest("form"):!0;return i.jsxs(w3,{scope:n,checked:s,disabled:o,children:[i.jsx(xe.button,{type:"button",role:"radio","aria-checked":s,"data-state":TN(s),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:h,onClick:pe(e.onClick,w=>{s||c==null||c(),g&&(b.current=w.isPropagationStopped(),b.current||w.stopPropagation())})}),g&&i.jsx(PN,{control:f,bubbles:!b.current,name:r,value:l,checked:s,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});kN.displayName=jg;var CN="RadioIndicator",EN=m.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,a=b3(CN,n);return i.jsx(os,{present:r||a.checked,children:i.jsx(xe.span,{"data-state":TN(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})})});EN.displayName=CN;var j3="RadioBubbleInput",PN=m.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const o=m.useRef(null),l=Me(o,a),c=_d(n),u=Zu(t);return m.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&h){const b=new Event("click",{bubbles:r});h.call(d,n),d.dispatchEvent(b)}},[c,n,r]),i.jsx(xe.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});PN.displayName=j3;function TN(e){return e?"checked":"unchecked"}var _3=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ed="RadioGroup",[S3,zB]=yn(Ed,[bd,NN]),RN=bd(),AN=NN(),[N3,k3]=S3(Ed),IN=m.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:a,required:o=!1,disabled:l=!1,orientation:c,dir:u,loop:d=!0,onValueChange:f,...p}=e,h=RN(n),b=wd(u),[g,w]=Or({prop:a,defaultProp:s??null,onChange:f,caller:Ed});return i.jsx(N3,{scope:n,name:r,required:o,disabled:l,value:g,onValueChange:w,children:i.jsx(cS,{asChild:!0,...h,orientation:c,dir:b,loop:d,children:i.jsx(xe.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:b,...p,ref:t})})})});IN.displayName=Ed;var ON="RadioGroupItem",LN=m.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,a=k3(ON,n),o=a.disabled||r,l=RN(n),c=AN(n),u=m.useRef(null),d=Me(t,u),f=a.value===s.value,p=m.useRef(!1);return m.useEffect(()=>{const h=g=>{_3.includes(g.key)&&(p.current=!0)},b=()=>p.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",b)}},[]),i.jsx(uS,{asChild:!0,...l,focusable:!o,active:f,children:i.jsx(kN,{disabled:o,required:a.required,checked:f,...c,...s,name:a.name,ref:d,onCheck:()=>a.onValueChange(s.value),onKeyDown:pe(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:pe(s.onFocus,()=>{var h;p.current&&((h=u.current)==null||h.click())})})})});LN.displayName=ON;var C3="RadioGroupIndicator",MN=m.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=AN(n);return i.jsx(EN,{...s,...r,ref:t})});MN.displayName=C3;var DN=IN,FN=LN,E3=MN;const $N=m.forwardRef(({className:e,...t},n)=>i.jsx(DN,{className:oe("grid gap-2",e),...t,ref:n}));$N.displayName=DN.displayName;const zN=m.forwardRef(({className:e,...t},n)=>i.jsx(FN,{ref:n,className:oe("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:i.jsx(E3,{className:"flex items-center justify-center",children:i.jsx(iP,{className:"h-2.5 w-2.5 fill-current text-current"})})}));zN.displayName=FN.displayName;function P3({open:e,onOpenChange:t,onProgramSelected:n}){const[r,s]=m.useState([]),[a,o]=m.useState(""),[l,c]=m.useState(!0);m.useEffect(()=>{e&&u()},[e]);const u=async()=>{c(!0);try{const{data:f,error:p}=await D.from("programs").select("id, title, summary").order("title");if(p)throw p;s(f||[])}catch(f){console.error("Error fetching programs:",f)}finally{c(!1)}},d=()=>{a&&(n(a),t(!1),o(""))};return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[500px]",children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Seleccionar Programa"})}),l?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Selecciona el programa al cual quieres agregar cursos:"}),i.jsx($N,{value:a,onValueChange:o,children:r.map(f=>i.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[i.jsx(zN,{value:f.id,id:f.id}),i.jsx(X,{htmlFor:f.id,className:"flex-1 cursor-pointer",children:i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:f.title}),f.summary&&i.jsx("p",{className:"text-sm text-muted-foreground",children:f.summary})]})})]},f.id))}),r.length===0&&i.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No hay programas disponibles. Crea un programa primero."}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{onClick:d,disabled:!a,className:"flex-1",children:"Continuar"}),i.jsx(V,{variant:"outline",onClick:()=>t(!1),className:"flex-1",children:"Cancelar"})]})]})]})})}function T3(){const[e,t]=m.useState({totalUsers:0,totalPrograms:0,totalCourses:0,totalEnrollments:0,activePrograms:0}),[n,r]=m.useState(!0),[s,a]=m.useState(null);m.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0),a(null);const[{count:l},{count:c},{count:u},{count:d},{data:f}]=await Promise.all([D.from("profiles").select("*",{count:"exact",head:!0}),D.from("programs").select("*",{count:"exact",head:!0}),D.from("courses").select("*",{count:"exact",head:!0}),D.from("enrollments").select("*",{count:"exact",head:!0}),D.from("programs").select("id").not("published_at","is",null)]);t({totalUsers:l||0,totalPrograms:c||0,totalCourses:u||0,totalEnrollments:d||0,activePrograms:(f==null?void 0:f.length)||0})}catch(l){console.error("Error fetching stats:",l),a(l instanceof Error?l.message:"Error desconocido")}finally{r(!1)}};return{stats:e,loading:n,error:s,refetch:o}}function R3(){const{profile:e,loading:t}=it(),n=ig(),[r,s]=m.useState(!1),[a,o]=m.useState(!1),[l,c]=m.useState(!1),[u,d]=m.useState(""),[f,p]=m.useState(!1),{stats:h,loading:b,refetch:g}=T3(),[w,x]=m.useState(!0),[v,y]=m.useState({programs:0,courses:0,usersInPrograms:0,usersInIndividual:0,newWeek:0,newMonth:0,newYear:0,active30:0,active7:0,totalStudents:0,totalActiveStudentsMonth:0,totalTeachers:0,totalVolunteers:0,topCourses:[],topCourseTitle:"",topCourseMinutes:0,topProgramTitle:"",topProgramMinutes:0,activeUsersList:[],activeUsers20List:[]}),j=new Date().toISOString().slice(0,10),S=new Date(Date.now()-30*24*60*60*1e3).toISOString().slice(0,10),[_,N]=m.useState(S),[C,A]=m.useState(j),[R,O]=m.useState(!1),[T,z]=m.useState(""),[I,B]=m.useState(!1),[$,L]=m.useState(!1),[M,E]=m.useState([]),[k,F]=m.useState(""),[H,P]=m.useState("Usuarios"),[q,de]=m.useState("todos"),le=()=>{const ne=["nombre","email","programas","cursos"],me=k.trim().toLowerCase(),He=M.filter(Ue=>{var It,pr;return!me||((It=Ue.name)==null?void 0:It.toLowerCase().includes(me))||((pr=Ue.email)==null?void 0:pr.toLowerCase().includes(me))||Ue.programs.join(", ").toLowerCase().includes(me)||Ue.courses.join(", ").toLowerCase().includes(me)}).map(Ue=>({nombre:Ue.name||"",email:Ue.email||"",programas:Ue.programs.join(" | "),cursos:Ue.courses.join(" | ")})),Re=[ne.join(",")].concat(He.map(Ue=>ne.map(It=>`"${String(Ue[It]??"").replace(/"/g,'""')}"`).join(","))),ct=new Blob([Re.join(`
`)],{type:"text/csv;charset=utf-8;"}),Ge=URL.createObjectURL(ct),xt=document.createElement("a"),bt=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");xt.href=Ge,xt.download=`usuarios-activos-${bt}.csv`,document.body.appendChild(xt),xt.click(),document.body.removeChild(xt),URL.revokeObjectURL(Ge)};if(t)return i.jsx("div",{className:"flex items-center justify-center py-12",children:i.jsx(Be,{className:"h-6 w-6 animate-spin text-muted-foreground"})});if(!(e&&(e.role==="admin"||e.role==="formador")))return i.jsx(ir,{to:"/mi-formacion",replace:!0});const re=async(ne,me)=>{var He;try{L(!0),B(!0),P(me);let Re=[];const ct=new Date,Ge=new Date(ct.getTime()-7*24*60*60*1e3).toISOString(),xt=new Date(ct.getTime()-30*24*60*60*1e3).toISOString(),bt=new Date(ct.getTime()-365*24*60*60*1e3).toISOString();if(ne==="active30"){const{data:se}=await D.from("lesson_progress").select("user_id").gte("updated_at",xt).limit(1e4);Re=Array.from(new Set((se||[]).map(ae=>ae.user_id).filter(Boolean)))}else if(ne==="active7"){const{data:se}=await D.from("lesson_progress").select("user_id").gte("updated_at",Ge).limit(1e4);Re=Array.from(new Set((se||[]).map(ae=>ae.user_id).filter(Boolean)))}else if(ne==="usersInPrograms"||ne==="programs"){const{data:se}=await D.from("enrollments").select("user_id").eq("status","active").limit(2e4);Re=Array.from(new Set((se||[]).map(ae=>ae.user_id).filter(Boolean)))}else if(ne==="usersInIndividual"||ne==="courses"){const{data:se}=await D.from("course_enrollments").select("user_id").eq("status","active").limit(2e4);Re=Array.from(new Set((se||[]).map(ae=>ae.user_id).filter(Boolean)))}else if(ne==="newWeek"){const{data:se}=await D.from("profiles").select("id").gte("created_at",Ge).limit(2e4);Re=(se||[]).map(ae=>ae.id)}else if(ne==="newMonth"){const{data:se}=await D.from("profiles").select("id").gte("created_at",xt).limit(2e4);Re=(se||[]).map(ae=>ae.id)}else if(ne==="newYear"){const{data:se}=await D.from("profiles").select("id").gte("created_at",bt).limit(2e4);Re=(se||[]).map(ae=>ae.id)}else if(ne==="totalStudents"){const{data:se}=await D.from("profiles").select("id").eq("role","student").limit(2e4);Re=(se||[]).map(ae=>ae.id)}else if(ne==="totalTeachers"){const{data:se}=await D.from("profiles").select("id").eq("role","teacher").limit(2e4);Re=(se||[]).map(ae=>ae.id)}else if(ne==="totalVolunteers"){const{data:se}=await D.from("profiles").select("id").eq("role","voluntario").limit(2e4);Re=(se||[]).map(ae=>ae.id)}else if(ne==="activeStudentsMonth"){const{data:se}=await D.from("lesson_progress").select("user_id").gte("updated_at",xt).limit(2e4),ae=new Set((se||[]).map($e=>$e.user_id).filter(Boolean)),{data:Se}=await D.from("profiles").select("id").eq("role","student").in("id",Array.from(ae));Re=(Se||[]).map($e=>$e.id)}if(Re.length===0){E([]);return}let Ue={};try{const ae=await(await fetch("undefined/functions/v1/list-users?all=true&pageSize=2000&sortBy=created_at&sortDir=desc",{headers:{Authorization:"Bearer undefined"}})).json();(((He=ae==null?void 0:ae.data)==null?void 0:He.users)||[]).forEach($e=>{Ue[$e.id]=$e})}catch{Ue={}}const[{data:It},{data:pr}]=await Promise.all([D.from("enrollments").select("user_id, programs(title)").in("user_id",Re),D.from("course_enrollments").select("user_id, courses(title)").in("user_id",Re)]),Ln={};(It||[]).forEach(se=>{var $e;const ae=se.user_id,Se=($e=se.programs)==null?void 0:$e.title;!ae||!Se||(Ln[ae]||(Ln[ae]=[]),Ln[ae].push(Se))});const W={};(pr||[]).forEach(se=>{var $e;const ae=se.user_id,Se=($e=se.courses)==null?void 0:$e.title;!ae||!Se||(W[ae]||(W[ae]=[]),W[ae].push(Se))});const ee=Re.map(se=>{var ae,Se,$e,Kt;return{id:se,name:((ae=Ue[se])==null?void 0:ae.full_name)||((Se=Ue[se])==null?void 0:Se.email)||"—",email:(($e=Ue[se])==null?void 0:$e.email)||"—",role:((Kt=Ue[se])==null?void 0:Kt.role)||"student",programs:(Ln[se]||[]).slice(0,5),courses:(W[se]||[]).slice(0,5)}});E(ee)}finally{L(!1)}};m.useEffect(()=>{he(_,C)},[]);const he=async(ne,me)=>{var He,Re;try{x(!0);const ct=new URLSearchParams;ne&&ct.set("start",ne),me&&ct.set("end",me);try{const Oe=await(await fetch(`undefined/functions/v1/activity?${ct.toString()}`,{headers:{Authorization:"Bearer undefined"}})).json();if(Oe!=null&&Oe.success&&(Oe!=null&&Oe.data)){y(si=>({...si,...Oe.data}));return}}catch(ke){console.warn("Edge activity fallback:",ke)}const{count:Ge}=await D.from("programs").select("*",{count:"exact",head:!0}),{count:xt}=await D.from("courses").select("*",{count:"exact",head:!0}),{data:bt}=await D.from("enrollments").select("user_id").eq("status","active"),Ue=new Set((bt||[]).map(ke=>ke.user_id)).size,{data:It}=await D.from("course_enrollments").select("user_id").eq("status","active"),pr=new Set((It||[]).map(ke=>ke.user_id)).size,Ln=new Date,W=new Date(Ln.getTime()-7*24*60*60*1e3).toISOString(),ee=new Date(Ln.getTime()-30*24*60*60*1e3).toISOString(),se=new Date(Ln.getTime()-365*24*60*60*1e3).toISOString(),{data:ae}=await D.from("profiles").select("id, created_at").gte("created_at",W),{data:Se}=await D.from("profiles").select("id, created_at").gte("created_at",ee),{data:$e}=await D.from("profiles").select("id, created_at").gte("created_at",se),{count:Kt}=await D.from("profiles").select("*",{count:"exact",head:!0}).eq("role","student"),{count:Qt}=await D.from("profiles").select("*",{count:"exact",head:!0}).eq("role","teacher"),{count:ln}=await D.from("profiles").select("*",{count:"exact",head:!0}).eq("role","voluntario");let Mn=D.from("lesson_progress").select("watched_seconds, updated_at, lessons!inner(course_id, courses!inner(title))").limit(1e4);if(ne&&me){const ke=new Date(ne).toISOString(),Oe=new Date(new Date(me).getTime()+24*60*60*1e3).toISOString();Mn=Mn.gte("updated_at",ke).lt("updated_at",Oe)}const{data:mt}=await Mn,Yt={};(mt||[]).forEach(ke=>{var ds,fs,$l;const Oe=(ds=ke.lessons)==null?void 0:ds.course_id,si=(($l=(fs=ke.lessons)==null?void 0:fs.courses)==null?void 0:$l.title)||"Curso";Oe&&(Yt[Oe]||(Yt[Oe]={title:si,minutes:0}),Yt[Oe].minutes+=Math.floor((ke.watched_seconds||0)/60))});const Xt=Object.entries(Yt).map(([ke,Oe])=>({courseId:ke,title:Oe.title,minutes:Oe.minutes})).sort((ke,Oe)=>Oe.minutes-ke.minutes).slice(0,5);let io="",ao=0;const Fl=Object.keys(Yt);if(Fl.length>0){const{data:ke}=await D.from("program_courses").select("program_id, course_id, programs(title)").in("course_id",Fl),Oe={};(ke||[]).forEach(ds=>{var Ug,Bg;const fs=ds.program_id,$l=((Ug=ds.programs)==null?void 0:Ug.title)||"Programa",Tk=((Bg=Yt[ds.course_id])==null?void 0:Bg.minutes)||0;Oe[fs]||(Oe[fs]={title:$l,minutes:0}),Oe[fs].minutes+=Tk});const si=Object.values(Oe).sort((ds,fs)=>fs.minutes-ds.minutes)[0];si&&(io=si.title,ao=si.minutes)}const oo=((He=Xt[0])==null?void 0:He.title)||"",gr=((Re=Xt[0])==null?void 0:Re.minutes)||0,us=new Set,je=new Date(_).toISOString(),De=new Date(new Date(C).getTime()+24*60*60*1e3).toISOString(),{data:Ke}=await D.from("lesson_progress").select("user_id, updated_at").gte("updated_at",je).lt("updated_at",De);(Ke||[]).forEach(ke=>ke.user_id&&us.add(ke.user_id));const{data:bn}=await D.from("assignments").select("user_id, created_at").gte("created_at",je).lt("created_at",De);(bn||[]).forEach(ke=>ke.user_id&&us.add(ke.user_id));try{const{data:ke}=await D.from("messages").select("sender_id, created_at").gte("created_at",je).lt("created_at",De);(ke||[]).forEach(Oe=>Oe.sender_id&&us.add(Oe.sender_id))}catch{}const Jt=new Date(Date.now()-7*24*60*60*1e3).toISOString(),jn=new Set,{data:$r}=await D.from("lesson_progress").select("user_id, updated_at").gte("updated_at",Jt);($r||[]).forEach(ke=>ke.user_id&&jn.add(ke.user_id));const{data:_n}=await D.from("assignments").select("user_id, created_at").gte("created_at",Jt);(_n||[]).forEach(ke=>ke.user_id&&jn.add(ke.user_id));try{const{data:ke}=await D.from("messages").select("sender_id, created_at").gte("created_at",Jt);(ke||[]).forEach(Oe=>Oe.sender_id&&jn.add(Oe.sender_id))}catch{}y({programs:Ge||0,courses:xt||0,usersInPrograms:Ue,usersInIndividual:pr,newWeek:(ae||[]).length,newMonth:(Se||[]).length,newYear:($e||[]).length,active30:us.size,active7:jn.size,totalStudents:Kt||0,totalActiveStudentsMonth:0,totalTeachers:Qt||0,totalVolunteers:ln||0,topCourses:Xt,topCourseTitle:oo,topCourseMinutes:gr,topProgramTitle:io,topProgramMinutes:ao});const{data:xr}=await D.from("lesson_progress").select("user_id, updated_at").gte("updated_at",ee),Fg=new Set((xr||[]).map(ke=>ke.user_id).filter(Boolean));let $g=0;if(Fg.size>0){const{data:ke}=await D.from("profiles").select("id").eq("role","student").in("id",Array.from(Fg));$g=(ke||[]).length}let zg=[];if(us.size>0){const{data:ke}=await D.from("profiles").select("id, full_name").in("id",Array.from(us)).limit(12);zg=(ke||[]).map(Oe=>({id:Oe.id,name:Oe.full_name||""}))}y(ke=>({...ke,totalActiveStudentsMonth:$g,activeUsersList:zg}))}finally{x(!1)}},Z=()=>{s(!0)},U=()=>{o(!0)},ce=()=>{g()},ge=()=>{const ne=[],me=bt=>ne.push(bt.map(Ue=>`"${String(Ue).replace(/"/g,'""')}"`).join(","));me(["Métrica","Valor"]),me(["Programas",v.programs]),me(["Usuarios en programas",v.usersInPrograms]),me(["Cursos",v.courses]),me(["Usuarios en cursos individuales",v.usersInIndividual]),me(["Nuevos 7 días",v.newWeek]),me(["Nuevos 30 días",v.newMonth]),me(["Nuevos 365 días",v.newYear]),me(["Activos 30 días",v.active30]),ne.push(""),me(["Top Cursos","Minutos"]),v.topCourses.forEach(bt=>me([bt.title,bt.minutes]));const He=ne.join(`
`),Re=new Blob([He],{type:"text/csv;charset=utf-8;"}),ct=URL.createObjectURL(Re),Ge=document.createElement("a"),xt=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");Ge.href=ct,Ge.download=`actividad-campus-${xt}.csv`,document.body.appendChild(Ge),Ge.click(),document.body.removeChild(Ge),URL.revokeObjectURL(ct)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Panel de Administrador"}),i.jsx("p",{className:"text-muted-foreground",children:"Gestiona todo el Campus de Geometría Sagrada"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(V,{onClick:Z,className:"gap-2",children:[i.jsx(qn,{className:"h-4 w-4"}),"Nuevo Programa"]}),i.jsxs(V,{onClick:U,className:"gap-2",variant:"outline",children:[i.jsx(qn,{className:"h-4 w-4"}),"Nuevo Curso"]}),i.jsxs(V,{onClick:()=>{h.totalPrograms>0&&p(!0)},className:"gap-2",variant:"outline",disabled:h.totalPrograms===0,children:[i.jsx(qe,{className:"h-4 w-4"}),"Asignar Cursos"]}),i.jsxs(V,{className:"gap-2",variant:"outline",onClick:()=>window.open("/cuenta","_blank"),children:[i.jsx(vj,{className:"h-4 w-4"}),"Configuración"]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(uj,{className:"h-5 w-5 text-accent"}),i.jsx("h2",{className:"text-xl font-semibold",children:"Actividad"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[i.jsx("span",{children:"Desde"}),i.jsx("input",{type:"date",value:_,onChange:ne=>N(ne.target.value),className:"bg-transparent border rounded px-2 py-1"}),i.jsx("span",{children:"Hasta"}),i.jsx("input",{type:"date",value:C,onChange:ne=>A(ne.target.value),className:"bg-transparent border rounded px-2 py-1"}),i.jsx(V,{size:"sm",variant:"outline",onClick:()=>he(_,C),children:"Aplicar"})]}),i.jsx(V,{variant:"outline",size:"sm",onClick:ge,children:"Exportar CSV"})]})]}),w?i.jsx("div",{className:"flex items-center justify-center py-6",children:i.jsx(Be,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:`grid gap-6 ${n?"grid-cols-1":"md:grid-cols-2 lg:grid-cols-3"}`,children:[i.jsxs(K,{role:"button",onClick:()=>re("programs","Programas"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Programas"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.programs})})]}),i.jsxs(K,{role:"button",onClick:()=>re("usersInPrograms","Usuarios en programas"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Usuarios en programas"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.usersInPrograms})})]}),i.jsxs(K,{role:"button",onClick:()=>re("courses","Cursos"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Cursos"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.courses})})]}),i.jsxs(K,{role:"button",onClick:()=>re("usersInIndividual","Usuarios en cursos individuales"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Usuarios en cursos individuales"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.usersInIndividual})})]}),i.jsxs(K,{role:"button",onClick:()=>re("newWeek","Nuevos usuarios 7 días"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Nuevos usuarios 7 días"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.newWeek})})]}),i.jsxs(K,{role:"button",onClick:()=>re("newMonth","Nuevos usuarios en 30 días"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Nuevos usuarios en 30 días"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.newMonth})})]}),i.jsxs(K,{role:"button",onClick:()=>re("active30","Usuarios activos 30 días"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Usuarios activos 30 días"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.active30})})]}),i.jsxs(K,{role:"button",onClick:()=>re("active7","Usuarios activos esta semana"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Usuarios activos esta semana"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.active7})})]}),i.jsxs(K,{role:"button",onClick:()=>re("newYear","Nuevos usuarios este año"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Nuevos usuarios este año"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.newYear})})]})]}),i.jsxs("div",{className:`grid gap-6 ${n?"grid-cols-1":"md:grid-cols-2 lg:grid-cols-2"} mt-4`,children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{className:"text-sm",children:"Más Vistos"})}),i.jsx(Q,{children:i.jsxs("div",{className:`grid ${n?"grid-cols-1":"md:grid-cols-2 lg:grid-cols-2"} gap-3`,children:[i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Programa más visto"}),i.jsx("div",{className:"font-medium line-clamp-2",children:v.topProgramTitle||"—"}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[v.topProgramMinutes," min"]})]}),i.jsxs("div",{className:"p-3 border rounded-lg",children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Curso más visto"}),i.jsx("div",{className:"font-medium line-clamp-2",children:v.topCourseTitle||"—"}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[v.topCourseMinutes," min"]})]})]})})]}),i.jsxs(K,{role:"button",className:"cursor-pointer",onClick:()=>re("active30","Usuarios activos 30 días"),children:[i.jsx(ye,{children:i.jsx(we,{className:"text-sm",children:"Estudiantes activos (30 días)"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold text-center",children:v.active30})})]})]}),i.jsxs("div",{className:`grid gap-6 ${n?"grid-cols-2":"md:grid-cols-2 lg:grid-cols-4"} mt-4`,children:[i.jsxs(K,{role:"button",className:"cursor-pointer",onClick:()=>re("totalStudents","Total de estudiantes"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Total de estudiantes"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.totalStudents})})]}),i.jsxs(K,{role:"button",className:"cursor-pointer",onClick:()=>re("activeStudentsMonth","Estudiantes activos último mes"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Estudiantes activos último mes"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.totalActiveStudentsMonth})})]}),i.jsxs(K,{role:"button",className:"cursor-pointer",onClick:()=>re("totalTeachers","Total de formadores"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Total de formadores"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.totalTeachers})})]}),i.jsxs(K,{role:"button",className:"cursor-pointer",onClick:()=>re("totalVolunteers","Total de voluntarios"),children:[i.jsx(ye,{className:"pb-2",children:i.jsx(we,{className:"text-sm",children:"Total de voluntarios"})}),i.jsx(Q,{children:i.jsx("div",{className:"text-2xl font-bold",children:v.totalVolunteers})})]})]})]})]}),!b&&h.totalPrograms===0&&i.jsx("div",{className:"text-center py-12",children:i.jsxs("div",{className:"max-w-md mx-auto",children:[i.jsx(qe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"¡Comienza creando contenido!"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"Tu campus está listo. Crea programas y cursos para empezar a gestionar el aprendizaje."}),i.jsx("div",{className:"flex gap-2 justify-center",children:i.jsxs(V,{onClick:Z,className:"gap-2",children:[i.jsx(qn,{className:"h-4 w-4"}),"Mi Primer Programa"]})})]})}),i.jsx(cN,{open:r,onOpenChange:s,onSuccess:ce}),i.jsx(uN,{open:a,onOpenChange:o,onSuccess:ce}),i.jsx(P3,{open:f,onOpenChange:p,onProgramSelected:ne=>{d(ne),c(!0)}}),u&&i.jsx(SN,{open:l,onOpenChange:c,programId:u,onSuccess:ce}),T&&i.jsx(gN,{open:R,onOpenChange:O,userId:T}),i.jsx(St,{open:I,onOpenChange:B,children:i.jsxs(wt,{className:"sm:max-w-[700px]",children:[i.jsxs(kt,{children:[i.jsxs(Ct,{children:[H,i.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:[M.filter(ne=>q==="todos"||ne.role===q).filter(ne=>{const me=k.trim().toLowerCase();return me?(ne.name||"").toLowerCase().includes(me)||(ne.email||"").toLowerCase().includes(me)||ne.programs.join(", ").toLowerCase().includes(me)||ne.courses.join(", ").toLowerCase().includes(me):!0}).length," resultados"]})]}),i.jsx(ei,{children:"Nombre, email y asociaciones recientes"})]}),$?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ve,{placeholder:"Buscar por nombre, email, programa o curso",value:k,onChange:ne=>F(ne.target.value),disabled:!0}),i.jsx(V,{variant:"outline",disabled:!0,children:"Cargando..."})]}),i.jsx("div",{className:"flex items-center justify-center py-6",children:i.jsx(Be,{className:"h-6 w-6 animate-spin text-muted-foreground"})})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ve,{placeholder:"Buscar por nombre, email, programa o curso",value:k,onChange:ne=>F(ne.target.value)}),i.jsxs(ot,{value:q,onValueChange:ne=>de(ne),children:[i.jsx(nt,{className:"w-40",children:i.jsx(lt,{placeholder:"Rol"})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"todos",children:"Todos"}),i.jsx(fe,{value:"student",children:"Estudiante"}),i.jsx(fe,{value:"teacher",children:"Formador"}),i.jsx(fe,{value:"admin",children:"Admin"}),i.jsx(fe,{value:"voluntario",children:"Voluntario"})]})]}),i.jsx(V,{variant:"outline",onClick:le,children:"Exportar CSV"})]}),i.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-auto",children:[M.filter(ne=>q==="todos"||ne.role===q).filter(ne=>{const me=k.trim().toLowerCase();return me?(ne.name||"").toLowerCase().includes(me)||(ne.email||"").toLowerCase().includes(me)||ne.programs.join(", ").toLowerCase().includes(me)||ne.courses.join(", ").toLowerCase().includes(me):!0}).map(ne=>i.jsxs("div",{className:"p-3 border rounded-md",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:ne.name}),i.jsx("div",{className:"text-sm text-muted-foreground",children:ne.email})]}),i.jsx(V,{size:"sm",variant:"outline",onClick:()=>{z(ne.id),O(!0)},children:"Ver perfil"})]}),i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsxs("div",{className:"text-muted-foreground",children:["Programas: ",ne.programs.join(", ")||"—"]}),i.jsxs("div",{className:"text-muted-foreground",children:["Cursos: ",ne.courses.join(", ")||"—"]})]})]},ne.id)),M.length===0&&i.jsx("p",{className:"text-sm text-muted-foreground",children:"Sin datos"})]})]})]})})]})}function A3({open:e,onOpenChange:t,onSuccess:n,programId:r,programTitle:s}){const[a,o]=m.useState(""),[l,c]=m.useState(""),[u,d]=m.useState(""),[f,p]=m.useState(!1),{toast:h}=Ve(),b=x=>x.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),g=x=>{o(x),d(b(x))},w=async x=>{if(x.preventDefault(),!a.trim()||!u.trim()){h({title:"Error",description:"El título es obligatorio",variant:"destructive"});return}p(!0);try{const{data:v,error:y}=await D.from("courses").insert({title:a.trim(),summary:l.trim()||null,slug:u.trim(),program_id:r,sort_order:0}).select().single();if(y)throw y;h({title:"Curso creado",description:`El curso "${a}" ha sido agregado al programa "${s}"`}),o(""),c(""),d(""),t(!1),n()}catch(v){h({title:"Error",description:v.message||"No se pudo crear el curso",variant:"destructive"})}finally{p(!1)}};return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[500px]",children:[i.jsx(kt,{children:i.jsxs(Ct,{children:['Crear Curso para "',s,'"']})}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Título del Curso"}),i.jsx(ve,{id:"title",value:a,onChange:x=>g(x.target.value),placeholder:"Ej: Los Números Sagrados",disabled:f})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"slug",children:"Slug (URL)"}),i.jsx(ve,{id:"slug",value:u,onChange:x=>d(x.target.value),placeholder:"los-numeros-sagrados",disabled:f})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"summary",children:"Descripción"}),i.jsx(At,{id:"summary",value:l,onChange:x=>c(x.target.value),placeholder:"Describe brevemente el curso...",rows:3,disabled:f})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{type:"submit",disabled:f,className:"flex-1",children:f?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}),"Creando..."]}):"Crear Curso"}),i.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:f,children:"Cancelar"})]})]})]})})}function I3(){const{profile:e}=it(),{programs:t,loading:n,error:r,refetch:s}=hg(),{toast:a}=Ve(),o=Gn(),[l,c]=m.useState(!1),[u,d]=m.useState(!1),[f,p]=m.useState(null),h=((e==null?void 0:e.role)||"").toString(),b=["formador","teacher","profesor","admin"].includes(h),g=()=>{c(!0)},w=(v,y)=>{p({id:v,title:y}),d(!0)},x=async(v,y)=>{if(confirm(`¿Estás seguro de que quieres eliminar el programa "${y}"?`))try{const{error:j}=await D.from("programs").delete().eq("id",v);if(j)throw j;a({title:"Programa eliminado",description:`El programa "${y}" ha sido eliminado exitosamente`}),s()}catch{a({title:"Error",description:"No se pudo eliminar el programa",variant:"destructive"})}};return n?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):r?i.jsx("div",{className:"text-center py-8",children:i.jsxs("p",{className:"text-destructive",children:["Error al cargar programas: ",r]})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Programas"}),i.jsx("p",{className:"text-muted-foreground",children:b?"Gestiona los programas de estudio":"Explora los programas disponibles"})]}),b&&i.jsx("div",{className:"flex gap-2",children:i.jsxs(V,{className:"gap-2",onClick:g,children:[i.jsx(qn,{className:"h-4 w-4"}),"Nuevo Programa"]})})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.map(v=>{var N,C,A;const y=((N=v.courses)==null?void 0:N.reduce((R,O)=>R+(O.progress_percent||0),0))/(((C=v.courses)==null?void 0:C.length)||1)||0,j=y>0,S=((A=v.courses)==null?void 0:A.length)||0,_=!!v.published_at;return i.jsxs(K,{className:"cursor-pointer hover:shadow-lg transition-shadow group",children:[i.jsxs("div",{className:"aspect-[2/3] relative overflow-hidden rounded-t-lg",children:[v.poster_2x3_url||v.wide_11x6_url?i.jsx("img",{src:v.poster_2x3_url||v.wide_11x6_url,alt:v.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):i.jsx("div",{className:`w-full h-full bg-gradient-to-br ${_?"from-accent/20 to-accent/10":"from-muted/20 to-muted/10"} flex items-center justify-center`,children:i.jsx(qe,{className:`h-16 w-16 ${_?"text-accent":"text-muted"}`})}),j&&_&&i.jsx("div",{className:"absolute top-3 left-3",children:i.jsxs(Ee,{className:"bg-accent text-white",children:[Math.round(y),"% completo"]})})]}),i.jsxs(Q,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:v.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-3",children:v.summary||"Descubre los secretos de la geometría sagrada"}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx(Ee,{variant:_?"default":"secondary",children:_?"Publicado":"Borrador"}),i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(qe,{className:"h-3 w-3"}),i.jsxs("span",{children:[S," cursos"]})]})]}),v.courses&&v.courses.length>0&&i.jsxs("div",{className:"mb-3",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Cursos incluidos:"}),i.jsxs("div",{className:"space-y-1",children:[v.courses.slice(0,3).map(R=>i.jsxs("div",{className:"text-xs text-foreground flex items-center justify-between",children:[i.jsx("span",{className:"truncate",children:R.title}),R.progress_percent!==void 0&&i.jsxs("span",{className:"text-muted-foreground ml-2",children:[R.progress_percent,"%"]})]},R.id)),v.courses.length>3&&i.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",v.courses.length-3," cursos más"]})]})]}),i.jsx("div",{className:"flex gap-2",children:b?i.jsxs(i.Fragment,{children:[i.jsx(V,{size:"sm",variant:"outline",onClick:()=>o(`/programas/${v.slug}`),children:"Editar"}),i.jsx(V,{size:"sm",variant:"secondary",onClick:()=>w(v.id,v.title),children:"+ Curso"}),i.jsx(V,{size:"sm",variant:"destructive",onClick:()=>x(v.id,v.title),children:"Eliminar"}),i.jsx(V,{size:"sm",onClick:()=>o(`/programa/${v.slug}`),children:"Ver"})]}):i.jsx(V,{size:"sm",className:"w-full",disabled:!_,children:_?j?"Continuar":"Comenzar":"No Disponible"})}),j&&_&&i.jsx("div",{className:"w-full bg-border rounded-full h-1.5 mt-2",children:i.jsx("div",{className:"bg-accent h-1.5 rounded-full transition-all duration-300",style:{width:`${y}%`}})})]})]},v.id)}),b&&i.jsx(K,{className:"border-dashed",children:i.jsxs(Q,{className:"p-6 flex flex-col items-center justify-center text-center aspect-[2/3]",children:[i.jsx(qn,{className:"h-12 w-12 text-muted-foreground mb-4"}),i.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Crear Programa"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Agrega un nuevo programa de estudio"}),i.jsx(V,{onClick:g,children:"Crear Programa"})]})})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Total"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:t.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Programas"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rn,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Cursos"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:t.reduce((v,y)=>{var j;return v+(((j=y.courses)==null?void 0:j.length)||0)},0)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Disponibles"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ts,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Publicados"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:t.filter(v=>v.published_at).length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Activos"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Borradores"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:t.filter(v=>!v.published_at).length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"En desarrollo"})]})})]}),i.jsx(cN,{open:l,onOpenChange:c,onSuccess:s}),f&&i.jsx(A3,{open:u,onOpenChange:d,onSuccess:s,programId:f.id,programTitle:f.title})]})}function O3({open:e,onOpenChange:t,programId:n,programTitle:r,onSuccess:s}){const[a,o]=m.useState([]),[l,c]=m.useState([]),[u,d]=m.useState(""),[f,p]=m.useState(!1),{toast:h}=Ve();m.useEffect(()=>{e&&b()},[e,n]);const b=async()=>{try{const{data:S}=await D.from("enrollments").select("user_id").eq("program_id",n),_=(S==null?void 0:S.map(A=>A.user_id))||[],{data:N,error:C}=await D.from("profiles").select("id, full_name, role").not("id","in",`(${_.join(",")||"NULL"})`).order("full_name");if(C)throw C;o(N||[])}catch{h({title:"Error",description:"No se pudieron cargar los usuarios disponibles",variant:"destructive"})}},g=S=>{c(_=>_.includes(S)?_.filter(N=>N!==S):[..._,S])},w=async()=>{if(l.length===0){h({title:"Error",description:"Selecciona al menos un usuario",variant:"destructive"});return}p(!0);try{const S=l.map(N=>({user_id:N,program_id:n,status:"active",progress_percent:0})),{error:_}=await D.from("enrollments").upsert(S,{onConflict:"user_id,program_id"});if(_)throw _;h({title:"Usuarios inscritos",description:`Se inscribieron ${l.length} usuario(s) al programa "${r}"`}),c([]),t(!1),s()}catch{h({title:"Error",description:"No se pudieron inscribir los usuarios al programa",variant:"destructive"})}finally{p(!1)}},x=a.filter(S=>S.full_name.toLowerCase().includes(u.toLowerCase())),v=S=>S.split(" ").map(_=>_[0]).join("").toUpperCase(),y=S=>{switch(S){case"formador":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"voluntario":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300";case"admin":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300";default:return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300"}},j=S=>{switch(S){case"formador":return"Formador";case"voluntario":return"Voluntario";case"admin":return"Admin";default:return"Estudiante"}};return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[700px] max-h-[80vh] overflow-hidden flex flex-col",children:[i.jsx(kt,{children:i.jsxs(Ct,{children:["Inscribir Usuarios - ",r]})}),i.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Buscar usuarios"}),i.jsxs("div",{className:"relative",children:[i.jsx(Qu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(ve,{placeholder:"Buscar por nombre...",value:u,onChange:S=>d(S.target.value),className:"pl-10"})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto space-y-3",children:x.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(rn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay usuarios disponibles para inscribir"}),i.jsx("p",{className:"text-sm mt-2",children:u?"Prueba con otros términos de búsqueda":"Todos los usuarios ya están inscritos en este programa"})]}):x.map(S=>i.jsx(K,{className:"cursor-pointer hover:bg-muted/50",children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(hn,{checked:l.includes(S.id),onCheckedChange:()=>g(S.id)}),i.jsx(ss,{className:"h-10 w-10",children:i.jsx(is,{children:v(S.full_name)})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-foreground",children:S.full_name}),i.jsx(Ee,{className:`text-xs ${y(S.role)}`,children:j(S.role)})]})]})})},S.id))})]}),i.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[i.jsx(V,{onClick:w,disabled:f||l.length===0,className:"flex-1",children:f?"Inscribiendo...":`Inscribir ${l.length} usuario(s)`}),i.jsx(V,{variant:"outline",onClick:()=>t(!1),disabled:f,children:"Cancelar"})]})]})})}function L3(){const{slug:e}=Rl(),t=Gn(),{profile:n}=it(),{toast:r}=Ve(),[s,a]=m.useState(null),[o,l]=m.useState([]),[c,u]=m.useState(!0),[d,f]=m.useState(!1),[p,h]=m.useState(!1),[b,g]=m.useState(!1),[w,x]=m.useState(!1),[v,y]=m.useState({title:"",summary:"",poster_2x3_url:"",wide_11x6_url:""}),j=(n==null?void 0:n.role)==="formador"||(n==null?void 0:n.role)==="admin";m.useEffect(()=>{e&&S()},[e]);const S=async()=>{u(!0);try{const{data:T,error:z}=await D.from("programs").select("*").eq("slug",e).single();if(z)throw z;a(T),y({title:T.title,summary:T.summary||"",poster_2x3_url:T.poster_2x3_url||"",wide_11x6_url:T.wide_11x6_url||""});const{data:I,error:B}=await D.from("program_courses").select(`
          courses (
            id,
            title,
            summary,
            slug,
            sort_order,
            published_at
          )
        `).eq("program_id",T.id).order("sort_order");if(B)throw B;l((I==null?void 0:I.map($=>$.courses).filter(Boolean))||[])}catch{r({title:"Error",description:"No se pudo cargar el programa",variant:"destructive"}),t("/programas")}finally{u(!1)}},_=async()=>{if(s){h(!0);try{const{error:T}=await D.from("programs").update({title:v.title,summary:v.summary||null,poster_2x3_url:v.poster_2x3_url||null,wide_11x6_url:v.wide_11x6_url||null}).eq("id",s.id);if(T)throw T;r({title:"Programa actualizado",description:"Los cambios han sido guardados exitosamente"}),a({...s,title:v.title,summary:v.summary,poster_2x3_url:v.poster_2x3_url,wide_11x6_url:v.wide_11x6_url}),f(!1)}catch{r({title:"Error",description:"No se pudo actualizar el programa",variant:"destructive"})}finally{h(!1)}}},N=async()=>{if(!s)return;const T=s.published_at?null:new Date().toISOString();try{const{error:z}=await D.from("programs").update({published_at:T}).eq("id",s.id);if(z)throw z;a({...s,published_at:T}),r({title:T?"Programa publicado":"Programa despublicado",description:T?"El programa ya está visible para los estudiantes":"El programa ya no es visible para los estudiantes"})}catch{r({title:"Error",description:"No se pudo cambiar el estado del programa",variant:"destructive"})}};if(c)return i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!s)return i.jsxs("div",{className:"text-center py-8",children:[i.jsx("p",{className:"text-destructive",children:"Programa no encontrado"}),i.jsx(V,{onClick:()=>t("/programas"),className:"mt-4",children:"Volver a Programas"})]});const C=!!s.published_at,A=T=>T.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),R=(T,z)=>{if(!T)return!1;const I=T.trim(),B=A(I).replace(/\s+/g,"-"),$=z?A(z):"";return!!($&&(B===$||B===$.replace(/\//g,"-"))||!I.includes(" ")&&(I.includes("-")||I.includes("/"))||(I.match(/-/g)||[]).length>=2&&I.split(" ").length<=2)},O=s.summary&&!R(s.summary,s.slug)?s.summary:null;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>t("/mi-formacion"),children:[i.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Mi Formación"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:s.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[j&&i.jsx(Ee,{variant:C?"default":"secondary",children:C?"Publicado":"Borrador"}),i.jsx("span",{className:"text-muted-foreground",children:"•"}),i.jsxs("span",{className:"text-muted-foreground",children:[o.length," cursos"]})]})]})]}),j&&i.jsx("div",{className:"flex gap-2",children:d?i.jsxs(i.Fragment,{children:[i.jsxs(V,{onClick:_,disabled:p,children:[p?i.jsx(Be,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(gj,{className:"h-4 w-4 mr-2"}),"Guardar"]}),i.jsxs(V,{variant:"outline",onClick:()=>f(!1),disabled:p,children:[i.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]}):i.jsxs(i.Fragment,{children:[i.jsxs(V,{onClick:()=>f(!0),children:[i.jsx(pj,{className:"h-4 w-4 mr-2"}),"Editar"]}),i.jsx(V,{variant:C?"destructive":"default",onClick:N,children:C?"Despublicar":"Publicar"})]})})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Detalles del Programa"})}),i.jsx(Q,{className:"space-y-4",children:d?i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(X,{children:"Título"}),i.jsx(ve,{value:v.title,onChange:T=>y({...v,title:T.target.value})})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Resumen"}),i.jsx(At,{value:v.summary,onChange:T=>y({...v,summary:T.target.value}),rows:4})]}),i.jsx(Ks,{label:"Imagen Poster (2x3)",value:v.poster_2x3_url,onChange:T=>y({...v,poster_2x3_url:T}),aspectRatio:"2/3"}),i.jsx(Ks,{label:"Imagen Wide (11x6)",value:v.wide_11x6_url,onChange:T=>y({...v,wide_11x6_url:T}),aspectRatio:"11/6"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"aspect-[2/3] relative overflow-hidden rounded-lg",children:s.poster_2x3_url||s.wide_11x6_url?i.jsx("img",{src:s.poster_2x3_url||s.wide_11x6_url,alt:s.title,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/20 to-accent/10 flex items-center justify-center",children:i.jsx(qe,{className:"h-16 w-16 text-accent"})})}),O&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Resumen"}),i.jsx("p",{className:"text-muted-foreground",children:O})]})]})})]})}),i.jsx("div",{className:"lg:col-span-2",children:i.jsxs(K,{children:[i.jsxs(ye,{className:"flex flex-row items-center justify-between",children:[i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-5 w-5 text-accent"}),"Cursos (",o.length,")"]}),j&&i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(V,{size:"sm",onClick:()=>g(!0),children:[i.jsx(qn,{className:"h-4 w-4 mr-2"}),"Agregar Cursos"]}),i.jsxs(V,{size:"sm",variant:"outline",onClick:()=>x(!0),children:[i.jsx(rn,{className:"h-4 w-4 mr-2"}),"Inscribir Usuarios"]})]})]}),i.jsx(Q,{children:o.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(qe,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Sin cursos"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Este programa aún no tiene cursos asignados"}),j&&i.jsx(V,{onClick:()=>t("/cursos"),children:"Crear Primer Curso"})]}):i.jsx("div",{className:"space-y-3",children:o.map((T,z)=>i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/10 cursor-pointer group",onClick:()=>t(`/ver-curso/${T.slug}`),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground font-mono w-8",children:String(z+1).padStart(2,"0")}),i.jsx("div",{children:i.jsx("h4",{className:"font-medium group-hover:text-accent transition-colors",children:T.title})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[j&&i.jsxs(i.Fragment,{children:[i.jsx(Ee,{variant:T.published_at?"default":"secondary",children:T.published_at?"Publicado":"Borrador"}),i.jsx(V,{size:"sm",variant:"outline",onClick:I=>{I.stopPropagation(),t(`/curso/${T.id}/edit`)},children:"Editar"})]}),i.jsx(V,{size:"sm",onClick:I=>{I.stopPropagation(),t(`/ver-curso/${T.slug}?from=programa&programa=${s==null?void 0:s.slug}`)},className:"btn-modern",children:"Empezar"})]})]},T.id))})})]})})]}),s&&i.jsxs(i.Fragment,{children:[i.jsx(SN,{open:b,onOpenChange:g,programId:s.id,onSuccess:S}),i.jsx(O3,{open:w,onOpenChange:x,programId:s.id,programTitle:s.title,onSuccess:()=>{}})]})]})}function M3(){const{profile:e,user:t}=it(),n=Gn(),{toast:r}=Ve(),[s,a]=m.useState([]),[o,l]=m.useState(!0),[c,u]=m.useState(!1),d=((e==null?void 0:e.role)||"").toString(),f=["formador","teacher","profesor","admin"].includes(d);m.useEffect(()=>{p()},[e==null?void 0:e.role]);const p=async()=>{l(!0);try{if(f){const{data:R,error:O}=await D.from("courses").select(`
            id,
            title,
            summary,
            slug,
            sort_order,
            poster_2x3_url,
            wide_11x6_url,
            published_at,
            program_courses (
              program_id,
              programs (title)
            )
          `).order("sort_order");if(O)throw O;const T={};(R||[]).forEach(I=>{var $,L,M;const B=((M=(L=($=I.program_courses)==null?void 0:$[0])==null?void 0:L.programs)==null?void 0:M.title)||"Sin programa";T[B]||(T[B]=[]),T[B].push(I)});const z=Object.entries(T).map(([I,B])=>({programTitle:I,courses:B})).sort((I,B)=>I.programTitle.localeCompare(B.programTitle));a(z);return}if(!t){a([]);return}const{data:w,error:x}=await D.from("course_enrollments").select("course_id").eq("user_id",t.id).eq("status","active");if(x)throw x;const v=(w||[]).map(R=>R.course_id),{data:y,error:j}=await D.from("courses").select(`
          id,
          title,
          summary,
          slug,
          sort_order,
          poster_2x3_url,
          wide_11x6_url,
          published_at,
          program_courses (program_id)
        `).in("id",v.length>0?v:["00000000-0000-0000-0000-000000000000"]).not("published_at","is",null).order("sort_order");if(j)throw j;const S=(y||[]).filter(R=>!R.program_courses||R.program_courses.length===0),{data:_}=await D.from("enrollments").select("program_id").eq("user_id",t.id).eq("status","active"),N=(_||[]).map(R=>R.program_id);let C=[];if(N.length>0){const{data:R}=await D.from("program_courses").select("program_id, courses (id, title, summary, slug, poster_2x3_url, wide_11x6_url, published_at)").in("program_id",N).order("program_id");C=R||[]}const A=[];if(C.length>0){const R={};for(const O of C){const T=O.courses;T&&(R[O.program_id]||(R[O.program_id]=[]),R[O.program_id].push(T))}for(const O of Object.keys(R))A.push({programTitle:"Cursos del Programa",courses:R[O]})}S.length>0&&A.push({programTitle:"Mis cursos individuales",courses:S}),a(A)}catch{r({title:"Error",description:"No se pudieron cargar los cursos",variant:"destructive"})}finally{l(!1)}},h=w=>{n(`/curso/${w}`)},b=()=>{u(!0)},g=async(w,x)=>{if(confirm(`¿Estás seguro de que quieres eliminar el curso "${x}"?`))try{const{error:v}=await D.from("courses").delete().eq("id",w);if(v)throw v;r({title:"Curso eliminado",description:`El curso "${x}" ha sido eliminado exitosamente`}),p()}catch{r({title:"Error",description:"No se pudo eliminar el curso",variant:"destructive"})}};return o?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Cursos"}),i.jsx("p",{className:"text-muted-foreground",children:f?"Gestiona los cursos de los programas":"Explora los cursos disponibles"})]}),f&&i.jsxs(V,{className:"gap-2",onClick:b,children:[i.jsx(qn,{className:"h-4 w-4"}),"Nuevo Curso"]})]}),i.jsxs("div",{className:"space-y-6",children:[s.map(w=>i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-5 w-5 text-accent"}),w.programTitle]})}),i.jsx(Q,{children:i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:w.courses.map(x=>{const v=!!x.published_at;return i.jsxs(K,{children:[i.jsx("div",{className:"aspect-[11/6] relative overflow-hidden rounded-t-lg",children:x.poster_2x3_url||x.wide_11x6_url?i.jsx("img",{src:x.poster_2x3_url||x.wide_11x6_url,alt:x.title,className:"w-full h-full object-cover"}):i.jsx("div",{className:`w-full h-full bg-gradient-to-r ${v?"from-accent/20 to-accent/10":"from-muted/20 to-muted/10"} flex items-center justify-center`,children:i.jsx(Lr,{className:`h-8 w-8 ${v?"text-accent":"text-muted"}`})})}),i.jsxs(Q,{className:"p-4",children:[i.jsx("h4",{className:"font-semibold text-foreground mb-2 line-clamp-2",children:x.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:x.summary||"Curso de geometría sagrada"}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx(Ee,{variant:v?"default":"secondary",children:v?"Publicado":"Borrador"}),f&&i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(rn,{className:"h-3 w-3"}),i.jsx("span",{children:"0 estudiantes"})]})]}),i.jsx("div",{className:"flex gap-2",children:f?i.jsxs(i.Fragment,{children:[i.jsx(V,{size:"sm",variant:"outline",onClick:()=>n(`/curso/${x.id}/edit`),children:"Editar"}),i.jsx(V,{size:"sm",variant:"destructive",onClick:()=>g(x.id,x.title),children:"Eliminar"}),i.jsx(V,{size:"sm",onClick:()=>h(x.slug),children:"Ver"})]}):i.jsx(V,{size:"sm",className:"w-full",onClick:()=>h(x.slug),disabled:!v,children:v?"Empezar":"No Disponible"})})]})]},x.id)})})})]},w.programTitle)),f&&i.jsx(K,{className:"border-dashed",children:i.jsxs(Q,{className:"p-6 flex flex-col items-center justify-center text-center",children:[i.jsx(qn,{className:"h-12 w-12 text-muted-foreground mb-4"}),i.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Crear Curso"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Agrega un nuevo curso a un programa existente"}),i.jsx(V,{onClick:b,children:"Crear Curso"})]})})]}),i.jsx(uN,{open:c,onOpenChange:u,onSuccess:p})]})}function D3(){const{courseId:e}=Rl(),t=Gn(),{profile:n}=it(),{toast:r}=Ve(),[s,a]=m.useState(null),[o,l]=m.useState([]),[c,u]=m.useState(!0),[d,f]=m.useState(!1),[p,h]=m.useState(!1),[b,g]=m.useState({title:"",summary:"",slug:"",poster_2x3_url:"",wide_11x6_url:"",program_id:""}),w=(n==null?void 0:n.role)==="formador"||(n==null?void 0:n.role)==="admin";m.useEffect(()=>{e&&(v(),x())},[e]);const x=async()=>{const{data:C}=await D.from("programs").select("id, title").order("title");l(C||[])},v=async()=>{var C,A;u(!0);try{window.location.pathname.includes("/edit")&&f(!0);const{data:O,error:T}=await D.from("courses").select(`
          *,
          program_courses!inner (program_id)
        `).eq("id",e).single();if(T)throw T;const z={...O,program_id:((A=(C=O.program_courses)==null?void 0:C[0])==null?void 0:A.program_id)||""};a(z),g({title:z.title,summary:z.summary||"",slug:z.slug,poster_2x3_url:z.poster_2x3_url||"",wide_11x6_url:z.wide_11x6_url||"",program_id:z.program_id})}catch{r({title:"Error",description:"No se pudo cargar el curso",variant:"destructive"}),t("/cursos")}finally{u(!1)}},y=C=>C.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),j=async()=>{if(s){h(!0);try{const{error:C}=await D.from("courses").update({title:b.title,summary:b.summary||null,slug:b.slug,poster_2x3_url:b.poster_2x3_url||null,wide_11x6_url:b.wide_11x6_url||null}).eq("id",s.id);if(C)throw C;if(b.program_id!==s.program_id&&(s.program_id&&await D.from("program_courses").delete().eq("course_id",s.id).eq("program_id",s.program_id),b.program_id)){const{error:A}=await D.from("program_courses").insert({program_id:b.program_id,course_id:s.id,sort_order:0});if(A)throw A}r({title:"Curso actualizado",description:"Los cambios han sido guardados exitosamente"}),a({...s,title:b.title,summary:b.summary,slug:b.slug,poster_2x3_url:b.poster_2x3_url,wide_11x6_url:b.wide_11x6_url,program_id:b.program_id}),f(!1)}catch{r({title:"Error",description:"No se pudo actualizar el curso",variant:"destructive"})}finally{h(!1)}}},S=async()=>{if(!s)return;const C=s.published_at?null:new Date().toISOString();try{const{error:A}=await D.from("courses").update({published_at:C}).eq("id",s.id);if(A)throw A;a({...s,published_at:C}),r({title:C?"Curso publicado":"Curso despublicado",description:C?"El curso ya está visible para los estudiantes":"El curso ya no es visible para los estudiantes"})}catch{r({title:"Error",description:"No se pudo cambiar el estado del curso",variant:"destructive"})}};if(c)return i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!s)return i.jsxs("div",{className:"text-center py-8",children:[i.jsx("p",{className:"text-destructive",children:"Curso no encontrado"}),i.jsx(V,{onClick:()=>t("/cursos"),className:"mt-4",children:"Volver a Cursos"})]});const _=!!s.published_at,N=o.find(C=>C.id===s.program_id);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>t("/cursos"),children:[i.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Cursos"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:s.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Ee,{variant:_?"default":"secondary",children:_?"Publicado":"Borrador"}),N&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-muted-foreground",children:"•"}),i.jsx("span",{className:"text-muted-foreground",children:N.title})]})]})]})]}),w&&i.jsx("div",{className:"flex gap-2",children:d?i.jsxs(i.Fragment,{children:[i.jsxs(V,{onClick:j,disabled:p,children:[p?i.jsx(Be,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(gj,{className:"h-4 w-4 mr-2"}),"Guardar"]}),i.jsxs(V,{variant:"outline",onClick:()=>f(!1),disabled:p,children:[i.jsx(Ga,{className:"h-4 w-4 mr-2"}),"Cancelar"]})]}):i.jsxs(i.Fragment,{children:[i.jsxs(V,{onClick:()=>f(!0),children:[i.jsx(pj,{className:"h-4 w-4 mr-2"}),"Editar"]}),i.jsx(V,{variant:_?"destructive":"default",onClick:S,children:_?"Despublicar":"Publicar"})]})})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Detalles del Curso"})}),i.jsx(Q,{className:"space-y-4",children:d?i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(X,{children:"Título"}),i.jsx(ve,{value:b.title,onChange:C=>{const A=C.target.value;g({...b,title:A,slug:y(A)})}})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Slug (URL)"}),i.jsx(ve,{value:b.slug,onChange:C=>g({...b,slug:C.target.value})})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Programa"}),i.jsxs(ot,{value:b.program_id,onValueChange:C=>g({...b,program_id:C}),children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Seleccionar programa"})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"",children:"Sin programa"}),o.map(C=>i.jsx(fe,{value:C.id,children:C.title},C.id))]})]})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Resumen"}),i.jsx(At,{value:b.summary,onChange:C=>g({...b,summary:C.target.value}),rows:4})]}),i.jsx(Ks,{label:"Imagen Poster (2x3)",value:b.poster_2x3_url,onChange:C=>g({...b,poster_2x3_url:C}),aspectRatio:"2/3"}),i.jsx(Ks,{label:"Imagen Wide (11x6)",value:b.wide_11x6_url,onChange:C=>g({...b,wide_11x6_url:C}),aspectRatio:"11/6"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Información General"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Programa:"}),i.jsx("span",{children:(N==null?void 0:N.title)||"Sin asignar"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"URL:"}),i.jsxs("span",{className:"font-mono text-sm",children:["/curso/",s.slug]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Estado:"}),i.jsx(Ee,{variant:_?"default":"secondary",children:_?"Publicado":"Borrador"})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Resumen"}),i.jsx("p",{className:"text-muted-foreground",children:s.summary||"Sin descripción disponible"})]})]})})]})}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Imagen del Curso"})}),i.jsx(Q,{children:i.jsx("div",{className:"aspect-[11/6] relative overflow-hidden rounded-lg",children:s.poster_2x3_url||s.wide_11x6_url?i.jsx("img",{src:s.poster_2x3_url||s.wide_11x6_url,alt:s.title,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/20 to-accent/10 flex items-center justify-center",children:i.jsx(Lr,{className:"h-16 w-16 text-accent"})})})})]}),w&&i.jsxs(K,{className:"mt-4",children:[i.jsx(ye,{children:i.jsx(we,{children:"Acciones Rápidas"})}),i.jsxs(Q,{className:"space-y-2",children:[i.jsxs(V,{className:"w-full",variant:"outline",children:[i.jsx(qe,{className:"h-4 w-4 mr-2"}),"Ver Lecciones"]}),i.jsx(V,{className:"w-full",variant:"outline",children:"Gestionar Contenido"}),i.jsx(V,{className:"w-full",variant:"outline",children:"Ver Estudiantes"})]})]})]})]})]})}function F3({videoUrl:e,title:t}){const[n,r]=m.useState(!0),a=(o=>{var l,c;return o.includes("youtube.com/watch?v=")?`https://www.youtube.com/embed/${(l=o.split("v=")[1])==null?void 0:l.split("&")[0]}?autoplay=0&rel=0&modestbranding=1`:o.includes("youtu.be/")?`https://www.youtube.com/embed/${(c=o.split("youtu.be/")[1])==null?void 0:c.split("?")[0]}?autoplay=0&rel=0&modestbranding=1`:o})(e);return i.jsx(K,{className:"overflow-hidden",children:i.jsxs("div",{className:"relative aspect-video bg-black",children:[n&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-muted",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Cargando video..."})]})}),i.jsx("iframe",{src:a,title:t,className:"w-full h-full",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",onLoad:()=>r(!1)})]})})}function $3(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const z3=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,U3=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,B3={};function vy(e,t){return(B3.jsx?U3:z3).test(e)}const V3=/[ \t\n\f\r]/g;function q3(e){return typeof e=="object"?e.type==="text"?yy(e.value):!1:yy(e)}function yy(e){return e.replace(V3,"")===""}class Ml{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Ml.prototype.normal={};Ml.prototype.property={};Ml.prototype.space=void 0;function UN(e,t){const n={},r={};for(const s of e)Object.assign(n,s.property),Object.assign(r,s.normal);return new Ml(n,r,t)}function Cm(e){return e.toLowerCase()}class wn{constructor(t,n){this.attribute=n,this.property=t}}wn.prototype.attribute="";wn.prototype.booleanish=!1;wn.prototype.boolean=!1;wn.prototype.commaOrSpaceSeparated=!1;wn.prototype.commaSeparated=!1;wn.prototype.defined=!1;wn.prototype.mustUseProperty=!1;wn.prototype.number=!1;wn.prototype.overloadedBoolean=!1;wn.prototype.property="";wn.prototype.spaceSeparated=!1;wn.prototype.space=void 0;let W3=0;const Te=$i(),jt=$i(),Em=$i(),te=$i(),Xe=$i(),ya=$i(),Sn=$i();function $i(){return 2**++W3}const Pm=Object.freeze(Object.defineProperty({__proto__:null,boolean:Te,booleanish:jt,commaOrSpaceSeparated:Sn,commaSeparated:ya,number:te,overloadedBoolean:Em,spaceSeparated:Xe},Symbol.toStringTag,{value:"Module"})),Of=Object.keys(Pm);class _g extends wn{constructor(t,n,r,s){let a=-1;if(super(t,n),wy(this,"space",s),typeof r=="number")for(;++a<Of.length;){const o=Of[a];wy(this,Of[a],(r&Pm[o])===Pm[o])}}}_g.prototype.defined=!0;function wy(e,t,n){n&&(e[t]=n)}function ro(e){const t={},n={};for(const[r,s]of Object.entries(e.properties)){const a=new _g(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[Cm(r)]=r,n[Cm(a.attribute)]=r}return new Ml(t,n,e.space)}const BN=ro({properties:{ariaActiveDescendant:null,ariaAtomic:jt,ariaAutoComplete:null,ariaBusy:jt,ariaChecked:jt,ariaColCount:te,ariaColIndex:te,ariaColSpan:te,ariaControls:Xe,ariaCurrent:null,ariaDescribedBy:Xe,ariaDetails:null,ariaDisabled:jt,ariaDropEffect:Xe,ariaErrorMessage:null,ariaExpanded:jt,ariaFlowTo:Xe,ariaGrabbed:jt,ariaHasPopup:null,ariaHidden:jt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Xe,ariaLevel:te,ariaLive:null,ariaModal:jt,ariaMultiLine:jt,ariaMultiSelectable:jt,ariaOrientation:null,ariaOwns:Xe,ariaPlaceholder:null,ariaPosInSet:te,ariaPressed:jt,ariaReadOnly:jt,ariaRelevant:null,ariaRequired:jt,ariaRoleDescription:Xe,ariaRowCount:te,ariaRowIndex:te,ariaRowSpan:te,ariaSelected:jt,ariaSetSize:te,ariaSort:null,ariaValueMax:te,ariaValueMin:te,ariaValueNow:te,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function VN(e,t){return t in e?e[t]:t}function qN(e,t){return VN(e,t.toLowerCase())}const H3=ro({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ya,acceptCharset:Xe,accessKey:Xe,action:null,allow:null,allowFullScreen:Te,allowPaymentRequest:Te,allowUserMedia:Te,alt:null,as:null,async:Te,autoCapitalize:null,autoComplete:Xe,autoFocus:Te,autoPlay:Te,blocking:Xe,capture:null,charSet:null,checked:Te,cite:null,className:Xe,cols:te,colSpan:null,content:null,contentEditable:jt,controls:Te,controlsList:Xe,coords:te|ya,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Te,defer:Te,dir:null,dirName:null,disabled:Te,download:Em,draggable:jt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Te,formTarget:null,headers:Xe,height:te,hidden:Em,high:te,href:null,hrefLang:null,htmlFor:Xe,httpEquiv:Xe,id:null,imageSizes:null,imageSrcSet:null,inert:Te,inputMode:null,integrity:null,is:null,isMap:Te,itemId:null,itemProp:Xe,itemRef:Xe,itemScope:Te,itemType:Xe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Te,low:te,manifest:null,max:null,maxLength:te,media:null,method:null,min:null,minLength:te,multiple:Te,muted:Te,name:null,nonce:null,noModule:Te,noValidate:Te,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Te,optimum:te,pattern:null,ping:Xe,placeholder:null,playsInline:Te,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Te,referrerPolicy:null,rel:Xe,required:Te,reversed:Te,rows:te,rowSpan:te,sandbox:Xe,scope:null,scoped:Te,seamless:Te,selected:Te,shadowRootClonable:Te,shadowRootDelegatesFocus:Te,shadowRootMode:null,shape:null,size:te,sizes:null,slot:null,span:te,spellCheck:jt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:te,step:null,style:null,tabIndex:te,target:null,title:null,translate:null,type:null,typeMustMatch:Te,useMap:null,value:jt,width:te,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Xe,axis:null,background:null,bgColor:null,border:te,borderColor:null,bottomMargin:te,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Te,declare:Te,event:null,face:null,frame:null,frameBorder:null,hSpace:te,leftMargin:te,link:null,longDesc:null,lowSrc:null,marginHeight:te,marginWidth:te,noResize:Te,noHref:Te,noShade:Te,noWrap:Te,object:null,profile:null,prompt:null,rev:null,rightMargin:te,rules:null,scheme:null,scrolling:jt,standby:null,summary:null,text:null,topMargin:te,valueType:null,version:null,vAlign:null,vLink:null,vSpace:te,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Te,disableRemotePlayback:Te,prefix:null,property:null,results:te,security:null,unselectable:null},space:"html",transform:qN}),G3=ro({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Sn,accentHeight:te,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:te,amplitude:te,arabicForm:null,ascent:te,attributeName:null,attributeType:null,azimuth:te,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:te,by:null,calcMode:null,capHeight:te,className:Xe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:te,diffuseConstant:te,direction:null,display:null,dur:null,divisor:te,dominantBaseline:null,download:Te,dx:null,dy:null,edgeMode:null,editable:null,elevation:te,enableBackground:null,end:null,event:null,exponent:te,externalResourcesRequired:null,fill:null,fillOpacity:te,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ya,g2:ya,glyphName:ya,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:te,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:te,horizOriginX:te,horizOriginY:te,id:null,ideographic:te,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:te,k:te,k1:te,k2:te,k3:te,k4:te,kernelMatrix:Sn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:te,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:te,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:te,overlineThickness:te,paintOrder:null,panose1:null,path:null,pathLength:te,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Xe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:te,pointsAtY:te,pointsAtZ:te,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Sn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Sn,rev:Sn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Sn,requiredFeatures:Sn,requiredFonts:Sn,requiredFormats:Sn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:te,specularExponent:te,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:te,strikethroughThickness:te,string:null,stroke:null,strokeDashArray:Sn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:te,strokeOpacity:te,strokeWidth:null,style:null,surfaceScale:te,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Sn,tabIndex:te,tableValues:null,target:null,targetX:te,targetY:te,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Sn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:te,underlineThickness:te,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:te,values:null,vAlphabetic:te,vMathematical:te,vectorEffect:null,vHanging:te,vIdeographic:te,version:null,vertAdvY:te,vertOriginX:te,vertOriginY:te,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:te,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:VN}),WN=ro({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),HN=ro({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:qN}),GN=ro({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),K3={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Q3=/[A-Z]/g,by=/-[a-z]/g,Y3=/^data[-\w.:]+$/i;function X3(e,t){const n=Cm(t);let r=t,s=wn;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Y3.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(by,Z3);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!by.test(a)){let o=a.replace(Q3,J3);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}s=_g}return new s(r,t)}function J3(e){return"-"+e.toLowerCase()}function Z3(e){return e.charAt(1).toUpperCase()}const eF=UN([BN,H3,WN,HN,GN],"html"),Sg=UN([BN,G3,WN,HN,GN],"svg");function tF(e){return e.join(" ").trim()}var Ng={},jy=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,nF=/\n/g,rF=/^\s*/,sF=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,iF=/^:\s*/,aF=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,oF=/^[;\s]*/,lF=/^\s+|\s+$/g,cF=`
`,_y="/",Sy="*",di="",uF="comment",dF="declaration",fF=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(b){var g=b.match(nF);g&&(n+=g.length);var w=b.lastIndexOf(cF);r=~w?b.length-w:r+b.length}function a(){var b={line:n,column:r};return function(g){return g.position=new o(b),u(),g}}function o(b){this.start=b,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(b){var g=new Error(t.source+":"+n+":"+r+": "+b);if(g.reason=b,g.filename=t.source,g.line=n,g.column=r,g.source=e,!t.silent)throw g}function c(b){var g=b.exec(e);if(g){var w=g[0];return s(w),e=e.slice(w.length),g}}function u(){c(rF)}function d(b){var g;for(b=b||[];g=f();)g!==!1&&b.push(g);return b}function f(){var b=a();if(!(_y!=e.charAt(0)||Sy!=e.charAt(1))){for(var g=2;di!=e.charAt(g)&&(Sy!=e.charAt(g)||_y!=e.charAt(g+1));)++g;if(g+=2,di===e.charAt(g-1))return l("End of comment missing");var w=e.slice(2,g-2);return r+=2,s(w),e=e.slice(g),r+=2,b({type:uF,comment:w})}}function p(){var b=a(),g=c(sF);if(g){if(f(),!c(iF))return l("property missing ':'");var w=c(aF),x=b({type:dF,property:Ny(g[0].replace(jy,di)),value:w?Ny(w[0].replace(jy,di)):di});return c(oF),x}}function h(){var b=[];d(b);for(var g;g=p();)g!==!1&&(b.push(g),d(b));return b}return u(),h()};function Ny(e){return e?e.replace(lF,di):di}var hF=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ng,"__esModule",{value:!0});Ng.default=pF;var mF=hF(fF);function pF(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,mF.default)(e),s=typeof t=="function";return r.forEach(function(a){if(a.type==="declaration"){var o=a.property,l=a.value;s?t(o,l,a):l&&(n=n||{},n[o]=l)}}),n}var Pd={};Object.defineProperty(Pd,"__esModule",{value:!0});Pd.camelCase=void 0;var gF=/^--[a-zA-Z0-9_-]+$/,xF=/-([a-z])/g,vF=/^[^-]+$/,yF=/^-(webkit|moz|ms|o|khtml)-/,wF=/^-(ms)-/,bF=function(e){return!e||vF.test(e)||gF.test(e)},jF=function(e,t){return t.toUpperCase()},ky=function(e,t){return"".concat(t,"-")},_F=function(e,t){return t===void 0&&(t={}),bF(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(wF,ky):e=e.replace(yF,ky),e.replace(xF,jF))};Pd.camelCase=_F;var SF=Wt&&Wt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},NF=SF(Ng),kF=Pd;function Tm(e,t){var n={};return!e||typeof e!="string"||(0,NF.default)(e,function(r,s){r&&s&&(n[(0,kF.camelCase)(r,t)]=s)}),n}Tm.default=Tm;var CF=Tm;const EF=Pu(CF),KN=QN("end"),kg=QN("start");function QN(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function PF(e){const t=kg(e),n=KN(e);if(t&&n)return{start:t,end:n}}function qo(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Cy(e.position):"start"in e||"end"in e?Cy(e):"line"in e||"column"in e?Rm(e):""}function Rm(e){return Ey(e&&e.line)+":"+Ey(e&&e.column)}function Cy(e){return Rm(e&&e.start)+"-"+Rm(e&&e.end)}function Ey(e){return e&&typeof e=="number"?e:1}class Gt extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?s=t:!a.cause&&t&&(o=!0,s=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?a.ruleId=r:(a.source=r.slice(0,c),a.ruleId=r.slice(c+1))}if(!a.place&&a.ancestors&&a.ancestors){const c=a.ancestors[a.ancestors.length-1];c&&(a.place=c.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=l?l.line:void 0,this.name=qo(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Gt.prototype.file="";Gt.prototype.name="";Gt.prototype.reason="";Gt.prototype.message="";Gt.prototype.stack="";Gt.prototype.column=void 0;Gt.prototype.line=void 0;Gt.prototype.ancestors=void 0;Gt.prototype.cause=void 0;Gt.prototype.fatal=void 0;Gt.prototype.place=void 0;Gt.prototype.ruleId=void 0;Gt.prototype.source=void 0;const Cg={}.hasOwnProperty,TF=new Map,RF=/[A-Z]/g,AF=new Set(["table","tbody","thead","tfoot","tr"]),IF=new Set(["td","th"]),YN="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function OF(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=BF(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=UF(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Sg:eF,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=XN(s,e,void 0);return a&&typeof a!="string"?a:s.create(e,s.Fragment,{children:a||void 0},void 0)}function XN(e,t,n){if(t.type==="element")return LF(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return MF(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return FF(e,t,n);if(t.type==="mdxjsEsm")return DF(e,t);if(t.type==="root")return $F(e,t,n);if(t.type==="text")return zF(e,t)}function LF(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Sg,e.schema=s),e.ancestors.push(t);const a=ZN(e,t.tagName,!1),o=VF(e,t);let l=Pg(e,t);return AF.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!q3(c):!0})),JN(e,o,a,t),Eg(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function MF(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}vl(e,t.position)}function DF(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);vl(e,t.position)}function FF(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=Sg,e.schema=s),e.ancestors.push(t);const a=t.name===null?e.Fragment:ZN(e,t.name,!0),o=qF(e,t),l=Pg(e,t);return JN(e,o,a,t),Eg(o,l),e.ancestors.pop(),e.schema=r,e.create(t,a,o,n)}function $F(e,t,n){const r={};return Eg(r,Pg(e,t)),e.create(t,e.Fragment,r,n)}function zF(e,t){return t.value}function JN(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function Eg(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function UF(e,t,n){return r;function r(s,a,o,l){const u=Array.isArray(o.children)?n:t;return l?u(a,o,l):u(a,o)}}function BF(e,t){return n;function n(r,s,a,o){const l=Array.isArray(a.children),c=kg(r);return t(s,a,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function VF(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&Cg.call(t.properties,s)){const a=WF(e,s,t.properties[s]);if(a){const[o,l]=a;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&IF.has(t.tagName)?r=l:n[o]=l}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function qF(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else vl(e,t.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,a=e.evaluater.evaluateExpression(l.expression)}else vl(e,t.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function Pg(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:TF;for(;++r<t.children.length;){const a=t.children[r];let o;if(e.passKeys){const c=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(c){const u=s.get(c)||0;o=c+"-"+u,s.set(c,u+1)}}const l=XN(e,a,o);l!==void 0&&n.push(l)}return n}function WF(e,t,n){const r=X3(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?$3(n):tF(n)),r.property==="style"){let s=typeof n=="object"?n:HF(e,String(n));return e.stylePropertyNameCase==="css"&&(s=GF(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?K3[r.property]||r.property:r.attribute,n]}}function HF(e,t){try{return EF(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,s=new Gt("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=YN+"#cannot-parse-style-attribute",s}}function ZN(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let a=-1,o;for(;++a<s.length;){const l=vy(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}r=o}else r=vy(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return Cg.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);vl(e)}function vl(e,t){const n=new Gt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=YN+"#cannot-handle-mdx-estrees-without-createevaluater",n}function GF(e){const t={};let n;for(n in e)Cg.call(e,n)&&(t[KF(n)]=e[n]);return t}function KF(e){let t=e.replace(RF,QF);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function QF(e){return"-"+e.toLowerCase()}const Lf={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},YF={};function XF(e,t){const n=YF,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return ek(e,r,s)}function ek(e,t,n){if(JF(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Py(e.children,t,n)}return Array.isArray(e)?Py(e,t,n):""}function Py(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=ek(e[s],t,n);return r.join("")}function JF(e){return!!(e&&typeof e=="object")}const Ty=document.createElement("i");function Tg(e){const t="&"+e+";";Ty.innerHTML=t;const n=Ty.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Dr(e,t,n,r){const s=e.length;let a=0,o;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function zn(e,t){return e.length>0?(Dr(e,e.length,0,t),e):t}const Ry={}.hasOwnProperty;function ZF(e){const t={};let n=-1;for(;++n<e.length;)e$(t,e[n]);return t}function e$(e,t){let n;for(n in t){const s=(Ry.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let o;if(a)for(o in a){Ry.call(s,o)||(s[o]=[]);const l=a[o];t$(s[o],Array.isArray(l)?l:l?[l]:[])}}}function t$(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Dr(e,0,0,r)}function tk(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function wa(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Cr=ri(/[A-Za-z]/),En=ri(/[\dA-Za-z]/),n$=ri(/[#-'*+\--9=?A-Z^-~]/);function Am(e){return e!==null&&(e<32||e===127)}const Im=ri(/\d/),r$=ri(/[\dA-Fa-f]/),s$=ri(/[!-/:-@[-`{-~]/);function _e(e){return e!==null&&e<-2}function vn(e){return e!==null&&(e<0||e===32)}function ze(e){return e===-2||e===-1||e===32}const i$=ri(new RegExp("\\p{P}|\\p{S}","u")),a$=ri(/\s/);function ri(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function so(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const a=e.charCodeAt(n);let o="";if(a===37&&En(e.charCodeAt(n+1))&&En(e.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const l=e.charCodeAt(n+1);a<56320&&l>56319&&l<57344?(o=String.fromCharCode(a,l),s=1):o="�"}else o=String.fromCharCode(a);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+s+1,o=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function Ze(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(c){return ze(c)?(e.enter(n),l(c)):t(c)}function l(c){return ze(c)&&a++<s?(e.consume(c),l):(e.exit(n),t(c))}}const o$={tokenize:l$};function l$(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Ze(e,t,"linePrefix")}function s(l){return e.enter("paragraph"),a(l)}function a(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return _e(l)?(e.consume(l),e.exit("chunkText"),a):(e.consume(l),o)}}const c$={tokenize:u$},Ay={tokenize:d$};function u$(e){const t=this,n=[];let r=0,s,a,o;return l;function l(y){if(r<n.length){const j=n[r];return t.containerState=j[1],e.attempt(j[0].continuation,c,u)(y)}return u(y)}function c(y){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&v();const j=t.events.length;let S=j,_;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){_=t.events[S][1].end;break}x(r);let N=j;for(;N<t.events.length;)t.events[N][1].end={..._},N++;return Dr(t.events,S+1,0,t.events.slice(j)),t.events.length=N,u(y)}return l(y)}function u(y){if(r===n.length){if(!s)return p(y);if(s.currentConstruct&&s.currentConstruct.concrete)return b(y);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Ay,d,f)(y)}function d(y){return s&&v(),x(r),p(y)}function f(y){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,b(y)}function p(y){return t.containerState={},e.attempt(Ay,h,b)(y)}function h(y){return r++,n.push([t.currentConstruct,t.containerState]),p(y)}function b(y){if(y===null){s&&v(),x(0),e.consume(y);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),g(y)}function g(y){if(y===null){w(e.exit("chunkFlow"),!0),x(0),e.consume(y);return}return _e(y)?(e.consume(y),w(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(y),g)}function w(y,j){const S=t.sliceStream(y);if(j&&S.push(null),y.previous=a,a&&(a.next=y),a=y,s.defineSkip(y.start),s.write(S),t.parser.lazy[y.start.line]){let _=s.events.length;for(;_--;)if(s.events[_][1].start.offset<o&&(!s.events[_][1].end||s.events[_][1].end.offset>o))return;const N=t.events.length;let C=N,A,R;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){R=t.events[C][1].end;break}A=!0}for(x(r),_=N;_<t.events.length;)t.events[_][1].end={...R},_++;Dr(t.events,C+1,0,t.events.slice(N)),t.events.length=_}}function x(y){let j=n.length;for(;j-- >y;){const S=n[j];t.containerState=S[1],S[0].exit.call(t,e)}n.length=y}function v(){s.write([null]),a=void 0,s=void 0,t.containerState._closeFlow=void 0}}function d$(e,t,n){return Ze(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Iy(e){if(e===null||vn(e)||a$(e))return 1;if(i$(e))return 2}function Rg(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const a=e[s].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const Om={name:"attention",resolveAll:f$,tokenize:h$};function f$(e,t){let n=-1,r,s,a,o,l,c,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f={...e[r][1].end},p={...e[n][1].start};Oy(f,-c),Oy(p,c),o={type:c>1?"strongSequence":"emphasisSequence",start:f,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:p},a={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},s={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=zn(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=zn(u,[["enter",s,t],["enter",o,t],["exit",o,t],["enter",a,t]]),u=zn(u,Rg(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=zn(u,[["exit",a,t],["enter",l,t],["exit",l,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=zn(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,Dr(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function h$(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Iy(r);let a;return o;function o(c){return a=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===a)return e.consume(c),l;const u=e.exit("attentionSequence"),d=Iy(c),f=!d||d===2&&s||n.includes(c),p=!s||s===2&&d||n.includes(r);return u._open=!!(a===42?f:f&&(s||!p)),u._close=!!(a===42?p:p&&(d||!f)),t(c)}}function Oy(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const m$={name:"autolink",tokenize:p$};function p$(e,t,n){let r=0;return s;function s(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(h){return Cr(h)?(e.consume(h),o):h===64?n(h):u(h)}function o(h){return h===43||h===45||h===46||En(h)?(r=1,l(h)):u(h)}function l(h){return h===58?(e.consume(h),r=0,c):(h===43||h===45||h===46||En(h))&&r++<32?(e.consume(h),l):(r=0,u(h))}function c(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||Am(h)?n(h):(e.consume(h),c)}function u(h){return h===64?(e.consume(h),d):n$(h)?(e.consume(h),u):n(h)}function d(h){return En(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,d):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):p(h)}function p(h){if((h===45||En(h))&&r++<63){const b=h===45?p:f;return e.consume(h),b}return n(h)}}const Td={partial:!0,tokenize:g$};function g$(e,t,n){return r;function r(a){return ze(a)?Ze(e,s,"linePrefix")(a):s(a)}function s(a){return a===null||_e(a)?t(a):n(a)}}const nk={continuation:{tokenize:v$},exit:y$,name:"blockQuote",tokenize:x$};function x$(e,t,n){const r=this;return s;function s(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),a}return n(o)}function a(o){return ze(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function v$(e,t,n){const r=this;return s;function s(o){return ze(o)?Ze(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return e.attempt(nk,t,n)(o)}}function y$(e){e.exit("blockQuote")}const rk={name:"characterEscape",tokenize:w$};function w$(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),s}function s(a){return s$(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const sk={name:"characterReference",tokenize:b$};function b$(e,t,n){const r=this;let s=0,a,o;return l;function l(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),c}function c(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),a=31,o=En,d(f))}function u(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,o=r$,d):(e.enter("characterReferenceValue"),a=7,o=Im,d(f))}function d(f){if(f===59&&s){const p=e.exit("characterReferenceValue");return o===En&&!Tg(r.sliceSerialize(p))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&s++<a?(e.consume(f),d):n(f)}}const Ly={partial:!0,tokenize:_$},My={concrete:!0,name:"codeFenced",tokenize:j$};function j$(e,t,n){const r=this,s={partial:!0,tokenize:S};let a=0,o=0,l;return c;function c(_){return u(_)}function u(_){const N=r.events[r.events.length-1];return a=N&&N[1].type==="linePrefix"?N[2].sliceSerialize(N[1],!0).length:0,l=_,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(_)}function d(_){return _===l?(o++,e.consume(_),d):o<3?n(_):(e.exit("codeFencedFenceSequence"),ze(_)?Ze(e,f,"whitespace")(_):f(_))}function f(_){return _===null||_e(_)?(e.exit("codeFencedFence"),r.interrupt?t(_):e.check(Ly,g,j)(_)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(_))}function p(_){return _===null||_e(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(_)):ze(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ze(e,h,"whitespace")(_)):_===96&&_===l?n(_):(e.consume(_),p)}function h(_){return _===null||_e(_)?f(_):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),b(_))}function b(_){return _===null||_e(_)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(_)):_===96&&_===l?n(_):(e.consume(_),b)}function g(_){return e.attempt(s,j,w)(_)}function w(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),x}function x(_){return a>0&&ze(_)?Ze(e,v,"linePrefix",a+1)(_):v(_)}function v(_){return _===null||_e(_)?e.check(Ly,g,j)(_):(e.enter("codeFlowValue"),y(_))}function y(_){return _===null||_e(_)?(e.exit("codeFlowValue"),v(_)):(e.consume(_),y)}function j(_){return e.exit("codeFenced"),t(_)}function S(_,N,C){let A=0;return R;function R(B){return _.enter("lineEnding"),_.consume(B),_.exit("lineEnding"),O}function O(B){return _.enter("codeFencedFence"),ze(B)?Ze(_,T,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):T(B)}function T(B){return B===l?(_.enter("codeFencedFenceSequence"),z(B)):C(B)}function z(B){return B===l?(A++,_.consume(B),z):A>=o?(_.exit("codeFencedFenceSequence"),ze(B)?Ze(_,I,"whitespace")(B):I(B)):C(B)}function I(B){return B===null||_e(B)?(_.exit("codeFencedFence"),N(B)):C(B)}}}function _$(e,t,n){const r=this;return s;function s(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Mf={name:"codeIndented",tokenize:N$},S$={partial:!0,tokenize:k$};function N$(e,t,n){const r=this;return s;function s(u){return e.enter("codeIndented"),Ze(e,a,"linePrefix",5)(u)}function a(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):_e(u)?e.attempt(S$,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||_e(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function k$(e,t,n){const r=this;return s;function s(o){return r.parser.lazy[r.now().line]?n(o):_e(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):Ze(e,a,"linePrefix",5)(o)}function a(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):_e(o)?s(o):n(o)}}const C$={name:"codeText",previous:P$,resolve:E$,tokenize:T$};function E$(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function P$(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function T$(e,t,n){let r=0,s,a;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),l(f)}function l(f){return f===96?(e.consume(f),r++,l):(e.exit("codeTextSequence"),c(f))}function c(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),c):f===96?(a=e.enter("codeTextSequence"),s=0,d(f)):_e(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(f))}function u(f){return f===null||f===32||f===96||_e(f)?(e.exit("codeTextData"),c(f)):(e.consume(f),u)}function d(f){return f===96?(e.consume(f),s++,d):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(a.type="codeTextData",u(f))}}class R${constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&wo(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),wo(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),wo(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);wo(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);wo(this.left,n.reverse())}}}function wo(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ik(e){const t={};let n=-1,r,s,a,o,l,c,u;const d=new R$(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,A$(d,n)),n=t[n],u=!0);else if(r[1]._container){for(a=n,s=void 0;a--;)if(o=d.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(s&&(d.get(s)[1].type="lineEndingBlank"),o[1].type="lineEnding",s=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;s&&(r[1].end={...d.get(s)[1].start},l=d.slice(s,n),l.unshift(r),d.splice(s,n-s+1,l))}}return Dr(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function A$(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const a=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let d,f,p=-1,h=n,b=0,g=0;const w=[g];for(;h;){for(;e.get(++s)[1]!==h;);a.push(s),h._tokenizer||(d=r.sliceStream(h),h.next||d.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++p<l.length;)l[p][0]==="exit"&&l[p-1][0]==="enter"&&l[p][1].type===l[p-1][1].type&&l[p][1].start.line!==l[p][1].end.line&&(g=p+1,w.push(g),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):w.pop(),p=w.length;p--;){const x=l.slice(w[p],w[p+1]),v=a.pop();c.push([v,v+x.length-1]),e.splice(v,2,x)}for(c.reverse(),p=-1;++p<c.length;)u[b+c[p][0]]=b+c[p][1],b+=c[p][1]-c[p][0]-1;return u}const I$={resolve:L$,tokenize:M$},O$={partial:!0,tokenize:D$};function L$(e){return ik(e),e}function M$(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(l)}function s(l){return l===null?a(l):_e(l)?e.check(O$,o,a)(l):(e.consume(l),s)}function a(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function D$(e,t,n){const r=this;return s;function s(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ze(e,a,"linePrefix")}function a(o){if(o===null||_e(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function ak(e,t,n,r,s,a,o,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return f;function f(x){return x===60?(e.enter(r),e.enter(s),e.enter(a),e.consume(x),e.exit(a),p):x===null||x===32||x===41||Am(x)?n(x):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),g(x))}function p(x){return x===62?(e.enter(a),e.consume(x),e.exit(a),e.exit(s),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),h(x))}function h(x){return x===62?(e.exit("chunkString"),e.exit(l),p(x)):x===null||x===60||_e(x)?n(x):(e.consume(x),x===92?b:h)}function b(x){return x===60||x===62||x===92?(e.consume(x),h):h(x)}function g(x){return!d&&(x===null||x===41||vn(x))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(x)):d<u&&x===40?(e.consume(x),d++,g):x===41?(e.consume(x),d--,g):x===null||x===32||x===40||Am(x)?n(x):(e.consume(x),x===92?w:g)}function w(x){return x===40||x===41||x===92?(e.consume(x),g):g(x)}}function ok(e,t,n,r,s,a){const o=this;let l=0,c;return u;function u(h){return e.enter(r),e.enter(s),e.consume(h),e.exit(s),e.enter(a),d}function d(h){return l>999||h===null||h===91||h===93&&!c||h===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(a),e.enter(s),e.consume(h),e.exit(s),e.exit(r),t):_e(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||_e(h)||l++>999?(e.exit("chunkString"),d(h)):(e.consume(h),c||(c=!ze(h)),h===92?p:f)}function p(h){return h===91||h===92||h===93?(e.consume(h),l++,f):f(h)}}function lk(e,t,n,r,s,a){let o;return l;function l(p){return p===34||p===39||p===40?(e.enter(r),e.enter(s),e.consume(p),e.exit(s),o=p===40?41:p,c):n(p)}function c(p){return p===o?(e.enter(s),e.consume(p),e.exit(s),e.exit(r),t):(e.enter(a),u(p))}function u(p){return p===o?(e.exit(a),c(o)):p===null?n(p):_e(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),Ze(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===o||p===null||_e(p)?(e.exit("chunkString"),u(p)):(e.consume(p),p===92?f:d)}function f(p){return p===o||p===92?(e.consume(p),d):d(p)}}function Wo(e,t){let n;return r;function r(s){return _e(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):ze(s)?Ze(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const F$={name:"definition",tokenize:z$},$$={partial:!0,tokenize:U$};function z$(e,t,n){const r=this;let s;return a;function a(h){return e.enter("definition"),o(h)}function o(h){return ok.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function l(h){return s=wa(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),c):n(h)}function c(h){return vn(h)?Wo(e,u)(h):u(h)}function u(h){return ak(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function d(h){return e.attempt($$,f,f)(h)}function f(h){return ze(h)?Ze(e,p,"whitespace")(h):p(h)}function p(h){return h===null||_e(h)?(e.exit("definition"),r.parser.defined.push(s),t(h)):n(h)}}function U$(e,t,n){return r;function r(l){return vn(l)?Wo(e,s)(l):n(l)}function s(l){return lk(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return ze(l)?Ze(e,o,"whitespace")(l):o(l)}function o(l){return l===null||_e(l)?t(l):n(l)}}const B$={name:"hardBreakEscape",tokenize:V$};function V$(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),s}function s(a){return _e(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const q$={name:"headingAtx",resolve:W$,tokenize:H$};function W$(e,t){let n=e.length-2,r=3,s,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Dr(e,r,n-r+1,[["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t]])),e}function H$(e,t,n){let r=0;return s;function s(d){return e.enter("atxHeading"),a(d)}function a(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(e.consume(d),o):d===null||vn(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||_e(d)?(e.exit("atxHeading"),t(d)):ze(d)?Ze(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||vn(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const G$=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Dy=["pre","script","style","textarea"],K$={concrete:!0,name:"htmlFlow",resolveTo:X$,tokenize:J$},Q$={partial:!0,tokenize:ez},Y$={partial:!0,tokenize:Z$};function X$(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function J$(e,t,n){const r=this;let s,a,o,l,c;return u;function u(P){return d(P)}function d(P){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(P),f}function f(P){return P===33?(e.consume(P),p):P===47?(e.consume(P),a=!0,g):P===63?(e.consume(P),s=3,r.interrupt?t:k):Cr(P)?(e.consume(P),o=String.fromCharCode(P),w):n(P)}function p(P){return P===45?(e.consume(P),s=2,h):P===91?(e.consume(P),s=5,l=0,b):Cr(P)?(e.consume(P),s=4,r.interrupt?t:k):n(P)}function h(P){return P===45?(e.consume(P),r.interrupt?t:k):n(P)}function b(P){const q="CDATA[";return P===q.charCodeAt(l++)?(e.consume(P),l===q.length?r.interrupt?t:T:b):n(P)}function g(P){return Cr(P)?(e.consume(P),o=String.fromCharCode(P),w):n(P)}function w(P){if(P===null||P===47||P===62||vn(P)){const q=P===47,de=o.toLowerCase();return!q&&!a&&Dy.includes(de)?(s=1,r.interrupt?t(P):T(P)):G$.includes(o.toLowerCase())?(s=6,q?(e.consume(P),x):r.interrupt?t(P):T(P)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):a?v(P):y(P))}return P===45||En(P)?(e.consume(P),o+=String.fromCharCode(P),w):n(P)}function x(P){return P===62?(e.consume(P),r.interrupt?t:T):n(P)}function v(P){return ze(P)?(e.consume(P),v):R(P)}function y(P){return P===47?(e.consume(P),R):P===58||P===95||Cr(P)?(e.consume(P),j):ze(P)?(e.consume(P),y):R(P)}function j(P){return P===45||P===46||P===58||P===95||En(P)?(e.consume(P),j):S(P)}function S(P){return P===61?(e.consume(P),_):ze(P)?(e.consume(P),S):y(P)}function _(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),c=P,N):ze(P)?(e.consume(P),_):C(P)}function N(P){return P===c?(e.consume(P),c=null,A):P===null||_e(P)?n(P):(e.consume(P),N)}function C(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||vn(P)?S(P):(e.consume(P),C)}function A(P){return P===47||P===62||ze(P)?y(P):n(P)}function R(P){return P===62?(e.consume(P),O):n(P)}function O(P){return P===null||_e(P)?T(P):ze(P)?(e.consume(P),O):n(P)}function T(P){return P===45&&s===2?(e.consume(P),$):P===60&&s===1?(e.consume(P),L):P===62&&s===4?(e.consume(P),F):P===63&&s===3?(e.consume(P),k):P===93&&s===5?(e.consume(P),E):_e(P)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(Q$,H,z)(P)):P===null||_e(P)?(e.exit("htmlFlowData"),z(P)):(e.consume(P),T)}function z(P){return e.check(Y$,I,H)(P)}function I(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),B}function B(P){return P===null||_e(P)?z(P):(e.enter("htmlFlowData"),T(P))}function $(P){return P===45?(e.consume(P),k):T(P)}function L(P){return P===47?(e.consume(P),o="",M):T(P)}function M(P){if(P===62){const q=o.toLowerCase();return Dy.includes(q)?(e.consume(P),F):T(P)}return Cr(P)&&o.length<8?(e.consume(P),o+=String.fromCharCode(P),M):T(P)}function E(P){return P===93?(e.consume(P),k):T(P)}function k(P){return P===62?(e.consume(P),F):P===45&&s===2?(e.consume(P),k):T(P)}function F(P){return P===null||_e(P)?(e.exit("htmlFlowData"),H(P)):(e.consume(P),F)}function H(P){return e.exit("htmlFlow"),t(P)}}function Z$(e,t,n){const r=this;return s;function s(o){return _e(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function ez(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Td,t,n)}}const tz={name:"htmlText",tokenize:nz};function nz(e,t,n){const r=this;let s,a,o;return l;function l(k){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(k),c}function c(k){return k===33?(e.consume(k),u):k===47?(e.consume(k),S):k===63?(e.consume(k),y):Cr(k)?(e.consume(k),C):n(k)}function u(k){return k===45?(e.consume(k),d):k===91?(e.consume(k),a=0,b):Cr(k)?(e.consume(k),v):n(k)}function d(k){return k===45?(e.consume(k),h):n(k)}function f(k){return k===null?n(k):k===45?(e.consume(k),p):_e(k)?(o=f,L(k)):(e.consume(k),f)}function p(k){return k===45?(e.consume(k),h):f(k)}function h(k){return k===62?$(k):k===45?p(k):f(k)}function b(k){const F="CDATA[";return k===F.charCodeAt(a++)?(e.consume(k),a===F.length?g:b):n(k)}function g(k){return k===null?n(k):k===93?(e.consume(k),w):_e(k)?(o=g,L(k)):(e.consume(k),g)}function w(k){return k===93?(e.consume(k),x):g(k)}function x(k){return k===62?$(k):k===93?(e.consume(k),x):g(k)}function v(k){return k===null||k===62?$(k):_e(k)?(o=v,L(k)):(e.consume(k),v)}function y(k){return k===null?n(k):k===63?(e.consume(k),j):_e(k)?(o=y,L(k)):(e.consume(k),y)}function j(k){return k===62?$(k):y(k)}function S(k){return Cr(k)?(e.consume(k),_):n(k)}function _(k){return k===45||En(k)?(e.consume(k),_):N(k)}function N(k){return _e(k)?(o=N,L(k)):ze(k)?(e.consume(k),N):$(k)}function C(k){return k===45||En(k)?(e.consume(k),C):k===47||k===62||vn(k)?A(k):n(k)}function A(k){return k===47?(e.consume(k),$):k===58||k===95||Cr(k)?(e.consume(k),R):_e(k)?(o=A,L(k)):ze(k)?(e.consume(k),A):$(k)}function R(k){return k===45||k===46||k===58||k===95||En(k)?(e.consume(k),R):O(k)}function O(k){return k===61?(e.consume(k),T):_e(k)?(o=O,L(k)):ze(k)?(e.consume(k),O):A(k)}function T(k){return k===null||k===60||k===61||k===62||k===96?n(k):k===34||k===39?(e.consume(k),s=k,z):_e(k)?(o=T,L(k)):ze(k)?(e.consume(k),T):(e.consume(k),I)}function z(k){return k===s?(e.consume(k),s=void 0,B):k===null?n(k):_e(k)?(o=z,L(k)):(e.consume(k),z)}function I(k){return k===null||k===34||k===39||k===60||k===61||k===96?n(k):k===47||k===62||vn(k)?A(k):(e.consume(k),I)}function B(k){return k===47||k===62||vn(k)?A(k):n(k)}function $(k){return k===62?(e.consume(k),e.exit("htmlTextData"),e.exit("htmlText"),t):n(k)}function L(k){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(k),e.exit("lineEnding"),M}function M(k){return ze(k)?Ze(e,E,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):E(k)}function E(k){return e.enter("htmlTextData"),o(k)}}const Ag={name:"labelEnd",resolveAll:az,resolveTo:oz,tokenize:lz},rz={tokenize:cz},sz={tokenize:uz},iz={tokenize:dz};function az(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",t+=s}}return e.length!==n.length&&Dr(e,0,e.length,n),e}function oz(e,t){let n=e.length,r=0,s,a,o,l;for(;n--;)if(s=e[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(o=n);const c={type:e[a][1].type==="labelLink"?"link":"image",start:{...e[a][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[a][1].start},end:{...e[o][1].end}},d={type:"labelText",start:{...e[a+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=zn(l,e.slice(a+1,a+r+3)),l=zn(l,[["enter",d,t]]),l=zn(l,Rg(t.parser.constructs.insideSpan.null,e.slice(a+r+4,o-3),t)),l=zn(l,[["exit",d,t],e[o-2],e[o-1],["exit",u,t]]),l=zn(l,e.slice(o+1)),l=zn(l,[["exit",c,t]]),Dr(e,a,e.length,l),e}function lz(e,t,n){const r=this;let s=r.events.length,a,o;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return l;function l(p){return a?a._inactive?f(p):(o=r.parser.defined.includes(wa(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(p),e.exit("labelMarker"),e.exit("labelEnd"),c):n(p)}function c(p){return p===40?e.attempt(rz,d,o?d:f)(p):p===91?e.attempt(sz,d,o?u:f)(p):o?d(p):f(p)}function u(p){return e.attempt(iz,d,f)(p)}function d(p){return t(p)}function f(p){return a._balanced=!0,n(p)}}function cz(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),s}function s(f){return vn(f)?Wo(e,a)(f):a(f)}function a(f){return f===41?d(f):ak(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return vn(f)?Wo(e,c)(f):d(f)}function l(f){return n(f)}function c(f){return f===34||f===39||f===40?lk(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):d(f)}function u(f){return vn(f)?Wo(e,d)(f):d(f)}function d(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function uz(e,t,n){const r=this;return s;function s(l){return ok.call(r,e,a,o,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes(wa(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function dz(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),s}function s(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const fz={name:"labelStartImage",resolveAll:Ag.resolveAll,tokenize:hz};function hz(e,t,n){const r=this;return s;function s(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),a}function a(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const mz={name:"labelStartLink",resolveAll:Ag.resolveAll,tokenize:pz};function pz(e,t,n){const r=this;return s;function s(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Df={name:"lineEnding",tokenize:gz};function gz(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ze(e,t,"linePrefix")}}const Fc={name:"thematicBreak",tokenize:xz};function xz(e,t,n){let r=0,s;return a;function a(u){return e.enter("thematicBreak"),o(u)}function o(u){return s=u,l(u)}function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||_e(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===s?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),ze(u)?Ze(e,l,"whitespace")(u):l(u))}}const cn={continuation:{tokenize:bz},exit:_z,name:"list",tokenize:wz},vz={partial:!0,tokenize:Sz},yz={partial:!0,tokenize:jz};function wz(e,t,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return l;function l(h){const b=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(b==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:Im(h)){if(r.containerState.type||(r.containerState.type=b,e.enter(b,{_container:!0})),b==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(Fc,n,u)(h):u(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(h)}return n(h)}function c(h){return Im(h)&&++o<10?(e.consume(h),c):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),u(h)):n(h)}function u(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(Td,r.interrupt?n:d,e.attempt(vz,p,f))}function d(h){return r.containerState.initialBlankLine=!0,a++,p(h)}function f(h){return ze(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),p):n(h)}function p(h){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function bz(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Td,s,a);function s(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ze(e,t,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!ze(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(yz,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ze(e,e.attempt(cn,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function jz(e,t,n){const r=this;return Ze(e,s,"listItemIndent",r.containerState.size+1);function s(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(a):n(a)}}function _z(e){e.exit(this.containerState.type)}function Sz(e,t,n){const r=this;return Ze(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const o=r.events[r.events.length-1];return!ze(a)&&o&&o[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const Fy={name:"setextUnderline",resolveTo:Nz,tokenize:kz};function Nz(e,t){let n=e.length,r,s,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[s][1].type="setextHeadingText",a?(e.splice(s,0,["enter",o,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end={...e[a][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function kz(e,t,n){const r=this;let s;return a;function a(u){let d=r.events.length,f;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){f=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),s=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===s?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),ze(u)?Ze(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||_e(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const Cz={tokenize:Ez};function Ez(e){const t=this,n=e.attempt(Td,r,e.attempt(this.parser.constructs.flowInitial,s,Ze(e,e.attempt(this.parser.constructs.flow,s,e.attempt(I$,s)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Pz={resolveAll:uk()},Tz=ck("string"),Rz=ck("text");function ck(e){return{resolveAll:uk(e==="text"?Az:void 0),tokenize:t};function t(n){const r=this,s=this.parser.constructs[e],a=n.attempt(s,o,l);return o;function o(d){return u(d)?a(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),c}function c(d){return u(d)?(n.exit("data"),a(d)):(n.consume(d),c)}function u(d){if(d===null)return!0;const f=s[d];let p=-1;if(f)for(;++p<f.length;){const h=f[p];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function uk(e){return t;function t(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return e?e(n,r):n}}function Az(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let a=s.length,o=-1,l=0,c;for(;a--;){const u=s[a];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const Iz={42:cn,43:cn,45:cn,48:cn,49:cn,50:cn,51:cn,52:cn,53:cn,54:cn,55:cn,56:cn,57:cn,62:nk},Oz={91:F$},Lz={[-2]:Mf,[-1]:Mf,32:Mf},Mz={35:q$,42:Fc,45:[Fy,Fc],60:K$,61:Fy,95:Fc,96:My,126:My},Dz={38:sk,92:rk},Fz={[-5]:Df,[-4]:Df,[-3]:Df,33:fz,38:sk,42:Om,60:[m$,tz],91:mz,92:[B$,rk],93:Ag,95:Om,96:C$},$z={null:[Om,Pz]},zz={null:[42,95]},Uz={null:[]},Bz=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:zz,contentInitial:Oz,disable:Uz,document:Iz,flow:Mz,flowInitial:Lz,insideSpan:$z,string:Dz,text:Fz},Symbol.toStringTag,{value:"Module"}));function Vz(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},a=[];let o=[],l=[];const c={attempt:N(S),check:N(_),consume:v,enter:y,exit:j,interrupt:N(_,{interrupt:!0})},u={code:null,containerState:{},defineSkip:g,events:[],now:b,parser:e,previous:null,sliceSerialize:p,sliceStream:h,write:f};let d=t.tokenize.call(u,c);return t.resolveAll&&a.push(t),u;function f(O){return o=zn(o,O),w(),o[o.length-1]!==null?[]:(C(t,0),u.events=Rg(a,u.events,u),u.events)}function p(O,T){return Wz(h(O),T)}function h(O){return qz(o,O)}function b(){const{_bufferIndex:O,_index:T,line:z,column:I,offset:B}=r;return{_bufferIndex:O,_index:T,line:z,column:I,offset:B}}function g(O){s[O.line]=O.column,R()}function w(){let O;for(;r._index<o.length;){const T=o[r._index];if(typeof T=="string")for(O=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===O&&r._bufferIndex<T.length;)x(T.charCodeAt(r._bufferIndex));else x(T)}}function x(O){d=d(O)}function v(O){_e(O)?(r.line++,r.column=1,r.offset+=O===-3?2:1,R()):O!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=O}function y(O,T){const z=T||{};return z.type=O,z.start=b(),u.events.push(["enter",z,u]),l.push(z),z}function j(O){const T=l.pop();return T.end=b(),u.events.push(["exit",T,u]),T}function S(O,T){C(O,T.from)}function _(O,T){T.restore()}function N(O,T){return z;function z(I,B,$){let L,M,E,k;return Array.isArray(I)?H(I):"tokenize"in I?H([I]):F(I);function F(le){return Y;function Y(re){const he=re!==null&&le[re],Z=re!==null&&le.null,U=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(Z)?Z:Z?[Z]:[]];return H(U)(re)}}function H(le){return L=le,M=0,le.length===0?$:P(le[M])}function P(le){return Y;function Y(re){return k=A(),E=le,le.partial||(u.currentConstruct=le),le.name&&u.parser.constructs.disable.null.includes(le.name)?de():le.tokenize.call(T?Object.assign(Object.create(u),T):u,c,q,de)(re)}}function q(le){return O(E,k),B}function de(le){return k.restore(),++M<L.length?P(L[M]):$}}}function C(O,T){O.resolveAll&&!a.includes(O)&&a.push(O),O.resolve&&Dr(u.events,T,u.events.length-T,O.resolve(u.events.slice(T),u)),O.resolveTo&&(u.events=O.resolveTo(u.events,u))}function A(){const O=b(),T=u.previous,z=u.currentConstruct,I=u.events.length,B=Array.from(l);return{from:I,restore:$};function $(){r=O,u.previous=T,u.currentConstruct=z,u.events.length=I,l=B,R()}}function R(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function qz(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,a=t.end._bufferIndex;let o;if(n===s)o=[e[n].slice(r,a)];else{if(o=e.slice(n,s),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}a>0&&o.push(e[s].slice(0,a))}return o}function Wz(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const a=e[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&s)continue;o=" ";break}default:o=String.fromCharCode(a)}s=a===-2,r.push(o)}return r.join("")}function Hz(e){const r={constructs:ZF([Bz,...(e||{}).extensions||[]]),content:s(o$),defined:[],document:s(c$),flow:s(Cz),lazy:{},string:s(Tz),text:s(Rz)};return r;function s(a){return o;function o(l){return Vz(r,a,l)}}}function Gz(e){for(;!ik(e););return e}const $y=/[\0\t\n\r]/g;function Kz(){let e=1,t="",n=!0,r;return s;function s(a,o,l){const c=[];let u,d,f,p,h;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),f=0,t="",n&&(a.charCodeAt(0)===65279&&f++,n=void 0);f<a.length;){if($y.lastIndex=f,u=$y.exec(a),p=u&&u.index!==void 0?u.index:a.length,h=a.charCodeAt(p),!u){t=a.slice(f);break}if(h===10&&f===p&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),f<p&&(c.push(a.slice(f,p)),e+=p-f),h){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}f=p+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const Qz=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Yz(e){return e.replace(Qz,Xz)}function Xz(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),a=s===120||s===88;return tk(n.slice(a?2:1),a?16:10)}return Tg(n)||e}const dk={}.hasOwnProperty;function Jz(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Zz(n)(Gz(Hz(n).document().write(Kz()(e,t,!0))))}function Zz(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Ge),autolinkProtocol:A,autolinkEmail:A,atxHeading:a(me),blockQuote:a(Z),characterEscape:A,characterReference:A,codeFenced:a(U),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(U,o),codeText:a(ce,o),codeTextData:A,data:A,codeFlowValue:A,definition:a(ge),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(ne),hardBreakEscape:a(He),hardBreakTrailing:a(He),htmlFlow:a(Re,o),htmlFlowData:A,htmlText:a(Re,o),htmlTextData:A,image:a(ct),label:o,link:a(Ge),listItem:a(bt),listItemValue:p,listOrdered:a(xt,f),listUnordered:a(xt),paragraph:a(Ue),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(me),strong:a(It),thematicBreak:a(Ln)},exit:{atxHeading:c(),atxHeadingSequence:S,autolink:c(),autolinkEmail:he,autolinkProtocol:re,blockQuote:c(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:de,characterReferenceMarkerNumeric:de,characterReferenceValue:le,characterReference:Y,codeFenced:c(w),codeFencedFence:g,codeFencedFenceInfo:h,codeFencedFenceMeta:b,codeFlowValue:R,codeIndented:c(x),codeText:c(B),codeTextData:R,data:R,definition:c(),definitionDestinationString:j,definitionLabelString:v,definitionTitleString:y,emphasis:c(),hardBreakEscape:c(T),hardBreakTrailing:c(T),htmlFlow:c(z),htmlFlowData:R,htmlText:c(I),htmlTextData:R,image:c(L),label:E,labelText:M,lineEnding:O,link:c($),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:q,resourceDestinationString:k,resourceTitleString:F,resource:H,setextHeading:c(C),setextHeadingLineSequence:N,setextHeadingText:_,strong:c(),thematicBreak:c()}};fk(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(W){let ee={type:"root",children:[]};const se={stack:[ee],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:d,data:n},ae=[];let Se=-1;for(;++Se<W.length;)if(W[Se][1].type==="listOrdered"||W[Se][1].type==="listUnordered")if(W[Se][0]==="enter")ae.push(Se);else{const $e=ae.pop();Se=s(W,$e,Se)}for(Se=-1;++Se<W.length;){const $e=t[W[Se][0]];dk.call($e,W[Se][1].type)&&$e[W[Se][1].type].call(Object.assign({sliceSerialize:W[Se][2].sliceSerialize},se),W[Se][1])}if(se.tokenStack.length>0){const $e=se.tokenStack[se.tokenStack.length-1];($e[1]||zy).call(se,void 0,$e[0])}for(ee.position={start:xs(W.length>0?W[0][1].start:{line:1,column:1,offset:0}),end:xs(W.length>0?W[W.length-2][1].end:{line:1,column:1,offset:0})},Se=-1;++Se<t.transforms.length;)ee=t.transforms[Se](ee)||ee;return ee}function s(W,ee,se){let ae=ee-1,Se=-1,$e=!1,Kt,Qt,ln,Mn;for(;++ae<=se;){const mt=W[ae];switch(mt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{mt[0]==="enter"?Se++:Se--,Mn=void 0;break}case"lineEndingBlank":{mt[0]==="enter"&&(Kt&&!Mn&&!Se&&!ln&&(ln=ae),Mn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Mn=void 0}if(!Se&&mt[0]==="enter"&&mt[1].type==="listItemPrefix"||Se===-1&&mt[0]==="exit"&&(mt[1].type==="listUnordered"||mt[1].type==="listOrdered")){if(Kt){let Yt=ae;for(Qt=void 0;Yt--;){const Xt=W[Yt];if(Xt[1].type==="lineEnding"||Xt[1].type==="lineEndingBlank"){if(Xt[0]==="exit")continue;Qt&&(W[Qt][1].type="lineEndingBlank",$e=!0),Xt[1].type="lineEnding",Qt=Yt}else if(!(Xt[1].type==="linePrefix"||Xt[1].type==="blockQuotePrefix"||Xt[1].type==="blockQuotePrefixWhitespace"||Xt[1].type==="blockQuoteMarker"||Xt[1].type==="listItemIndent"))break}ln&&(!Qt||ln<Qt)&&(Kt._spread=!0),Kt.end=Object.assign({},Qt?W[Qt][1].start:mt[1].end),W.splice(Qt||ae,0,["exit",Kt,mt[2]]),ae++,se++}if(mt[1].type==="listItemPrefix"){const Yt={type:"listItem",_spread:!1,start:Object.assign({},mt[1].start),end:void 0};Kt=Yt,W.splice(ae,0,["enter",Yt,mt[2]]),ae++,se++,ln=void 0,Mn=!0}}}return W[ee][1]._spread=$e,se}function a(W,ee){return se;function se(ae){l.call(this,W(ae),ae),ee&&ee.call(this,ae)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(W,ee,se){this.stack[this.stack.length-1].children.push(W),this.stack.push(W),this.tokenStack.push([ee,se||void 0]),W.position={start:xs(ee.start),end:void 0}}function c(W){return ee;function ee(se){W&&W.call(this,se),u.call(this,se)}}function u(W,ee){const se=this.stack.pop(),ae=this.tokenStack.pop();if(ae)ae[0].type!==W.type&&(ee?ee.call(this,W,ae[0]):(ae[1]||zy).call(this,W,ae[0]));else throw new Error("Cannot close `"+W.type+"` ("+qo({start:W.start,end:W.end})+"): it’s not open");se.position.end=xs(W.end)}function d(){return XF(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function p(W){if(this.data.expectingFirstListItemValue){const ee=this.stack[this.stack.length-2];ee.start=Number.parseInt(this.sliceSerialize(W),10),this.data.expectingFirstListItemValue=void 0}}function h(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.lang=W}function b(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.meta=W}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W.replace(/(\r?\n|\r)$/g,"")}function v(W){const ee=this.resume(),se=this.stack[this.stack.length-1];se.label=ee,se.identifier=wa(this.sliceSerialize(W)).toLowerCase()}function y(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.title=W}function j(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.url=W}function S(W){const ee=this.stack[this.stack.length-1];if(!ee.depth){const se=this.sliceSerialize(W).length;ee.depth=se}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function N(W){const ee=this.stack[this.stack.length-1];ee.depth=this.sliceSerialize(W).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(W){const se=this.stack[this.stack.length-1].children;let ae=se[se.length-1];(!ae||ae.type!=="text")&&(ae=pr(),ae.position={start:xs(W.start),end:void 0},se.push(ae)),this.stack.push(ae)}function R(W){const ee=this.stack.pop();ee.value+=this.sliceSerialize(W),ee.position.end=xs(W.end)}function O(W){const ee=this.stack[this.stack.length-1];if(this.data.atHardBreak){const se=ee.children[ee.children.length-1];se.position.end=xs(W.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ee.type)&&(A.call(this,W),R.call(this,W))}function T(){this.data.atHardBreak=!0}function z(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W}function I(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W}function B(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.value=W}function $(){const W=this.stack[this.stack.length-1];if(this.data.inReference){const ee=this.data.referenceType||"shortcut";W.type+="Reference",W.referenceType=ee,delete W.url,delete W.title}else delete W.identifier,delete W.label;this.data.referenceType=void 0}function L(){const W=this.stack[this.stack.length-1];if(this.data.inReference){const ee=this.data.referenceType||"shortcut";W.type+="Reference",W.referenceType=ee,delete W.url,delete W.title}else delete W.identifier,delete W.label;this.data.referenceType=void 0}function M(W){const ee=this.sliceSerialize(W),se=this.stack[this.stack.length-2];se.label=Yz(ee),se.identifier=wa(ee).toLowerCase()}function E(){const W=this.stack[this.stack.length-1],ee=this.resume(),se=this.stack[this.stack.length-1];if(this.data.inReference=!0,se.type==="link"){const ae=W.children;se.children=ae}else se.alt=ee}function k(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.url=W}function F(){const W=this.resume(),ee=this.stack[this.stack.length-1];ee.title=W}function H(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function q(W){const ee=this.resume(),se=this.stack[this.stack.length-1];se.label=ee,se.identifier=wa(this.sliceSerialize(W)).toLowerCase(),this.data.referenceType="full"}function de(W){this.data.characterReferenceType=W.type}function le(W){const ee=this.sliceSerialize(W),se=this.data.characterReferenceType;let ae;se?(ae=tk(ee,se==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ae=Tg(ee);const Se=this.stack[this.stack.length-1];Se.value+=ae}function Y(W){const ee=this.stack.pop();ee.position.end=xs(W.end)}function re(W){R.call(this,W);const ee=this.stack[this.stack.length-1];ee.url=this.sliceSerialize(W)}function he(W){R.call(this,W);const ee=this.stack[this.stack.length-1];ee.url="mailto:"+this.sliceSerialize(W)}function Z(){return{type:"blockquote",children:[]}}function U(){return{type:"code",lang:null,meta:null,value:""}}function ce(){return{type:"inlineCode",value:""}}function ge(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ne(){return{type:"emphasis",children:[]}}function me(){return{type:"heading",depth:0,children:[]}}function He(){return{type:"break"}}function Re(){return{type:"html",value:""}}function ct(){return{type:"image",title:null,url:"",alt:null}}function Ge(){return{type:"link",title:null,url:"",children:[]}}function xt(W){return{type:"list",ordered:W.type==="listOrdered",start:null,spread:W._spread,children:[]}}function bt(W){return{type:"listItem",spread:W._spread,checked:null,children:[]}}function Ue(){return{type:"paragraph",children:[]}}function It(){return{type:"strong",children:[]}}function pr(){return{type:"text",value:""}}function Ln(){return{type:"thematicBreak"}}}function xs(e){return{line:e.line,column:e.column,offset:e.offset}}function fk(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?fk(e,r):eU(e,r)}}function eU(e,t){let n;for(n in t)if(dk.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function zy(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+qo({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+qo({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+qo({start:t.start,end:t.end})+") is still open")}function tU(e){const t=this;t.parser=n;function n(r){return Jz(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function nU(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function rU(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function sU(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function iU(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function aU(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function oU(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=so(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=a+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function lU(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function cU(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function hk(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const o=s[s.length-1];return o&&o.type==="text"?o.value+=r:s.push({type:"text",value:r}),s}function uU(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return hk(e,t);const s={src:so(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,a),e.applyData(t,a)}function dU(e,t){const n={src:so(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function fU(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function hU(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return hk(e,t);const s={href:so(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function mU(e,t){const n={href:so(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function pU(e,t,n){const r=e.all(t),s=n?gU(n):mk(t),a={},o=[];if(typeof t.checked=="boolean"){const d=r[0];let f;d&&d.type==="element"&&d.tagName==="p"?f=d:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(s||l!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?o.push(...d.children):o.push(d)}const c=r[r.length-1];c&&(s||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:a,children:o};return e.patch(t,u),e.applyData(t,u)}function gU(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=mk(n[r])}return t}function mk(e){const t=e.spread;return t??e.children.length>1}function xU(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const o=r[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function vU(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function yU(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function wU(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bU(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),s.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=kg(t.children[1]),c=KN(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),s.push(o)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)}function jU(e,t,n){const r=n?n.children:void 0,a=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const f=t.children[c],p={},h=o?o[c]:void 0;h&&(p.align=h);let b={type:"element",tagName:a,properties:p,children:[]};f&&(b.children=e.all(f),e.patch(f,b),b=e.applyData(f,b)),u.push(b)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function _U(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Uy=9,By=32;function SU(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const a=[];for(;r;)a.push(Vy(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return a.push(Vy(t.slice(s),s>0,!1)),a.join("")}function Vy(e,t,n){let r=0,s=e.length;if(t){let a=e.codePointAt(r);for(;a===Uy||a===By;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(s-1);for(;a===Uy||a===By;)s--,a=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function NU(e,t){const n={type:"text",value:SU(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function kU(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const CU={blockquote:nU,break:rU,code:sU,delete:iU,emphasis:aU,footnoteReference:oU,heading:lU,html:cU,imageReference:uU,image:dU,inlineCode:fU,linkReference:hU,link:mU,listItem:pU,list:xU,paragraph:vU,root:yU,strong:wU,table:bU,tableCell:_U,tableRow:jU,text:NU,thematicBreak:kU,toml:xc,yaml:xc,definition:xc,footnoteDefinition:xc};function xc(){}const pk=-1,Rd=0,Ho=1,ku=2,Ig=3,Og=4,Lg=5,Mg=6,gk=7,xk=8,qy=typeof self=="object"?self:globalThis,EU=(e,t)=>{const n=(s,a)=>(e.set(a,s),s),r=s=>{if(e.has(s))return e.get(s);const[a,o]=t[s];switch(a){case Rd:case pk:return n(o,s);case Ho:{const l=n([],s);for(const c of o)l.push(r(c));return l}case ku:{const l=n({},s);for(const[c,u]of o)l[r(c)]=r(u);return l}case Ig:return n(new Date(o),s);case Og:{const{source:l,flags:c}=o;return n(new RegExp(l,c),s)}case Lg:{const l=n(new Map,s);for(const[c,u]of o)l.set(r(c),r(u));return l}case Mg:{const l=n(new Set,s);for(const c of o)l.add(r(c));return l}case gk:{const{name:l,message:c}=o;return n(new qy[l](c),s)}case xk:return n(BigInt(o),s);case"BigInt":return n(Object(BigInt(o)),s);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new qy[a](o),s)};return r},Wy=e=>EU(new Map,e)(0),Qi="",{toString:PU}={},{keys:TU}=Object,bo=e=>{const t=typeof e;if(t!=="object"||!e)return[Rd,t];const n=PU.call(e).slice(8,-1);switch(n){case"Array":return[Ho,Qi];case"Object":return[ku,Qi];case"Date":return[Ig,Qi];case"RegExp":return[Og,Qi];case"Map":return[Lg,Qi];case"Set":return[Mg,Qi];case"DataView":return[Ho,n]}return n.includes("Array")?[Ho,n]:n.includes("Error")?[gk,n]:[ku,n]},vc=([e,t])=>e===Rd&&(t==="function"||t==="symbol"),RU=(e,t,n,r)=>{const s=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},a=o=>{if(n.has(o))return n.get(o);let[l,c]=bo(o);switch(l){case Rd:{let d=o;switch(c){case"bigint":l=xk,d=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return s([pk],o)}return s([l,d],o)}case Ho:{if(c){let p=o;return c==="DataView"?p=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(p=new Uint8Array(o)),s([c,[...p]],o)}const d=[],f=s([l,d],o);for(const p of o)d.push(a(p));return f}case ku:{if(c)switch(c){case"BigInt":return s([c,o.toString()],o);case"Boolean":case"Number":case"String":return s([c,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const d=[],f=s([l,d],o);for(const p of TU(o))(e||!vc(bo(o[p])))&&d.push([a(p),a(o[p])]);return f}case Ig:return s([l,o.toISOString()],o);case Og:{const{source:d,flags:f}=o;return s([l,{source:d,flags:f}],o)}case Lg:{const d=[],f=s([l,d],o);for(const[p,h]of o)(e||!(vc(bo(p))||vc(bo(h))))&&d.push([a(p),a(h)]);return f}case Mg:{const d=[],f=s([l,d],o);for(const p of o)(e||!vc(bo(p)))&&d.push(a(p));return f}}const{message:u}=o;return s([l,{name:c,message:u}],o)};return a},Hy=(e,{json:t,lossy:n}={})=>{const r=[];return RU(!(t||n),!!t,new Map,r)(e),r},Cu=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Wy(Hy(e,t)):structuredClone(e):(e,t)=>Wy(Hy(e,t));function AU(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function IU(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function OU(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||AU,r=e.options.footnoteBackLabel||IU,s=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),f=String(u.identifier).toUpperCase(),p=so(f.toLowerCase());let h=0;const b=[],g=e.footnoteCounts.get(f);for(;g!==void 0&&++h<=g;){b.length>0&&b.push({type:"text",value:" "});let v=typeof n=="string"?n:n(c,h);typeof v=="string"&&(v={type:"text",value:v}),b.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+p+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const w=d[d.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const v=w.children[w.children.length-1];v&&v.type==="text"?v.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...b)}else d.push(...b);const x={type:"element",tagName:"li",properties:{id:t+"fn-"+p},children:e.wrap(d,!0)};e.patch(u,x),l.push(x)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Cu(o),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const vk=function(e){if(e==null)return FU;if(typeof e=="function")return Ad(e);if(typeof e=="object")return Array.isArray(e)?LU(e):MU(e);if(typeof e=="string")return DU(e);throw new Error("Expected function, string, or object as test")};function LU(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=vk(e[n]);return Ad(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function MU(e){const t=e;return Ad(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function DU(e){return Ad(t);function t(n){return n&&n.type===e}}function Ad(e){return t;function t(n,r,s){return!!($U(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function FU(){return!0}function $U(e){return e!==null&&typeof e=="object"&&"type"in e}const yk=[],zU=!0,Gy=!1,UU="skip";function BU(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=vk(s),o=r?-1:1;l(e,void 0,[])();function l(c,u,d){const f=c&&typeof c=="object"?c:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(c.type+(h?"<"+h+">":""))+")"})}return p;function p(){let h=yk,b,g,w;if((!t||a(c,u,d[d.length-1]||void 0))&&(h=VU(n(c,d)),h[0]===Gy))return h;if("children"in c&&c.children){const x=c;if(x.children&&h[0]!==UU)for(g=(r?x.children.length:-1)+o,w=d.concat(x);g>-1&&g<x.children.length;){const v=x.children[g];if(b=l(v,g,w)(),b[0]===Gy)return b;g=typeof b[1]=="number"?b[1]:g+o}}return h}}}function VU(e){return Array.isArray(e)?e:typeof e=="number"?[zU,e]:e==null?yk:[e]}function wk(e,t,n,r){let s,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,s=n):(a=t,o=n,s=r),BU(e,a,l,s);function l(c,u){const d=u[u.length-1],f=d?d.children.indexOf(c):void 0;return o(c,f,d)}}const Lm={}.hasOwnProperty,qU={};function WU(e,t){const n=t||qU,r=new Map,s=new Map,a=new Map,o={...CU,...n.handlers},l={all:u,applyData:GU,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:o,one:c,options:n,patch:HU,wrap:QU};return wk(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const f=d.type==="definition"?r:s,p=String(d.identifier).toUpperCase();f.has(p)||f.set(p,d)}}),l;function c(d,f){const p=d.type,h=l.handlers[p];if(Lm.call(l.handlers,p)&&h)return h(l,d,f);if(l.options.passThrough&&l.options.passThrough.includes(p)){if("children"in d){const{children:g,...w}=d,x=Cu(w);return x.children=l.all(d),x}return Cu(d)}return(l.options.unknownHandler||KU)(l,d,f)}function u(d){const f=[];if("children"in d){const p=d.children;let h=-1;for(;++h<p.length;){const b=l.one(p[h],d);if(b){if(h&&p[h-1].type==="break"&&(!Array.isArray(b)&&b.type==="text"&&(b.value=Ky(b.value)),!Array.isArray(b)&&b.type==="element")){const g=b.children[0];g&&g.type==="text"&&(g.value=Ky(g.value))}Array.isArray(b)?f.push(...b):f.push(b)}}}return f}}function HU(e,t){e.position&&(t.position=PF(e))}function GU(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,Cu(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function KU(e,t){const n=t.data||{},r="value"in t&&!(Lm.call(n,"hProperties")||Lm.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function QU(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Ky(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Qy(e,t){const n=WU(e,t),r=n.one(e,void 0),s=OU(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function YU(e,t){return e&&"run"in e?async function(n,r){const s=Qy(n,{file:r,...t});await e.run(s,r)}:function(n,r){return Qy(n,{file:r,...e||t})}}function Yy(e){if(e)throw e}var $c=Object.prototype.hasOwnProperty,bk=Object.prototype.toString,Xy=Object.defineProperty,Jy=Object.getOwnPropertyDescriptor,Zy=function(t){return typeof Array.isArray=="function"?Array.isArray(t):bk.call(t)==="[object Array]"},ew=function(t){if(!t||bk.call(t)!=="[object Object]")return!1;var n=$c.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&$c.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return typeof s>"u"||$c.call(t,s)},tw=function(t,n){Xy&&n.name==="__proto__"?Xy(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},nw=function(t,n){if(n==="__proto__")if($c.call(t,n)){if(Jy)return Jy(t,n).value}else return;return t[n]},XU=function e(){var t,n,r,s,a,o,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=nw(l,n),s=nw(t,n),l!==s&&(d&&s&&(ew(s)||(a=Zy(s)))?(a?(a=!1,o=r&&Zy(r)?r:[]):o=r&&ew(r)?r:{},tw(l,{name:n,newValue:e(d,o,s)})):typeof s<"u"&&tw(l,{name:n,newValue:s}));return l};const Ff=Pu(XU);function Mm(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function JU(){const e=[],t={run:n,use:r};return t;function n(...s){let a=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...s);function l(c,...u){const d=e[++a];let f=-1;if(c){o(c);return}for(;++f<s.length;)(u[f]===null||u[f]===void 0)&&(u[f]=s[f]);s=u,d?ZU(d,l)(...u):o(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function ZU(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(s);try{c=e.apply(this,o)}catch(u){const d=u;if(l&&n)throw d;return s(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(a,s):c instanceof Error?s(c):a(c))}function s(o,...l){n||(n=!0,t(o,...l))}function a(o){s(null,o)}}const br={basename:e5,dirname:t5,extname:n5,join:r5,sep:"/"};function e5(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Dl(e);let n=0,r=-1,s=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else o<0&&(a=!0,o=s+1),l>-1&&(e.codePointAt(s)===t.codePointAt(l--)?l<0&&(r=s):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function t5(e){if(Dl(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function n5(e){Dl(e);let t=e.length,n=-1,r=0,s=-1,a=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?s<0?s=t:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function r5(...e){let t=-1,n;for(;++t<e.length;)Dl(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":s5(n)}function s5(e){Dl(e);const t=e.codePointAt(0)===47;let n=i5(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function i5(e,t){let n="",r=0,s=-1,a=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(s===o-1||a===1))if(s!==o-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),s=o,a=0;continue}}else if(n.length>0){n="",r=0,s=o,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,o):n=e.slice(s+1,o),r=o-s-1;s=o,a=0}else l===46&&a>-1?a++:a=-1}return n}function Dl(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const a5={cwd:o5};function o5(){return"/"}function Dm(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function l5(e){if(typeof e=="string")e=new URL(e);else if(!Dm(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return c5(e)}function c5(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const $f=["history","path","basename","stem","extname","dirname"];class jk{constructor(t){let n;t?Dm(t)?n={path:t}:typeof t=="string"||u5(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":a5.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<$f.length;){const a=$f[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)$f.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?br.basename(this.path):void 0}set basename(t){Uf(t,"basename"),zf(t,"basename"),this.path=br.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?br.dirname(this.path):void 0}set dirname(t){rw(this.basename,"dirname"),this.path=br.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?br.extname(this.path):void 0}set extname(t){if(zf(t,"extname"),rw(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=br.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Dm(t)&&(t=l5(t)),Uf(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?br.basename(this.path,this.extname):void 0}set stem(t){Uf(t,"stem"),zf(t,"stem"),this.path=br.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new Gt(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function zf(e,t){if(e&&e.includes(br.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+br.sep+"`")}function Uf(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function rw(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function u5(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const d5=function(e){const r=this.constructor.prototype,s=r[e],a=function(){return s.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},f5={}.hasOwnProperty;class Dg extends d5{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=JU()}copy(){const t=new Dg;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Ff(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(qf("data",this.frozen),this.namespace[t]=n,this):f5.call(this.namespace,t)&&this.namespace[t]||void 0:t?(qf("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=yc(t),r=this.parser||this.Parser;return Bf("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Bf("process",this.parser||this.Parser),Vf("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,o){const l=yc(t),c=r.parse(l);r.run(c,l,function(d,f,p){if(d||!f||!p)return u(d);const h=f,b=r.stringify(h,p);p5(b)?p.value=b:p.result=b,u(d,p)});function u(d,f){d||!f?o(d):a?a(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),Bf("processSync",this.parser||this.Parser),Vf("processSync",this.compiler||this.Compiler),this.process(t,s),iw("processSync","process",n),r;function s(a,o){n=!0,Yy(a),r=o}}run(t,n,r){sw(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(o,l){const c=yc(n);s.run(t,c,u);function u(d,f,p){const h=f||t;d?l(d):o?o(h):r(void 0,h,p)}}}runSync(t,n){let r=!1,s;return this.run(t,n,a),iw("runSync","run",r),s;function a(o,l){Yy(o),s=l,r=!0}}stringify(t,n){this.freeze();const r=yc(n),s=this.compiler||this.Compiler;return Vf("stringify",s),sw(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(qf("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...f]=u;c(d,f)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(s.settings=Ff(!0,s.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const f=u[d];a(f)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let f=-1,p=-1;for(;++f<r.length;)if(r[f][0]===u){p=f;break}if(p===-1)r.push([u,...d]);else if(d.length>0){let[h,...b]=d;const g=r[p][1];Mm(g)&&Mm(h)&&(h=Ff(!0,g,h)),r[p]=[u,h,...b]}}}}const h5=new Dg().freeze();function Bf(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Vf(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function qf(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function sw(e){if(!Mm(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function iw(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function yc(e){return m5(e)?e:new jk(e)}function m5(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function p5(e){return typeof e=="string"||g5(e)}function g5(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const x5="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",aw=[],ow={allowDangerousHtml:!0},v5=/^(https?|ircs?|mailto|xmpp)$/i,y5=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function yl(e){const t=w5(e),n=b5(e);return j5(t.runSync(t.parse(n),n),e)}function w5(e){const t=e.rehypePlugins||aw,n=e.remarkPlugins||aw,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...ow}:ow;return h5().use(tU).use(n).use(YU,r).use(t)}function b5(e){const t=e.children||"",n=new jk;return typeof t=="string"&&(n.value=t),n}function j5(e,t){const n=t.allowedElements,r=t.allowElement,s=t.components,a=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||_5;for(const d of y5)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+x5+d.id,void 0);return wk(e,u),OF(e,{Fragment:i.Fragment,components:s,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function u(d,f,p){if(d.type==="raw"&&p&&typeof f=="number")return o?p.children.splice(f,1):p.children[f]={type:"text",value:d.value},f;if(d.type==="element"){let h;for(h in Lf)if(Object.hasOwn(Lf,h)&&Object.hasOwn(d.properties,h)){const b=d.properties[h],g=Lf[h];(g===null||g.includes(d.tagName))&&(d.properties[h]=c(String(b||""),h,d))}}if(d.type==="element"){let h=n?!n.includes(d.tagName):a?a.includes(d.tagName):!1;if(!h&&r&&typeof f=="number"&&(h=!r(d,f,p)),h&&p&&typeof f=="number")return l&&d.children?p.children.splice(f,1,...d.children):p.children.splice(f,1),f}}}function _5(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||n!==-1&&t>n||r!==-1&&t>r||v5.test(e.slice(0,t))?e:""}function lw(){const{courseId:e}=Rl(),t=Gn(),{profile:n}=it(),{toast:r}=Ve(),[s,a]=m.useState(null),[o,l]=m.useState(0),[c,u]=m.useState([]),[d,f]=m.useState(!0),p=!!n&&(n.role==="student"||n.role==="admin"||n.role==="formador"),[h,b]=m.useState(!1),g="https://docs.google.com/forms/d/e/1FAIpQLSeQ4xFNiHQmqbBv0tJ3T6qfEPyjTc4zVNYyS_TEPHQqBzKChA/viewform",w=R=>{try{const O=new URL(R,window.location.origin);return O.host.includes("docs.google.com")&&O.pathname.includes("/forms/")?(O.searchParams.has("embedded")||O.searchParams.set("embedded","true"),O.toString()):R}catch{return R}},x=new URLSearchParams(window.location.search),v=x.get("from")==="programa",y=x.get("programa");m.useEffect(()=>{e&&j()},[e,n==null?void 0:n.id]);const j=async()=>{try{const{data:R,error:O}=await D.from("courses").select("id, title, summary").eq("slug",e).single();if(O)throw O;const{data:T,error:z}=await D.from("lessons").select("*").eq("course_id",R.id).order("sort_order");if(z)throw z;let I=[];if(n!=null&&n.id){const{data:L}=await D.from("lesson_progress").select("lesson_id, completed").eq("user_id",n.id);I=L||[]}const B=(T||[]).map((L,M)=>{const E=I.find(H=>H.lesson_id===L.id),k=(E==null?void 0:E.completed)||!1;let F=M===0;if(M>0){const H=T[M-1],P=I.find(q=>q.lesson_id===H.id);P!=null&&P.completed&&(H.has_assignment,F=!0)}return{...L,completed:k,unlocked:F}});a({...R,lessons:B});const $=B[0];if($){const{data:L}=await D.from("lesson_materials").select("*").eq("lesson_id",$.id).order("sort_order");u(L||[])}else u([])}catch(R){console.error("Error fetching course:",R),r({title:"Error",description:"No se pudo cargar el curso",variant:"destructive"})}finally{f(!1)}},S=R=>{var T;const O=(T=s==null?void 0:s.lessons)==null?void 0:T[R];O!=null&&O.unlocked&&(l(R),(async()=>{const{data:z}=await D.from("lesson_materials").select("*").eq("lesson_id",O.id).order("sort_order");u(z||[])})())},_=async()=>{var O,T,z,I,B;const R=(O=s==null?void 0:s.lessons)==null?void 0:O[o];if(!(!R||!(n!=null&&n.id)))try{const{error:$}=await D.from("lesson_progress").upsert({user_id:n.id,lesson_id:R.id,completed:!0},{onConflict:"user_id,lesson_id"});if($)throw $;if(r({title:"Lección completada",description:`${R.title} marcada como completada`}),n!=null&&n.email)try{await NS({to:n.email,modulo:R.title,proximo:(z=(T=s==null?void 0:s.lessons)==null?void 0:T[o+1])==null?void 0:z.title,ctaUrl:s?`${window.location.origin}/ver-curso/${e}`:void 0})}catch{}if(s&&(n!=null&&n.email)){const L=((I=s.lessons)==null?void 0:I.length)||0,E=(((B=s.lessons)==null?void 0:B.filter(k=>k.completed).length)||0)+(R.completed?0:1);if(L>0&&E>=L)try{await PD({to:n.email,nombre:n.full_name,curso:s.title,ctaUrl:`${window.location.origin}/mi-formacion`}),await TD({to:n.email,curso:s.title,siguiente_programa:"Programa avanzado",ctaUrl:`${window.location.origin}/programas`})}catch{}}j()}catch{r({title:"Error",description:"No se pudo marcar la lección como completada",variant:"destructive"})}},N=async()=>{var T;const R=(T=s==null?void 0:s.lessons)==null?void 0:T[o];if(window.open("https://www.dropbox.com/request/LlaRtF8KefIoXHjdg0Uo","_blank","noopener,noreferrer"),!(!R||!(n!=null&&n.id)))try{const z=new Date().toISOString(),{error:I}=await D.from("assignments").insert({user_id:n.id,lesson_id:R.id,status:"submitted",text_answer:"Entrega enviada por Dropbox",updated_at:z});if(I){const{error:B}=await D.from("assignments").update({status:"submitted",text_answer:"Entrega enviada por Dropbox",updated_at:z}).eq("user_id",n.id).eq("lesson_id",R.id);if(B)throw B}r({title:"Aviso enviado",description:"Se registró tu entrega."})}catch(z){console.error("Error registrando entrega:",z),r({title:"No se pudo registrar la entrega",description:(z==null?void 0:z.message)||"Permisos/RLS o conexión.",variant:"destructive"})}};if(d)return i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})});if(!s||!s.lessons||s.lessons.length===0)return i.jsxs("div",{className:"text-center py-12",children:[i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No hay lecciones disponibles"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Este curso aún no tiene lecciones publicadas."}),i.jsx(V,{onClick:()=>{t(v&&y?`/programas/${y}`:"/mis-programas")},children:v?"Volver al Programa":"Volver a Mis Programas"})]});const C=s.lessons[o],A=s.lessons.filter(R=>R.completed).length;return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>t("/mi-formacion"),children:[i.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Mi Formación"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-foreground",children:s.title}),i.jsx("p",{className:"text-muted-foreground",children:s.summary})]})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[C.video_url?i.jsx(F3,{videoUrl:C.video_url,title:C.title}):i.jsx(K,{children:i.jsxs(Q,{className:"p-12 text-center",children:[i.jsx(ur,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Sin video disponible"}),i.jsx("p",{className:"text-muted-foreground",children:"Esta lección no tiene video asignado"})]})}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsx("div",{children:i.jsx(we,{className:"text-lg",children:C.title})}),i.jsx("div",{className:"flex items-center gap-2",children:C.duration_minutes&&C.duration_minutes>0&&i.jsxs(Ee,{variant:"secondary",className:"gap-1",children:[i.jsx(ts,{className:"h-3 w-3"}),C.duration_minutes," min"]})})]})}),i.jsxs(Q,{children:[C.description&&i.jsx("div",{className:"mb-4 prose dark:prose-invert max-w-none",children:i.jsx(yl,{children:C.description})}),c.length>0&&i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"h-4 w-4"}),i.jsx("span",{className:"font-medium",children:"Materiales"})]}),c.map(R=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[R.type==="file"?i.jsx(Un,{className:"h-4 w-4"}):i.jsx(Dp,{className:"h-4 w-4"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:R.title}),i.jsx(Ee,{variant:"secondary",className:"text-xs",children:R.type==="file"?"Archivo":"Enlace"})]})]}),i.jsx(V,{size:"sm",onClick:()=>{const O=R.type==="file"?R.file_url:R.url;O&&window.open(O,"_blank")},children:R.type==="file"?"Descargar":"Abrir"})]},R.id))]}),p&&(C.has_assignment||C.requires_admin_approval||!!C.approval_form_url)&&i.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[(C.requires_admin_approval||C.approval_form_url)&&i.jsx(V,{variant:"outline",onClick:()=>{const R=C.approval_form_url||g;window.open(R,"_blank","noopener,noreferrer")},children:"Completar formulario"}),i.jsx(V,{onClick:N,children:"Enviar trabajo práctico"})]}),(n==null?void 0:n.id)&&!C.completed&&!C.requires_admin_approval&&i.jsxs(V,{onClick:_,className:"gap-2",children:[i.jsx(Ei,{className:"h-4 w-4"}),"Marcar como Completada"]})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{className:"text-lg",children:"Lecciones del Curso"})}),i.jsx(Q,{className:"space-y-3",children:s.lessons.map((R,O)=>i.jsx("div",{className:`
                     p-3 rounded-lg border transition-colors
                     ${R.unlocked?O===o?"bg-accent/10 border-accent cursor-pointer":"hover:bg-muted/50 cursor-pointer":"opacity-50 cursor-not-allowed bg-muted/30"}
                   `,onClick:()=>S(O),children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`
                       h-8 w-8 rounded-lg flex items-center justify-center
                       ${R.unlocked?R.completed?"bg-green-100 text-green-600 dark:bg-green-900/20":"bg-accent/20 text-accent":"bg-gray-200 text-gray-400 dark:bg-gray-700 dark:text-gray-500"}
                     `,children:R.unlocked?R.completed?i.jsx(Ei,{className:"h-4 w-4"}):i.jsx(ur,{className:"h-4 w-4"}):i.jsx("span",{className:"text-xs",children:"🔒"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-sm leading-tight",children:R.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[R.duration_minutes&&R.duration_minutes>0&&i.jsxs(Ee,{variant:"outline",className:"text-xs",children:[R.duration_minutes," min"]}),R.completed&&i.jsx(Ee,{variant:"outline",className:"text-xs text-green-600",children:"Completada"})]})]})]})},R.id))})]}),i.jsx(K,{children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"Progreso del Curso"}),i.jsx("div",{className:"w-full bg-muted rounded-full h-2 mb-2",children:i.jsx("div",{className:"bg-accent h-2 rounded-full",style:{width:`${A/s.lessons.length*100}%`}})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[A," de ",s.lessons.length," lecciones completadas"]})]})})})]})]}),i.jsx(St,{open:h,onOpenChange:b,children:i.jsxs(wt,{className:"max-w-3xl h-[80vh]",children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Formulario de entrega"})}),i.jsx("div",{className:"w-full h-full bg-white rounded-md overflow-hidden",children:i.jsx("iframe",{src:w(C.approval_form_url||g),className:"w-full h-full",style:{border:"0"}})})]})})]})}function Eu({open:e,onOpenChange:t,lessonId:n,lessonTitle:r}){const[s,a]=m.useState([]),[o,l]=m.useState({title:"",type:"link",url:"",file:null});m.useState(!1);const[c,u]=m.useState(!1),{toast:d}=Ve();m.useEffect(()=>{e&&f()},[e,n]);const f=async()=>{try{const{data:w,error:x}=await D.from("lesson_materials").select("*").eq("lesson_id",n).order("sort_order");if(x)throw x;a(w||[])}catch{d({title:"Error",description:"No se pudieron cargar los materiales",variant:"destructive"})}},p=async w=>{try{const x=w.name.split(".").pop(),y=`materials/${`${Math.random()}.${x}`}`,{error:j}=await D.storage.from("materials").upload(y,w);if(j)throw j;const{data:S}=D.storage.from("materials").getPublicUrl(y);return S.publicUrl}catch(x){return console.error("Error uploading file:",x),null}},h=async()=>{if(console.log("Trying to add material:",o),!o.title.trim()){d({title:"Error",description:"El título es obligatorio",variant:"destructive"});return}if(o.type==="link"&&!o.url.trim()){d({title:"Error",description:"La URL es obligatoria para materiales de enlace",variant:"destructive"});return}if(o.type==="file"&&!o.file){d({title:"Error",description:"Selecciona un archivo",variant:"destructive"});return}u(!0);try{let w=null,x=null;if(o.type==="file"&&o.file){if(console.log("Uploading file:",o.file.name),w=await p(o.file),!w)throw new Error("Error uploading file");console.log("File uploaded successfully:",w)}else x=o.url.trim();const v={lesson_id:n,title:o.title.trim(),type:o.type,file_url:w,url:x,sort_order:s.length+1};console.log("Inserting material data:",v);const{error:y}=await D.from("lesson_materials").insert([v]);if(y)throw console.error("Database error inserting material:",y),y;console.log("Material inserted successfully"),await D.from("lessons").update({has_materials:!0}).eq("id",n),d({title:"Material agregado",description:"El material ha sido agregado exitosamente"}),l({title:"",type:"link",url:"",file:null}),f()}catch(w){console.error("Full error adding material:",w),d({title:"Error",description:`No se pudo agregar el material: ${w.message}`,variant:"destructive"})}finally{u(!1)}},b=async w=>{try{const{error:x}=await D.from("lesson_materials").delete().eq("id",w);if(x)throw x;s.filter(y=>y.id!==w).length===0&&await D.from("lessons").update({has_materials:!1}).eq("id",n),d({title:"Material eliminado",description:"El material ha sido eliminado"}),f()}catch{d({title:"Error",description:"No se pudo eliminar el material",variant:"destructive"})}},g=w=>w==="file"?i.jsx(Un,{className:"h-4 w-4"}):i.jsx(Dp,{className:"h-4 w-4"});return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[600px] max-h-[80vh] overflow-hidden flex flex-col",children:[i.jsx(kt,{children:i.jsxs(Ct,{children:["Materiales - ",r]})}),i.jsxs("div",{className:"space-y-4 flex-1 overflow-hidden",children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4 space-y-4",children:[i.jsx("h3",{className:"font-medium",children:"Agregar Material"}),i.jsxs("div",{children:[i.jsx(X,{children:"Título"}),i.jsx(ve,{value:o.title,onChange:w=>l({...o,title:w.target.value}),placeholder:"Nombre del material"})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Tipo"}),i.jsxs(ot,{value:o.type,onValueChange:w=>l({...o,type:w}),children:[i.jsx(nt,{children:i.jsx(lt,{})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"link",children:"Enlace URL"}),i.jsx(fe,{value:"file",children:"Archivo"})]})]})]}),o.type==="link"?i.jsxs("div",{children:[i.jsx(X,{children:"URL"}),i.jsx(ve,{type:"url",value:o.url,onChange:w=>l({...o,url:w.target.value}),placeholder:"https://..."})]}):i.jsxs("div",{children:[i.jsx(X,{children:"Archivo"}),i.jsx(ve,{type:"file",onChange:w=>{var x;return l({...o,file:((x=w.target.files)==null?void 0:x[0])||null})},accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.mp4,.mp3"})]}),i.jsxs(V,{onClick:h,disabled:c,className:"w-full",children:[i.jsx(qn,{className:"h-4 w-4 mr-2"}),c?"Agregando...":"Agregar Material"]})]})}),i.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3",children:[i.jsxs("h3",{className:"font-medium",children:["Materiales existentes (",s.length,")"]}),s.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(Un,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay materiales en esta lección"}),i.jsx("p",{className:"text-sm mt-2",children:"Agrega el primer material usando el formulario de arriba"})]}):s.map(w=>i.jsx(K,{children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[g(w.type),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:w.title}),i.jsx(Ee,{variant:"secondary",className:"text-xs",children:w.type==="file"?"Archivo":"Enlace"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[w.type==="link"&&w.url&&i.jsx(V,{size:"sm",variant:"outline",onClick:()=>window.open(w.url,"_blank"),children:"Abrir"}),w.type==="file"&&w.file_url&&i.jsx(V,{size:"sm",variant:"outline",onClick:()=>window.open(w.file_url,"_blank"),children:"Descargar"}),i.jsx(V,{size:"sm",variant:"destructive",onClick:()=>b(w.id),children:i.jsx(pP,{className:"h-4 w-4"})})]})]})})},w.id))]})]}),i.jsx("div",{className:"pt-4 border-t",children:i.jsx(V,{variant:"outline",onClick:()=>t(!1),className:"w-full",children:"Cerrar"})})]})})}function S5(){var _,N;const{slug:e}=Rl(),t=Gn(),{profile:n}=it(),{toast:r}=Ve(),[s,a]=m.useState(null),[o,l]=m.useState([]),[c,u]=m.useState(!0),[d,f]=m.useState(!1),[p,h]=m.useState(!1),[b,g]=m.useState(""),[w,x]=m.useState("");m.useState(!1);const[v,y]=m.useState(!1),j=(n==null?void 0:n.role)==="formador"||(n==null?void 0:n.role)==="admin";m.useEffect(()=>{e&&S()},[e]);const S=async()=>{var C,A;u(!0);try{const{data:R,error:O}=await D.from("lessons").select(`
          *,
          lesson_courses (
            courses (
              title,
              programs (title)
            )
          )
        `).eq("slug",e).maybeSingle();if(O)throw O;const T=(A=(C=R.lesson_courses)==null?void 0:C[0])==null?void 0:A.courses,z={...R,course:T?{title:T.title,program:T.programs}:null};a(z);const{data:I,error:B}=await D.from("lesson_materials").select("*").eq("lesson_id",R.id).order("sort_order");if(B?console.error("Error fetching materials:",B):console.log("Materials loaded for lesson:",R.title,I),l(I||[]),n&&(R!=null&&R.id)){const{data:$}=await D.from("assignments").select("id, status, file_url, text_answer").eq("user_id",n.id).eq("lesson_id",R.id).limit(1).maybeSingle();$?(y(!0),g($.file_url||""),x($.text_answer||"")):(y(!1),g(""),x(""))}}catch{r({title:"Error",description:"No se pudo cargar la lección",variant:"destructive"}),t("/lecciones")}finally{u(!1)}};return c?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):s?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>t("/lecciones"),children:[i.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Lecciones"]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:s.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"text-muted-foreground",children:(_=s.course)==null?void 0:_.title}),((N=s.course)==null?void 0:N.program)&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-muted-foreground",children:"•"}),i.jsx("span",{className:"text-muted-foreground",children:s.course.program.title})]})]})]})]}),j&&i.jsx("div",{className:"flex gap-2",children:i.jsxs(V,{onClick:()=>f(!0),variant:"outline",children:[i.jsx(Un,{className:"h-4 w-4 mr-2"}),"Materiales (",o.length,")"]})})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.video_url&&i.jsx(K,{children:i.jsx(Q,{className:"p-0",children:i.jsx("div",{className:"aspect-video",children:i.jsx("iframe",{src:s.video_url,title:s.title,className:"w-full h-full rounded-lg",allowFullScreen:!0})})})}),s.description&&i.jsxs("div",{children:[i.jsx(V,{onClick:()=>h(!0),className:"w-full",children:"Leer antes de ver la lección"}),i.jsx(St,{open:p,onOpenChange:h,children:i.jsxs(wt,{className:"max-w-2xl",children:[i.jsxs(kt,{children:[i.jsx(Ct,{children:"Descripción"}),i.jsx(ei,{children:"Lee atentamente antes de comenzar"})]}),i.jsx("div",{className:"prose dark:prose-invert max-w-none",children:i.jsx(yl,{children:s.description})})]})})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"h-5 w-5"}),"Materiales",j&&i.jsxs(V,{variant:"outline",size:"sm",onClick:()=>f(!0),className:"ml-auto",children:[i.jsx(vj,{className:"h-4 w-4 mr-2"}),"Gestionar Materiales"]})]})}),i.jsx(Q,{className:"space-y-3",children:o.length>0?o.map(C=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[C.type==="file"?i.jsx(Un,{className:"h-4 w-4"}):i.jsx(Dp,{className:"h-4 w-4"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:C.title}),i.jsx(Ee,{variant:"secondary",className:"text-xs",children:C.type==="file"?"Archivo":"Enlace"})]})]}),i.jsx(V,{size:"sm",onClick:()=>{const A=C.type==="file"?C.file_url:C.url;A&&window.open(A,"_blank")},children:C.type==="file"?"Descargar":"Abrir"})]},C.id)):i.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[i.jsx(Un,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"No hay materiales disponibles para esta lección"}),j&&i.jsx("p",{className:"text-sm mt-2",children:'Usa el botón "Gestionar Materiales" para agregar contenido'})]})})]})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Información"})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("span",{className:"text-sm",children:["Duración: ",s.duration_minutes," minutos"]})]}),s.has_assignment&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rn,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-sm",children:"Tiene entregable"})]}),(n==null?void 0:n.role)==="student"&&i.jsx("div",{className:"space-y-2 p-3 border rounded-md",children:i.jsx(V,{className:"w-full",onClick:()=>window.open("https://www.dropbox.com/request/LlaRtF8KefIoXHjdg0Uo","_blank"),children:"Enviar trabajo práctico (Dropbox)"})})]}),s.has_materials&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs("span",{className:"text-sm",children:[o.length," material(es)"]})]})]})]})})]}),s&&i.jsx(Eu,{open:d,onOpenChange:C=>{f(C),C||S()},lessonId:s.id,lessonTitle:s.title})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx("p",{className:"text-destructive",children:"Lección no encontrada"}),i.jsx(V,{onClick:()=>t("/lecciones"),className:"mt-4",children:"Volver a Lecciones"})]})}function N5(){const{id:e}=Rl(),t=Gn(),{profile:n}=it(),{toast:r}=Ve(),[s,a]=m.useState(""),[o,l]=m.useState(!1),[c,u]=m.useState({id:e||"1",title:"🌟 ¡Bienvenidos al Foro de Geometría Sagrada!",content:"Este es el espacio de nuestra comunidad para compartir experiencias, hacer preguntas y aprender juntos sobre los misterios de la geometría sagrada. ¡Siéntanse libres de participar y compartir sus descubrimientos! 📐✨",author:"Carlos Méndez",authorRole:"teacher",createdAt:"2025-01-04T10:30:00Z",replies:[{id:"1",content:"¡Excelente iniciativa! Estoy muy emocionado por aprender de todos ustedes.",author:"María López",authorRole:"student",createdAt:"2025-01-04T10:35:00Z"},{id:"2",content:"Gracias por crear este espacio, Profesor. Tengo muchas preguntas sobre los patrones fractales.",author:"Ana García",authorRole:"student",createdAt:"2025-01-04T10:40:00Z"}],likes:15,category:"Anuncios",isLiked:!1,pinned:!0}),d=()=>{u(g=>({...g,likes:g.isLiked?g.likes-1:g.likes+1,isLiked:!g.isLiked}))},f=async()=>{if(!s.trim()){r({title:"Error",description:"Por favor escribe una respuesta",variant:"destructive"});return}l(!0);try{const g={id:Date.now().toString(),content:s,author:(n==null?void 0:n.full_name)||(n==null?void 0:n.email)||"—",authorRole:(n==null?void 0:n.role)||"student",createdAt:new Date().toISOString()};u(w=>({...w,replies:[...w.replies,g]})),a(""),r({title:"Respuesta enviada",description:"Tu respuesta ha sido publicada exitosamente"})}finally{l(!1)}},p=g=>new Date(g).toLocaleDateString("es-ES",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}),h=g=>{switch(g){case"teacher":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"admin":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300";default:return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300"}},b=g=>{switch(g){case"teacher":return"Profesor";case"admin":return"Admin";default:return"Estudiante"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center gap-4 mb-6",children:i.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>t("/comunidad"),children:[i.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Volver al foro"]})}),i.jsx(K,{children:i.jsx(Q,{className:"p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx(ss,{className:"h-12 w-12",children:i.jsx(is,{className:"bg-accent text-accent-foreground",children:c.author.split(" ").map(g=>g[0]).join("").toUpperCase()})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"flex items-start justify-between mb-2",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-foreground",children:c.title}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:c.author}),i.jsx(Ee,{className:h(c.authorRole),children:b(c.authorRole)}),i.jsx(Ee,{variant:"outline",children:c.category}),i.jsx("span",{className:"text-xs text-muted-foreground",children:p(c.createdAt)})]})]})}),i.jsx("p",{className:"text-foreground mb-4",children:c.content}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(V,{variant:"ghost",size:"sm",className:`gap-1 ${c.isLiked?"text-accent":""}`,onClick:d,children:[i.jsx(mP,{className:"h-4 w-4"}),c.likes]}),i.jsxs(V,{variant:"ghost",size:"sm",className:"gap-1",children:[i.jsx(Pi,{className:"h-4 w-4"}),c.replies.length," respuestas"]})]})]})]})})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h2",{className:"text-lg font-semibold text-foreground",children:["Respuestas (",c.replies.length,")"]}),c.replies.map(g=>i.jsx(K,{children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(ss,{className:"h-8 w-8",children:i.jsx(is,{className:"bg-muted text-muted-foreground text-xs",children:g.author.split(" ").map(w=>w[0]).join("").toUpperCase()})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-foreground",children:g.author}),i.jsx(Ee,{className:h(g.authorRole),variant:"outline",children:b(g.authorRole)}),i.jsx("span",{className:"text-xs text-muted-foreground",children:p(g.createdAt)})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:g.content})]})]})})},g.id))]}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"Añadir respuesta"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(At,{placeholder:"Escribe tu respuesta...",rows:3,value:s,onChange:g=>a(g.target.value)}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(V,{onClick:f,disabled:o,className:"gap-2",children:[o?i.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}):i.jsx(xj,{className:"h-4 w-4"}),o?"Enviando...":"Responder"]})})]})]})})]})}function k5({open:e,onOpenChange:t,onSuccess:n,inline:r}){const[s,a]=m.useState(""),[o,l]=m.useState(""),[c,u]=m.useState(""),[d,f]=m.useState(""),[p,h]=m.useState(""),[b,g]=m.useState(""),[w,x]=m.useState(!1),[v,y]=m.useState(""),[j,S]=m.useState(!1),[_,N]=m.useState(""),[C,A]=m.useState("none"),[R,O]=m.useState(!1),[T,z]=m.useState([]),[I,B]=m.useState([]),[$,L]=m.useState(!1),[M,E]=m.useState(!1),[k,F]=m.useState(""),{toast:H}=Ve();m.useEffect(()=>{(r||e)&&P()},[e,r]),m.useEffect(()=>{d&&q()},[d]);const P=async()=>{const{data:U}=await D.from("courses").select(`
        id, 
        title,
        program:programs (title)
      `).order("title");z(U||[])},q=async()=>{if(!d){B([]);return}try{const{data:U,error:ce}=await D.from("lessons").select("id, title, sort_order").eq("course_id",d).order("sort_order");if(ce)throw ce;B(U||[])}catch{B([])}},de=U=>U.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),le=async(U,ce)=>{const ge=U||"leccion",{data:ne}=await D.from("lessons").select("slug").eq("course_id",ce).ilike("slug",`${ge}%`),me=new Set((ne||[]).map(Re=>Re.slug));if(!me.has(ge))return ge;let He=2;for(;me.has(`${ge}-${He}`);)He++;return`${ge}-${He}`},Y=U=>{a(U),u(de(U))},re=async U=>{if(U.preventDefault(),!s.trim()||!d){H({title:"Error",description:"Título y curso son obligatorios",variant:"destructive"});return}L(!0);try{const ce=de(s.trim()),ge=await le(ce,d),{data:ne,error:me}=await D.from("lessons").insert([{title:s.trim(),description:o.trim()||null,slug:ge,course_id:d,video_url:p.trim()||null,duration_minutes:b?parseInt(b):0,has_assignment:w,assignment_instructions:w&&v.trim()||null,requires_admin_approval:j,approval_form_url:j&&_.trim()||null,prerequisite_lesson_id:C&&C!=="none"?C:null,has_materials:R,sort_order:I.length+1}]).select("id").single();if(me)throw me;H({title:"Lección creada",description:`La lección "${s}" ha sido creada exitosamente`}),R&&ne?(F(ne.id),E(!0)):(he(),r||t&&t(!1),n())}catch(ce){H({title:"Error",description:ce.message||"No se pudo crear la lección",variant:"destructive"})}finally{L(!1)}},he=()=>{a(""),l(""),u(""),f(""),h(""),g(""),x(!1),y(""),S(!1),N(""),A(""),O(!1)},Z=()=>{E(!1),he(),r||t&&t(!1),n()};return r?i.jsxs("div",{className:"w-full",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Nueva Lección"}),i.jsxs("form",{onSubmit:re,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"course",children:"Curso"}),i.jsxs(ot,{value:d,onValueChange:f,disabled:$,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Seleccionar curso"})}),i.jsx(rt,{children:T.map(U=>{var ce;return i.jsxs(fe,{value:U.id,children:[U.title,((ce=U.program)==null?void 0:ce.title)&&i.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",U.program.title,")"]})]},U.id)})})]})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Título de la Lección"}),i.jsx(ve,{id:"title",value:s,onChange:U=>Y(U.target.value),placeholder:"Ej: Los Números Sagrados",disabled:$})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"description",children:"Descripción (Markdown)"}),i.jsx(At,{id:"description",value:o,onChange:U=>l(U.target.value),placeholder:"Puedes usar negritas, listas, títulos, enlaces, etc.",rows:6,disabled:$}),i.jsxs("div",{className:"mt-3 p-3 border rounded-md",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Vista previa"}),i.jsx("div",{className:"prose dark:prose-invert max-w-none text-sm",children:i.jsx(yl,{children:o||"*Sin contenido*"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"videoUrl",children:"URL del Video"}),i.jsx(ve,{id:"videoUrl",value:p,onChange:U=>h(U.target.value),placeholder:"https://vimeo.com/...",disabled:$})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"duration",children:"Duración (minutos)"}),i.jsx(ve,{id:"duration",type:"number",value:b,onChange:U=>g(U.target.value),placeholder:"30",disabled:$})]})]}),I.length>0&&i.jsxs("div",{children:[i.jsx(X,{htmlFor:"prerequisite",children:"Lección Prerequisito"}),i.jsxs(ot,{value:C,onValueChange:A,disabled:$,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Sin prerequisito"})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"none",children:"Sin prerequisito"}),I.map(U=>i.jsx(fe,{value:U.id,children:U.title},U.id))]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{id:"hasAssignment",checked:w,onCheckedChange:U=>x(U),disabled:$}),i.jsx(X,{htmlFor:"hasAssignment",children:"Tiene tarea/entregable"})]}),w&&i.jsxs("div",{children:[i.jsx(X,{htmlFor:"assignmentInstructions",children:"Instrucciones de la Tarea"}),i.jsx(At,{id:"assignmentInstructions",value:v,onChange:U=>y(U.target.value),placeholder:"Instrucciones para el estudiante...",rows:3,disabled:$})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{id:"requiresApproval",checked:j,onCheckedChange:U=>S(U),disabled:$}),i.jsx(X,{htmlFor:"requiresApproval",children:"Requiere aprobación del administrador"})]}),j&&i.jsxs("div",{children:[i.jsx(X,{htmlFor:"approvalFormUrl",children:"URL del Formulario de Aprobación"}),i.jsx(ve,{id:"approvalFormUrl",value:_,onChange:U=>N(U.target.value),placeholder:"https://docs.google.com/forms/...",disabled:$})]}),i.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-muted/50",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{id:"hasMaterials",checked:R,onCheckedChange:U=>O(U),disabled:$}),i.jsx(X,{htmlFor:"hasMaterials",className:"text-sm font-medium",children:"Cargar materiales al crear la lección"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Si marcas esta opción, se abrirá automáticamente el diálogo para cargar materiales inmediatamente después de crear la lección."})]}),i.jsx("div",{className:"flex gap-2 pt-4",children:i.jsx(V,{type:"submit",disabled:$,className:"flex-1",children:$?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}),"Creando..."]}):"Crear Lección"})})]}),M&&k&&i.jsx(Eu,{open:M,onOpenChange:Z,lessonId:k,lessonTitle:s})]}):i.jsx(St,{open:!!e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[i.jsxs(kt,{children:[i.jsx(Ct,{children:"Crear Nueva Lección"}),i.jsx(ei,{children:"Completa los campos y previsualiza la descripción en Markdown."})]}),i.jsxs("form",{onSubmit:re,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"course",children:"Curso"}),i.jsxs(ot,{value:d,onValueChange:f,disabled:$,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Seleccionar curso"})}),i.jsx(rt,{children:T.map(U=>i.jsxs(fe,{value:U.id,children:[U.title,U.program&&i.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",U.program.title,")"]})]},U.id))})]})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Título de la Lección"}),i.jsx(ve,{id:"title",value:s,onChange:U=>Y(U.target.value),placeholder:"Ej: Los Números Sagrados",disabled:$})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"description",children:"Descripción (Markdown)"}),i.jsx(At,{id:"description",value:o,onChange:U=>l(U.target.value),placeholder:"Puedes usar negritas, listas, títulos, enlaces, etc.",rows:6,disabled:$}),i.jsxs("div",{className:"mt-3 p-3 border rounded-md",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Vista previa"}),i.jsx("div",{className:"prose dark:prose-invert max-w-none text-sm",children:i.jsx(yl,{children:o||"*Sin contenido*"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"videoUrl",children:"URL del Video"}),i.jsx(ve,{id:"videoUrl",value:p,onChange:U=>h(U.target.value),placeholder:"https://vimeo.com/...",disabled:$})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"duration",children:"Duración (minutos)"}),i.jsx(ve,{id:"duration",type:"number",value:b,onChange:U=>g(U.target.value),placeholder:"30",disabled:$})]})]}),I.length>0&&i.jsxs("div",{children:[i.jsx(X,{htmlFor:"prerequisite",children:"Lección Prerequisito"}),i.jsxs(ot,{value:C,onValueChange:A,disabled:$,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Sin prerequisito"})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"",children:"Sin prerequisito"}),I.map(U=>i.jsx(fe,{value:U.id,children:U.title},U.id))]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{id:"hasAssignment",checked:w,onCheckedChange:U=>x(U),disabled:$}),i.jsx(X,{htmlFor:"hasAssignment",children:"Tiene tarea/entregable"})]}),w&&i.jsxs("div",{children:[i.jsx(X,{htmlFor:"assignmentInstructions",children:"Instrucciones de la Tarea"}),i.jsx(At,{id:"assignmentInstructions",value:v,onChange:U=>y(U.target.value),placeholder:"Instrucciones para el estudiante...",rows:3,disabled:$})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{id:"requiresApproval",checked:j,onCheckedChange:U=>S(U),disabled:$}),i.jsx(X,{htmlFor:"requiresApproval",children:"Requiere aprobación del administrador"})]}),i.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-muted/50",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{id:"hasMaterials",checked:R,onCheckedChange:U=>O(U),disabled:$}),i.jsx(X,{htmlFor:"hasMaterials",className:"text-sm font-medium",children:"Cargar materiales al crear la lección"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Si marcas esta opción, se abrirá automáticamente el diálogo para cargar materiales inmediatamente después de crear la lección."})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{type:"submit",disabled:$,className:"flex-1",children:$?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}),"Creando..."]}):"Crear Lección"}),i.jsx(V,{type:"button",variant:"outline",onClick:()=>t&&t(!1),disabled:$,children:"Cancelar"})]})]}),M&&k&&i.jsx(Eu,{open:M,onOpenChange:Z,lessonId:k,lessonTitle:s})]})})}function C5({open:e,onOpenChange:t,onSuccess:n,lessonId:r}){const[s,a]=m.useState(""),[o,l]=m.useState(""),[c,u]=m.useState(""),[d,f]=m.useState([]),[p,h]=m.useState(""),[b,g]=m.useState(""),[w,x]=m.useState(!1),[v,y]=m.useState(""),[j,S]=m.useState(!1),[_,N]=m.useState("none"),[C,A]=m.useState(!1),[R,O]=m.useState([]),[T,z]=m.useState([]),[I,B]=m.useState(!1),{toast:$}=Ve();m.useEffect(()=>{e&&r&&(L(),E())},[e,r]),m.useEffect(()=>{d.length>0&&k()},[d]);const L=async()=>{var le;const{data:q,error:de}=await D.from("lessons").select("*").eq("id",r).single();if(de){$({title:"Error",description:"No se pudo cargar la lección",variant:"destructive"});return}q&&(a(q.title||""),l(q.description||""),u(q.slug||""),h(q.video_url||""),g(((le=q.duration_minutes)==null?void 0:le.toString())||""),x(q.has_assignment||!1),y(q.assignment_instructions||""),S(q.requires_admin_approval||!1),N(q.prerequisite_lesson_id||"none"),A(q.has_materials||!1),M())},M=async()=>{const{data:q,error:de}=await D.from("lesson_courses").select("course_id").eq("lesson_id",r);if(de){f([]);return}const le=(q||[]).map(he=>he.course_id).filter(Boolean);if(le.length>0){f(le);return}const{data:Y,error:re}=await D.from("lessons").select("course_id").eq("id",r).maybeSingle();!re&&(Y!=null&&Y.course_id)?f([Y.course_id]):f([])},E=async()=>{const{data:q,error:de}=await D.from("courses").select(`
        id, 
        title,
        program_courses (
          programs (title)
        )
      `).order("title");if(de){O([]);return}const le=(q||[]).map(Y=>{var re,he;return{id:Y.id,title:Y.title,program:(he=(re=Y.program_courses)==null?void 0:re[0])!=null&&he.programs?{title:Y.program_courses[0].programs.title}:void 0}});O(le)},k=async()=>{if(d.length===0)return;const{data:q}=await D.from("lessons").select(`
        id, 
        title, 
        sort_order,
        lesson_courses!inner (course_id)
      `).in("lesson_courses.course_id",d).neq("id",r).order("sort_order");z(q||[])},F=q=>q.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),H=q=>{a(q),u(F(q))},P=async q=>{if(q.preventDefault(),!s.trim()||!c.trim()){$({title:"Error",description:"Título y slug son obligatorios",variant:"destructive"});return}if(d.length===0){$({title:"Error",description:"Selecciona al menos un curso (no se eliminarán relaciones existentes)",variant:"destructive"});return}B(!0);try{const{error:de}=await D.from("lessons").update({title:s.trim(),description:o.trim()||null,slug:c.trim(),video_url:p.trim()||null,duration_minutes:b?parseInt(b):0,has_assignment:w,assignment_instructions:w&&v.trim()||null,requires_admin_approval:j,prerequisite_lesson_id:_&&_!=="none"?_:null,has_materials:C}).eq("id",r);if(de)throw de;const{error:le}=await D.from("lesson_courses").delete().eq("lesson_id",r);if(le)throw le;if(d.length>0){const Y=d.map(he=>({lesson_id:r,course_id:he})),{error:re}=await D.from("lesson_courses").insert(Y);if(re)throw re}$({title:"Lección actualizada",description:`La lección "${s}" ha sido actualizada exitosamente`}),t(!1),n()}catch(de){$({title:"Error",description:de.message||"No se pudo actualizar la lección",variant:"destructive"})}finally{B(!1)}};return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[i.jsxs(kt,{children:[i.jsx(Ct,{children:"Editar Lección"}),i.jsx(ei,{children:"Edita los campos y previsualiza la descripción en Markdown."})]}),i.jsxs("form",{onSubmit:P,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Cursos (selecciona uno o varios)"}),i.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto border rounded-md p-2",children:R.map(q=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:`course-${q.id}`,checked:d.includes(q.id),onChange:de=>{de.target.checked?f([...d,q.id]):f(d.filter(le=>le!==q.id))},disabled:I,className:"rounded"}),i.jsxs(X,{htmlFor:`course-${q.id}`,className:"text-sm",children:[q.title,q.program&&i.jsxs("span",{className:"text-muted-foreground",children:[" - ",q.program.title]})]})]},q.id))})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Título de la Lección"}),i.jsx(ve,{id:"title",value:s,onChange:q=>H(q.target.value),placeholder:"Ej: Los Números Sagrados",disabled:I})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"slug",children:"Slug (URL)"}),i.jsx(ve,{id:"slug",value:c,onChange:q=>u(q.target.value),placeholder:"los-numeros-sagrados",disabled:I})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"description",children:"Descripción (Markdown)"}),i.jsx(At,{id:"description",value:o,onChange:q=>l(q.target.value),placeholder:"Puedes usar negritas, listas, títulos, enlaces, etc.",rows:6,disabled:I}),i.jsxs("div",{className:"mt-3 p-3 border rounded-md",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Vista previa"}),i.jsx("div",{className:"prose dark:prose-invert max-w-none text-sm",children:i.jsx(yl,{children:o||"*Sin contenido*"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"videoUrl",children:"URL del Video"}),i.jsx(ve,{id:"videoUrl",value:p,onChange:q=>h(q.target.value),placeholder:"https://vimeo.com/...",disabled:I})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"duration",children:"Duración (minutos)"}),i.jsx(ve,{id:"duration",type:"number",value:b,onChange:q=>g(q.target.value),placeholder:"30",disabled:I})]})]}),T.length>0&&i.jsxs("div",{children:[i.jsx(X,{htmlFor:"prerequisite",children:"Lección Prerequisito"}),i.jsxs(ot,{value:_,onValueChange:N,disabled:I,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Sin prerequisito"})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"none",children:"Sin prerequisito"}),T.map(q=>i.jsx(fe,{value:q.id,children:q.title},q.id))]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{id:"hasAssignment",checked:w,onCheckedChange:q=>x(q),disabled:I}),i.jsx(X,{htmlFor:"hasAssignment",children:"Tiene tarea/entregable"})]}),w&&i.jsxs("div",{children:[i.jsx(X,{htmlFor:"assignmentInstructions",children:"Instrucciones de la Tarea"}),i.jsx(At,{id:"assignmentInstructions",value:v,onChange:q=>y(q.target.value),placeholder:"Instrucciones para el estudiante...",rows:3,disabled:I})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{id:"requiresApproval",checked:j,onCheckedChange:q=>S(q),disabled:I}),i.jsx(X,{htmlFor:"requiresApproval",children:"Requiere aprobación del administrador"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{id:"hasMaterials",checked:C,onCheckedChange:q=>A(q),disabled:I}),i.jsx(X,{htmlFor:"hasMaterials",children:"Tiene materiales (PDFs, enlaces, etc.)"})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{type:"submit",disabled:I,className:"flex-1",children:I?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}),"Actualizando..."]}):"Actualizar Lección"}),i.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:I,children:"Cancelar"})]})]})]})})}function E5(){const{profile:e}=it(),{toast:t}=Ve(),[n,r]=m.useState([]),[s,a]=m.useState(!0),[o,l]=m.useState(0),[c,u]=m.useState({});m.useState(!1);const[d,f]=m.useState(!1),[p,h]=m.useState(!1),[b,g]=m.useState(null),w=["teacher","profesor","admin","formador"].includes((e==null?void 0:e.role)||"");m.useEffect(()=>{w&&x()},[w]);const x=async()=>{var _,N,C,A;if(w){a(!0);try{const{data:R,error:O}=await D.from("lessons").select(`
          id,
          title,
          description,
          slug,
          duration_minutes,
          has_assignment,
          requires_admin_approval,
          courses:course_id (
            id,
            title,
            program:programs ( title )
          )
        `).order("sort_order");if(O)throw O;const T=[];for(const I of R||[]){const B=((_=I.courses)==null?void 0:_.id)||"sin-curso",$=((N=I.courses)==null?void 0:N.title)||"Sin curso asignado",L=((A=(C=I.courses)==null?void 0:C.program)==null?void 0:A.title)||"Sin programa",M={id:I.id,title:I.title,description:I.description,slug:I.slug,duration_minutes:I.duration_minutes,has_assignment:I.has_assignment,requires_admin_approval:I.requires_admin_approval,courses:{title:$,programs:{title:L}}};let E=T.find(k=>k.courseId===B);E||(E={courseId:B,courseTitle:$,programTitle:L,lessons:[]},T.push(E)),E.lessons.push(M)}r(T);const z=(R||[]).map(I=>I.id);if(z.length>0){const{count:I}=await D.from("assignments").select("*",{count:"exact",head:!0}).in("lesson_id",z).in("status",["submitted","reviewing"]);l(I||0)}else l(0)}catch(R){t({title:"Error",description:R.message||"No se pudieron cargar las lecciones",variant:"destructive"})}finally{a(!1)}}},v=(_,N)=>{t({title:`Abriendo lección: ${N}`,description:"El reproductor de video se abrirá próximamente"})},y=_=>{g(_),f(!0)},j=_=>{g(_),h(!0)},S=async(_,N)=>{if(confirm(`¿Estás seguro de que quieres eliminar la lección "${N}"?`))try{const{error:C}=await D.from("lessons").delete().eq("id",_);if(C)throw C;t({title:"Lección eliminada",description:`La lección "${N}" ha sido eliminada exitosamente`}),x()}catch{t({title:"Error",description:"No se pudo eliminar la lección",variant:"destructive"})}};return s?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):w?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Lecciones"}),i.jsx("p",{className:"text-muted-foreground",children:w?"Gestiona el contenido de las lecciones":"Explora las lecciones disponibles"})]})}),i.jsxs("div",{className:"space-y-6",children:[n.map(_=>i.jsxs(K,{children:[i.jsx(ye,{className:"cursor-pointer",onClick:()=>u(N=>({...N,[_.courseId]:!N[_.courseId]})),children:i.jsxs(we,{className:"flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-5 w-5 text-accent"}),i.jsxs("div",{children:[i.jsx("div",{children:_.courseTitle}),i.jsx("div",{className:"text-sm text-muted-foreground font-normal",children:_.programTitle})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[_.lessons.length," lección(es)"]})]})}),i.jsx(Q,{children:c[_.courseId]&&i.jsx("div",{className:"space-y-4",children:_.lessons.map(N=>i.jsx(K,{children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-accent/20 to-accent/10 flex items-center justify-center",children:N.has_assignment?i.jsx(Un,{className:"h-6 w-6 text-accent"}):i.jsx(ur,{className:"h-6 w-6 text-accent"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-foreground mb-1",children:N.title}),i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:N.description||"Lección de geometría sagrada"}),i.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[i.jsx(Ee,{children:"Publicado"}),N.requires_admin_approval&&i.jsx(Ee,{variant:"secondary",children:"Requiere Aprobación"}),N.has_assignment&&i.jsx(Ee,{variant:"outline",children:"Con Tarea"}),N.duration_minutes&&i.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[i.jsx(ts,{className:"h-3 w-3"}),i.jsxs("span",{children:[N.duration_minutes," min"]})]})]}),i.jsx("div",{className:"flex gap-2",children:w?i.jsxs(i.Fragment,{children:[i.jsx(V,{size:"sm",variant:"outline",onClick:()=>y(N),children:"Editar"}),i.jsx(V,{size:"sm",variant:"outline",onClick:()=>j(N),children:"Materiales"}),i.jsx(V,{size:"sm",variant:"destructive",onClick:()=>S(N.id,N.title),children:"Eliminar"}),i.jsx(V,{size:"sm",onClick:()=>v(N.slug,N.title),children:"Ver"})]}):i.jsx(V,{size:"sm",onClick:()=>v(N.slug,N.title),children:"Ver Lección"})})]})]})})},N.id))})})]},_.courseId)),w&&i.jsxs(K,{className:"border-dashed",children:[i.jsx(ye,{children:i.jsx(we,{children:"Crear Lección"})}),i.jsx(Q,{className:"p-6",children:i.jsx(k5,{inline:!0,onSuccess:x})})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ur,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Total"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.reduce((_,N)=>_+N.lessons.length,0)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Lecciones"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Un,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Con Tareas"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.reduce((_,N)=>_+N.lessons.filter(C=>C.has_assignment).length,0)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Lecciones"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ei,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Pendientes de aprobación"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:o}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Entregas"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Cursos"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Con lecciones"})]})})]}),b&&i.jsxs(i.Fragment,{children:[i.jsx(C5,{open:d,onOpenChange:f,onSuccess:x,lessonId:b.id}),i.jsx(Eu,{open:p,onOpenChange:h,lessonId:b.id,lessonTitle:b.title})]})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Lecciones"}),i.jsx("p",{className:"text-muted-foreground",children:"Esta sección es solo para docentes y administradores."})]})}function P5(){const{profile:e}=it(),{toast:t}=Ve(),n=Gn(),r=ig(),[s,a]=m.useState(""),[o,l]=m.useState("todos"),[c,u]=m.useState([]),[d,f]=m.useState(!0),[p,h]=m.useState(1),b=20,[g,w]=m.useState(0),[x,v]=m.useState(null),[y,j]=m.useState(!1),[S,_]=m.useState(""),[N,C]=m.useState("created_at"),[A,R]=m.useState("desc"),O=(e==null?void 0:e.role)==="formador"||(e==null?void 0:e.role)==="admin",T=(e==null?void 0:e.role)==="admin";m.useEffect(()=>{O&&z()},[O,o,s,p,N,A]);const z=async()=>{if(O){f(!0);try{const F=new URLSearchParams,H=o==="formador"?"teacher":o;F.set("role",H),s&&F.set("search",s),F.set("page",String(p)),F.set("pageSize",String(b)),F.set("sortBy",N),F.set("sortDir",A);try{const U=await(await fetch(`undefined/functions/v1/list-users?${F.toString()}`,{headers:{Authorization:"Bearer undefined"}})).json();if(U!=null&&U.success&&(U!=null&&U.data)){const ce=(U.data.users||[]).map(ge=>({id:ge.id,name:ge.full_name&&String(ge.full_name).trim()?ge.full_name:(ge.email||"").split("@")[0]||"Sin nombre",email:ge.email||"Sin email",role:ge.role==="teacher"?"formador":ge.role||"student",status:"active",enrolledPrograms:ge.program_enrollments??0,joinedAt:ge.created_at||new Date().toISOString(),lastSignInAt:ge.last_sign_in_at||null}));u(ce),w(U.data.total||ce.length),v(U.data.counts||null);return}}catch(Z){console.warn("list-users fallback:",Z)}const{data:P,error:q}=await D.rpc("get_users_with_emails");if(q)throw q;const de=Z=>o==="todos"?!0:(Z.role==="teacher"?"formador":Z.role)===o,le=Z=>s?(Z.full_name||"").toLowerCase().includes(s.toLowerCase())||(Z.email||"").toLowerCase().includes(s.toLowerCase()):!0,Y=(P||[]).filter(Z=>de(Z)&&le(Z));w(Y.length);const he=Y.slice((p-1)*b,p*b).map(Z=>({id:Z.id,name:Z.full_name&&String(Z.full_name).trim()?Z.full_name:(Z.email||"").split("@")[0]||"Sin nombre",email:Z.email||"Sin email",role:Z.role==="teacher"?"formador":Z.role||"student",status:"active",enrolledPrograms:0,joinedAt:Z.created_at||new Date().toISOString(),lastSignInAt:null}));u(he)}catch(F){console.error("Error fetching users:",F),t({title:"Error",description:"No se pudieron cargar los usuarios: "+(F.message||"Error desconocido"),variant:"destructive"})}finally{f(!1)}}},I=F=>{u(c.map(P=>P.id===F?{...P,status:P.status==="active"?"inactive":"active"}:P));const H=c.find(P=>P.id===F);t({title:`Usuario ${(H==null?void 0:H.status)==="active"?"desactivado":"activado"}`,description:`${H==null?void 0:H.name} ha sido ${(H==null?void 0:H.status)==="active"?"desactivado":"activado"} exitosamente`})},B=(F,H)=>{if(!T){t({title:"Sin permisos",description:"Solo los administradores pueden cambiar roles",variant:"destructive"});return}u(c.map(q=>q.id===F?{...q,role:H}:q));const P=c.find(q=>q.id===F);t({title:"Rol actualizado",description:`${P==null?void 0:P.name} ahora es ${H==="admin"?"administrador":H==="formador"?"formador":H==="voluntario"?"voluntario":"estudiante"}`})},$=c,L=F=>new Date(F).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"}),M=F=>{switch(F){case"formador":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"voluntario":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300";case"admin":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300";default:return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300"}},E=F=>{switch(F){case"formador":return"Formador";case"voluntario":return"Voluntario";case"admin":return"Admin";default:return"Estudiante"}},k=F=>{switch(F){case"formador":return i.jsx(Lr,{className:"h-3 w-3"});case"voluntario":return i.jsx(ko,{className:"h-3 w-3"});case"admin":return i.jsx(ov,{className:"h-3 w-3"});default:return i.jsx(rn,{className:"h-3 w-3"})}};return O?d?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Usuarios"}),i.jsx("p",{className:"text-muted-foreground",children:"Gestiona los usuarios y sus inscripciones"})]}),i.jsxs(V,{className:"gap-2",onClick:()=>n("/inscribir-usuario"),children:[i.jsx(rn,{className:"h-4 w-4"}),"Inscribir Usuario"]})]}),i.jsx(K,{children:i.jsx(Q,{className:"p-4",children:i.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Qu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(ve,{placeholder:"Buscar usuarios...",value:s,onChange:F=>a(F.target.value),className:"pl-10"})]}),i.jsxs(ot,{value:o,onValueChange:l,children:[i.jsx(nt,{className:"w-40",children:i.jsx(lt,{})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"todos",children:"Todos los roles"}),i.jsx(fe,{value:"student",children:"Estudiante"}),i.jsx(fe,{value:"formador",children:"Formadores"}),i.jsx(fe,{value:"voluntario",children:"Voluntarios"}),i.jsx(fe,{value:"admin",children:"Administradores"})]})]}),i.jsxs(ot,{value:N,onValueChange:F=>C(F),children:[i.jsx(nt,{className:"w-40",children:i.jsx(lt,{placeholder:"Ordenar por"})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"created_at",children:"Fecha de alta"}),i.jsx(fe,{value:"name",children:"Nombre"}),i.jsx(fe,{value:"email",children:"Email"})]})]}),i.jsxs(ot,{value:A,onValueChange:F=>R(F),children:[i.jsx(nt,{className:"w-32",children:i.jsx(lt,{placeholder:"Dirección"})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"desc",children:"Desc"}),i.jsx(fe,{value:"asc",children:"Asc"})]})]}),i.jsx(V,{variant:"outline",onClick:async()=>{try{const F=new URLSearchParams,H=o==="formador"?"teacher":o;F.set("role",H),s&&F.set("search",s),F.set("all","true"),F.set("sortBy",N),F.set("sortDir",A);const q=await(await fetch(`undefined/functions/v1/list-users?${F.toString()}`,{headers:{Authorization:"Bearer undefined"}})).json();if(!(q!=null&&q.success))throw new Error((q==null?void 0:q.error)||"export_failed");const de=(q.data.users||[]).map(ce=>({id:ce.id,nombre:ce.full_name||"",email:ce.email||"",rol:ce.role,creado:ce.created_at||"",ultimo_acceso:ce.last_sign_in_at||"",programas:ce.program_enrollments??0})),le=["id","nombre","email","rol","creado","ultimo_acceso","programas"],Y=[le.join(",")].concat(de.map(ce=>le.map(ge=>`"${String(ce[ge]??"").replace(/"/g,'""')}"`).join(","))),re=new Blob([Y.join(`
`)],{type:"text/csv;charset=utf-8;"}),he=URL.createObjectURL(re),Z=document.createElement("a"),U=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");Z.href=he,Z.download=`usuarios-${U}.csv`,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(he)}catch{t({title:"Error",description:"No se pudo exportar CSV",variant:"destructive"})}},children:"Exportar CSV"})]})})}),i.jsxs("div",{className:"space-y-4",children:[$.map(F=>i.jsx(K,{children:i.jsx(Q,{className:"p-6",children:r?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"flex items-start justify-between",children:i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-foreground text-lg",children:F.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:F.email}),F.lastSignInAt&&i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Último acceso: ",L(F.lastSignInAt)]})]})}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsx(Ee,{className:M(F.role),children:i.jsxs("div",{className:"flex items-center gap-1",children:[k(F.role),E(F.role)]})}),i.jsx(Ee,{variant:F.status==="active"?"default":"secondary",children:F.status==="active"?"Activo":"Inactivo"}),i.jsxs(Ee,{variant:"secondary",children:["Programas: ",F.enrolledPrograms]}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:["Desde ",L(F.joinedAt)]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs(V,{variant:"outline",size:"sm",onClick:()=>{_(F.id),j(!0)},className:"w-full",children:[i.jsx(cv,{className:"h-4 w-4 mr-1"}),"Ver Perfil"]}),T&&i.jsxs(ot,{value:F.role,onValueChange:H=>B(F.id,H),children:[i.jsx(nt,{className:"w-full",children:i.jsx(lt,{})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"student",children:"Estudiante"}),i.jsx(fe,{value:"formador",children:"Formador"}),i.jsx(fe,{value:"voluntario",children:"Voluntario"}),i.jsx(fe,{value:"admin",children:"Admin"})]})]}),i.jsx(V,{variant:F.status==="active"?"destructive":"default",size:"sm",onClick:()=>I(F.id),className:"w-full",children:F.status==="active"?i.jsxs(i.Fragment,{children:[i.jsx(uv,{className:"h-4 w-4 mr-1"}),"Desactivar"]}):i.jsxs(i.Fragment,{children:[i.jsx(ko,{className:"h-4 w-4 mr-1"}),"Activar"]})})]})]}):i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ss,{className:"h-12 w-12",children:i.jsx(is,{className:"bg-accent text-accent-foreground",children:F.name.split(" ").map(H=>H[0]).join("").toUpperCase()})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-foreground",children:F.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:F.email}),F.lastSignInAt&&i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Último acceso: ",L(F.lastSignInAt)]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Ee,{className:M(F.role),children:i.jsxs("div",{className:"flex items-center gap-1",children:[k(F.role),E(F.role)]})}),i.jsx(Ee,{variant:F.status==="active"?"default":"secondary",children:F.status==="active"?"Activo":"Inactivo"}),i.jsxs(Ee,{variant:"secondary",children:["Programas: ",F.enrolledPrograms]}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:["Desde ",L(F.joinedAt)]})]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(V,{variant:"outline",size:"sm",onClick:()=>{_(F.id),j(!0)},className:"mr-2",children:[i.jsx(cv,{className:"h-4 w-4 mr-1"}),"Ver Perfil"]}),T&&i.jsxs(ot,{value:F.role,onValueChange:H=>B(F.id,H),children:[i.jsx(nt,{className:"w-32",children:i.jsx(lt,{})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"student",children:"Estudiante"}),i.jsx(fe,{value:"formador",children:"Formador"}),i.jsx(fe,{value:"voluntario",children:"Voluntario"}),i.jsx(fe,{value:"admin",children:"Admin"})]})]}),i.jsx(V,{variant:F.status==="active"?"destructive":"default",size:"sm",onClick:()=>I(F.id),children:F.status==="active"?i.jsxs(i.Fragment,{children:[i.jsx(uv,{className:"h-4 w-4 mr-1"}),"Desactivar"]}):i.jsxs(i.Fragment,{children:[i.jsx(ko,{className:"h-4 w-4 mr-1"}),"Activar"]})})]})]})})},F.id)),i.jsxs("div",{className:"flex items-center justify-between pt-2",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Página ",p," de ",Math.max(1,Math.ceil(g/b))]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(V,{variant:"outline",size:"sm",disabled:p<=1,onClick:()=>h(F=>Math.max(1,F-1)),children:"Anterior"}),i.jsx(V,{variant:"outline",size:"sm",disabled:p>=Math.ceil(g/b),onClick:()=>h(F=>F+1),children:"Siguiente"})]})]})]}),i.jsxs("div",{className:`grid gap-4 ${r?"grid-cols-2":"md:grid-cols-4"}`,children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rn,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Total"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:(x==null?void 0:x.total)??c.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Usuarios"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ko,{className:"h-4 w-4 text-green-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Activos"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:c.filter(F=>F.status==="active").length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Usuarios"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lr,{className:"h-4 w-4 text-blue-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Estudiantes"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:(x==null?void 0:x.student)??c.filter(F=>F.role==="student").length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Registrados"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ov,{className:"h-4 w-4 text-purple-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Staff"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:x?x.teacher+(x.admin??0):c.filter(F=>F.role==="formador"||F.role==="admin").length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Formadores/Admins"})]})})]}),S&&i.jsx(gN,{open:y,onOpenChange:j,userId:S})]}):i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx(rn,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h2",{className:"text-lg font-semibold text-foreground mb-2",children:"Acceso Restringido"}),i.jsx("p",{className:"text-muted-foreground",children:"No tienes permisos para ver esta sección"})]})})}function T5(){const{programs:e}=hg(),{profile:t}=it(),[n,r]=m.useState([]);return m.useEffect(()=>{(async()=>{if(!(t!=null&&t.id)){r([]);return}const{data:a}=await D.from("enrollments").select("program_id").eq("user_id",t.id).eq("status","active"),o=(a||[]).map(h=>h.program_id);let l=[];if(o.length>0){const{data:h}=await D.from("program_courses").select("courses (id, title, summary, slug, poster_2x3_url, wide_11x6_url, published_at)").in("program_id",o).order("program_id");l=h||[]}const c=l.map(h=>h.courses).filter(Boolean),{data:u}=await D.from("course_enrollments").select("courses (id, title, summary, slug, poster_2x3_url, wide_11x6_url, published_at)").eq("user_id",t.id).eq("status","active"),d=(u||[]).map(h=>h.courses).filter(Boolean),f=new Set((c||[]).map(h=>h.id)),p=(d||[]).filter(h=>h&&!f.has(h.id));r(p)})()},[t==null?void 0:t.id]),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Mi Formación"}),i.jsx("p",{className:"text-muted-foreground",children:"Tus programas y cursos individuales"})]}),i.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.map(s=>i.jsx(K,{className:"cursor-pointer hover:elev-3 hover:-translate-y-1 transition-all duration-300 glow-hover",children:i.jsxs(ar,{to:`/programas/${s.slug}`,children:[i.jsx("div",{className:"aspect-[2/3] bg-gradient-to-br from-accent/20 to-accent/10 rounded-t-lg flex items-center justify-center",children:s.poster_2x3_url?i.jsx("img",{src:s.poster_2x3_url,alt:s.title,className:"w-full h-full object-cover rounded-t-lg",loading:"lazy"}):i.jsx(qe,{className:"h-12 w-12 text-accent"})}),i.jsx(Q,{className:"p-4",children:i.jsx("h3",{className:"font-semibold text-foreground line-clamp-2",children:s.title})})]})},`program-${s.id}`)),n.map(s=>i.jsx(K,{className:"cursor-pointer hover:elev-3 hover:-translate-y-1 transition-all duration-300 glow-hover",children:i.jsxs(ar,{to:`/ver-curso/${s.slug}`,children:[i.jsx("div",{className:"aspect-[2/3] relative overflow-hidden rounded-t-lg",children:s.poster_2x3_url||s.wide_11x6_url?i.jsx("img",{src:s.poster_2x3_url||s.wide_11x6_url,alt:s.title,className:"w-full h-full object-cover",loading:"lazy"}):i.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/20 to-accent/10 flex items-center justify-center",children:i.jsx(qe,{className:"h-12 w-12 text-accent"})})}),i.jsx(Q,{className:"p-4",children:i.jsx("h3",{className:"font-semibold text-foreground line-clamp-2",children:s.title})})]})},`course-${s.id}`))]})]})}function R5({open:e,onOpenChange:t,onSuccess:n}){const[r,s]=m.useState(""),[a,o]=m.useState(""),[l,c]=m.useState(""),[u,d]=m.useState(""),[f,p]=m.useState(""),[h,b]=m.useState(""),[g,w]=m.useState("all"),[x,v]=m.useState(""),[y,j]=m.useState(!1),[S,_]=m.useState("campus"),[N,C]=m.useState(""),[A,R]=m.useState(""),[O,T]=m.useState([]),[z,I]=m.useState([]),{toast:B}=Ve(),{profile:$}=it();m.useEffect(()=>{(async()=>{const{data:E}=await D.from("programs").select("id, title").order("title");T(E||[]);const{data:k}=await D.from("courses").select("id, title").order("title");I(k||[])})()},[]);const L=()=>{s(""),o(""),c(""),d(""),p(""),b(""),w("all"),v(""),_("campus"),C(""),R("")},M=async E=>{if(E.preventDefault(),!!($!=null&&$.id)){if(S==="program"&&!N){B({title:"Falta seleccionar programa",description:"Elegí el programa destino",variant:"destructive"});return}if(S==="course"&&!A){B({title:"Falta seleccionar curso",description:"Elegí el curso destino",variant:"destructive"});return}j(!0);try{const k=new Date(`${l}T${u}:00.000Z`),F=new Date(`${f}T${h}:00.000Z`),H={title:r,description:a,start_at:k.toISOString(),end_at:F.toISOString(),visibility:g,meeting_url:x||null,created_by:$.id,target_scope:S,program_id:S==="program"&&N||null,course_id:S==="course"&&A||null},P={title:r,start_at:k.toISOString(),end_at:F.toISOString(),visibility:g,created_by:$.id};let q=!1,de=!1;try{const{error:le}=await D.from("events").insert(H);if(le)throw le;q=!0}catch(le){const Y=(le==null?void 0:le.message)||"";if(/column\s+"?(target_scope|program_id|course_id)"?\s+of relation\s+"?events"?/i.test(Y)){const{error:re}=await D.from("events").insert(P);if(re)throw re;q=!0,de=!0}else throw le}if(!q)throw new Error("unknown_error");B({title:"Evento creado exitosamente",description:`${de?"Guardado como evento de campus (falta migración de eventos). ":""}Se ha enviado la notificación a ${g==="all"?"usuarios":g==="students"?"estudiantes":"profesores"} (${S==="campus"?"todo el campus":S==="program"?"programa":"curso"})`}),L(),t(!1),n==null||n()}catch(k){const F=(k==null?void 0:k.message)||"";let H=F;/column\s+"?(target_scope|program_id|course_id|description|meeting_url)"?\s+of relation\s+"?events"?/i.test(F)?H="Hay que aplicar la migración de eventos (target_scope/program_id/course_id).":/violates foreign key constraint/i.test(F)?H="El programa/curso seleccionado no existe. Actualizá la lista y volvé a intentar.":/invalid input syntax for type uuid/i.test(F)&&(H="ID inválido para programa/curso. Elegí una opción de la lista."),B({title:"Error al crear evento",description:H,variant:"destructive"})}finally{j(!1)}}};return i.jsx(St,{open:e,onOpenChange:t,children:i.jsxs(wt,{className:"sm:max-w-[500px]",children:[i.jsxs(kt,{children:[i.jsxs(Ct,{className:"flex items-center gap-2",children:[i.jsx(or,{className:"h-5 w-5"}),"Crear Evento"]}),i.jsx(ei,{children:"Crea un nuevo evento que será notificado automáticamente a los miembros del campus"})]}),i.jsxs("form",{onSubmit:M,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Título del Evento"}),i.jsx(ve,{id:"title",value:r,onChange:E=>s(E.target.value),placeholder:"Ej: Clase magistral de Geometría Sagrada",required:!0})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"description",children:"Descripción (opcional)"}),i.jsx(At,{id:"description",value:a,onChange:E=>o(E.target.value),placeholder:"Describe los detalles del evento...",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"start-date",children:"Fecha de Inicio"}),i.jsx(ve,{id:"start-date",type:"date",value:l,onChange:E=>c(E.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"start-time",children:"Hora de Inicio"}),i.jsx(ve,{id:"start-time",type:"time",value:u,onChange:E=>d(E.target.value),required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"end-date",children:"Fecha de Fin"}),i.jsx(ve,{id:"end-date",type:"date",value:f,onChange:E=>p(E.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"end-time",children:"Hora de Fin"}),i.jsx(ve,{id:"end-time",type:"time",value:h,onChange:E=>b(E.target.value),required:!0})]})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Destino del evento"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-2",children:[i.jsx(V,{type:"button",variant:S==="campus"?"default":"outline",onClick:()=>_("campus"),children:"Campus"}),i.jsx(V,{type:"button",variant:S==="program"?"default":"outline",onClick:()=>_("program"),children:"Programa"}),i.jsx(V,{type:"button",variant:S==="course"?"default":"outline",onClick:()=>_("course"),children:"Curso"})]}),S==="program"&&i.jsxs("div",{className:"mt-3",children:[i.jsx(X,{children:"Seleccionar programa"}),i.jsxs(ot,{value:N,onValueChange:C,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Elegí un programa"})}),i.jsx(rt,{children:O.map(E=>i.jsx(fe,{value:E.id,children:E.title},E.id))})]})]}),S==="course"&&i.jsxs("div",{className:"mt-3",children:[i.jsx(X,{children:"Seleccionar curso"}),i.jsxs(ot,{value:A,onValueChange:R,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Elegí un curso"})}),i.jsx(rt,{children:z.map(E=>i.jsx(fe,{value:E.id,children:E.title},E.id))})]})]})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"meeting-url",children:"URL de Reunión (opcional)"}),i.jsx(ve,{id:"meeting-url",type:"url",value:x,onChange:E=>v(E.target.value),placeholder:"https://meet.google.com/xxx-xxxx-xxx"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"URL de la plataforma de videoconferencia (Zoom, Meet, Teams, etc.)"})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"visibility",children:"Visibilidad del Evento"}),i.jsxs(ot,{value:g,onValueChange:E=>w(E),children:[i.jsx(nt,{children:i.jsx(lt,{})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"all",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(aP,{className:"h-4 w-4"}),"Todo el Campus"]})}),i.jsx(fe,{value:"students",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lr,{className:"h-4 w-4"}),"Solo Estudiantes"]})}),i.jsx(fe,{value:"teachers",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ko,{className:"h-4 w-4"}),"Solo Profesores"]})})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Las notificaciones se enviarán automáticamente al grupo seleccionado"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(V,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:y,children:"Cancelar"}),i.jsx(V,{type:"submit",disabled:y,children:y?"Creando...":"Crear Evento"})]})]})]})})}const A5=()=>{const[e,t]=m.useState([]),[n,r]=m.useState(!0),[s,a]=m.useState(0),{user:o}=it(),l=async()=>{if(o){r(!0);try{const{data:d,error:f}=await D.from("event_notifications").select(`
          id,
          event_id,
          notification_type,
          read_at,
          created_at,
          events!inner (
            id,
            title,
            start_at,
            end_at,
            visibility
          )
        `).eq("user_id",o.id).order("created_at",{ascending:!1}).limit(50);if(f)throw f;const p=(d==null?void 0:d.map(h=>({id:h.id,event_id:h.event_id,notification_type:h.notification_type,read_at:h.read_at,created_at:h.created_at,event:Array.isArray(h.events)?h.events[0]:h.events})))||[];t(p),a(p.filter(h=>!h.read_at).length)}catch(d){console.error("Error fetching notifications:",d)}finally{r(!1)}}},c=async d=>{try{const{error:f}=await D.from("event_notifications").update({read_at:new Date().toISOString()}).eq("id",d);if(f)throw f;t(p=>p.map(h=>h.id===d?{...h,read_at:new Date().toISOString()}:h)),a(p=>Math.max(0,p-1))}catch(f){console.error("Error marking notification as read:",f)}},u=async()=>{if(o)try{const{error:d}=await D.from("event_notifications").update({read_at:new Date().toISOString()}).eq("user_id",o.id).is("read_at",null);if(d)throw d;t(f=>f.map(p=>({...p,read_at:p.read_at||new Date().toISOString()}))),a(0)}catch(d){console.error("Error marking all notifications as read:",d)}};return m.useEffect(()=>{l()},[o]),m.useEffect(()=>{if(!o)return;const d=D.channel("event-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"event_notifications",filter:`user_id=eq.${o.id}`},()=>{l()}).subscribe();return()=>{D.removeChannel(d)}},[o]),{notifications:e,loading:n,unreadCount:s,markAsRead:c,markAllAsRead:u,refetch:l}};function I5(){const{profile:e}=it(),{toast:t}=Ve(),[n,r]=m.useState([]),[s,a]=m.useState(!0),[o,l]=m.useState(!1),{notifications:c,unreadCount:u,markAsRead:d}=A5(),[f,p]=m.useState(!1),[h,b]=m.useState(null),g=(e==null?void 0:e.role)==="formador"||(e==null?void 0:e.role)==="admin",w=async()=>{a(!0);try{let N=null,C=null;try{const A=new Date;A.setHours(0,0,0,0);const{data:R,error:O}=await D.from("events").select("*").gte("end_at",A.toISOString()).order("start_at",{ascending:!0});N=R,C=O}catch(A){C=A}if(C){const{data:A}=await D.from("events").select("*");r(A||[])}else r(N||[])}catch{t({title:"Error",description:"No se pudieron cargar los eventos",variant:"destructive"})}finally{a(!1)}};m.useEffect(()=>{w()},[]);const x=()=>{l(!0)},v=N=>new Date(N).toLocaleDateString("es-ES",{day:"numeric",month:"short",year:"numeric"}),y=N=>new Date(N).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),j=N=>{switch(N){case"students":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";case"teachers":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";default:return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300"}},S=N=>{switch(N){case"students":return"Estudiantes";case"teachers":return"Profesores";default:return"Todos"}},_=N=>{if(!N)return null;const C=N.match(/https?:\/\/[^\s]+/i);return C?C[0]:null};return s?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Calendario"}),i.jsx("p",{className:"text-muted-foreground",children:g?"Gestiona eventos y fechas importantes":"Consulta eventos y fechas importantes"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[u>0&&i.jsxs(V,{variant:"outline",size:"sm",className:"gap-2",children:[i.jsx(nP,{className:"h-4 w-4"}),u," nuevas notificaciones"]}),g&&i.jsxs(V,{className:"gap-2",onClick:x,children:[i.jsx(qn,{className:"h-4 w-4"}),"Nuevo Evento"]})]})]}),c.length>0&&i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(Uh,{className:"h-5 w-5"}),"Notificaciones de Eventos"]})}),i.jsx(Q,{className:"space-y-2",children:c.slice(0,3).map(N=>i.jsx("div",{className:`p-3 rounded-lg border ${N.read_at?"bg-muted/30":"bg-accent/10 border-accent/30"}`,onClick:()=>!N.read_at&&d(N.id),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:N.event.title}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[v(N.event.start_at)," a las ",y(N.event.start_at)]})]}),!N.read_at&&i.jsx("div",{className:"w-2 h-2 bg-accent rounded-full"})]})},N.id))})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Próximos Eventos"})}),i.jsx(Q,{className:"space-y-4",children:n.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(or,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"No hay eventos programados"}),g&&i.jsx("p",{className:"text-sm mt-2",children:'Crea tu primer evento usando el botón "Nuevo Evento"'})]}):n.slice(0,5).map(N=>i.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border bg-surface/50 cursor-pointer",onClick:()=>{b(N),p(!0)},children:[i.jsx("div",{className:"h-10 w-10 rounded-lg bg-accent/20 flex items-center justify-center",children:i.jsx(or,{className:"h-4 w-4 text-accent"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-sm",children:N.title}),N.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:N.description}),i.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[i.jsx(ts,{className:"h-3 w-3"}),i.jsxs("span",{children:[v(N.start_at)," - ",y(N.start_at)]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Ee,{className:j(N.visibility),children:S(N.visibility)}),N.meeting_url&&i.jsx(V,{size:"sm",className:"h-6 px-2 text-xs",onClick:C=>{C.preventDefault(),C.stopPropagation(),window.open(N.meeting_url,"_blank")},children:"Ingresar"}),!N.meeting_url&&_(N.description)&&i.jsx(V,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs",onClick:C=>{C.preventDefault(),C.stopPropagation();const A=_(N.description);window.open(A,"_blank")},children:"Abrir enlace"})]})]})]},N.id))})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(or,{className:"h-5 w-5 text-accent"}),new Date().toLocaleDateString("es-ES",{month:"long",year:"numeric"})]})}),i.jsxs(Q,{children:[i.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"].map(N=>i.jsx("div",{className:"p-2 text-center text-sm font-medium text-muted-foreground",children:N},N))}),i.jsx("div",{className:"grid grid-cols-7 gap-2",children:(()=>{const N=new Date,C=N.getFullYear(),A=N.getMonth(),O=new Date(C,A,1).getDay(),T=new Date(C,A+1,0).getDate(),z=42,I=[];for(let L=0;L<O;L++)I.push(null);for(let L=1;L<=T;L++)I.push(L);for(;I.length<z;)I.push(null);const B=L=>L===N.getDate(),$=L=>n.some(M=>{const E=new Date(M.start_at);return E.getFullYear()===C&&E.getMonth()===A&&E.getDate()===L});return I.map((L,M)=>{const E=L!==null,k=L?$(L):!1,F=L?B(L):!1;return i.jsxs("div",{className:`
                        p-2 h-10 text-center text-sm rounded-lg
                        ${E?"text-foreground":"text-muted-foreground"}
                        ${E?"hover:bg-muted/40":""}
                        ${F?"ring-1 ring-accent":""}
                        ${k?"bg-red-500/10 ring-1 ring-red-400":""}
                      `,children:[E?L:"",k&&i.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mx-auto mt-1"})]},M)})})()})]})]})]}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(or,{className:"h-4 w-4 text-accent"}),i.jsx("span",{className:"text-sm font-medium",children:"Total"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Eventos"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rn,{className:"h-4 w-4 text-green-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Campus"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.filter(N=>N.visibility==="all").length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Para todos"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rn,{className:"h-4 w-4 text-blue-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Estudiantes"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:n.filter(N=>N.visibility==="students").length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Solo estudiantes"})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uh,{className:"h-4 w-4 text-purple-600"}),i.jsx("span",{className:"text-sm font-medium",children:"Notificaciones"})]}),i.jsx("p",{className:"text-2xl font-bold mt-2",children:u}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Sin leer"})]})})]}),i.jsx(R5,{open:o,onOpenChange:l,onSuccess:w}),i.jsx(St,{open:f,onOpenChange:p,children:i.jsxs(wt,{children:[i.jsx(kt,{children:i.jsx(Ct,{children:h==null?void 0:h.title})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-sm text-muted-foreground",children:[v((h==null?void 0:h.start_at)||"")," ",h&&"·"," ",y((h==null?void 0:h.start_at)||"")]}),(h==null?void 0:h.description)&&i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:h.description}),((h==null?void 0:h.meeting_url)||_(h==null?void 0:h.description))&&i.jsx("div",{className:"pt-2",children:i.jsx(V,{onClick:()=>window.open((h==null?void 0:h.meeting_url)||_(h==null?void 0:h.description),"_blank"),children:"Abrir enlace"})})]})]})})]})}function Dt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function O5(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const wc=43200,cw=1440;let L5={};function M5(){return L5}function uw(e){const t=Dt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function zc(e,t){const n=Dt(e),r=Dt(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function D5(e){return O5(e,Date.now())}function F5(e,t){const n=Dt(e),r=Dt(t),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}function $5(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function z5(e,t){return+Dt(e)-+Dt(t)}function U5(e){const t=Dt(e);return t.setHours(23,59,59,999),t}function B5(e){const t=Dt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function V5(e){const t=Dt(e);return+U5(t)==+B5(t)}function q5(e,t){const n=Dt(e),r=Dt(t),s=zc(n,r),a=Math.abs(F5(n,r));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);let l=zc(n,r)===-s;V5(Dt(e))&&a===1&&zc(e,r)===1&&(l=!1),o=s*(a-Number(l))}return o===0?0:o}function W5(e,t,n){const r=z5(e,t)/1e3;return $5(n==null?void 0:n.roundingMethod)(r)}const H5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},G5=(e,t,n)=>{let r;const s=H5[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ba(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const K5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Q5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Y5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},X5={date:ba({formats:K5,defaultWidth:"full"}),time:ba({formats:Q5,defaultWidth:"full"}),dateTime:ba({formats:Y5,defaultWidth:"full"})},J5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Z5=(e,t,n,r)=>J5[e];function Er(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const e6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},t6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},n6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},r6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},s6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},i6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},a6=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},o6={ordinalNumber:a6,era:Er({values:e6,defaultWidth:"wide"}),quarter:Er({values:t6,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Er({values:n6,defaultWidth:"wide"}),day:Er({values:r6,defaultWidth:"wide"}),dayPeriod:Er({values:s6,defaultWidth:"wide",formattingValues:i6,defaultFormattingWidth:"wide"})};function Pr(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const o=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?c6(l,f=>f.test(o)):l6(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function l6(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function c6(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function _k(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const u6=/^(\d+)(th|st|nd|rd)?/i,d6=/\d+/i,f6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},h6={any:[/^b/i,/^(a|c)/i]},m6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},p6={any:[/1/i,/2/i,/3/i,/4/i]},g6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},x6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},v6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},y6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},w6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},b6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},j6={ordinalNumber:_k({matchPattern:u6,parsePattern:d6,valueCallback:e=>parseInt(e,10)}),era:Pr({matchPatterns:f6,defaultMatchWidth:"wide",parsePatterns:h6,defaultParseWidth:"any"}),quarter:Pr({matchPatterns:m6,defaultMatchWidth:"wide",parsePatterns:p6,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Pr({matchPatterns:g6,defaultMatchWidth:"wide",parsePatterns:x6,defaultParseWidth:"any"}),day:Pr({matchPatterns:v6,defaultMatchWidth:"wide",parsePatterns:y6,defaultParseWidth:"any"}),dayPeriod:Pr({matchPatterns:w6,defaultMatchWidth:"any",parsePatterns:b6,defaultParseWidth:"any"})},_6={code:"en-US",formatDistance:G5,formatLong:X5,formatRelative:Z5,localize:o6,match:j6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function S6(e,t,n){const r=M5(),s=(n==null?void 0:n.locale)??r.locale??_6,a=2520,o=zc(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let c,u;o>0?(c=Dt(t),u=Dt(e)):(c=Dt(e),u=Dt(t));const d=W5(u,c),f=(uw(u)-uw(c))/1e3,p=Math.round((d-f)/60);let h;if(p<2)return n!=null&&n.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,l):d<10?s.formatDistance("lessThanXSeconds",10,l):d<20?s.formatDistance("lessThanXSeconds",20,l):d<40?s.formatDistance("halfAMinute",0,l):d<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):p===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",p,l);if(p<45)return s.formatDistance("xMinutes",p,l);if(p<90)return s.formatDistance("aboutXHours",1,l);if(p<cw){const b=Math.round(p/60);return s.formatDistance("aboutXHours",b,l)}else{if(p<a)return s.formatDistance("xDays",1,l);if(p<wc){const b=Math.round(p/cw);return s.formatDistance("xDays",b,l)}else if(p<wc*2)return h=Math.round(p/wc),s.formatDistance("aboutXMonths",h,l)}if(h=q5(u,c),h<12){const b=Math.round(p/wc);return s.formatDistance("xMonths",b,l)}else{const b=h%12,g=Math.trunc(h/12);return b<3?s.formatDistance("aboutXYears",g,l):b<9?s.formatDistance("overXYears",g,l):s.formatDistance("almostXYears",g+1,l)}}function N6(e,t){return S6(e,D5(e),t)}const k6={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},C6=(e,t,n)=>{let r;const s=k6[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},E6={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},P6={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},T6={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},R6={date:ba({formats:E6,defaultWidth:"full"}),time:ba({formats:P6,defaultWidth:"full"}),dateTime:ba({formats:T6,defaultWidth:"full"})},A6={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},I6={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},O6=(e,t,n,r)=>t.getHours()!==1?I6[e]:A6[e],L6={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},M6={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},D6={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},F6={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},$6={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},z6={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},U6=(e,t)=>Number(e)+"º",B6={ordinalNumber:U6,era:Er({values:L6,defaultWidth:"wide"}),quarter:Er({values:M6,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:Er({values:D6,defaultWidth:"wide"}),day:Er({values:F6,defaultWidth:"wide"}),dayPeriod:Er({values:$6,defaultWidth:"wide",formattingValues:z6,defaultFormattingWidth:"wide"})},V6=/^(\d+)(º)?/i,q6=/\d+/i,W6={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},H6={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},G6={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},K6={any:[/1/i,/2/i,/3/i,/4/i]},Q6={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Y6={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},X6={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},J6={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},Z6={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},eB={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},tB={ordinalNumber:_k({matchPattern:V6,parsePattern:q6,valueCallback:function(e){return parseInt(e,10)}}),era:Pr({matchPatterns:W6,defaultMatchWidth:"wide",parsePatterns:H6,defaultParseWidth:"any"}),quarter:Pr({matchPatterns:G6,defaultMatchWidth:"wide",parsePatterns:K6,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Pr({matchPatterns:Q6,defaultMatchWidth:"wide",parsePatterns:Y6,defaultParseWidth:"any"}),day:Pr({matchPatterns:X6,defaultMatchWidth:"wide",parsePatterns:J6,defaultParseWidth:"any"}),dayPeriod:Pr({matchPatterns:Z6,defaultMatchWidth:"any",parsePatterns:eB,defaultParseWidth:"any"})},nB={code:"es",formatDistance:C6,formatLong:R6,formatRelative:O6,localize:B6,match:tB,options:{weekStartsOn:1,firstWeekContainsDate:1}};function rB(){var M;const{user:e,profile:t}=it(),{toast:n}=Ve(),[r,s]=m.useState([]),[a,o]=m.useState([]),[l,c]=m.useState([]),[u,d]=m.useState(!0),[f,p]=m.useState(""),[h,b]=m.useState("todos"),[g,w]=m.useState(null),[x,v]=m.useState(!1),[y,j]=m.useState(!1),[S,_]=m.useState({title:"",content:"",category:"",forum_id:""}),[N,C]=m.useState({name:"",description:"",program_id:""}),A=(t==null?void 0:t.role)==="formador"||(t==null?void 0:t.role)==="admin";m.useEffect(()=>{R(),O(),T()},[]);const R=async()=>{d(!0);try{const{data:E,error:k}=await D.from("forum_posts").select(`
          id,
          title,
          content,
          category,
          pinned,
          created_at,
          author_id,
          forum_id
        `).order("pinned",{ascending:!1}).order("created_at",{ascending:!1});if(k)throw k;s(E||[])}catch{n({title:"Error",description:"No se pudieron cargar las publicaciones",variant:"destructive"})}finally{d(!1)}},O=async()=>{const{data:E}=await D.from("forums").select(`
        id,
        name,
        description,
        program_id,
        programs (title)
      `).order("name");o(E||[])},T=async()=>{const{data:E}=await D.from("programs").select("id, title").not("published_at","is",null).order("title");c(E||[])},z=async()=>{var E;if(console.log("Trying to create post:",S),console.log("User:",e),!S.title.trim()||!S.content.trim()){n({title:"Error",description:"Título y contenido son obligatorios",variant:"destructive"});return}if(!e){n({title:"Error",description:"Debes estar autenticado para crear una publicación",variant:"destructive"});return}try{const k={title:S.title.trim(),content:S.content.trim(),category:S.category||null,forum_id:S.forum_id==="none"?null:S.forum_id||null,author_id:e.id,pinned:!1};console.log("Inserting post data:",k);const{data:F,error:H}=await D.from("forum_posts").insert([k]).select("*");if(H)throw console.error("Error creating post:",H),H;console.log("Post created successfully:",F);const P=S.forum_id?(E=a.find(q=>q.id===S.forum_id))==null?void 0:E.name:null;n({title:"Publicación creada",description:P?`Tu publicación en "${P}" ha sido creada`:"Tu publicación ha sido creada exitosamente"}),_({title:"",content:"",category:"",forum_id:""}),v(!1),R()}catch(k){console.error("Full error:",k),n({title:"Error",description:`No se pudo crear la publicación: ${k.message}`,variant:"destructive"})}},I=async()=>{if(!N.name.trim()||!N.program_id){n({title:"Error",description:"Nombre del foro y programa son obligatorios",variant:"destructive"});return}try{const{error:E}=await D.from("forums").insert([{name:N.name.trim(),description:N.description.trim()||null,program_id:N.program_id}]);if(E)throw E;n({title:"Foro creado",description:`El foro "${N.name}" ha sido creado exitosamente`}),C({name:"",description:"",program_id:""}),j(!1),O()}catch(E){n({title:"Error",description:`No se pudo crear el foro: ${E.message}`,variant:"destructive"})}},B=async E=>{if(e)try{const{data:k}=await D.from("forum_post_likes").select("id").eq("post_id",E).eq("user_id",e.id).single();k?await D.from("forum_post_likes").delete().eq("id",k.id):await D.from("forum_post_likes").insert([{post_id:E,user_id:e.id}]),R()}catch{n({title:"Error",description:"No se pudo actualizar el like",variant:"destructive"})}},$=r.filter(E=>{const k=E.title.toLowerCase().includes(f.toLowerCase())||E.content.toLowerCase().includes(f.toLowerCase()),F=h==="todos"||E.category===h,H=!g||E.forum_id===g;return k&&F&&H}),L=E=>N6(new Date(E),{addSuffix:!0,locale:nB});return u?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsx(Be,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Comunidad"}),i.jsx("p",{className:"text-muted-foreground",children:"Conecta con otros estudiantes y profesores"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(St,{open:y,onOpenChange:j,children:i.jsxs(wt,{children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Crear Nuevo Foro"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"forumName",children:"Nombre del Foro"}),i.jsx(ve,{id:"forumName",value:N.name,onChange:E=>C({...N,name:E.target.value}),placeholder:"Nombre del foro"})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"forumDescription",children:"Descripción"}),i.jsx(At,{id:"forumDescription",value:N.description,onChange:E=>C({...N,description:E.target.value}),placeholder:"Descripción del foro",rows:3})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"forumProgram",children:"Programa"}),i.jsxs(ot,{value:N.program_id,onValueChange:E=>C({...N,program_id:E}),children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Seleccionar programa"})}),i.jsx(rt,{children:l.map(E=>i.jsx(fe,{value:E.id,children:E.title},E.id))})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(V,{onClick:I,className:"flex-1",children:"Crear Foro"}),i.jsx(V,{variant:"outline",onClick:()=>j(!1),children:"Cancelar"})]})]})]})}),i.jsxs(St,{open:x,onOpenChange:v,children:[i.jsx(ZM,{asChild:!0,children:i.jsxs(V,{className:"gap-2",children:[i.jsx(qn,{className:"h-4 w-4"}),"Nueva Publicación"]})}),i.jsxs(wt,{className:"sm:max-w-[600px]",children:[i.jsx(kt,{children:i.jsx(Ct,{children:"Crear Nueva Publicación"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"title",children:"Título"}),i.jsx(ve,{id:"title",value:S.title,onChange:E=>_({...S,title:E.target.value}),placeholder:"Título de tu publicación"})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"category",children:"Categoría"}),i.jsxs(ot,{value:S.category,onValueChange:E=>_({...S,category:E}),children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Seleccionar categoría"})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"general",children:"General"}),i.jsx(fe,{value:"pregunta",children:"Pregunta"}),i.jsx(fe,{value:"discusion",children:"Discusión"}),i.jsx(fe,{value:"anuncio",children:"Anuncio"})]})]})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"forum",children:"Foro"}),i.jsxs(ot,{value:S.forum_id,onValueChange:E=>_({...S,forum_id:E}),children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"¿En qué foro quieres publicar?"})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"none",children:"General (sin foro específico)"}),a.map(E=>{var k;return i.jsxs(fe,{value:E.id,children:[E.name," - ",(k=E.program)==null?void 0:k.title]},E.id)})]})]})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"content",children:"Contenido"}),i.jsx(At,{id:"content",value:S.content,onChange:E=>_({...S,content:E.target.value}),placeholder:"Comparte tus ideas, preguntas o comentarios...",rows:5})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(V,{onClick:z,className:"flex-1",children:"Publicar"}),i.jsx(V,{variant:"outline",onClick:()=>v(!1),children:"Cancelar"})]})]})]})]})]})]}),A&&i.jsx(K,{className:"border-2 border-dashed border-muted-foreground/25",children:i.jsxs(Q,{className:"p-6 text-center",children:[i.jsx(Pi,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Crear Nuevo Foro"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Crea un espacio de discusión para un programa específico"}),i.jsxs(V,{onClick:()=>j(!0),className:"gap-2",children:[i.jsx(qn,{className:"h-4 w-4"}),"Crear Foro"]})]})}),a.length>0&&i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-foreground mb-4",children:"Foros Activos"}),i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(E=>{var F;const k=r.filter(H=>H.forum_id===E.id);return i.jsx(K,{className:`border hover:shadow-md transition-all cursor-pointer ${g===E.id?"border-accent bg-accent/5":""}`,children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h4",{className:"font-semibold text-foreground",children:E.name}),i.jsxs(Ee,{variant:"secondary",className:"text-xs",children:[k.length," posts"]})]}),E.description&&i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:E.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Ee,{variant:"outline",className:"text-xs",children:(F=E.program)==null?void 0:F.title}),i.jsx(V,{size:"sm",variant:g===E.id?"default":"ghost",className:"text-xs",onClick:()=>{g===E.id?(w(null),n({title:"Vista general",description:"Mostrando todas las publicaciones"})):(w(E.id),p(""),b("todos"),n({title:"Foro seleccionado",description:`Mostrando mensajes de: ${E.name}`}))},children:g===E.id?"Ver todas":"Ver mensajes"})]})]})},E.id)})})]})}),i.jsx(K,{children:i.jsxs(Q,{className:"p-4",children:[i.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Qu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(ve,{placeholder:"Buscar publicaciones...",value:f,onChange:E=>p(E.target.value),className:"pl-10"})]}),i.jsxs(ot,{value:h,onValueChange:b,children:[i.jsx(nt,{className:"w-40",children:i.jsx(lt,{})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"todos",children:"Todas"}),i.jsx(fe,{value:"general",children:"General"}),i.jsx(fe,{value:"pregunta",children:"Preguntas"}),i.jsx(fe,{value:"discusion",children:"Discusiones"}),i.jsx(fe,{value:"anuncio",children:"Anuncios"})]})]}),g&&i.jsx(V,{variant:"outline",size:"sm",onClick:()=>{w(null),n({title:"Filtro removido",description:"Mostrando todas las publicaciones"})},children:"Mostrar todos"})]}),g&&i.jsx("div",{className:"mt-2",children:i.jsxs(Ee,{variant:"secondary",children:["Mostrando: ",((M=a.find(E=>E.id===g))==null?void 0:M.name)||"Foro seleccionado"]})})]})}),i.jsx("div",{className:"space-y-4",children:$.length===0?i.jsx(K,{children:i.jsxs(Q,{className:"p-8 text-center",children:[i.jsx(Pi,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No hay publicaciones"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:f||h!=="todos"?"No se encontraron publicaciones con los filtros actuales":"Sé el primero en crear una publicación en la comunidad"}),!f&&h==="todos"&&i.jsx(V,{onClick:()=>v(!0),children:"Crear Primera Publicación"})]})}):$.map(E=>i.jsx(K,{className:E.pinned?"border-accent":"",children:i.jsx(Q,{className:"p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx(ss,{className:"h-10 w-10",children:i.jsx(is,{className:"bg-accent text-accent-foreground",children:"AU"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[E.pinned&&i.jsx(fP,{className:"h-4 w-4 text-accent"}),i.jsx("h3",{className:"font-semibold text-foreground line-clamp-1",children:E.title})]}),i.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground whitespace-nowrap",children:i.jsx("span",{children:L(E.created_at)})})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"por Usuario"}),E.category&&i.jsx(Ee,{variant:"secondary",className:"text-xs",children:E.category})]}),i.jsx("p",{className:"text-foreground mb-4 line-clamp-3",children:E.content}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(V,{variant:"ghost",size:"sm",onClick:()=>B(E.id),className:"gap-1 text-muted-foreground hover:text-foreground",children:[i.jsx(oP,{className:"h-4 w-4"}),i.jsx("span",{children:"0"})]}),i.jsxs(V,{variant:"ghost",size:"sm",className:"gap-1 text-muted-foreground hover:text-foreground",children:[i.jsx(uP,{className:"h-4 w-4"}),i.jsx("span",{children:"0"})]})]})]})]})})},E.id))})]})}const sB="https://app.slack.com/client/T059VRF02L8/C05964WLPMZ",dw="C05964WLPMZ",fw="https://epqalebkqmkddlfomnyf.functions.supabase.co/slack-proxy";function iB(){const{toast:e}=Ve(),[t,n]=m.useState([]),[r,s]=m.useState(!1),[a,o]=m.useState(!1),[l,c]=m.useState(""),[u,d]=m.useState(!0),f=m.useMemo(()=>[...t].sort((g,w)=>parseFloat(g.ts)-parseFloat(w.ts)),[t]),p=()=>{window.open(sB,"_blank","noopener,noreferrer")},h=async()=>{s(!0);try{const g=await fetch(`${fw}?channel=${dw}`);if(!g.ok)throw new Error("edge_unavailable");const w=await g.json();if(!w.success)throw new Error(w.error||"edge_error");n(w.messages||[]),d(!0)}catch{d(!1)}finally{s(!1)}},b=async()=>{if(l.trim()){o(!0);try{const g=await fetch(fw,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel:dw,text:l.trim()})}),w=await g.json();if(!g.ok||!w.success)throw new Error(w.error||"edge_error");c(""),h()}catch{e({title:"No se pudo enviar",description:"Abrí Slack para continuar.",variant:"destructive"})}finally{o(!1)}}};return m.useEffect(()=>{h();const g=setInterval(h,15e3);return()=>clearInterval(g)},[]),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Slack"}),i.jsx("p",{className:"text-muted-foreground",children:"Vista del canal del equipo dentro del campus"})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Canal principal"})}),i.jsxs(Q,{className:"space-y-4",children:[!u&&i.jsx("div",{className:"rounded-md border p-3 text-sm text-muted-foreground",children:"Para ver y enviar mensajes acá necesitamos configurar una app de Slack. Por ahora podés abrir el canal directamente."}),i.jsx("div",{className:"h-96 overflow-y-auto rounded-md border p-3 bg-background/50",children:r?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Cargando mensajes..."}):f.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No hay mensajes aún"}):i.jsx("div",{className:"space-y-3",children:f.map(g=>i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"opacity-70",children:g.user?`@${g.user}`:"bot"}),i.jsx("div",{children:g.text})]},g.ts))})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ve,{placeholder:"Escribir mensaje para Slack...",value:l,onChange:g=>c(g.target.value),onKeyDown:g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),b())}}),i.jsxs(V,{onClick:b,disabled:a||!l.trim(),className:"gap-2",children:["Enviar",i.jsx(xj,{className:"h-4 w-4"})]})]}),i.jsx("div",{children:i.jsxs(V,{onClick:p,variant:"outline",className:"gap-2",children:["Abrir en Slack",i.jsx(hj,{className:"h-4 w-4"})]})})]})]})]})}var Id="Switch",[aB,UB]=yn(Id),[oB,lB]=aB(Id),Sk=m.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[p,h]=m.useState(null),b=Me(t,y=>h(y)),g=m.useRef(!1),w=p?d||!!p.closest("form"):!0,[x,v]=Or({prop:s,defaultProp:a??!1,onChange:u,caller:Id});return i.jsxs(oB,{scope:n,checked:x,disabled:l,children:[i.jsx(xe.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":Ek(x),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:b,onClick:pe(e.onClick,y=>{v(j=>!j),w&&(g.current=y.isPropagationStopped(),g.current||y.stopPropagation())})}),w&&i.jsx(Ck,{control:p,bubbles:!g.current,name:r,value:c,checked:x,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});Sk.displayName=Id;var Nk="SwitchThumb",kk=m.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=lB(Nk,n);return i.jsx(xe.span,{"data-state":Ek(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});kk.displayName=Nk;var cB="SwitchBubbleInput",Ck=m.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const o=m.useRef(null),l=Me(o,a),c=_d(n),u=Zu(t);return m.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&h){const b=new Event("click",{bubbles:r});h.call(d,n),d.dispatchEvent(b)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ck.displayName=cB;function Ek(e){return e?"checked":"unchecked"}var Pk=Sk,uB=kk;const Uc=m.forwardRef(({className:e,...t},n)=>i.jsx(Pk,{className:oe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:i.jsx(uB,{className:oe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Uc.displayName=Pk.displayName;function dB(){var f;const{profile:e,user:t}=it(),{theme:n,toggleTheme:r}=e_(),{toast:s}=Ve(),{stats:a}=rS(),[o,l]=m.useState("");m.useEffect(()=>{l((e==null?void 0:e.full_name)||"")},[e==null?void 0:e.full_name]);const c=p=>(p==null?void 0:p.split(" ").map(h=>h[0]).join("").toUpperCase().slice(0,2))||"U",u=p=>{switch(p){case"admin":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300";case"teacher":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300";case"student":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";default:return"bg-muted text-muted-foreground"}},d=p=>{switch(p){case"admin":return"Administrador";case"teacher":return"Profesor";case"formador":return"Formador";case"voluntario":return"Voluntario";case"student":return"Estudiante";default:return"Estudiante"}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Mi Cuenta"}),i.jsx("p",{className:"text-muted-foreground",children:"Gestiona tu perfil y configuraciones"})]}),i.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(Fp,{className:"h-5 w-5 text-accent"}),"Información Personal"]})}),i.jsxs(Q,{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ss,{className:"h-20 w-20",children:i.jsx(is,{className:"bg-accent text-accent-foreground text-lg",children:c((e==null?void 0:e.full_name)||(e==null?void 0:e.email)||"—")})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold",children:(e==null?void 0:e.full_name)||(e==null?void 0:e.email)||"—"}),i.jsx(Ee,{className:u((e==null?void 0:e.role)||"student"),children:d((e==null?void 0:e.role)||"student")})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"name",children:"Nombre Completo"}),i.jsx(ve,{id:"name",value:o,onChange:p=>l(p.target.value),placeholder:"Tu nombre completo"})]}),i.jsxs("div",{children:[i.jsx(X,{htmlFor:"email",children:"Correo Electrónico"}),i.jsx(ve,{id:"email",type:"email",value:(t==null?void 0:t.email)||"",disabled:!0,className:"bg-muted"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"El email no se puede cambiar por seguridad"})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Fecha de Registro"}),i.jsx(ve,{value:new Date((e==null?void 0:e.created_at)||"").toLocaleDateString(),disabled:!0,className:"bg-muted"})]})]}),i.jsx(V,{onClick:async()=>{if(!(e!=null&&e.id))return;const{error:p}=await D.from("profiles").update({full_name:o.trim()||null}).eq("id",e.id);s(p?{title:"Error",description:p.message||"No se pudo actualizar",variant:"destructive"}:{title:"Perfil actualizado",description:"Tu nombre fue guardado."})},children:"Actualizar Perfil"})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(Uh,{className:"h-5 w-5 text-accent"}),"Preferencias"]})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[n==="dark"?i.jsx(mj,{className:"h-4 w-4"}):i.jsx(yj,{className:"h-4 w-4"}),i.jsxs(X,{children:["Tema ",n==="dark"?"Oscuro":"Claro"]})]}),i.jsxs(V,{onClick:r,variant:"outline",size:"sm",children:["Cambiar a ",n==="dark"?"Claro":"Oscuro"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Notificaciones por Email"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Recibir actualizaciones por correo"})]}),i.jsx(Uc,{defaultChecked:!0})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Notificaciones Push"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Notificaciones en tiempo real"})]}),i.jsx(Uc,{defaultChecked:!0})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Recordatorios de Estudio"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Recordatorios diarios para estudiar"})]}),i.jsx(Uc,{})]})]})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(hP,{className:"h-5 w-5 text-accent"}),"Seguridad"]})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Cambiar Contraseña"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Actualiza tu contraseña por seguridad"})]}),i.jsxs(V,{variant:"outline",size:"sm",children:[i.jsx(lP,{className:"h-4 w-4 mr-2"}),"Cambiar"]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Autenticación de Dos Factores"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Añade una capa extra de seguridad"})]}),i.jsx(V,{variant:"outline",size:"sm",children:"Configurar"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Sesiones Activas"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Gestiona tus sesiones abiertas"})]}),i.jsx(V,{variant:"outline",size:"sm",children:"Ver Sesiones"})]})]})]})]})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Mi Progreso"})}),i.jsx(Q,{children:i.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-accent",children:a.active_programs}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Programas Inscritos"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-accent",children:a.completed_lessons}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Lecciones Completadas"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-2xl font-bold text-accent",children:[Math.floor((a.total_study_time||0)/60),"h ",(a.total_study_time||0)%60,"m"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Tiempo de Estudio"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-accent",children:typeof((f=a.current_lesson)==null?void 0:f.progress_percent)=="number"?`${a.current_lesson.progress_percent}%`:"—"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Lección actual"})]})]})})]})]})}function fB(){const[e,t]=m.useState(""),[n,r]=m.useState([]),[s,a]=m.useState([]),[o,l]=m.useState([]),[c,u]=m.useState([]),[d,f]=m.useState([]),[p,h]=m.useState(!1),{toast:b}=Ve(),g=Gn(),[w,x]=m.useState(""),[v,y]=m.useState(""),[j,S]=m.useState(""),[_,N]=m.useState("student");m.useEffect(()=>{C()},[]);const C=async()=>{try{const{data:T,error:z}=await D.from("programs").select("id, title").order("title");if(z)throw z;l(T||[]);const{data:I,error:B}=await D.from("courses").select("id, title, program_id").order("title");if(B)throw B;u(I||[]);const{data:$,error:L}=await D.rpc("get_users_with_emails");if(L)throw L;f($||[])}catch(T){console.error("Error fetching data:",T),b({title:"Error",description:"No se pudieron cargar los datos",variant:"destructive"})}},A=T=>{r(z=>z.includes(T)?z.filter(I=>I!==T):[...z,T])},R=T=>{a(z=>z.includes(T)?z.filter(I=>I!==T):[...z,T])},O=async T=>{if(T.preventDefault(),!e||n.length===0&&s.length===0){b({title:"Error",description:"Debes seleccionar un usuario y al menos un programa o curso",variant:"destructive"});return}h(!0);try{const z=[];for(const $ of n){const{data:L}=await D.from("enrollments").select("id").eq("user_id",e).eq("program_id",$).maybeSingle();L||z.push({user_id:e,program_id:$,status:"active"})}for(const $ of s){const L=c.find(M=>M.id===$);if(L!=null&&L.program_id){const{data:M}=await D.from("enrollments").select("id").eq("user_id",e).eq("program_id",L.program_id).maybeSingle();M||z.push({user_id:e,program_id:L.program_id,status:"active"})}}const I=z.filter(($,L,M)=>L===M.findIndex(E=>E.user_id===$.user_id&&E.program_id===$.program_id));if(I.length>0){const{error:$}=await D.from("enrollments").upsert(I,{onConflict:"user_id,program_id",ignoreDuplicates:!0});if($)throw $}const B=d.find($=>$.id===e);b({title:"Usuario inscrito",description:`${B==null?void 0:B.full_name} ha sido inscrito exitosamente`}),t(""),r([]),a([])}catch(z){b({title:"Error",description:z.message||"No se pudo inscribir al usuario",variant:"destructive"})}finally{h(!1)}};return i.jsx("div",{className:"container mx-auto py-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Inscribir Usuario"}),i.jsx(V,{variant:"outline",onClick:()=>g("/usuarios"),children:"Volver"})]}),i.jsxs("form",{onSubmit:O,className:"space-y-8",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Crear usuario nuevo"})}),i.jsxs(Q,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(X,{children:"Email"}),i.jsx(ve,{value:w,onChange:T=>x(T.target.value),placeholder:"email@dominio.com"})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Nombre completo"}),i.jsx(ve,{value:v,onChange:T=>y(T.target.value),placeholder:"Nombre y apellido"})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Contraseña"}),i.jsx(ve,{type:"password",value:j,onChange:T=>S(T.target.value),placeholder:"Contraseña temporal"})]}),i.jsxs("div",{children:[i.jsx(X,{children:"Rol"}),i.jsxs(ot,{value:_,onValueChange:T=>N(T),children:[i.jsx(nt,{className:"w-full",children:i.jsx(lt,{})}),i.jsxs(rt,{children:[i.jsx(fe,{value:"student",children:"Estudiante"}),i.jsx(fe,{value:"formador",children:"Formador"}),i.jsx(fe,{value:"voluntario",children:"Voluntario"}),i.jsx(fe,{value:"admin",children:"Administrador"})]})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(V,{type:"button",onClick:async()=>{if(!w||!v||!j){b({title:"Completa email, nombre y contraseña",variant:"destructive"});return}try{const T=await fetch("https://epqalebkqmkddlfomnyf.functions.supabase.co/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w,password:j,full_name:v,role:_})}),z=await T.json();if(!T.ok||!z.success)throw new Error(z.error||"No se pudo crear el usuario");const{data:I}=await D.rpc("get_users_with_emails");f(I||[]);const B=(I||[]).find($=>$.email===w);B&&t(B.id),b({title:"Usuario creado",description:w}),x(""),y(""),S(""),N("student")}catch(T){b({title:"Error",description:(T==null?void 0:T.message)||"No se pudo crear",variant:"destructive"})}},children:"Crear y seleccionar"})})]})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Seleccionar Usuario"})}),i.jsx(Q,{children:i.jsxs(ot,{value:e,onValueChange:t,children:[i.jsx(nt,{children:i.jsx(lt,{placeholder:"Seleccionar usuario"})}),i.jsx(rt,{children:d.map(T=>i.jsxs(fe,{value:T.id,children:[T.full_name," (",T.email,")"]},T.id))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Programas"})}),i.jsx(Q,{className:"space-y-4",children:o.length===0?i.jsx("p",{className:"text-muted-foreground",children:"No hay programas disponibles"}):o.map(T=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{id:`program-${T.id}`,checked:n.includes(T.id),onCheckedChange:()=>A(T.id)}),i.jsx(X,{htmlFor:`program-${T.id}`,className:"flex-1",children:T.title})]},T.id))})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Cursos"})}),i.jsx(Q,{className:"space-y-4",children:c.length===0?i.jsx("p",{className:"text-muted-foreground",children:"No hay cursos disponibles"}):c.map(T=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{id:`course-${T.id}`,checked:s.includes(T.id),onCheckedChange:()=>R(T.id)}),i.jsx(X,{htmlFor:`course-${T.id}`,className:"flex-1",children:T.title})]},T.id))})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(V,{type:"submit",disabled:p,className:"flex-1",children:p?i.jsxs(i.Fragment,{children:[i.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}),"Inscribiendo..."]}):"Inscribir Usuario"}),i.jsx(V,{type:"button",variant:"outline",onClick:()=>g("/usuarios"),disabled:p,children:"Cancelar"})]})]})]})})}function hB(){const[e,t]=m.useState(""),[n,r]=m.useState(!1),{toast:s}=Ve(),a=async()=>{if(!e){s({title:"Error",description:"Ingresa un email",variant:"destructive"});return}r(!0);try{const{data:o,error:l}=await D.functions.invoke("reset-user-password",{body:{email:e,newPassword:"mdygg2011"}});if(l)throw l;s({title:"¡Contraseña actualizada!",description:`La contraseña de ${e} se cambió a "mdygg2011"`}),t("")}catch(o){s({title:"Error",description:o.message||"No se pudo resetear la contraseña",variant:"destructive"})}finally{r(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:i.jsxs(K,{className:"w-full max-w-md",children:[i.jsx(ye,{children:i.jsx(we,{children:"Resetear Contraseña"})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(X,{htmlFor:"email",children:"Email del usuario"}),i.jsx(ve,{id:"email",type:"email",value:e,onChange:o=>t(o.target.value),placeholder:"usuario@ejemplo.com"})]}),i.jsx(V,{onClick:a,disabled:n,className:"w-full",children:n?"Reseteando...":'Resetear a "mdygg2011"'}),i.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Emails disponibles: plataformager@gmail.com, germangonzalezmdq@gmail.com, etc."})]})]})})}const mB=()=>{const e=Js();return m.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},pB="https://epqalebkqmkddlfomnyf.functions.supabase.co/email-dispatcher";function gB(){const{toast:e}=Ve(),[t,n]=m.useState(""),[r,s]=m.useState("Hola desde el Campus"),[a,o]=m.useState("<p>Mensaje de prueba</p>"),[l,c]=m.useState(!1),u=async()=>{c(!0);try{const d=await fetch(pB,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:t,subject:r,html:a})}),f=await d.json();if(!d.ok||!f.success)throw new Error(f.error||"send_error");e({title:"Enviado",description:`ID: ${f.id}`})}catch(d){e({title:"Error",description:d.message||"No se pudo enviar",variant:"destructive"})}finally{c(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Test de Emails"}),i.jsx("p",{className:"text-muted-foreground",children:"Enviá un correo de prueba con Resend"})]}),i.jsxs(K,{children:[i.jsx(ye,{children:i.jsx(we,{children:"Enviar correo"})}),i.jsxs(Q,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm",children:"Para"}),i.jsx(ve,{value:t,onChange:d=>n(d.target.value),placeholder:"email@ejemplo.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm",children:"Asunto"}),i.jsx(ve,{value:r,onChange:d=>s(d.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm",children:"HTML"}),i.jsx(At,{value:a,onChange:d=>o(d.target.value),rows:8})]}),i.jsx("div",{className:"flex justify-end",children:i.jsx(V,{onClick:u,disabled:l||!t||!r||!a,children:"Enviar"})})]})]})]})}const xB=new $A,vB=()=>i.jsx(UA,{client:xB,children:i.jsx(oL,{children:i.jsxs(u1,{children:[i.jsx(XP,{}),i.jsx(PT,{}),i.jsx(DI,{children:i.jsx(aL,{children:i.jsxs(PI,{children:[i.jsx(Qe,{path:"/",element:i.jsx(lD,{})}),i.jsx(Qe,{path:"/auth",element:i.jsx(dD,{})}),i.jsx(Qe,{path:"/reset-password",element:i.jsx(hB,{})}),i.jsx(Qe,{path:"/dashboard",element:i.jsx(vt,{children:i.jsx(fD,{})})}),i.jsx(Qe,{path:"/mi-formacion",element:i.jsx(vt,{children:i.jsx(T5,{})})}),i.jsx(Qe,{path:"/profesor",element:i.jsx(vt,{children:i.jsx(RD,{})})}),i.jsx(Qe,{path:"/admin",element:i.jsx(vt,{children:i.jsx(R3,{})})}),i.jsx(Qe,{path:"/programas",element:i.jsx(vt,{children:i.jsx(I3,{})})}),i.jsx(Qe,{path:"/programas/:slug",element:i.jsx(vt,{children:i.jsx(L3,{})})}),i.jsx(Qe,{path:"/cursos",element:i.jsx(vt,{children:i.jsx(M3,{})})}),i.jsx(Qe,{path:"/ver-curso/:courseId",element:i.jsx(vt,{children:i.jsx(lw,{})})}),i.jsx(Qe,{path:"/curso/:courseId",element:i.jsx(vt,{children:i.jsx(lw,{})})}),i.jsx(Qe,{path:"/mis-programas",element:i.jsx(vt,{children:i.jsx(oD,{})})}),i.jsx(Qe,{path:"/leccion/:slug/detalle",element:i.jsx(vt,{children:i.jsx(S5,{})})}),i.jsx(Qe,{path:"/curso/:courseId/edit",element:i.jsx(vt,{children:i.jsx(D3,{})})}),i.jsx(Qe,{path:"/foro/:id",element:i.jsx(vt,{children:i.jsx(N5,{})})}),i.jsx(Qe,{path:"/lecciones",element:i.jsx(vt,{children:i.jsx(E5,{})})}),i.jsx(Qe,{path:"/usuarios",element:i.jsx(vt,{children:i.jsx(P5,{})})}),i.jsx(Qe,{path:"/inscribir-usuario",element:i.jsx(vt,{children:i.jsx(fB,{})})}),i.jsx(Qe,{path:"/calendario",element:i.jsx(vt,{children:i.jsx(I5,{})})}),i.jsx(Qe,{path:"/comunidad",element:i.jsx(vt,{children:i.jsx(rB,{})})}),i.jsx(Qe,{path:"/slack",element:i.jsx(vt,{children:i.jsx(iB,{})})}),i.jsx(Qe,{path:"/cuenta",element:i.jsx(vt,{children:i.jsx(dB,{})})}),i.jsx(Qe,{path:"/test-email",element:i.jsx(vt,{children:i.jsx(gB,{})})}),i.jsx(Qe,{path:"*",element:i.jsx(mB,{})})]})})})]})})});Ob(document.getElementById("root")).render(i.jsx(vB,{}));
